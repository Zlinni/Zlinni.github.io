<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>é±¼ä¸å‰ç«¯ğŸŸ</title>
  
  <subtitle>æ‘¸é±¼å’Œå·¥ä½œä¸å¯å¾—å…¼~</subtitle>
  <link href="https://zlinni.github.io/atom.xml" rel="self"/>
  
  <link href="https://zlinni.github.io/"/>
  <updated>2025-02-28T06:40:25.243Z</updated>
  <id>https://zlinni.github.io/</id>
  
  <author>
    <name>Zlinni</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>vee-validate è¡¨å•çŠ¶æ€ç®¡ç†</title>
    <link href="https://zlinni.github.io/posts/20240531115155/"/>
    <id>https://zlinni.github.io/posts/20240531115155/</id>
    <published>2024-05-31T03:51:55.000Z</published>
    <updated>2025-02-28T06:40:25.243Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><div class="note primary flat"><p>æœ¬æ–‡ç³»ç»Ÿä»‹ç»äº†ä½¿ç”¨ vee-validate ç»“åˆ zod è¿›è¡Œè¡¨å•çŠ¶æ€ç®¡ç†çš„è§£å†³æ–¹æ¡ˆï¼Œé€šè¿‡å¯¹æ¯”ä¼ ç»Ÿå£°æ˜å¼è¡¨å•éªŒè¯çš„å±€é™æ€§ï¼ˆéœ€æ‰‹åŠ¨å£°æ˜å“åº”å¼å˜é‡/æ ¡éªŒè§„åˆ™ï¼‰ï¼Œé‡ç‚¹å±•ç¤ºäº†è¯¥æ–¹æ¡ˆé€šè¿‡é«˜é˜¶ç»„ä»¶ä¸ç»„åˆå¼ API å®ç°è¡¨å•åˆå§‹åŒ–çš„çµæ´»æ€§ã€åˆ©ç”¨ zod å¼ºå¤§çš„ç±»å‹æ ¡éªŒä½“ç³»ï¼ˆæ”¯æŒå¤æ‚åœºæ™¯å¦‚æ–‡ä»¶åå”¯ä¸€æ€§æ ¡éªŒï¼‰ã€æä¾›ä¸¤ç§é”™è¯¯åé¦ˆæœºåˆ¶ï¼ˆæäº¤æ—¶å…¨å±€æ ¡éªŒä¸å®æ—¶å­—æ®µçº§æ ¡éªŒï¼‰ï¼Œä»¥åŠå¤šæ­¥éª¤è¡¨å•çš„å­—æ®µå€¼ä¿ç•™ç­–ç•¥ï¼Œæœ€ç»ˆå®ç°æ›´ç®€æ´é«˜æ•ˆçš„è¡¨å•å¼€å‘èŒƒå¼ã€‚</p></div><h1 id="vee-validate-è¡¨å•çŠ¶æ€ç®¡ç†"><a href="#vee-validate-è¡¨å•çŠ¶æ€ç®¡ç†" class="headerlink" title="vee-validate è¡¨å•çŠ¶æ€ç®¡ç†"></a>vee-validate è¡¨å•çŠ¶æ€ç®¡ç†</h1><h2 id="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨-vee-validateï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆè¦ä½¿ç”¨-vee-validateï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ vee-validateï¼Ÿ"></a>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ vee-validateï¼Ÿ</h2><p>æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹å¸¸è§„æƒ…å†µä¸‹çš„è¡¨å•ï¼Œå‚è€ƒ NaiveUI,ä½¿ç”¨çš„æ˜¯å£°æ˜å¼è§„åˆ™å’Œ kv ç»‘å®š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;n-form ref=&quot;formRef&quot; :model=&quot;model&quot; :rules=&quot;rules&quot;&gt;</span><br><span class="line">    &lt;n-form-item path=&quot;age&quot; label=&quot;å¹´é¾„&quot;&gt;</span><br><span class="line">      &lt;n-input v-model:value=&quot;model.age&quot; @keydown.enter.prevent /&gt;</span><br><span class="line">    &lt;/n-form-item&gt;</span><br><span class="line">  &lt;/n-form&gt;</span><br><span class="line">&lt;!-- å£°æ˜å¼è§„åˆ™ --&gt;</span><br><span class="line">const rules: FormRules = &#123; age: [ &#123; required: true, validator(rule:</span><br><span class="line">FormItemRule, value: string) &#123; if (!value) &#123; return new Error(&#x27;éœ€è¦å¹´é¾„&#x27;) &#125; else</span><br><span class="line">if (!/^\d*$/.test(value)) &#123; return new Error(&#x27;å¹´é¾„åº”è¯¥ä¸ºæ•´æ•°&#x27;) &#125; else if</span><br><span class="line">(Number(value) &lt; 18) &#123; return new Error(&#x27;å¹´é¾„åº”è¯¥è¶…è¿‡åå…«å²&#x27;) &#125; return true &#125;,</span><br><span class="line">trigger: [&#x27;input&#x27;, &#x27;blur&#x27;] &#125; ], &#125;</span><br></pre></td></tr></table></figure><p>å£°æ˜å¼è§„åˆ™çš„å¥½å¤„æ˜¯æ˜“æ‹“å±•ï¼Œå¯ä»¥éšæ—¶åœ¨å¯¹åº”çš„ç»„ä»¶ä¸Šä¿®æ”¹ï¼Œä½†æ˜¯åå¤„æ˜¯å†™èµ·æ¥éå¸¸ä¸æ–¹ä¾¿:</p><ul><li>é¦–å…ˆå¾—å£°æ˜å“åº”å¼å˜é‡ä½œä¸ºè¡¨å•å€¼ v-model çš„ç»‘å®šï¼Œæœ‰äº›æ—¶å€™è¿˜è¦å£°æ˜æœªå®šä¹‰å˜é‡</li></ul><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> formData = ref(&#123; <span class="attr">name</span>: <span class="string">&quot;&quot;</span>, <span class="attr">age</span>: <span class="number">18</span> &#125;);</span><br><span class="line"><span class="keyword">const</span> formData = ref(&#123; <span class="attr">description</span>: <span class="literal">undefined</span> &#125;);</span><br></pre></td></tr></table></figure><ul><li>å…¶æ¬¡ï¼Œå¯¹äºæ ¡éªŒï¼Œå³ä½¿æ˜¯åˆ¤æ–­æ˜¯å¦æœ€å°ï¼Œä¹Ÿå¾—æ‰‹å†™ä¸€éƒ¨åˆ†è§„åˆ™</li></ul><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">validator</span>(<span class="params">rule: FormItemRule, value: <span class="built_in">string</span></span>)</span> &#123;</span><br><span class="line">          <span class="keyword">if</span> (!value) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;éœ€è¦å¹´é¾„&#x27;</span>)</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure><p>é‚£æœ‰æ²¡æœ‰ä»€ä¹ˆè½»åº¦æŠ½è±¡ï¼Œèƒ½è§£å†³ä¸Šè¿°é—®é¢˜çš„å­˜åœ¨å‘¢ï¼Ÿ</p><p>ç­”æ¡ˆæ˜¯æœ‰çš„ï¼Œé‚£å°±æ˜¯ vee-validate + zod çš„åŒé‡æ–¹æ¡ˆï¼Œä¸ä¾èµ–ç»„ä»¶åŸç”Ÿçš„å®ç°</p><h2 id="vee-validate-zod"><a href="#vee-validate-zod" class="headerlink" title="vee-validate + zod"></a>vee-validate + zod</h2><ul><li><p>vee-validate æ˜¯ base on typescript çš„ï¼Œæä¾›äº†é«˜é˜¶ç»„ä»¶å’Œç»„åˆå¼ APIï¼Œå®ƒå¯ä»¥å’Œä»»ä½•çš„ç»„ä»¶åº“é›†æˆ</p></li><li><p>zod åˆ™æ˜¯ä¸€ä¸ªæ ¡éªŒå™¨ï¼Œæä¾›äº†ä¸°å¯Œä¸”çµæ´»æ ¡éªŒæ–¹å¼ï¼Œé€‚ç”¨äºè¡¨å•éªŒè¯ç­‰åœºæ™¯</p></li></ul><h3 id="å¤šç§æ–¹å¼åˆå§‹åŒ–è¡¨å•å’Œæä¾›å“åº”å¼å€¼"><a href="#å¤šç§æ–¹å¼åˆå§‹åŒ–è¡¨å•å’Œæä¾›å“åº”å¼å€¼" class="headerlink" title="å¤šç§æ–¹å¼åˆå§‹åŒ–è¡¨å•å’Œæä¾›å“åº”å¼å€¼"></a>å¤šç§æ–¹å¼åˆå§‹åŒ–è¡¨å•å’Œæä¾›å“åº”å¼å€¼</h3><ul><li>vee-validate æœ‰å¤šç§æ–¹å¼åˆå§‹åŒ–è¡¨å•å’Œæä¾›å“åº”å¼å€¼ï¼Œä¸å†éœ€è¦å£°æ˜æœªå®šä¹‰æƒ…å†µ</li></ul><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; values, defineField &#125; = useForm(&#123;</span><br><span class="line">  <span class="attr">validationSchema</span>: toTypedSchema(</span><br><span class="line">    z.object(&#123;</span><br><span class="line">      <span class="attr">name</span>: z.string().min(<span class="number">1</span>).desribe(<span class="string">&quot;åç§°&quot;</span>),</span><br><span class="line">    &#125;)</span><br><span class="line">  ),</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> [name] = defineField(<span class="string">&quot;name&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// or in subcomponent</span></span><br><span class="line"><span class="keyword">const</span> &#123; <span class="attr">value</span>: name &#125; = useField&lt;<span class="built_in">string</span>&gt;(<span class="string">&quot;name&quot;</span>);</span><br></pre></td></tr></table></figure><h3 id="zod-è‡ªå¸¦æ ¡éªŒè§„åˆ™"><a href="#zod-è‡ªå¸¦æ ¡éªŒè§„åˆ™" class="headerlink" title="zod è‡ªå¸¦æ ¡éªŒè§„åˆ™"></a>zod è‡ªå¸¦æ ¡éªŒè§„åˆ™</h3><ul><li>zod è‡ªå¸¦æ ¡éªŒè§„åˆ™ï¼Œä»¥åŠæä¾›æ›´å¼ºå¤§çš„è§„åˆ™å®šä¹‰</li></ul><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> schema = z.object(&#123;</span><br><span class="line">  <span class="attr">name</span>: z.string().min(<span class="number">1</span>).desribe(<span class="string">&quot;åç§°&quot;</span>),</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="zod-æœ‰æ›´å¼ºå¤§çš„è§„åˆ™"><a href="#zod-æœ‰æ›´å¼ºå¤§çš„è§„åˆ™" class="headerlink" title="zod æœ‰æ›´å¼ºå¤§çš„è§„åˆ™"></a>zod æœ‰æ›´å¼ºå¤§çš„è§„åˆ™</h3><ul><li>zod æœ‰æ›´å¼ºå¤§çš„è§„åˆ™,æ¯”å¦‚å¯¹æ‰€æœ‰æ–‡ä»¶åç§°è¿›è¡Œæ ¡éªŒ</li></ul><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> schema = z.object(&#123;</span><br><span class="line">    <span class="attr">fieldInfos</span>:z.array(&#123;</span><br><span class="line">        <span class="attr">file</span>:z.instanceof(File),</span><br><span class="line">        <span class="attr">name</span>:z.string()</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;).superRefine(<span class="function">(<span class="params">&#123;fieldInfos&#125;,context</span>)=&gt;</span>(&#123;</span><br><span class="line">    <span class="keyword">const</span> fileNames = fieldInfos.map(<span class="function"><span class="params">i</span>=&gt;</span>i.name);</span><br><span class="line">    fieldInfos.forEach(<span class="function">(<span class="params">fieldInfo,index</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">const</span> hasExist = fileNames.include(fieldInfo.name);</span><br><span class="line">        <span class="keyword">if</span>(hasExist)&#123;</span><br><span class="line">            context.addIssue(&#123;</span><br><span class="line">                <span class="attr">code</span>:z.ZodIssueCode.custom,</span><br><span class="line">                <span class="attr">message</span>: <span class="string">&#x27;æ–‡ä»¶åå·²å­˜åœ¨&#x27;</span>,</span><br><span class="line">                <span class="attr">path</span>: [<span class="string">&#x27;fileInfos&#x27;</span>, index, <span class="string">&#x27;name&#x27;</span>],</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">&#125;))</span><br></pre></td></tr></table></figure><h3 id="é”™è¯¯çš„-UI-å“åº”"><a href="#é”™è¯¯çš„-UI-å“åº”" class="headerlink" title="é”™è¯¯çš„ UI å“åº”"></a>é”™è¯¯çš„ UI å“åº”</h3><ul><li>å¯¹äºé”™è¯¯çš„ UI å“åº”ï¼Œæœ‰ä¸¤ç§æ–¹å¼</li></ul><ol><li>æäº¤æ—¶æŠ¥é”™ï¼Œåˆ©ç”¨ handleSubmit çš„ç¬¬äºŒä¸ªå‚æ•°æ³¨å…¥é”™è¯¯å›è°ƒå¤„ç†</li></ol><p>ç¤ºä¾‹ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// handleSubmitæäº¤ä¸­ä¼šè‡ªåŠ¨è§¦å‘ä¸€æ¬¡æ ¡éªŒï¼Œè‹¥å¤±è´¥ä¼šæ‰§è¡Œå¤±è´¥å›è°ƒï¼Œåä¹‹æ‰ä¼šæ‰§è¡Œå†…éƒ¨æäº¤</span></span><br><span class="line"><span class="keyword">const</span> submit = handleSubmit(<span class="function">(<span class="params">values</span>)=&gt;</span>&#123;</span><br><span class="line">    yourApi.post(&#123;...values&#125;)</span><br><span class="line">    <span class="comment">// é‡ç½®è¡¨å•ï¼Œor é”€æ¯ç»„ä»¶</span></span><br><span class="line">&#125;,<span class="function">(<span class="params">&#123;errors&#125;</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(errors)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">&lt;form <span class="meta">@submit</span>=&#123;submit&#125;&gt;</span><br></pre></td></tr></table></figure><ol><li>æäº¤å‰æŠ¥é”™ï¼Œå€ŸåŠ© defineField çš„ç¬¬äºŒä¸ª propsï¼Œæˆ–è€…å€ŸåŠ© useField çš„ error</li></ol><p>ç¤ºä¾‹ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¸æ¨èä½¿ç”¨ å› ä¸ºè¦æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯ä¸€èˆ¬æ˜¯è¡¨å•æ§ä»¶ï¼Œæˆ‘ä»¬æœ‰æ›´å¥½çš„è§£å†³åŠæ³•</span></span><br><span class="line"><span class="keyword">const</span> [name, nameProps] = defineField(<span class="string">&quot;name&quot;</span>, <span class="function">(<span class="params">state</span>) =&gt;</span> (&#123;</span><br><span class="line">  <span class="attr">props</span>: &#123;</span><br><span class="line">    <span class="attr">validationStatus</span>: state.errors[<span class="number">0</span>] ? (<span class="string">&quot;error&quot;</span> <span class="keyword">as</span> <span class="keyword">const</span>) : <span class="literal">undefined</span>,</span><br><span class="line">    <span class="attr">feedback</span>: state.errors[<span class="number">0</span>],</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;));</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¡¨å•ç»„ä»¶æŠ½è±¡ æ›´æ–¹ä¾¿çš„è§£å†³åŠæ³•</span></span><br><span class="line"><span class="keyword">const</span> &#123; value, errorMessage &#125; = useField(<span class="function">() =&gt;</span> props.name);</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">NFormItem</span></span></span></span><br><span class="line"><span class="tag"><span class="xml"><span class="attr">:label</span>=<span class="string">&quot;props.label&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml"><span class="attr">:showLabel</span>=<span class="string">&quot;!!props.label&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml"><span class="attr">:required</span>=<span class="string">&quot;props.required&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml"><span class="attr">:validationStatus</span>=<span class="string">&quot;errorMessage ? &#x27;error&#x27; : &#x27;success&#x27;&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml"><span class="attr">:feedback</span>=<span class="string">&quot;errorMessage&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml"><span class="attr">:showFeedback</span>=<span class="string">&quot;!!errorMessage&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">&gt;</span></span></span><br><span class="line"><span class="xml">        // ä¸‹é¢ç»‘å®švalue</span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">NFormItem</span>&gt;</span></span></span><br></pre></td></tr></table></figure><h3 id="å¤šæ­¥éª¤è¡¨å•"><a href="#å¤šæ­¥éª¤è¡¨å•" class="headerlink" title="å¤šæ­¥éª¤è¡¨å•"></a>å¤šæ­¥éª¤è¡¨å•</h3><p>å¦‚æœç»„ä»¶æ˜¯å¤šæ­¥éª¤è¡¨å•ï¼Œå¯èƒ½æ¶‰åŠåˆ°å¤šä¸ªçŠ¶æ€çš„ç»„ä»¶åˆ‡æ¢ï¼Œè¿™ä¸ªæ—¶å€™éœ€è¦è®¾ç½® keepValuesOnUnmount æ§åˆ¶å•ä¸ªå­—æ®µå¸è½½æ—¶çš„ä¿ç•™</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line"><span class="comment">// å¤šæ­¥éª¤è¡¨å•é…ç½®</span></span><br><span class="line"><span class="keyword">const</span> &#123; handleSubmit &#125; = useForm(&#123;</span><br><span class="line">  <span class="attr">keepValuesOnUnmount</span>: <span class="literal">true</span>, <span class="comment">// ä¿ç•™å·²å¡«å†™ä½†å½“å‰ä¸å¯è§çš„å­—æ®µå€¼</span></span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;<span class="name">Step1</span> <span class="attr">v-if</span>=<span class="string">&quot;step === 1&quot;</span> /&gt;</span> <span class="comment">&lt;!-- è¾“å…¥å§“å --&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;<span class="name">Step2</span> <span class="attr">v-if</span>=<span class="string">&quot;step === 2&quot;</span> /&gt;</span> <span class="comment">&lt;!-- è¾“å…¥åœ°å€ --&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="comment">&lt;!-- åˆ‡æ¢æ­¥éª¤æ—¶ï¼Œå‰ä¸€æ­¥çš„å€¼ä¼šè¢«ä¿ç•™ --&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="å·¥ç¨‹åŒ–ç³»åˆ—" scheme="https://zlinni.github.io/categories/%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%B3%BB%E5%88%97/"/>
    
    
    <category term="å‰ç«¯" scheme="https://zlinni.github.io/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="vee-validate" scheme="https://zlinni.github.io/tags/vee-validate/"/>
    
    <category term="zod" scheme="https://zlinni.github.io/tags/zod/"/>
    
  </entry>
  
  <entry>
    <title>åŸºäºCASLçš„å‰ç«¯æƒé™ç®¡ç†æ–¹æ¡ˆ</title>
    <link href="https://zlinni.github.io/posts/44742292888/"/>
    <id>https://zlinni.github.io/posts/44742292888/</id>
    <published>2024-01-05T03:51:55.000Z</published>
    <updated>2025-02-27T07:30:51.170Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><div class="note primary flat"><p>è¿™ç¯‡æ–‡ç« ç³»ç»Ÿä»‹ç»äº†åŸºäº CASL çš„å‰ç«¯æƒé™ç®¡ç†æ–¹æ¡ˆï¼Œé‡ç‚¹é˜è¿°äº†å…¶é€šè¿‡â€èƒ½åŠ›-è§„åˆ™-æ“ä½œ-ä¸»ä½“â€æ¨¡å‹å®ç°ç»†ç²’åº¦æƒé™æ§åˆ¶çš„æœºåˆ¶ã€‚æ–¹æ¡ˆæ”¯æŒå­—æ®µçº§æƒé™æ ¡éªŒå’ŒåŠ¨æ€æ¡ä»¶åˆ¤æ–­ï¼Œæä¾› Vue æ¡†æ¶ä¸‹çš„è·¯ç”±å®ˆå«é›†æˆã€ç»„ä»¶çº§æƒé™æŒ‡ä»¤ã€ç±»å‹å®‰å…¨å¢å¼ºç­‰å®è·µæ–¹æ¡ˆï¼Œç‰¹åˆ«é€‚åˆä¸­å¤§å‹é¡¹ç›®å®ç°çµæ´»å¯ç»´æŠ¤çš„æƒé™ä½“ç³»ï¼Œé€šè¿‡å‰åç«¯ç»Ÿä¸€çš„æƒé™è§„åˆ™æ ¼å¼ï¼Œæœ‰æ•ˆä¿éšœäº†ç³»ç»Ÿå®‰å…¨æ€§å’Œå¼€å‘æ•ˆç‡ã€‚</p></div><h1 id="åŸºäºCASLçš„å‰ç«¯æƒé™ç®¡ç†æ–¹æ¡ˆ"><a href="#åŸºäºCASLçš„å‰ç«¯æƒé™ç®¡ç†æ–¹æ¡ˆ" class="headerlink" title="åŸºäºCASLçš„å‰ç«¯æƒé™ç®¡ç†æ–¹æ¡ˆ"></a>åŸºäºCASLçš„å‰ç«¯æƒé™ç®¡ç†æ–¹æ¡ˆ</h1><h2 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h2><h3 id="ä»€ä¹ˆæ˜¯-CASL"><a href="#ä»€ä¹ˆæ˜¯-CASL" class="headerlink" title="ä»€ä¹ˆæ˜¯ CASL"></a>ä»€ä¹ˆæ˜¯ CASL</h3><p>CASL æ˜¯ä¸€å¥—ä¸“ä¸º JavaScript å’Œ TypeScript å¼€å‘è€…è®¾è®¡çš„å·¥å…·ï¼Œç”¨äºç®€åŒ–å’Œç®¡ç†å‰ç«¯åº”ç”¨ç¨‹åºä¸­çš„è®¿é—®æ§åˆ¶ã€‚é€šè¿‡ CASLï¼Œæ‚¨å¯ä»¥è½»æ¾åœ°å®šä¹‰å’Œæ£€æŸ¥ç”¨æˆ·å¯¹åº”ç”¨ç¨‹åºä¸­å„ç§èµ„æºçš„æƒé™ï¼Œä»è€Œç¡®ä¿æ‚¨çš„åº”ç”¨åœ¨å®‰å…¨æ€§å’Œç”¨æˆ·ä½“éªŒæ–¹é¢è¾¾åˆ°æœ€ä½³çŠ¶æ€ã€‚</p><h3 id="ä¸ºä»€ä¹ˆé€‰æ‹©-CASL"><a href="#ä¸ºä»€ä¹ˆé€‰æ‹©-CASL" class="headerlink" title="ä¸ºä»€ä¹ˆé€‰æ‹© CASL"></a>ä¸ºä»€ä¹ˆé€‰æ‹© CASL</h3><ul><li>çµæ´»æ€§ï¼š CASL æä¾›äº†çµæ´»çš„è§„åˆ™å®šä¹‰æœºåˆ¶ï¼Œä½¿æ‚¨èƒ½å¤Ÿæ ¹æ®ä¸šåŠ¡éœ€æ±‚è½»æ¾åˆ›å»ºç»†ç²’åº¦çš„æƒé™è§„åˆ™ã€‚</li><li>æ˜“ç”¨æ€§ï¼š CASL çš„ API è®¾è®¡ç®€æ´ç›´è§‚ï¼Œä½¿å¾—æƒé™ç®¡ç†åœ¨ä»£ç ä¸­å˜å¾—å®¹æ˜“ç†è§£å’Œç»´æŠ¤ã€‚</li><li>æ¡†æ¶æ— å…³æ€§ï¼š CASL ä¸ä¾èµ–äºç‰¹å®šçš„å‰ç«¯æ¡†æ¶ï¼Œå› æ­¤æ‚¨å¯ä»¥åœ¨ä»»ä½•æ¡†æ¶ï¼ˆå¦‚ Reactã€Angularã€Vue ç­‰ï¼‰ä¸­ä½¿ç”¨ã€‚</li></ul><h2 id="å®‰è£…å’Œé…ç½®"><a href="#å®‰è£…å’Œé…ç½®" class="headerlink" title="å®‰è£…å’Œé…ç½®"></a>å®‰è£…å’Œé…ç½®</h2><h3 id="å®‰è£…-CASL"><a href="#å®‰è£…-CASL" class="headerlink" title="å®‰è£… CASL"></a>å®‰è£… CASL</h3><p>ä½¿ç”¨ pnpm å®‰è£…ï¼š<br>pnpm add @casl/vue @casl/ability</p><h3 id="åˆ›å»º-CASL-Ability"><a href="#åˆ›å»º-CASL-Ability" class="headerlink" title="åˆ›å»º CASL Ability"></a>åˆ›å»º CASL Ability</h3><p>CASL Ability æ˜¯å®šä¹‰æƒé™è§„åˆ™çš„æ ¸å¿ƒã€‚æ‚¨å¯ä»¥åœ¨åº”ç”¨ç¨‹åºçš„é€‚å½“ä½ç½®åˆ›å»º CASL Abilityï¼Œå¹¶é…ç½®å®ƒä»¥åæ˜ æ‚¨çš„æƒé™ç»“æ„ã€‚</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç¤ºä¾‹ï¼šåˆ›å»º CASL Ability</span></span><br><span class="line"><span class="keyword">import</span> &#123; defineAbility &#125; <span class="keyword">from</span> <span class="string">&quot;@casl/ability&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> ability = defineAbility(<span class="function">(<span class="params">can</span>) =&gt;</span> &#123;</span><br><span class="line">  can(<span class="string">&quot;read&quot;</span>, <span class="string">&quot;Project&quot;</span>);</span><br><span class="line">  can(<span class="string">&quot;create&quot;</span>, <span class="string">&quot;Project&quot;</span>);</span><br><span class="line">  can(<span class="string">&quot;update&quot;</span>, <span class="string">&quot;Project&quot;</span>);</span><br><span class="line">  can(<span class="string">&quot;delete&quot;</span>, <span class="string">&quot;Project&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> ability;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªç®€å•çš„ CASL Abilityï¼Œè¡¨ç¤ºç”¨æˆ·å¯ä»¥å¯¹é¡¹ç›®è¿›è¡Œè¯»å–ã€åˆ›å»ºã€æ›´æ–°å’Œåˆ é™¤æ“ä½œã€‚</p><h3 id="é›†æˆ-CASL-Ability-åˆ°åº”ç”¨ç¨‹åº"><a href="#é›†æˆ-CASL-Ability-åˆ°åº”ç”¨ç¨‹åº" class="headerlink" title="é›†æˆ CASL Ability åˆ°åº”ç”¨ç¨‹åº"></a>é›†æˆ CASL Ability åˆ°åº”ç”¨ç¨‹åº</h3><p>é›†æˆ CASL Ability åˆ°åº”ç”¨ç¨‹åºï¼Œä»¥ä¾¿åœ¨æ•´ä¸ªåº”ç”¨ç¨‹åºä¸­å…±äº«å’Œä½¿ç”¨å®ƒã€‚</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; abilitiesPlugin &#125; <span class="keyword">from</span> <span class="string">&quot;@casl/vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> ability <span class="keyword">from</span> <span class="string">&quot;./services/ability&quot;</span>;</span><br><span class="line"></span><br><span class="line">createApp()</span><br><span class="line">  .use(abilitiesPlugin, ability, &#123;</span><br><span class="line">    <span class="attr">useGlobalProperties</span>: <span class="literal">true</span>,</span><br><span class="line">  &#125;)</span><br><span class="line">  .mount(<span class="string">&quot;#app&quot;</span>);</span><br></pre></td></tr></table></figure><h2 id="åŸºæœ¬æ¦‚å¿µ"><a href="#åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="åŸºæœ¬æ¦‚å¿µ"></a>åŸºæœ¬æ¦‚å¿µ</h2><h3 id="Abilitiesï¼ˆèƒ½åŠ›ï¼‰çš„å®šä¹‰"><a href="#Abilitiesï¼ˆèƒ½åŠ›ï¼‰çš„å®šä¹‰" class="headerlink" title="Abilitiesï¼ˆèƒ½åŠ›ï¼‰çš„å®šä¹‰"></a>Abilitiesï¼ˆèƒ½åŠ›ï¼‰çš„å®šä¹‰</h3><p>åœ¨ CASL ä¸­ï¼Œâ€èƒ½åŠ›â€ æ˜¯æŒ‡ç”¨æˆ·åœ¨åº”ç”¨ç¨‹åºä¸­æ‰§è¡Œæ“ä½œçš„æƒé™ã€‚èƒ½åŠ›ç”±ä¸€ç»„è§„åˆ™ï¼ˆrulesï¼‰ç»„æˆï¼Œæ¯ä¸ªè§„åˆ™å®šä¹‰äº†ç”¨æˆ·å¯¹ç‰¹å®šä¸»ä½“ï¼ˆsubjectï¼‰æ‰§è¡Œç‰¹å®šæ“ä½œï¼ˆactionï¼‰çš„æ¡ä»¶ã€‚èƒ½åŠ›çš„å®šä¹‰é€šå¸¸åœ¨åº”ç”¨ç¨‹åºåˆå§‹åŒ–æ—¶å®Œæˆã€‚</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç¤ºä¾‹ï¼šå®šä¹‰èƒ½åŠ›</span></span><br><span class="line"><span class="keyword">const</span> ability = defineAbility(<span class="function">(<span class="params">can</span>) =&gt;</span> &#123;</span><br><span class="line">  can(<span class="string">&quot;read&quot;</span>, <span class="string">&quot;Project&quot;</span>);</span><br><span class="line">  can(<span class="string">&quot;update&quot;</span>, <span class="string">&quot;Project&quot;</span>, [<span class="string">&quot;name&quot;</span>]);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œå®šä¹‰äº†ä¸€ä¸ªç®€å•çš„èƒ½åŠ›ï¼Œå…è®¸ç”¨æˆ·è¯»å–ï¼ˆreadï¼‰å’Œæ›´æ–°ï¼ˆupdateï¼‰åä¸º â€œProjectâ€ çš„ä¸»ä½“ï¼Œå…¶ä¸­æ›´æ–°æ“ä½œä»…å…è®¸ä¿®æ”¹ â€œnameâ€ å­—æ®µã€‚</p><h3 id="Actionsï¼ˆæ“ä½œï¼‰å’Œ-Subjectsï¼ˆä¸»ä½“ï¼‰çš„æ¦‚å¿µ"><a href="#Actionsï¼ˆæ“ä½œï¼‰å’Œ-Subjectsï¼ˆä¸»ä½“ï¼‰çš„æ¦‚å¿µ" class="headerlink" title="Actionsï¼ˆæ“ä½œï¼‰å’Œ Subjectsï¼ˆä¸»ä½“ï¼‰çš„æ¦‚å¿µ"></a>Actionsï¼ˆæ“ä½œï¼‰å’Œ Subjectsï¼ˆä¸»ä½“ï¼‰çš„æ¦‚å¿µ</h3><ul><li>Actionsï¼ˆæ“ä½œï¼‰ï¼š æ“ä½œè¡¨ç¤ºå¯ä»¥åœ¨ä¸»ä½“ä¸Šæ‰§è¡Œçš„å…·ä½“è¡Œä¸ºã€‚å¸¸è§çš„æ“ä½œåŒ…æ‹¬ â€œcreateâ€ã€â€readâ€ã€â€updateâ€ å’Œ â€œdeleteâ€ã€‚èƒ½åŠ›çš„è§„åˆ™å°†æŒ‡å®šç”¨æˆ·æ˜¯å¦å¯ä»¥æ‰§è¡Œè¿™äº›æ“ä½œã€‚</li><li>Subjectsï¼ˆä¸»ä½“ï¼‰ï¼š ä¸»ä½“æ˜¯ç”¨æˆ·æ‰§è¡Œæ“ä½œçš„å®ä½“æˆ–èµ„æºã€‚ä¾‹å¦‚ï¼Œâ€Projectâ€ å¯èƒ½æ˜¯ä¸€ä¸ªä¸»ä½“ï¼Œç”¨æˆ·å¯ä»¥å¯¹å…¶æ‰§è¡Œè¯»å–ã€æ›´æ–°ç­‰æ“ä½œã€‚</li></ul><h3 id="Rulesï¼ˆè§„åˆ™ï¼‰çš„åˆ›å»ºå’Œä½¿ç”¨"><a href="#Rulesï¼ˆè§„åˆ™ï¼‰çš„åˆ›å»ºå’Œä½¿ç”¨" class="headerlink" title="Rulesï¼ˆè§„åˆ™ï¼‰çš„åˆ›å»ºå’Œä½¿ç”¨"></a>Rulesï¼ˆè§„åˆ™ï¼‰çš„åˆ›å»ºå’Œä½¿ç”¨</h3><p>è§„åˆ™å®šä¹‰äº†ç”¨æˆ·å¯¹ä¸»ä½“æ‰§è¡Œæ“ä½œçš„æ¡ä»¶ã€‚æ¯ä¸ªè§„åˆ™åŒ…å«ä¸€ä¸ªåŠ¨ä½œï¼ˆactionï¼‰ã€ä¸€ä¸ªä¸»ä½“ï¼ˆsubjectï¼‰ä»¥åŠå¯é€‰çš„å­—æ®µï¼ˆfieldsï¼‰ã€‚</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç¤ºä¾‹ï¼šå®šä¹‰è§„åˆ™</span></span><br><span class="line">can(<span class="string">&quot;update&quot;</span>, <span class="string">&quot;Project&quot;</span>, [<span class="string">&quot;name&quot;</span>]);</span><br></pre></td></tr></table></figure><p>ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œè§„åˆ™è¡¨ç¤ºç”¨æˆ·å¯ä»¥å¯¹ â€œProjectâ€ ä¸»ä½“æ‰§è¡Œæ›´æ–°æ“ä½œï¼Œä½†ä»…é™äºä¿®æ”¹ â€œnameâ€ å­—æ®µã€‚</p><h2 id="åŸºæœ¬æµç¨‹"><a href="#åŸºæœ¬æµç¨‹" class="headerlink" title="åŸºæœ¬æµç¨‹"></a>åŸºæœ¬æµç¨‹</h2><h3 id="åœ¨ç»„ä»¶ä¸­ä½¿ç”¨-Abilities"><a href="#åœ¨ç»„ä»¶ä¸­ä½¿ç”¨-Abilities" class="headerlink" title="åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ Abilities"></a>åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ Abilities</h3><p>åœ¨ç»„ä»¶ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ CASL æä¾›çš„ useAbility hook æ¥è·å–å½“å‰ç”¨æˆ·çš„ Abilitiesï¼Œå¹¶æ®æ­¤æ§åˆ¶ç»„ä»¶çš„æ¸²æŸ“æˆ–è¡Œä¸ºã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;div v-if=&quot;can(&#x27;create&#x27;, &#x27;Post&#x27;)&quot;&gt;</span><br><span class="line">      &lt;a @click=&quot;createPost&quot;&gt;Add Post&lt;/a&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; useAbility &#125; from &quot;@casl/vue&quot;;</span><br><span class="line">const &#123; can &#125; = useAbility();</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="åœ¨è·¯ç”±å®ˆå«ä¸­ä½¿ç”¨-Abilities"><a href="#åœ¨è·¯ç”±å®ˆå«ä¸­ä½¿ç”¨-Abilities" class="headerlink" title="åœ¨è·¯ç”±å®ˆå«ä¸­ä½¿ç”¨ Abilities"></a>åœ¨è·¯ç”±å®ˆå«ä¸­ä½¿ç”¨ Abilities</h3><p>å¯¹äºåŸºäºè·¯ç”±çš„åº”ç”¨ç¨‹åºï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ CASL Abilities æ§åˆ¶è·¯ç”±å®ˆå«ï¼Œç¡®ä¿ç”¨æˆ·åªèƒ½è®¿é—®å…¶å…·æœ‰æƒé™çš„é¡µé¢ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// ç¤ºä¾‹ï¼šåœ¨è·¯ç”±å®ˆå«ä¸­ä½¿ç”¨ Abilities import &#123; createRouter, createWebHistory &#125;</span><br><span class="line">from &#x27;vue-router&#x27;; const router = createRouter(&#123; history: createWebHistory(),</span><br><span class="line">routes: [ &#123; path: &#x27;/project/:id&#x27;, component: ProjectDetail, meta: &#123; // ä½¿ç”¨ meta</span><br><span class="line">å­—æ®µå®šä¹‰éœ€è¦çš„æƒé™ ability: &#x27;read&#x27;, subject: &#x27;Project&#x27;, &#125;, &#125;, ], &#125;); export</span><br><span class="line">default router;</span><br></pre></td></tr></table></figure><p>åœ¨ permit.ts ä¸­å®šä¹‰è·¯ç”±å®ˆå«</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useAbility &#125; <span class="keyword">from</span> <span class="string">&quot;@casl/vue&quot;</span>;</span><br><span class="line">router.beforeEach(<span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> ability = useAbility();</span><br><span class="line">  <span class="keyword">const</span> requiredAbility = to.meta.ability;</span><br><span class="line">  <span class="keyword">const</span> requiredSubject = to.meta.subject;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (requiredAbility &amp;&amp; requiredSubject) &#123;</span><br><span class="line">    <span class="comment">// æ£€æŸ¥ç”¨æˆ·æ˜¯å¦å…·æœ‰æ‰€éœ€çš„æƒé™</span></span><br><span class="line">    <span class="keyword">if</span> (ability.can(requiredAbility, requiredSubject)) &#123;</span><br><span class="line">      next();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// ç”¨æˆ·æ²¡æœ‰æƒé™ï¼Œé‡å®šå‘åˆ°å…¶ä»–é¡µé¢æˆ–æ˜¾ç¤ºé”™è¯¯æç¤º</span></span><br><span class="line">      next(<span class="string">&quot;/access-denied&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// æ²¡æœ‰å®šä¹‰æƒé™è¦æ±‚ï¼Œç›´æ¥é€šè¿‡</span></span><br><span class="line">    next();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="åœ¨åº”ç”¨ç¨‹åºä¸­å®šä¹‰æƒé™è§„åˆ™"><a href="#åœ¨åº”ç”¨ç¨‹åºä¸­å®šä¹‰æƒé™è§„åˆ™" class="headerlink" title="åœ¨åº”ç”¨ç¨‹åºä¸­å®šä¹‰æƒé™è§„åˆ™"></a>åœ¨åº”ç”¨ç¨‹åºä¸­å®šä¹‰æƒé™è§„åˆ™</h2><h3 id="è§’è‰²å’Œæƒé™çš„æ¦‚å¿µ"><a href="#è§’è‰²å’Œæƒé™çš„æ¦‚å¿µ" class="headerlink" title="è§’è‰²å’Œæƒé™çš„æ¦‚å¿µ"></a>è§’è‰²å’Œæƒé™çš„æ¦‚å¿µ</h3><p>åœ¨æƒé™ç®¡ç†ä¸­ï¼Œé€šå¸¸ä½¿ç”¨è§’è‰²å’Œæƒé™çš„æ¦‚å¿µæ¥ç»„ç»‡å’Œåˆ†é…ç”¨æˆ·çš„æƒé™ã€‚</p><ul><li>è§’è‰²ï¼š è§’è‰²æ˜¯ä¸€ç»„æƒé™çš„é›†åˆï¼Œé€šå¸¸ä»£è¡¨ç”¨æˆ·åœ¨ç³»ç»Ÿä¸­çš„èº«ä»½æˆ–èŒèƒ½ã€‚ä¾‹å¦‚ï¼Œâ€ç®¡ç†å‘˜â€ã€â€ç¼–è¾‘è€…â€ã€â€æ™®é€šç”¨æˆ·â€ ç­‰éƒ½å¯ä»¥æ˜¯è§’è‰²ã€‚</li><li>æƒé™ï¼š æƒé™æ˜¯ç”¨æˆ·èƒ½å¤Ÿæ‰§è¡Œçš„å…·ä½“æ“ä½œã€‚ä¾‹å¦‚ï¼Œâ€åˆ›å»ºé¡¹ç›®â€ã€â€ç¼–è¾‘æ–‡æ¡£â€ ç­‰éƒ½å¯ä»¥æ˜¯æƒé™ã€‚</li></ul><h3 id="è§„åˆ’æƒé™è§„åˆ™"><a href="#è§„åˆ’æƒé™è§„åˆ™" class="headerlink" title="è§„åˆ’æƒé™è§„åˆ™"></a>è§„åˆ’æƒé™è§„åˆ™</h3><p>åœ¨ä½¿ç”¨ CASL æ—¶ï¼Œè§„åˆ’æƒé™è§„åˆ™æ˜¯è®¾è®¡å¥å£®ä¸”æ˜“äºç»´æŠ¤çš„æƒé™ç®¡ç†ç³»ç»Ÿçš„å…³é”®ä¸€æ­¥ã€‚æˆ‘ä»¬å¯ä»¥æŒ‰ç…§è§’è‰²å’Œæƒé™çš„å±‚æ¬¡ç»“æ„å®šä¹‰è§„åˆ™ã€‚<br>è¿™é‡Œ manage å’Œ all æ˜¯ casl ä¸­çš„ç‰¹æ®Šå…³é”®å­—ï¼Œè¡¨ç¤ºå¯ä»¥æ“æ§å…¨éƒ¨çš„ actions å’Œå…¨éƒ¨çš„ subjects</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç¤ºä¾‹ï¼šè§„åˆ’æƒé™è§„åˆ™</span></span><br><span class="line"><span class="keyword">const</span> ability = defineAbility(<span class="function">(<span class="params">can</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (user.isAdmin) &#123;</span><br><span class="line">    <span class="comment">// ç®¡ç†å‘˜æ‹¥æœ‰æ‰€æœ‰æƒé™</span></span><br><span class="line">    can(<span class="string">&quot;manage&quot;</span>, <span class="string">&quot;all&quot;</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (user.isEditor) &#123;</span><br><span class="line">    <span class="comment">// ç¼–è¾‘è€…æœ‰ç¼–è¾‘å’Œåˆ›å»ºæƒé™</span></span><br><span class="line">    can([<span class="string">&quot;create&quot;</span>, <span class="string">&quot;update&quot;</span>], [<span class="string">&quot;Project&quot;</span>, <span class="string">&quot;Document&quot;</span>]);</span><br><span class="line">    <span class="comment">// ä»…ç¼–è¾‘è€…å¯ä»¥åˆ é™¤é¡¹ç›®</span></span><br><span class="line">    can(<span class="string">&quot;delete&quot;</span>, <span class="string">&quot;Project&quot;</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// æ™®é€šç”¨æˆ·åªæœ‰è¯»å–æƒé™</span></span><br><span class="line">    can(<span class="string">&quot;read&quot;</span>, <span class="string">&quot;all&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="å°†æƒé™è§„åˆ™æ˜ å°„åˆ°-Abilities"><a href="#å°†æƒé™è§„åˆ™æ˜ å°„åˆ°-Abilities" class="headerlink" title="å°†æƒé™è§„åˆ™æ˜ å°„åˆ° Abilities"></a>å°†æƒé™è§„åˆ™æ˜ å°„åˆ° Abilities</h3><p>ä¸€æ—¦æˆ‘ä»¬è§„åˆ’äº†æƒé™è§„åˆ™ï¼Œå°±å¯ä»¥å°†å…¶æ˜ å°„åˆ° CASL çš„ Abilities ä¸­ã€‚è¿™é€šå¸¸åœ¨ç”¨æˆ·ç™»å½•æ—¶è¿›è¡Œï¼Œä»¥ç¡®ä¿ç”¨æˆ·åœ¨æ•´ä¸ªä¼šè¯ä¸­å…·æœ‰æ­£ç¡®çš„æƒé™ã€‚</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç¤ºä¾‹ï¼šå°†æƒé™è§„åˆ™æ˜ å°„åˆ° Abilities</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">mapRulesToAbilities</span>(<span class="params">user</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> defineAbility(<span class="function">(<span class="params">can</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (user.isAdmin) &#123;</span><br><span class="line">      can(<span class="string">&quot;manage&quot;</span>, <span class="string">&quot;all&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (user.isEditor) &#123;</span><br><span class="line">      can([<span class="string">&quot;create&quot;</span>, <span class="string">&quot;update&quot;</span>], [<span class="string">&quot;Project&quot;</span>, <span class="string">&quot;Document&quot;</span>]);</span><br><span class="line">      can(<span class="string">&quot;delete&quot;</span>, <span class="string">&quot;Project&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      can(<span class="string">&quot;read&quot;</span>, <span class="string">&quot;all&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// åœ¨ç”¨æˆ·ç™»å½•åè°ƒç”¨</span></span><br><span class="line"><span class="keyword">const</span> user = loginUser(); <span class="comment">// å‡è®¾æœ‰ç™»å½•å‡½æ•°</span></span><br><span class="line"><span class="keyword">const</span> userAbilities = mapRulesToAbilities(user);</span><br></pre></td></tr></table></figure><h3 id="æƒé™è§„åˆ™çš„æ›´æ–°"><a href="#æƒé™è§„åˆ™çš„æ›´æ–°" class="headerlink" title="æƒé™è§„åˆ™çš„æ›´æ–°"></a>æƒé™è§„åˆ™çš„æ›´æ–°</h3><p>é™¤äº†è¦†ç›–è§„åˆ™ï¼Œæˆ‘ä»¬ä¼šé‡åˆ°åŠ¨æ€è§„åˆ™çš„åœºæ™¯ï¼Œåœ¨è¿™ä¸ªåœºæ™¯ä¸‹å°±éœ€è¦è¿›è¡Œè§„åˆ™çš„æ›´æ–°ï¼›</p><ol><li>å¦‚æœæ˜¯é‡‡ç”¨äº† new AbilityBuilder çš„ abilityï¼Œå¯ä»¥è¿™æ ·è¿›è¡Œæ›´æ–°</li></ol><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> ability = <span class="keyword">new</span> AbilityBuilder();</span><br><span class="line">ability.rules = rules;</span><br></pre></td></tr></table></figure><ol><li>å…¶ä»–</li></ol><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ability.update(rules);</span><br></pre></td></tr></table></figure><h3 id="æƒé™è§„åˆ™ä¸åç«¯çš„é›†æˆ"><a href="#æƒé™è§„åˆ™ä¸åç«¯çš„é›†æˆ" class="headerlink" title="æƒé™è§„åˆ™ä¸åç«¯çš„é›†æˆ"></a>æƒé™è§„åˆ™ä¸åç«¯çš„é›†æˆ</h3><p>casl æ˜¯å‚è€ƒè‡ª mongodb çš„ä¸€ä¸ªæƒé™ç®¡ç†åº“ï¼Œå› æ­¤ä»–çš„æƒé™æ¨¡å‹ä¹Ÿå’Œ mongo å¯¹è±¡ç±»å‹ç±»ä¼¼ï¼›æˆ‘ä»¬æ›´æœŸæœ›åç«¯èƒ½å¤Ÿä¼ é€’å¦‚ä¸‹ç±»å‹çš„æ•°æ®</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// user</span></span><br><span class="line">&#123;</span><br><span class="line">  ...</span><br><span class="line">  <span class="attr">rules</span>: [&#123;</span><br><span class="line">      <span class="attr">action</span>: <span class="string">&#x27;read&#x27;</span>,</span><br><span class="line">      <span class="attr">subject</span>: <span class="string">&#x27;Article&#x27;</span>,</span><br><span class="line">  &#125;, &#123;</span><br><span class="line">      <span class="attr">action</span>: <span class="string">&#x27;update&#x27;</span>,</span><br><span class="line">      <span class="attr">subject</span>: <span class="string">&#x27;Article&#x27;</span>,</span><br><span class="line">      <span class="attr">conditions</span>: &#123;</span><br><span class="line">          <span class="attr">published</span>: <span class="literal">true</span>,</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;]</span><br><span class="line">  ....</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ç¤ºä¾‹å’Œå®è·µ"><a href="#ç¤ºä¾‹å’Œå®è·µ" class="headerlink" title="ç¤ºä¾‹å’Œå®è·µ"></a>ç¤ºä¾‹å’Œå®è·µ</h2><p>æ–‡æ¡£ä¸­æœ‰æè¿°å¾ˆå¤šå®è·µæ“ä½œï¼Œæ¯”å¦‚å¢å¼ºè§†å›¾ç±»å‹ï¼Œç»„åˆ apiï¼Œç»„åˆ actions(åˆ«å)ï¼Œcan ç»„ä»¶ç­‰ï¼›è¿™é‡Œæ¬è¿ä¸€ç‚¹ç»å¸¸ä½¿ç”¨åˆ°çš„åŠŸèƒ½ï¼›</p><h3 id="å¢å¼ºè§†å›¾ç±»å‹"><a href="#å¢å¼ºè§†å›¾ç±»å‹" class="headerlink" title="å¢å¼ºè§†å›¾ç±»å‹"></a>å¢å¼ºè§†å›¾ç±»å‹</h3><p>TypeScript æ²¡æœ‰å…¶ä»–æ–¹æ³•å¯ä»¥åœ¨ä¸è¿›è¡Œå¢å¼ºçš„æƒ…å†µä¸‹äº†è§£å…¨å±€å±æ€§çš„ç±»å‹ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬æ·»åŠ  src/shims-ability.d.ts æ–‡ä»¶ï¼Œå…¶ä¸­åŒ…å«ä»¥ä¸‹å†…å®¹ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; AppAbility &#125; <span class="keyword">from</span> <span class="string">&quot;./AppAbility&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">declare</span> <span class="built_in">module</span> <span class="string">&quot;vue&quot;</span> &#123;</span><br><span class="line">  <span class="keyword">interface</span> ComponentCustomProperties &#123;</span><br><span class="line">    <span class="attr">$ability</span>: AppAbility;</span><br><span class="line">    $can(<span class="built_in">this</span>: <span class="built_in">this</span>, ...args: Parameters&lt;<span class="built_in">this</span>[<span class="string">&quot;$ability&quot;</span>][<span class="string">&quot;can&quot;</span>]&gt;): <span class="built_in">boolean</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç»„åˆ-Api"><a href="#ç»„åˆ-Api" class="headerlink" title="ç»„åˆ Api"></a>ç»„åˆ Api</h3><p>æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªå•ç‹¬çš„ useAppAbility é’©å­ï¼Œè¿™æ ·æˆ‘ä»¬å°±ä¸éœ€è¦å¯¼å…¥ useAbility å’Œ AppAbility åœ¨æ¯ä¸ªç»„ä»¶ä¸­ï¼Œæˆ‘ä»¬æƒ³è¦æ£€æŸ¥æƒé™ï¼Œä½†åªéœ€å¯¼å…¥ä¸€ä¸ªé’©å­ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useAbility &#125; <span class="keyword">from</span> <span class="string">&quot;@casl/vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; AppAbility &#125; <span class="keyword">from</span> <span class="string">&quot;../AppAbility&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useAppAbility = <span class="function">() =&gt;</span> useAbility&lt;AppAbility&gt;();</span><br></pre></td></tr></table></figure><h3 id="ability-ç±»å‹å®šä¹‰"><a href="#ability-ç±»å‹å®šä¹‰" class="headerlink" title="ability ç±»å‹å®šä¹‰"></a>ability ç±»å‹å®šä¹‰</h3><ul><li>åˆ›å»º Actions ç±»å‹</li><li>åˆ›å»º Subjects ç±»å‹</li><li>åˆ›å»ºç”± MatchConditions æ‹“å±•çš„ Conditions ç±»å‹ï¼ŒåŒ…å«äº†å¯èƒ½å­˜åœ¨çš„æ“ä½œ</li><li>ç»„åˆç±»å‹ CreateAbliity</li><li>æ„é€  abilityï¼Œ<ul><li>å¯æä¾› fieldMatcher ç”¨äºå­—æ®µä¸ºæ•°ç»„æ—¶å€™çš„åˆ¤æ–­ï¼›</li><li>å¯æä¾› conditionsMatcher é’ˆå¯¹ condition é¡¹è¿›è¡Œé…ç½®</li></ul></li><li>å¯¼å‡º CreateAbliityRules è§„åˆ™ï¼ˆè¿™éƒ¨åˆ†è§„åˆ™å…¶å®å¯ä»¥æ˜¯åç«¯æä¾›ç›¸åŒç±»å‹ï¼‰</li></ul><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  <span class="keyword">type</span> SubjectRawRule,</span><br><span class="line">  AbilityBuilder,</span><br><span class="line">  createMongoAbility,</span><br><span class="line">  <span class="keyword">type</span> MongoAbility,</span><br><span class="line">  <span class="keyword">type</span> MongoQuery,</span><br><span class="line">  <span class="keyword">type</span> InferSubjects,</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&quot;@casl/ability&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">type</span> Actions = <span class="string">&quot;create&quot;</span> | <span class="string">&quot;read&quot;</span> | <span class="string">&quot;update&quot;</span> | <span class="string">&quot;delete&quot;</span> | <span class="string">&quot;download&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> ConditionsExtra = &#123;</span><br><span class="line">  published?: <span class="built_in">boolean</span>;</span><br><span class="line">  drop?: <span class="built_in">boolean</span>;</span><br><span class="line">  recover?: <span class="built_in">boolean</span>;</span><br><span class="line">  newVersion?: <span class="built_in">boolean</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Folder</span> </span>&#123;</span><br><span class="line">  drop?: <span class="built_in">boolean</span> = <span class="literal">false</span>;</span><br><span class="line">  recover?: <span class="built_in">boolean</span> = <span class="literal">false</span>;</span><br><span class="line">  published?: <span class="built_in">boolean</span> = <span class="literal">false</span>;</span><br><span class="line">  newVersion?: <span class="built_in">boolean</span> = <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">File</span> </span>&#123;</span><br><span class="line">  drop?: <span class="built_in">boolean</span> = <span class="literal">false</span>;</span><br><span class="line">  recover?: <span class="built_in">boolean</span> = <span class="literal">false</span>;</span><br><span class="line">  published?: <span class="built_in">boolean</span> = <span class="literal">false</span>;</span><br><span class="line">  newVersion?: <span class="built_in">boolean</span> = <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">type</span> Subjects =</span><br><span class="line">  | <span class="string">&quot;Global&quot;</span></span><br><span class="line">  | <span class="string">&quot;Project&quot;</span></span><br><span class="line">  | InferSubjects&lt;<span class="keyword">typeof</span> Folder | <span class="keyword">typeof</span> File&gt;</span><br><span class="line">  | <span class="string">&quot;Folder&quot;</span></span><br><span class="line">  | <span class="string">&quot;File&quot;</span></span><br><span class="line">  | <span class="string">&quot;all&quot;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">type</span> CreateAbliity = MongoAbility&lt;[Actions, Subjects], MongoQuery&gt;;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> createAbliity = <span class="keyword">new</span> AbilityBuilder&lt;CreateAbliity&gt;(</span><br><span class="line">  createMongoAbility</span><br><span class="line">);</span><br><span class="line"><span class="comment">// å®šä¹‰userçš„æƒé™ï¼ŒåæœŸå¯æ ¹æ®userIdæ”¹é€ ç­‰</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> createForUser = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> ability = <span class="keyword">new</span> AbilityBuilder(</span><br><span class="line">    createMongoAbility&lt;[Actions, Subjects], MongoQuery&gt;</span><br><span class="line">  );</span><br><span class="line">  <span class="keyword">return</span> ability.build(&#123;</span><br><span class="line">    <span class="comment">// detectSubjectType: subject =&gt; &#123;</span></span><br><span class="line">    <span class="comment">//   return subject.__caslSubjectType__ as ExtractSubjectType&lt;Subjects&gt;</span></span><br><span class="line">    <span class="comment">// &#125;,</span></span><br><span class="line">    <span class="attr">fieldMatcher</span>: <span class="function">(<span class="params">fields</span>) =&gt;</span> <span class="function">(<span class="params">field</span>) =&gt;</span> fields.includes(field),</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> createUserAbility = createForUser();</span><br><span class="line"><span class="comment">// ä¸´æ—¶</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">type</span> CreateAbliityRules = SubjectRawRule&lt;</span><br><span class="line">  Actions,</span><br><span class="line">  <span class="string">&quot;Global&quot;</span> | <span class="string">&quot;Project&quot;</span> | <span class="string">&quot;Folder&quot;</span> | <span class="string">&quot;File&quot;</span>,</span><br><span class="line">  ConditionsExtra</span><br><span class="line">&gt;;</span><br></pre></td></tr></table></figure><h3 id="Subject-helper"><a href="#Subject-helper" class="headerlink" title="Subject helper"></a>Subject helper</h3><p>ç”¨äºåˆ¤æ–­å¯¹åº”çš„ condition æ¡ä»¶</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; subject &#125; <span class="keyword">from</span> <span class="string">&quot;@casl/ability&quot;</span>;</span><br><span class="line"><span class="keyword">if</span> (cannot(<span class="string">&quot;create&quot;</span>, subject(<span class="string">&quot;File&quot;</span>, &#123; <span class="attr">published</span>: <span class="literal">true</span>, <span class="attr">newVersion</span>: <span class="literal">false</span> &#125;))) &#123;</span><br><span class="line">  <span class="comment">//</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Can-ç»„ä»¶"><a href="#Can-ç»„ä»¶" class="headerlink" title="Can ç»„ä»¶"></a>Can ç»„ä»¶</h3><p>å°† can ç»„ä»¶ä½œä¸ºå…¨å±€ç»„ä»¶æ³¨å†Œ</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Can &#125; <span class="keyword">from</span> <span class="string">&quot;@casl/vue&quot;</span>;</span><br><span class="line">app.component(Can.name, Can);</span><br><span class="line">å¯¼å‡ºCanç»„ä»¶ç±»å‹;</span><br><span class="line"><span class="keyword">import</span> &#123; Can &#125; <span class="keyword">from</span> <span class="string">&quot;@casl/vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">declare</span> <span class="built_in">module</span> <span class="string">&quot;vue&quot;</span> &#123;</span><br><span class="line">  <span class="keyword">export</span> <span class="keyword">interface</span> GlobalComponents &#123;</span><br><span class="line">    <span class="attr">Can</span>: <span class="keyword">typeof</span> Can;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Can ç»„ä»¶ç”±äºä¸æ”¯æŒ object ç±»å‹ï¼Œæ‰€ä»¥ä½¿ç”¨ subject helper çš„æ—¶å€™éœ€è¦æ³¨æ„æ”¹ä¸º functionï¼Œ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;Can</span><br><span class="line">  I=&quot;update&quot;</span><br><span class="line">  :a=&quot;() =&gt; subject(&#x27;File&#x27;, &#123; recover: true &#125;)&quot;</span><br><span class="line">  passThrough</span><br><span class="line">  v-slot=&quot;&#123; allowed &#125;&quot;</span><br><span class="line">&gt;</span><br><span class="line">      &lt;NxButton</span><br><span class="line">        v-if=&quot;props.showButtons?.includes(&#x27;move&#x27;)&quot;</span><br><span class="line">        :disabled=&quot;!allowed || isDisabled&quot;</span><br><span class="line">        variant=&quot;outline&quot;</span><br><span class="line">        @click=&quot;handleClick(&#x27;move&#x27;)&quot;&gt;</span><br><span class="line">        &lt;template #icon&gt;</span><br><span class="line">          &lt;IconTool icon=&quot;bi:arrow-bar-left&quot; size=&quot;16&quot; /&gt;</span><br><span class="line">        &lt;/template&gt;</span><br><span class="line">        ç§»åŠ¨</span><br><span class="line">      &lt;/NxButton&gt;</span><br><span class="line">    &lt;/Can&gt;</span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><ul><li><a href="https://casl.js.org/v6/en/package/casl-vue#augment-vue-types">https://casl.js.org/v6/en/package/casl-vue#augment-vue-types</a></li><li><a href="https://juejin.cn/post/6882645988293640200?searchId=202312191420517E21AD634C1879FB7C14#heading-1">https://juejin.cn/post/6882645988293640200?searchId=202312191420517E21AD634C1879FB7C14#heading-1</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="å·¥ç¨‹åŒ–ç³»åˆ—" scheme="https://zlinni.github.io/categories/%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%B3%BB%E5%88%97/"/>
    
    
    <category term="å‰ç«¯" scheme="https://zlinni.github.io/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="casl" scheme="https://zlinni.github.io/tags/casl/"/>
    
  </entry>
  
  <entry>
    <title>TanStack Query è¯·æ±‚çŠ¶æ€ç®¡ç†</title>
    <link href="https://zlinni.github.io/posts/20231015115155/"/>
    <id>https://zlinni.github.io/posts/20231015115155/</id>
    <published>2023-10-15T03:51:55.000Z</published>
    <updated>2025-02-27T07:29:34.334Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><div class="note primary flat"><p>è¿™ç¯‡æ–‡ç« ç³»ç»Ÿä»‹ç»äº† TanStack Query åœ¨å‰ç«¯è¯·æ±‚çŠ¶æ€ç®¡ç†ä¸­çš„åº”ç”¨ï¼Œæ ¸å¿ƒå›´ç»•ä¸‰ä¸ªå…³é”®æ¨¡å—ï¼šuseQueryï¼ˆå“åº”å¼æ•°æ®è·å–ï¼Œæ”¯æŒè‡ªåŠ¨åˆ·æ–°å’Œæ¡ä»¶è¯·æ±‚ï¼‰ã€useMutationï¼ˆå¤„ç†å‰¯ä½œç”¨æ“ä½œï¼Œæä¾›å®Œæ•´ç”Ÿå‘½å‘¨æœŸå›è°ƒï¼‰å’Œ queryClientï¼ˆè¯·æ±‚ä¸­ç»§å™¨ï¼Œæ”¯æŒæ‰‹åŠ¨ç¼“å­˜æ§åˆ¶ï¼‰ã€‚æ–‡ç« é‡ç‚¹é˜è¿°äº†é¡¹ç›®å®è·µè§„èŒƒï¼ŒåŒ…æ‹¬åˆ†å±‚æ¶æ„è®¾è®¡ï¼ˆapi/query/type æ–‡ä»¶åˆ†ç¦»ï¼‰ã€ç±»å‹å®‰å…¨è§„èŒƒï¼ˆDTO/VO å®ä½“å®šä¹‰ï¼‰ä»¥åŠå“åº”å¼å‚æ•°å¤„ç†æŠ€å·§ï¼ˆmaybeRefOrGetter + toValue ç»„åˆï¼‰ï¼Œæœ€åè¿˜æåŠäº†é€šè¿‡ IDE æ’ä»¶å®ç°ä»£ç è§„èŒƒè‡ªåŠ¨åŒ–ç”Ÿæˆçš„é«˜æ•ˆå¼€å‘æ¨¡å¼ã€‚</p></div><h1 id="TanStack-Query-è¯·æ±‚çŠ¶æ€ç®¡ç†"><a href="#TanStack-Query-è¯·æ±‚çŠ¶æ€ç®¡ç†" class="headerlink" title="TanStack Query è¯·æ±‚çŠ¶æ€ç®¡ç†"></a>TanStack Query è¯·æ±‚çŠ¶æ€ç®¡ç†</h1><h2 id="ä»€ä¹ˆæ˜¯-Tanstack-Queryï¼Ÿä¸ºä»€ä¹ˆè¦ä½¿ç”¨å®ƒ"><a href="#ä»€ä¹ˆæ˜¯-Tanstack-Queryï¼Ÿä¸ºä»€ä¹ˆè¦ä½¿ç”¨å®ƒ" class="headerlink" title="ä»€ä¹ˆæ˜¯ Tanstack Queryï¼Ÿä¸ºä»€ä¹ˆè¦ä½¿ç”¨å®ƒ"></a>ä»€ä¹ˆæ˜¯ Tanstack Queryï¼Ÿä¸ºä»€ä¹ˆè¦ä½¿ç”¨å®ƒ</h2><p>tanstackQuery æˆ‘ä¸ªäººè®¤ä¸ºæ˜¯ä¸€ä¸ªè¯·æ±‚è°ƒç”¨çš„æ•ˆç‡æå‡å·¥å…·ï¼›å¸®åŠ©å¼€å‘è€…åŸºäºå“åº”å¼è·å–è¯·æ±‚æ•°æ®ï¼ŒåŸºäºå‡½æ•°å¼è§„èŒƒè°ƒç”¨æ¥å£ï¼›</p><p>tanstackquery ä¸»è¦åˆ†ä¸ºä¸¤éƒ¨åˆ†å®ç°ï¼Œä¸€éƒ¨åˆ†æ˜¯ useQueryï¼Œä¸€éƒ¨åˆ†æ˜¯ useMutationï¼›<br>ä¸¤éƒ¨åˆ†å®ç°éƒ½æ˜¯å¯¹è¯·æ±‚çš„æŠ½è±¡è°ƒç”¨å’Œè·å–ï¼Œæˆ‘ä»¬å¯ä»¥ç®€å•çš„ç†è§£ä¸ºï¼ŒuseQuery æ˜¯ç”¨äºè‡ªåŠ¨åŒ–ï¼ˆå“åº”å¼ï¼‰è·å–è¯·æ±‚ï¼Œè€Œ useMutation ç”¨äºæ‰‹åŠ¨è°ƒç”¨è¯·æ±‚;<br>åŠåæ–‡ä¼šæåˆ°çš„ queryClientï¼ŒæŒæ¡è¿™ä¸‰è€…çš„ç”¨æ³•å¯ä»¥å¸®åŠ©ä½ å¿«é€Ÿå¼€å‘é¡¹ç›®ï¼›</p><h3 id="useQuery"><a href="#useQuery" class="headerlink" title="useQuery"></a>useQuery</h3><ul><li>æœ‰äº† useQuery ä¹‹åï¼Œæˆ‘ä»¬ä¸å†éœ€è¦æ‰‹åŠ¨è¯·æ±‚æ¥å£ï¼Œæ”¹ä¸ºå“åº”å¼è·å–å€¼</li></ul><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; data &#125; = useQuery(&#123;</span><br><span class="line">  ...blogQuery.getBlogDetail(<span class="function">() =&gt;</span> (&#123;</span><br><span class="line">    <span class="attr">id</span>: id.value,</span><br><span class="line">  &#125;)),</span><br><span class="line">  <span class="attr">enabled</span>: <span class="function">() =&gt;</span> !!id.value,</span><br><span class="line">&#125;);</span><br><span class="line">watchEffect(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(data.value); <span class="comment">// dataæ˜¯å“åº”å¼çš„</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><ul><li>å¯¹äºç”¨æˆ·æ“ä½œå¯¼è‡´çš„æ¥å£æ•°æ®æ›´æ–°ï¼Œæˆ‘ä»¬ä¸å†éœ€è¦å€ŸåŠ© store/emit ç­‰é€šä¿¡æ–¹å¼ï¼Œç›´æ¥è°ƒç”¨ queryClient.invalidateQueries()åˆ·æ–°è¯·æ±‚</li></ul><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// çˆ¶ç»„ä»¶</span></span><br><span class="line"><span class="keyword">const</span> &#123; data &#125; = useQuery(&#123;</span><br><span class="line">  ...blogQuery.getBlogDetail(<span class="function">() =&gt;</span> (&#123;</span><br><span class="line">    <span class="attr">id</span>: id.value,</span><br><span class="line">  &#125;)),</span><br><span class="line">  <span class="attr">enabled</span>: <span class="function">() =&gt;</span> !!id.value,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å­ç»„ä»¶ åˆ·æ–°</span></span><br><span class="line"><span class="keyword">const</span> queryClient = useQueryClient();</span><br><span class="line">queryClient.invalidateQueries();</span><br></pre></td></tr></table></figure><ul><li>æ§åˆ¶ useQuery æ˜¯å¦èƒ½æ‰§è¡Œ<br>useQuery è‡ªèº«å…·å¤‡æ§åˆ¶è¯·æ±‚æ˜¯å¦èƒ½æ‰§è¡Œçš„å‡½æ•°ï¼šenabled</li></ul><p>enabled æ˜¯ä¸€ä¸ªå“åº”å¼å‚æ•°ï¼Œå¯ä»¥ä¼ å…¥()=&gt;xxx.value æ§åˆ¶</p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> id = ref();</span><br><span class="line">useQuery(&#123;</span><br><span class="line">  ...blogQuery.getBlogDetail(<span class="function">() =&gt;</span> (&#123;</span><br><span class="line">    <span class="attr">id</span>: id.value,</span><br><span class="line">  &#125;)),</span><br><span class="line">  <span class="attr">enabled</span>: <span class="function">() =&gt;</span> !!id.value,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>å¸¸è§çš„ä½¿ç”¨ useQuery çš„åœºæ™¯æœ‰ï¼š<br>åˆ—è¡¨ç±»æ•°æ®åˆå§‹åŒ–è·å–</p><h3 id="useMutation"><a href="#useMutation" class="headerlink" title="useMutation"></a>useMutation</h3><p>useMutation æ˜¯ä¸€ä¸ªå›è°ƒå‡½æ•°å¼çš„ APIï¼Œä»–æœ‰ onSuccessï¼ŒonErrorï¼ŒonSettled å›è°ƒï¼Œå¾ˆæ–¹ä¾¿çš„è®©ä½¿ç”¨è€…åšä¸åŒé˜¶æ®µçš„æ“ä½œï¼›ä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; <span class="attr">mutate</span>: createBlog &#125; = useMutation(&#123;</span><br><span class="line">  <span class="attr">mutationFn</span>: blogAPI.createBlog,</span><br><span class="line">  <span class="function"><span class="title">onSuccess</span>(<span class="params">data</span>)</span> &#123;</span><br><span class="line">    <span class="comment">// æˆåŠŸå›è°ƒ</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">onError</span>(<span class="params">err</span>)</span> &#123;</span><br><span class="line">    <span class="comment">// é”™è¯¯æç¤º ä¸ŠæŠ¥ç­‰</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">onSettled</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">// åˆ›å»ºååˆ·æ–°åˆ—è¡¨</span></span><br><span class="line">    queryClient.invalidateQuries();</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>å¸¸è§çš„ä½¿ç”¨ useMutation çš„åœºæ™¯æœ‰ï¼š<br>postï¼Œputï¼Œdelete ç­‰è¯·æ±‚</p><h3 id="queryClient"><a href="#queryClient" class="headerlink" title="queryClient"></a>queryClient</h3><p>queryClient æ˜¯ tanstackQuery çš„è¯·æ±‚ä¸­ç»§ï¼Œä¸ä¾èµ– setupï¼Œæ›´åƒæ˜¯å¯¹ api çš„ç›´æ¥è°ƒç”¨ï¼Œä½†æ˜¯ä»–æœ‰å¦‚ä¸‹çš„å¥½å¤„</p><ul><li>queryClient.fetchQuery() æ‰‹åŠ¨è°ƒç”¨è¯·æ±‚ï¼Œæ— è§†ç¼“å­˜</li></ul><p>æˆ‘ä¸ªäººæ›´å–œæ¬¢åœ¨ useXXXDialog.tsx ä¸­ä½¿ç”¨ä»–ï¼Œå› ä¸º naive-ui çš„ dialog æ˜¯å‡½æ•°å¼åˆ›å»ºçš„ï¼Œå°½é‡å°‘å†™å‰¯ä½œç”¨è¾ƒå¥½</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> data = <span class="keyword">await</span> queryClient.fetchQuery(</span><br><span class="line">  blogQuery.getBlogDetail(&#123;</span><br><span class="line">    <span class="attr">id</span>: id.value,</span><br><span class="line">  &#125;)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><ul><li>queryClient.ensureQuery() æ‰‹åŠ¨è°ƒç”¨è¯·æ±‚ï¼Œä¼˜å…ˆä»ç¼“å­˜ä¸­å¯»æ‰¾ï¼Œå†åˆ™è°ƒç”¨è¯·æ±‚</li></ul><p>è¿™ä¸ªä½¿ç”¨çš„è¯æ›´å€¾å‘äºç¼“å­˜ä¼˜å…ˆï¼Œç‰¹åˆ«æ˜¯æœ‰äº›æ—¶å€™åœ¨é¡¹ç›®ä¸­æ˜ç¡®è¿™ä¸ªè¯·æ±‚æ˜¯åŸºäºç¼“å­˜çš„æ—¶å€™ï¼Œå°±å¯ä»¥ä¼˜å…ˆä½¿ç”¨å®ƒ</p><h2 id="å¼€å‘è§„èŒƒ"><a href="#å¼€å‘è§„èŒƒ" class="headerlink" title="å¼€å‘è§„èŒƒ"></a>å¼€å‘è§„èŒƒ</h2><h3 id="æ–‡ä»¶å¤¹è§„èŒƒ"><a href="#æ–‡ä»¶å¤¹è§„èŒƒ" class="headerlink" title="æ–‡ä»¶å¤¹è§„èŒƒ"></a>æ–‡ä»¶å¤¹è§„èŒƒ</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">apis / blog / api.ts; <span class="comment">// å­˜æ”¾å°è£…äº†è¯·æ±‚åº“çš„apiåˆé›†</span></span><br><span class="line">apis / blog / query.ts; <span class="comment">// å­˜æ”¾éœ€è¦tanstack queryå“åº”å¼è¯·æ±‚çš„è¯·æ±‚åˆé›†</span></span><br><span class="line">apis / blog / <span class="keyword">type</span>.ts; <span class="comment">// å­˜æ”¾apiç±»å‹å£°æ˜</span></span><br></pre></td></tr></table></figure><h3 id="API-è§„èŒƒ"><a href="#API-è§„èŒƒ" class="headerlink" title="API è§„èŒƒ"></a>API è§„èŒƒ</h3><p>åœ¨ query ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å€ŸåŠ© maybeRefOrGetter å’Œ toValue å®ç°å“åº”å¼è¯·æ±‚å‚æ•°çš„å¯¼å…¥å’Œè§£æ</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> blogQuery = &#123;</span><br><span class="line">  <span class="attr">getBlogDetail</span>: <span class="function">(<span class="params">DTO: DTOHelper&lt;<span class="keyword">typeof</span> blogAPI.getBlogDetail&gt;</span>) =&gt;</span></span><br><span class="line">    queryOptions(&#123;</span><br><span class="line">      <span class="attr">queryKey</span>: [<span class="string">&quot;blogQuery&quot;</span>, <span class="string">&quot;getBlogDetail&quot;</span>, DTO],</span><br><span class="line">      <span class="attr">queryFn</span>: <span class="function">() =&gt;</span> blogAPI.getBlogDetail(toValue(DTO)),</span><br><span class="line">    &#125;),</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">type</span> DTOHelper&lt;T <span class="keyword">extends</span> (...args: <span class="built_in">any</span>) =&gt; <span class="built_in">any</span>&gt; = MaybeRefOrGetter&lt;</span><br><span class="line">  Parameters&lt;T&gt;[<span class="number">0</span>]</span><br><span class="line">&gt;;</span><br></pre></td></tr></table></figure><h3 id="å‘½åè§„èŒƒ"><a href="#å‘½åè§„èŒƒ" class="headerlink" title="å‘½åè§„èŒƒ"></a>å‘½åè§„èŒƒ</h3><p>ä¸»è¦äº†è§£ä¸‰ä¸ªæ¦‚å¿µï¼šå®ä½“(Entity)ï¼ŒDTOï¼ŒVO<br>å‚è€ƒï¼š<a href="https://www.cnblogs.com/JerryMouseLi/p/11069237.html#vo%E8%A7%86%E5%9B%BE%E6%A8%A1%E5%9E%8B-%E4%B8%8E-dto%E6%95%B0%E6%8D%AE%E4%BC%A0%E8%BE%93%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%8C%BA%E5%88%AB">https://www.cnblogs.com/JerryMouseLi/p/11069237.html#vo%E8%A7%86%E5%9B%BE%E6%A8%A1%E5%9E%8B-%E4%B8%8E-dto%E6%95%B0%E6%8D%AE%E4%BC%A0%E8%BE%93%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%8C%BA%E5%88%AB</a></p><p>å‘½åè§„èŒƒåˆ™ä¸º</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> BlogEntity &#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="built_in">number</span>;</span><br><span class="line">  url: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> GetBlogListVO &#123;</span><br><span class="line">  <span class="attr">lists</span>: BlogEntity[];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> GetBlogDetailDTO &#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> GetBlogDetailVO <span class="keyword">extends</span> BlogEntity &#123;&#125;</span><br></pre></td></tr></table></figure><h3 id="æ’ä»¶-AI-å¿«é€Ÿç”Ÿæˆè§„èŒƒ"><a href="#æ’ä»¶-AI-å¿«é€Ÿç”Ÿæˆè§„èŒƒ" class="headerlink" title="æ’ä»¶/AI å¿«é€Ÿç”Ÿæˆè§„èŒƒ"></a>æ’ä»¶/AI å¿«é€Ÿç”Ÿæˆè§„èŒƒ</h3><p>å€ŸåŠ© Vscode Module Templates æ’ä»¶ / AI</p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="å·¥ç¨‹åŒ–ç³»åˆ—" scheme="https://zlinni.github.io/categories/%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%B3%BB%E5%88%97/"/>
    
    
    <category term="å‰ç«¯" scheme="https://zlinni.github.io/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="TanStack Query" scheme="https://zlinni.github.io/tags/TanStack-Query/"/>
    
  </entry>
  
  <entry>
    <title>Mockå°è£…ä¸å®æ“</title>
    <link href="https://zlinni.github.io/posts/3034349472/"/>
    <id>https://zlinni.github.io/posts/3034349472/</id>
    <published>2023-03-11T16:00:00.000Z</published>
    <updated>2023-03-11T15:59:13.273Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p><code>mock</code> å·¥å…·çš„ä½¿ç”¨ä»¥åŠæ‹“å±•</p><h1 id="å½¢å¼"><a href="#å½¢å¼" class="headerlink" title="å½¢å¼"></a>å½¢å¼</h1><p>å¼€å¯ <code>mock</code> æœ‰ä¸¤ç§å½¢å¼ ç¯å¢ƒå˜é‡å’Œæ³¨è§£</p><h2 id="é€šè¿‡ç¯å¢ƒå˜é‡å¼€å¯-mockï¼ˆç”Ÿäº§é˜¶æ®µä¼˜é€‰ï¼‰"><a href="#é€šè¿‡ç¯å¢ƒå˜é‡å¼€å¯-mockï¼ˆç”Ÿäº§é˜¶æ®µä¼˜é€‰ï¼‰" class="headerlink" title="é€šè¿‡ç¯å¢ƒå˜é‡å¼€å¯ mockï¼ˆç”Ÿäº§é˜¶æ®µä¼˜é€‰ï¼‰"></a>é€šè¿‡ç¯å¢ƒå˜é‡å¼€å¯ mockï¼ˆç”Ÿäº§é˜¶æ®µä¼˜é€‰ï¼‰</h2><p>è¿™ä¸ªéœ€è¦ <code>env</code> é‡Œé¢æ˜¯å¦åŒ…å« <code>mock</code> ç¯å¢ƒçš„åˆ¤æ–­<br>ä¸è¿‡ä¸€æ—¦æ„å»ºå¥½å°±æ”¹ä¸äº†äº† <code>mock</code></p><h2 id="é€šè¿‡æ³¨è§£å¼€å¯-mockï¼ˆå¼€å‘é˜¶æ®µä¼˜é€‰ï¼‰"><a href="#é€šè¿‡æ³¨è§£å¼€å¯-mockï¼ˆå¼€å‘é˜¶æ®µä¼˜é€‰ï¼‰" class="headerlink" title="é€šè¿‡æ³¨è§£å¼€å¯ mockï¼ˆå¼€å‘é˜¶æ®µä¼˜é€‰ï¼‰"></a>é€šè¿‡æ³¨è§£å¼€å¯ mockï¼ˆå¼€å‘é˜¶æ®µä¼˜é€‰ï¼‰</h2><p>é¡¹ç›®é»˜è®¤å¼€å¯ <code>mock</code>(<code>main.ts</code> ä¸­æ³¨å…¥)<br>ä¸éœ€è¦çš„æ—¶å€™ç›´æ¥æ³¨é‡Šæ‰å³å¯</p><h2 id="ç»¼ä¸Šçš„æ–°æ–¹æ³•"><a href="#ç»¼ä¸Šçš„æ–°æ–¹æ³•" class="headerlink" title="ç»¼ä¸Šçš„æ–°æ–¹æ³•"></a>ç»¼ä¸Šçš„æ–°æ–¹æ³•</h2><p>å¼€å‘ç¯å¢ƒï¼šé»˜è®¤ <code>mock</code> ç¯å¢ƒ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">VUE_APP_MODE=mock</span><br><span class="line">VUE_APP_URL=x<span class="string">&#x27;x&#x27;</span>x</span><br><span class="line">VUE_APP_MARK_TEXT=å¼€å‘ç¯å¢ƒ</span><br></pre></td></tr></table></figure><p>ç”Ÿäº§ç¯å¢ƒ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">VUE_APP_MODE=product</span><br><span class="line">VUE_APP_URL=xxxx</span><br><span class="line">VUE_APP_MARK_TEXT=ç”Ÿäº§ç¯å¢ƒ</span><br></pre></td></tr></table></figure><p><code>main.ts</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// é€šè¿‡æ³¨é‡ŠåŠ¨æ€æ§åˆ¶å¼€å‘ç¯å¢ƒæ˜¯å¦éœ€è¦mock</span><br><span class="line"><span class="keyword">if</span> (process.env.VUE_APP_MODE === <span class="string">&quot;mock&quot;</span>) &#123;</span><br><span class="line">  // require(<span class="string">&quot;@/mock&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="mock-åŸºæœ¬ä½¿ç”¨"><a href="#mock-åŸºæœ¬ä½¿ç”¨" class="headerlink" title="mock åŸºæœ¬ä½¿ç”¨"></a>mock åŸºæœ¬ä½¿ç”¨</h1><p><a href="http://mockjs.com/examples.html">http://mockjs.com/examples.html</a><br>å¸¸ç”¨ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;data|10&#x27;</span>:[],<span class="comment">// è¡¨ç¤ºåä¸ªdata</span></span><br><span class="line"><span class="string">&quot;id|+1&quot;</span>: <span class="number">0</span>, <span class="comment">// idä»0å¼€å§‹è‡ªå¢1</span></span><br><span class="line"><span class="string">&#x27;rate|0-5&#x27;</span>,<span class="comment">// rate ä»0-5èŒƒå›´éšæœºè·å–</span></span><br><span class="line"><span class="string">&#x27;name|1-100.3&#x27;</span>:<span class="number">1</span> <span class="comment">// åŒ…å«ä¸‰ä½å°æ•°</span></span><br></pre></td></tr></table></figure><h1 id="mock-æ ¹æ®ä¸åŒçš„è¯·æ±‚å‚æ•°è¿”å›ä¸åŒçš„ç»“æœ"><a href="#mock-æ ¹æ®ä¸åŒçš„è¯·æ±‚å‚æ•°è¿”å›ä¸åŒçš„ç»“æœ" class="headerlink" title="mock æ ¹æ®ä¸åŒçš„è¯·æ±‚å‚æ•°è¿”å›ä¸åŒçš„ç»“æœ"></a>mock æ ¹æ®ä¸åŒçš„è¯·æ±‚å‚æ•°è¿”å›ä¸åŒçš„ç»“æœ</h1><p>ç”±äºæ™®é€šçš„ <code>mock</code> å…¶å®ä¸éœ€è¦å‚æ•°ï¼Œä½†æ˜¯ <code>mock</code> æœ¬èº«ä¹Ÿå¯ä»¥æ¥æ”¶å‚æ•°ï¼Œåˆ†ä¸ºä¸¤ç§æƒ…å†µ<br>å…ˆè®²ä¸€ä¸‹åŸç† ä¸€èˆ¬ <code>mock</code> æ–¹æ³•æ˜¯è¿™æ ·å†™çš„ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Mock.mock(url, method, <span class="function">(<span class="params">opts</span>) =&gt;</span> &#123;&#125;);</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ <code>url</code> æ˜¯æ‹¦æˆªçš„åœ°å€ <code>method</code> æ˜¯è¯·æ±‚æ–¹æ³• <code>opts</code> åˆ™æ˜¯ä¸€ä¸ªå¯¹è±¡<br>å…³é”®åœ¨äº <code>opts</code> å®ƒçš„ç±»å‹å®šä¹‰å¦‚ä¸‹<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20230311235123.png" alt=""><br>ä¹Ÿå°±æ˜¯å®ƒä¼šæš´éœ²ä¸‰ä¸ªå‚æ•° ä¸€ä¸ªæ˜¯æ‹¦æˆª <code>url</code> ä¸€ä¸ªæ˜¯è¯·æ±‚æ–¹æ³• ä¸€ä¸ªæ˜¯ <code>body</code><br>å¦‚æœæ˜¯ <code>GET</code> è¯·æ±‚ é‚£ä¹ˆè¯·æ±‚ä½“åˆ™åœ¨ <code>opts.url</code> ä¸­ï¼Œéœ€è¦å•ç‹¬åˆ†å‰²å‡ºæ¥ï¼Œæ–¹æ³•åœ¨ä¸‹é¢çœ‹<br>å¦‚æœæ˜¯ <code>POST</code> è¯·æ±‚ é‚£ä¹ˆè¯·æ±‚ä½“å°±æ˜¯åœ¨ <code>body</code> ä¸­ï¼Œä¹Ÿæ˜¯å¯¹è±¡ ç›´æ¥ç”¨å°±å¥½<br>é‚£ä¹ˆåŸºäºä¸Šé¢ å°±å¯ä»¥æ‹¿åˆ°å¯¹åº”çš„å‚æ•° è¿›è¡Œè¿”å›</p><h2 id="å°†-url-ä¸­çš„å‚æ•°è½¬å¯¹è±¡"><a href="#å°†-url-ä¸­çš„å‚æ•°è½¬å¯¹è±¡" class="headerlink" title="å°† url ä¸­çš„å‚æ•°è½¬å¯¹è±¡"></a>å°† url ä¸­çš„å‚æ•°è½¬å¯¹è±¡</h2><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è·å–urlä¸­çš„å‚æ•°</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param </span>url url</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns </span>å‚æ•°</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> getUrlSearchToObject = &lt;T&gt;(</span><br><span class="line">  url = <span class="built_in">window</span>.location.search</span><br><span class="line">): Record&lt;keyof T, <span class="built_in">string</span>&gt; =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> urlStr = url.split(<span class="string">&quot;?&quot;</span>)[<span class="number">1</span>];</span><br><span class="line">  <span class="keyword">const</span> paramsArr = urlStr.split(<span class="string">&quot;&amp;&quot;</span>);</span><br><span class="line">  <span class="keyword">return</span> paramsArr.reduce(<span class="function">(<span class="params">pre, cur</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> arr = cur.split(<span class="string">&quot;=&quot;</span>);</span><br><span class="line">    <span class="keyword">const</span> [key, value] = arr;</span><br><span class="line">    pre[key <span class="keyword">as</span> keyof T] = value;</span><br><span class="line">    <span class="keyword">return</span> pre;</span><br><span class="line">  &#125;, &#123;&#125; <span class="keyword">as</span> Record&lt;keyof T, <span class="built_in">string</span>&gt;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h1 id="mock-å°è£…"><a href="#mock-å°è£…" class="headerlink" title="mock å°è£…"></a>mock å°è£…</h1><p>ä¸¾ä¸ªä¾‹å­<br><code>mock/module/music.ts</code> ç”¨äº <code>mock</code> ä¸€ä¸ªæ¥å£ è¿”å› <code>url</code> <code>type</code> å’Œä¸€ä¸ª <code>cb</code> <code>cb</code> åŒ…å«ä¸Šè¿°çš„ç»“æ„ä½“</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> musicMockEntity: Record&lt;</span><br><span class="line">  <span class="built_in">string</span>,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="built_in">string</span>;</span><br><span class="line">    <span class="keyword">type</span>: <span class="built_in">string</span>;</span><br><span class="line">    cb: <span class="built_in">any</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&gt; = &#123;</span><br><span class="line">  <span class="attr">moduleStatusList</span>: &#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&quot;/mock/api/getModuleStatusList&quot;</span>,</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&quot;get&quot;</span>,</span><br><span class="line">    <span class="attr">cb</span>: <span class="function">(<span class="params">opts: MockjsRequestOptions</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(opts);</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">code</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="attr">msg</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">        <span class="attr">data</span>: &#123;</span><br><span class="line">          <span class="attr">statusList</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">              <span class="attr">business_status</span>: <span class="string">&quot;1-1&quot;</span>,</span><br><span class="line">              <span class="attr">name</span>: <span class="string">&quot;æŠ•ç¥¨ä¸­&quot;</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">          ],</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><code>mock/index.ts</code> ç”¨äºå…¨å±€å®šä¹‰ä¸€ä¸ª <code>mock</code> å®ä¾‹ é€šè¿‡å¯¼å…¥æ¨¡å—çš„æ–¹å¼ å»æ‹¦æˆªå¯¹åº”çš„è¯·æ±‚å¹¶è¿”å› è¿™é‡Œçš„åµŒå¥—äº†ä¸€å±‚ <code>Mock.mock</code> ä¼šä¸å¤ªçµæ´» å…¶å® åº”è¯¥æ”¾åœ¨ä¸Šé¢ <code>cb</code> è¿”å›å€¼ å› ä¸ºæœ‰æ—¶å€™ <code>cb</code> <code>return</code> çš„ä¸œè¥¿ä¸ä¸€å®šè¦ç»è¿‡ <code>Mock.mock</code> åµŒå¥—ï¼Œæœ‰å¯èƒ½ç›´æ¥æ˜¯ä¸€ä¸ª <code>json</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Mock, &#123; MockjsRequestOptions &#125; <span class="keyword">from</span> <span class="string">&quot;mockjs&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; musicMockEntity &#125; <span class="keyword">from</span> <span class="string">&quot;./module/music&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> modules = [musicMockEntity];</span><br><span class="line">Mock.setup(&#123;</span><br><span class="line">  <span class="attr">timeout</span>: <span class="string">&quot;200-600&quot;</span>,</span><br><span class="line">&#125;);</span><br><span class="line">modules.forEach(<span class="function">(<span class="params"><span class="built_in">module</span></span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">Object</span>.keys(<span class="built_in">module</span>).forEach(<span class="function">(<span class="params">key</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; url, type, cb &#125; = <span class="built_in">module</span>[key];</span><br><span class="line">    <span class="comment">// ç”¨æ­£åˆ™æ˜¯å› ä¸ºç›´æ¥å†™åœ°å€çš„è¯ åç»­çš„?xxx=å°±åŒ¹é…ä¸åˆ°</span></span><br><span class="line">    Mock.mock(<span class="keyword">new</span> <span class="built_in">RegExp</span>(url), type, <span class="function">(<span class="params">opts: MockjsRequestOptions</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(opts, <span class="string">&quot;opts&quot;</span>);</span><br><span class="line">      <span class="keyword">return</span> Mock.mock(cb(opts));</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h1 id="åœ¨-apifox-ä¸­ä½¿ç”¨-mock"><a href="#åœ¨-apifox-ä¸­ä½¿ç”¨-mock" class="headerlink" title="åœ¨ apifox ä¸­ä½¿ç”¨ mock"></a>åœ¨ apifox ä¸­ä½¿ç”¨ mock</h1><h2 id="åœºæ™¯"><a href="#åœºæ™¯" class="headerlink" title="åœºæ™¯"></a>åœºæ™¯</h2><p>ä¸€èˆ¬åç«¯å‡ºæ¥å£æ–‡æ¡£ å‡ºåœ¨ <code>apifox</code> ä¸Š æ‰€ä»¥å¯ä»¥ç›´æ¥ä½¿ç”¨ <code>apifox</code> çš„ <code>mock</code> ç„¶ååœ¨é¡¹ç›®ä¸­å¯¼å…¥<br>ç¼ºç‚¹æ˜¯å®ƒå¹¶æ²¡æœ‰æºå¸¦æ‹¦æˆªåŠŸèƒ½<br>ç›´æ¥ <code>mock</code></p><ul><li>æ–¹å¼ 1 é€šè¿‡ç”Ÿæˆçš„ mockjson ç›´æ¥å¯¼å…¥ä½¿ç”¨<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20230311235253.png" alt=""></li><li>æ–¹å¼ 2 é€šè¿‡ mock åœ°å€æ¥æ³¨å…¥<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20230311235302.png" alt=""><br>æ›´æ”¹å¯¹åº”æ¥å£çš„åœ°å€ æ³¨æ„ axios æ˜¯å¯ä»¥é€šè¿‡ url è¦†ç›– baseUrl çš„<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20230311235317.png" alt=""><br>æ—¥å¸¸å¼€å‘æ›´æ¨èæ–¹å¼ 2 å› ä¸ºæ–¹å¼ 2 ä¸éœ€è¦é¢å¤–çš„æ–‡ä»¶äº§å‡ºï¼Œå°±æ˜¯ url ä¸‘äº†ç‚¹</li></ul><h2 id="é€šè¿‡æœåŠ¡è½¬å‘-æ³¨å…¥-axios-æ¥-mock"><a href="#é€šè¿‡æœåŠ¡è½¬å‘-æ³¨å…¥-axios-æ¥-mock" class="headerlink" title="é€šè¿‡æœåŠ¡è½¬å‘/æ³¨å…¥ axios æ¥ mock"></a>é€šè¿‡æœåŠ¡è½¬å‘/æ³¨å…¥ axios æ¥ mock</h2><p>ä¸Šè¿°æ–¹å¼äºŒå¸¦æ¥çš„æ–¹æ³•æ˜¯ <code>url</code> è¦†ç›– <code>baseUrl</code> ä½†æ˜¯è¿™æ ·åš ä¸å¥½ç»´æŠ¤ <code>mock</code> åœ°å€<br>æ³¨å…¥ <code>axios</code> + ç¯å¢ƒ(æ¨è)<br>ç¯å¢ƒå˜é‡æ–‡ä»¶</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> default &#123;</span><br><span class="line">  baseUrl: process.env.VUE_APP_URL,</span><br><span class="line">  mockUrl: process.env.VUE_APP_MOCK_URL,</span><br><span class="line">  mode: process.env.VUE_APP_MODE,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>é…ç½® <code>axios</code> ç„¶åå¼€å‘çš„æ—¶å€™å¯ä»¥é€šè¿‡ <code>isMock</code> å‚æ•°åŠ¨æ€æ›´æ–°ï¼ˆå› ä¸º <code>axios</code> ä¸æ¶‰åŠéƒ¨ç½² <code>webpack</code> æ˜¯ä¼šçƒ­æ›´æ–°çš„ï¼‰</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ˜¯å¦å¼€å¯mock</span></span><br><span class="line"><span class="keyword">const</span> isMock = <span class="literal">false</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">request</span>(<span class="params">axiosConfig: AxiosRequestConfig</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> service = axios.create(&#123;</span><br><span class="line">    <span class="attr">baseURL</span>: isMock &amp;&amp; config.mode === <span class="string">&quot;mock&quot;</span> ? config.mockUrl : config.baseUrl, <span class="comment">// env</span></span><br><span class="line">    <span class="comment">// è¯·çœ‹vue.config.js çš„devserver.proxy</span></span><br><span class="line">    <span class="comment">// baseURL: &quot;/api&quot;, // env</span></span><br><span class="line">    <span class="attr">timeout</span>: <span class="number">50000</span>,</span><br><span class="line">  &#125;);</span><br><span class="line">  ...</span><br></pre></td></tr></table></figure><p>ä¸Šè¿°æ–¹å¼å¯ä»¥è¾¾åˆ°æœ¬åœ°å¼€å‘å’Œ <code>mock</code> ç¯å¢ƒå…±å­˜ï¼Œé€šè¿‡ä¿®æ”¹å‚æ•°åŠ¨æ€æ³¨å…¥ <code>mock</code><br>æœåŠ¡è½¬å‘ï¼ˆä¸æ¨èï¼‰ å› ä¸ºä¸èƒ½åŠ¨æ€æ›´æ–° é™¤éç”¨æ’ä»¶</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = defineConfig(&#123;</span><br><span class="line">  <span class="attr">devServer</span>: &#123;</span><br><span class="line">    <span class="attr">proxy</span>: &#123;</span><br><span class="line">      <span class="string">&quot;/mock&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">target</span>: process.env.VUE_APP_URL, <span class="comment">//è½¬å‘åœ°å€</span></span><br><span class="line">        <span class="attr">changeOrigin</span>: <span class="literal">true</span>, <span class="comment">// è·¨åŸŸæ”¯æŒ</span></span><br><span class="line">        <span class="attr">secure</span>: <span class="literal">false</span>, <span class="comment">//å¯é€‰ é»˜è®¤å¯¹äºæ²¡è¯ä¹¦çš„httpsä¼šæ‹¦æˆª</span></span><br><span class="line">        <span class="attr">pathRewrite</span>: &#123;</span><br><span class="line">          <span class="comment">// é‡å†™è·¯å¾„åçš„å†…å®¹</span></span><br><span class="line">          <span class="string">&quot;^/mock&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="é«˜çº§-mock"><a href="#é«˜çº§-mock" class="headerlink" title="é«˜çº§ mock"></a>é«˜çº§ mock</h2><h3 id="æœŸæœ›"><a href="#æœŸæœ›" class="headerlink" title="æœŸæœ›"></a>æœŸæœ›</h3><p>ç±»ä¼¼äºé€šè¿‡å…¥å‚å‡ºå‚å†³å®šæ•°æ® å‰ç«¯å¯ä»¥è‡ªå·± <code>diy</code> æ•°æ®<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20230311235418.png" alt=""><br>æ³¨æ„ï¼ å¦‚æœæœ‰è„šæœ¬ ä¼šå…ˆèµ°è„šæœ¬ åèµ°æœŸæœ› å¦‚æœæœ‰æœŸæœ› åˆ™æ»¡è¶³æ¡ä»¶ä¼šèµ°æœŸæœ›</p><h3 id="è„šæœ¬"><a href="#è„šæœ¬" class="headerlink" title="è„šæœ¬"></a>è„šæœ¬</h3><p>æœŸæœ›çš„é«˜çº§ç‰ˆæœ¬ï¼Œç›¸å½“äºå‰ç«¯è‡ªå·±å†™ <code>mock</code> æ•°æ®ï¼Œæœ‰ä¸€äº› <code>apifox</code> è‡ªå¸¦çš„è¯­æ³•<br><a href="https://www.apifox.cn/help/app/mock/mock-custom-scripts/#%E7%A4%BA%E4%BE%8B%E4%BA%8C">https://www.apifox.cn/help/app/mock/mock-custom-scripts/#%E7%A4%BA%E4%BE%8B%E4%BA%8C</a></p><p>ç»“è®º<br>å¯¹æ¯”ä¸¤ç§å·¥å…·<br>Apifoxï¼ˆæ¨èï¼‰</p><ul><li>ä¼˜åŠ¿ï¼š<ul><li>å­¦ä¹ æˆæœ¬ä½ï¼Œä¸”æ‰€æœ‰æ•°æ®éƒ½æœ‰è‡ªå¸¦çš„ <code>mock</code></li><li>åŸºäº <code>mockjs</code> åœ¨å·¥å…·ä¸Šç›´æ¥ <code>mock</code> åœ¨å·¥å…·ä¸Šé€šè¿‡æœŸæœ›è‡ªå®šä¹‰ <code>mock</code> åœ¨å·¥å…·ä¸Šé€šè¿‡è„šæœ¬è‡ªå®šä¹‰ <code>mock</code></li></ul></li><li>åŠ£åŠ¿ï¼š<ul><li>å¦‚æœéœ€è¦ä¸€äº›è‡ªå®šä¹‰çš„æƒ…å†µ è¿˜æ˜¯è¦å­¦ä¹  <code>mockjs</code></li></ul></li><li>å¦‚æœé‡‡ç”¨äº† <code>Apifox</code> çš„ <code>mock</code><ul><li>ä½¿ç”¨ <code>apifox</code> çš„ <code>mock</code> åˆ™ éœ€è¦å¼€å¯ <code>apifox</code></li><li>å¦‚æœé€šè¿‡æœåŠ¡è½¬å‘/ç¯å¢ƒçš„æ–¹å¼ åˆ™å‰ç«¯éœ€è¦åŒºåˆ† <code>mock</code> ç¯å¢ƒå’Œå¼€å‘ç¯å¢ƒ<br>Mockjs</li></ul></li><li>ä¼˜åŠ¿ï¼š<ul><li>çº¯ <code>js</code> çº¯è‡ªå·±é€ æ•°æ® è‡ªç”±åº¦é«˜ä¸€ç‚¹</li></ul></li><li>åŠ£åŠ¿ï¼š<ul><li>è‡ªå¸¦çš„æ‹¦æˆªæœåŠ¡æœ‰æ—¶å€™ä¼šé€ æˆ <code>bug</code></li><li>å› ä¸ºæ–‡æ¡£çš„åŸå› è„±ç¦»ä¸å¼€ <code>apifox</code></li></ul></li><li>å¦‚æœé‡‡ç”¨ <code>mockjs</code><ul><li><code>mockjs</code> é€‚åˆäº åªéœ€è¦éƒ¨åˆ†æ¥å£ <code>mock</code> çš„æƒ…å†µ</li><li>å‰ç«¯çš„æœ¬åœ°å¼€å‘ç¯å¢ƒéƒ½æ˜¯ <code>mock</code> ç¯å¢ƒäº† å› ä¸ºå®ƒè‡ªå¸¦äº†æ‹¦æˆª</li></ul></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="å‰ç«¯è¿›é˜¶" scheme="https://zlinni.github.io/categories/%E5%89%8D%E7%AB%AF%E8%BF%9B%E9%98%B6/"/>
    
    
    <category term="å‰ç«¯" scheme="https://zlinni.github.io/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="Mock" scheme="https://zlinni.github.io/tags/Mock/"/>
    
  </entry>
  
  <entry>
    <title>è®°å½•ä¸€æ¬¡histroyæ¨¡å¼çš„vueé¡¹ç›®éƒ¨ç½²åˆ°githubpage</title>
    <link href="https://zlinni.github.io/posts/1946841451/"/>
    <id>https://zlinni.github.io/posts/1946841451/</id>
    <published>2023-03-11T12:19:53.000Z</published>
    <updated>2023-03-11T15:59:13.268Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>historyæ¨¡å¼éƒ¨ç½² éœ€è¦æ³¨æ„çš„ä¸œè¥¿ å¦‚ä¸‹ï¼š</p><h1 id="histroyæ¨¡å¼åŠ è½½baseUrl"><a href="#histroyæ¨¡å¼åŠ è½½baseUrl" class="headerlink" title="histroyæ¨¡å¼åŠ è½½baseUrl"></a>histroyæ¨¡å¼åŠ è½½baseUrl</h1><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20230311202107.png" alt=""></p><h1 id="æ‰“åŒ…åŒæ ·-å‰ç¼€æ˜¯baseUrl"><a href="#æ‰“åŒ…åŒæ ·-å‰ç¼€æ˜¯baseUrl" class="headerlink" title="æ‰“åŒ…åŒæ · å‰ç¼€æ˜¯baseUrl"></a>æ‰“åŒ…åŒæ · å‰ç¼€æ˜¯baseUrl</h1><p><code>vue.config.js</code><br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20230311202138.png" alt=""></p><h1 id="å°†distæ–‡ä»¶å¤¹ä¸‹çš„ä¸œè¥¿æäº¤åˆ°gh-pages"><a href="#å°†distæ–‡ä»¶å¤¹ä¸‹çš„ä¸œè¥¿æäº¤åˆ°gh-pages" class="headerlink" title="å°†distæ–‡ä»¶å¤¹ä¸‹çš„ä¸œè¥¿æäº¤åˆ°gh-pages"></a>å°†distæ–‡ä»¶å¤¹ä¸‹çš„ä¸œè¥¿æäº¤åˆ°gh-pages</h1><p>æŒ‡ä»¤<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git subtree push --prefix dist origin gh-pages</span><br></pre></td></tr></table></figure><br>æ•ˆæœ<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20230311202213.png" alt=""></p><h1 id="éƒ¨ç½²"><a href="#éƒ¨ç½²" class="headerlink" title="éƒ¨ç½²"></a>éƒ¨ç½²</h1><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20230311202226.png" alt=""></p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="Vueç³»åˆ—" scheme="https://zlinni.github.io/categories/Vue%E7%B3%BB%E5%88%97/"/>
    
    
    <category term="Vue" scheme="https://zlinni.github.io/tags/Vue/"/>
    
  </entry>
  
  <entry>
    <title>microappå¾®å‰ç«¯å®è·µ</title>
    <link href="https://zlinni.github.io/posts/96411472/"/>
    <id>https://zlinni.github.io/posts/96411472/</id>
    <published>2023-03-11T12:19:53.000Z</published>
    <updated>2023-03-11T15:59:13.277Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>åŸºäº <code>microapp</code> çš„å¾®å‰ç«¯å®æ“</p><h1 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h1><p><code>microapp</code> éœ€è¦åŸºåº§é¡¹ç›®+è‹¥å¹²å­é¡¹ç›®è¿™é‡Œä»¥å¦‚ä¸‹ä¸‰ä¸ªé¡¹ç›®ä¸ºä¾‹å­</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vue create base</span><br><span class="line">vue create first_child</span><br><span class="line">vue create second_child</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20230311203838.png" alt=""><br>Cd åˆ°åŸºåº§é¡¹ç›® å®‰è£… <code>microapp</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm install @micro-zoe/micro-app --save</span><br></pre></td></tr></table></figure><p>åœ¨åŸºåº§ä¸­çš„ <code>main.ts</code> ä¸­å¼•å…¥</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">&quot;./App.vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&quot;./router&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> microApp <span class="keyword">from</span> <span class="string">&quot;@micro-zoe/micro-app&quot;</span>;</span><br><span class="line">microApp.start(&#123;</span><br><span class="line">  <span class="comment">// microAppç”Ÿå‘½å‘¨æœŸ</span></span><br><span class="line">  <span class="attr">lifeCycles</span>: &#123;</span><br><span class="line">    <span class="function"><span class="title">created</span>(<span class="params">e</span>)</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&quot;created&quot;</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">beforemount</span>(<span class="params">e</span>)</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&quot;beforemount&quot;</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">mounted</span>(<span class="params">e</span>)</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&quot;mounted&quot;</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">unmount</span>(<span class="params">e</span>)</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&quot;unmount&quot;</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">error</span>(<span class="params">e</span>)</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&quot;error&quot;</span>, e);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">createApp(App).use(router).mount(<span class="string">&quot;#app&quot;</span>);</span><br></pre></td></tr></table></figure><h1 id="æ¨¡å¼"><a href="#æ¨¡å¼" class="headerlink" title="æ¨¡å¼"></a>æ¨¡å¼</h1><p><code>microapp</code> æ”¯æŒå¦‚ä¸‹çš„è·¯ç”±æ¨¡å¼<br>åŸºåº§åº”ç”¨æ˜¯ <code>hash</code> çš„è¯ å­åº”ç”¨å¿…é¡»æ˜¯ <code>hash</code><br>åŸºåº§åº”ç”¨æ˜¯ <code>history</code> çš„è¯ å­åº”ç”¨æ˜¯ <code>history</code> æˆ–è€… <code>hash</code></p><p>æˆ‘è¿™è¾¹çš„é…ç½®æ˜¯åŸºåº§ <code>histroy</code> å­å¼•ç”¨ <code>hash</code><br>æ‰€ä»¥å…ˆæ”¹ä¸€ä¸‹åŸºåº§çš„é…ç½®</p><h2 id="åŸºåº§-history-æ¨¡å¼çš„é…ç½®"><a href="#åŸºåº§-history-æ¨¡å¼çš„é…ç½®" class="headerlink" title="åŸºåº§ history æ¨¡å¼çš„é…ç½®"></a>åŸºåº§ history æ¨¡å¼çš„é…ç½®</h2><p><code>router.ts</code>ä¸­ä¿®æ”¹</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = createRouter(&#123;</span><br><span class="line">  <span class="comment">// history: createWebHashHistory(),</span></span><br><span class="line">  <span class="attr">history</span>: createWebHistory(<span class="string">&quot;/base&quot;</span>),</span><br><span class="line">  routes,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><code>vue.config.js</code> ä¸­ä¿®æ”¹</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="attr">publicPath</span>: <span class="string">&quot;/base&quot;</span>, <span class="comment">// ä¸»è¦æ˜¯è¿™ä¸ªé…ç½®</span></span><br><span class="line">  <span class="attr">devServer</span>: &#123;</span><br><span class="line">    <span class="attr">host</span>: <span class="string">&quot;localhost&quot;</span>,</span><br><span class="line">    <span class="attr">port</span>: <span class="number">3000</span>,</span><br><span class="line">    <span class="attr">headers</span>: &#123;</span><br><span class="line">      <span class="string">&quot;Access-Control-Allow-Origin&quot;</span>: <span class="string">&quot;*&quot;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>å­é¡¹ç›®ç”±äº <code>vue</code> åˆå§‹åŒ–çš„æ—¶å€™å°±æ˜¯é»˜è®¤çš„ <code>hash</code> æ‰€ä»¥å°±ä¸æ”¹äº†</p><h2 id="åŸºåº§è·¯ç”±é…ç½®"><a href="#åŸºåº§è·¯ç”±é…ç½®" class="headerlink" title="åŸºåº§è·¯ç”±é…ç½®"></a>åŸºåº§è·¯ç”±é…ç½®</h2><p><code>router.ts</code></p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  createRouter,</span><br><span class="line">  <span class="comment">// createWebHashHistory,</span></span><br><span class="line">  createWebHistory,</span><br><span class="line">  RouteRecordRaw,</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&quot;vue-router&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> HomeView <span class="keyword">from</span> <span class="string">&quot;../views/HomeView.vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> routes: <span class="built_in">Array</span>&lt;RouteRecordRaw&gt; = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&quot;/&quot;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;home&quot;</span>,</span><br><span class="line">    <span class="attr">component</span>: HomeView,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&quot;/micro-app1/*&quot;</span>, <span class="comment">// è¿™é‡Œå¯¹åº”ç€microçš„ç»„ä»¶ä¸­çš„baseroute</span></span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;child1&quot;</span>, <span class="comment">// è¿™é‡Œå¯¹åº”ç€microç»„ä»¶ä¸­çš„name</span></span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&quot;@/views/app_first.vue&quot;</span>),</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&quot;/micro-app2/*&quot;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;child2&quot;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&quot;@/views/app_second.vue&quot;</span>),</span><br><span class="line">  &#125;,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = createRouter(&#123;</span><br><span class="line">  <span class="comment">// history: createWebHashHistory(),</span></span><br><span class="line">  <span class="attr">history</span>: createWebHistory(<span class="string">&quot;/base&quot;</span>),</span><br><span class="line">  routes,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router;</span><br></pre></td></tr></table></figure><p>åˆ›å»ºå­é¡¹ç›® <code>vue app_first.vue</code> ä¿è¯ <code>name</code> å’Œ <code>baseroute</code> å¯¹åº” ä¸”å…¶ä¸­çš„ <code>url</code> æ˜¯å­é¡¹ç›®å¯åŠ¨åœ°å€<br>ï¼ˆç”±äºåŸºåº§æ˜¯ <code>history</code> å­é¡¹ç›®æ˜¯ <code>hash</code> æ‰€ä»¥ç»„ä»¶ä¸éœ€è¦è®¾ç½® <code>baserouteï¼‰</code><br><code>url</code> å±æ€§ <code>html</code> åœ°å€ ä½œç”¨æ˜¯åŠ è½½ <code>html</code> èµ„æº</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;micro-app name=&quot;child1&quot; url=&quot;http://localhost:1111/&quot;&gt;&lt;/micro-app&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>app_second.vue</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;micro-app name=&quot;child2&quot; url=&quot;http://localhost:1112/&quot;&gt;&lt;/micro-app&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="åŸºåº§-app-vue"><a href="#åŸºåº§-app-vue" class="headerlink" title="åŸºåº§ app.vue"></a>åŸºåº§ app.vue</h2><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">app_first</span>&gt;</span><span class="tag">&lt;/<span class="name">app_first</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;app_second&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">app_second</span>&gt;</span><span class="tag">&lt;/<span class="name">app_second</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="javascript"></span></span></span><br><span class="line"><span class="javascript"><span class="xml"><span class="keyword">import</span> app_first <span class="keyword">from</span> <span class="string">&quot;@/views/app_first.vue&quot;</span>;</span></span></span><br><span class="line"><span class="javascript"><span class="xml"><span class="keyword">import</span> app_second <span class="keyword">from</span> <span class="string">&quot;@/views/app_second.vue&quot;</span>;</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">&quot;scss&quot;</span>&gt;</span><span class="css"></span></span></span><br><span class="line"><span class="css"><span class="xml"><span class="selector-id">#app</span> &#123;</span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="attribute">font-family</span>: Avenir, Helvetica, Arial, sans-serif;</span></span></span><br><span class="line"><span class="css"><span class="xml">  -webkit-<span class="attribute">font-smoothing</span>: antialiased;</span></span></span><br><span class="line"><span class="css"><span class="xml">  -moz-osx-<span class="attribute">font-smoothing</span>: grayscale;</span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="attribute">text-align</span>: center;</span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="attribute">color</span>: <span class="number">#2c3e50</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">&#125;</span></span></span><br><span class="line"><span class="css"><span class="xml"></span></span></span><br><span class="line"><span class="css"><span class="xml"><span class="selector-tag">nav</span> &#123;</span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="attribute">padding</span>: <span class="number">30px</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml"></span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="selector-tag">a</span> &#123;</span></span></span><br><span class="line"><span class="css"><span class="xml">    <span class="attribute">font-weight</span>: bold;</span></span></span><br><span class="line"><span class="css"><span class="xml">    <span class="attribute">color</span>: <span class="number">#2c3e50</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml"></span></span></span><br><span class="line"><span class="css"><span class="xml">    &amp;<span class="selector-class">.router-link-exact-active</span> &#123;</span></span></span><br><span class="line"><span class="css"><span class="xml">      <span class="attribute">color</span>: <span class="number">#42b983</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">    &#125;</span></span></span><br><span class="line"><span class="css"><span class="xml">  &#125;</span></span></span><br><span class="line"><span class="css"><span class="xml">&#125;</span></span></span><br><span class="line"><span class="css"><span class="xml"><span class="selector-class">.app_second</span> &#123;</span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="attribute">width</span>: <span class="number">100px</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="attribute">height</span>: <span class="number">400px</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">&#125;</span></span></span><br><span class="line"><span class="css"><span class="xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br></pre></td></tr></table></figure><h1 id="å­é¡¹ç›®é…ç½®"><a href="#å­é¡¹ç›®é…ç½®" class="headerlink" title="å­é¡¹ç›®é…ç½®"></a>å­é¡¹ç›®é…ç½®</h1><h2 id="é…ç½®è·¨åŸŸ-å’Œ-port"><a href="#é…ç½®è·¨åŸŸ-å’Œ-port" class="headerlink" title="é…ç½®è·¨åŸŸ å’Œ port"></a>é…ç½®è·¨åŸŸ å’Œ port</h2><p>å­é¡¹ç›® 1 ç«¯å£æ˜¯ 1111 å­é¡¹ç›® 2 ç«¯å£æˆ‘å†™äº† 1112</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="comment">// publicPath: &quot;/micro-app1&quot;,</span></span><br><span class="line">  <span class="attr">devServer</span>: &#123;</span><br><span class="line">    <span class="attr">host</span>: <span class="string">&quot;localhost&quot;</span>,</span><br><span class="line">    <span class="attr">port</span>: <span class="number">1111</span>,</span><br><span class="line">    <span class="attr">headers</span>: &#123;</span><br><span class="line">      <span class="string">&quot;Access-Control-Allow-Origin&quot;</span>: <span class="string">&quot;*&quot;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="app-vue"><a href="#app-vue" class="headerlink" title="app.vue"></a>app.vue</h2><p>å­é¡¹ç›®éšä¾¿åœ¨ <code>app.vue</code> ä¸­å†™ç‚¹ä¸œè¥¿</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;nav&gt;è¿™ä¸ªæ˜¯ç¬¬ä¸€ä¸ªapp&lt;/nav&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;scss&quot;&gt;</span><br><span class="line">#app &#123;</span><br><span class="line">  font-family: Avenir, Helvetica, Arial, sans-serif;</span><br><span class="line">  -webkit-font-smoothing: antialiased;</span><br><span class="line">  -moz-osx-font-smoothing: grayscale;</span><br><span class="line">  text-align: center;</span><br><span class="line">  color: #2c3e50;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">nav &#123;</span><br><span class="line">  padding: 30px;</span><br><span class="line"></span><br><span class="line">  a &#123;</span><br><span class="line">    font-weight: bold;</span><br><span class="line">    color: #2c3e50;</span><br><span class="line"></span><br><span class="line">    &amp;.router-link-exact-active &#123;</span><br><span class="line">      color: #42b983;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><p>ç¬¬äºŒä¸ª</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;nav&gt;è¿™ä¸ªæ˜¯ç¬¬äºŒä¸ªapp&lt;/nav&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;scss&quot;&gt;</span><br><span class="line">#app &#123;</span><br><span class="line">  font-family: Avenir, Helvetica, Arial, sans-serif;</span><br><span class="line">  -webkit-font-smoothing: antialiased;</span><br><span class="line">  -moz-osx-font-smoothing: grayscale;</span><br><span class="line">  text-align: center;</span><br><span class="line">  color: #2c3e50;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">nav &#123;</span><br><span class="line">  padding: 30px;</span><br><span class="line"></span><br><span class="line">  a &#123;</span><br><span class="line">    font-weight: bold;</span><br><span class="line">    color: #2c3e50;</span><br><span class="line"></span><br><span class="line">    &amp;.router-link-exact-active &#123;</span><br><span class="line">      color: #42b983;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><h1 id="å¯åŠ¨"><a href="#å¯åŠ¨" class="headerlink" title="å¯åŠ¨"></a>å¯åŠ¨</h1><p>å¦‚æœä¸æ˜¯æ¨¡å—ç©ºé—´çš„è¯ï¼Œå°±æ‰‹åŠ¨å¯åŠ¨ä¸‰ä¸ªé¡¹ç›®å§</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm run serve</span><br></pre></td></tr></table></figure><p>å‡ºç°çš„ç•Œé¢å¦‚ä¸‹ åˆ™æˆåŠŸ<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20230311204446.png" alt=""></p><h1 id="åº”ç”¨é—´è·³è½¬"><a href="#åº”ç”¨é—´è·³è½¬" class="headerlink" title="åº”ç”¨é—´è·³è½¬"></a>åº”ç”¨é—´è·³è½¬</h1><h2 id="åŸºåº§æ§åˆ¶å­åº”ç”¨è·³è½¬"><a href="#åŸºåº§æ§åˆ¶å­åº”ç”¨è·³è½¬" class="headerlink" title="åŸºåº§æ§åˆ¶å­åº”ç”¨è·³è½¬"></a>åŸºåº§æ§åˆ¶å­åº”ç”¨è·³è½¬</h2><p>åŸç†æ˜¯<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20230311204511.png" alt=""></p><p>æ³¨æ„äº‹é¡¹ï¼šå¦‚æœä¸¤ä¸ªå­åº”ç”¨çš„ <code>path</code> æ˜¯ä¸€æ ·çš„ è™½ç„¶ <code>setdata</code> ä¼šè§¦å‘ç›¸åº”çš„é¡µé¢è·³è½¬ï¼Œä½†æ˜¯ç›´æ¥åœ¨ç½‘å€ä¸Šè·³è½¬çš„è¯ä¸¤ä¸ªå­åº”ç”¨éƒ½ä¼šè¢«è§¦å‘</p><h3 id="å­é¡¹ç›®-1-é…ç½®"><a href="#å­é¡¹ç›®-1-é…ç½®" class="headerlink" title="å­é¡¹ç›® 1 é…ç½®"></a>å­é¡¹ç›® 1 é…ç½®</h3><p>App.vue</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;è¿™ä¸ªæ˜¯ç¬¬ä¸€ä¸ªapp&lt;/div&gt;</span><br><span class="line">  &lt;RouterView&gt;&lt;/RouterView&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; useRouter &#125; from &quot;vue-router&quot;;</span><br><span class="line"></span><br><span class="line">const router = useRouter();</span><br><span class="line">// ç›‘å¬åŸºåº§ä¸‹å‘çš„æ•°æ®å˜åŒ–</span><br><span class="line">if (window?.microApp?.addDataListener) &#123;</span><br><span class="line">  window.microApp.addDataListener((data: any) =&gt; &#123;</span><br><span class="line">    console.log(data.path, &quot;datapath&quot;);</span><br><span class="line">    // å½“åŸºåº§ä¸‹å‘è·³è½¬æŒ‡ä»¤æ—¶è¿›è¡Œè·³è½¬</span><br><span class="line">    if (data.path) &#123;</span><br><span class="line">      router.push(data.path);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>å­é¡¹ç›® 1 çš„æµ‹è¯•è·³è½¬é¡µé¢ä¸ºè‡ªå¸¦çš„ <code>about</code> é¡µ<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20230311204607.png" alt=""></p><h3 id="å­é¡¹ç›®-2-é…ç½®"><a href="#å­é¡¹ç›®-2-é…ç½®" class="headerlink" title="å­é¡¹ç›® 2 é…ç½®"></a>å­é¡¹ç›® 2 é…ç½®</h3><p><code>App.vue</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;è¿™ä¸ªæ˜¯ç¬¬äºŒä¸ªapp&lt;/div&gt;</span><br><span class="line">  &lt;RouterView&gt;&lt;/RouterView&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; useRouter &#125; from &quot;vue-router&quot;;</span><br><span class="line"></span><br><span class="line">const router = useRouter();</span><br><span class="line">// ç›‘å¬åŸºåº§ä¸‹å‘çš„æ•°æ®å˜åŒ–</span><br><span class="line">if (window?.microApp?.addDataListener) &#123;</span><br><span class="line">  window.microApp.addDataListener((data: any) =&gt; &#123;</span><br><span class="line">    console.log(data.path, &quot;datapath&quot;);</span><br><span class="line">    // å½“åŸºåº§ä¸‹å‘è·³è½¬æŒ‡ä»¤æ—¶è¿›è¡Œè·³è½¬</span><br><span class="line">    if (data.path) &#123;</span><br><span class="line">      router.push(data.path);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>å­é¡¹ç›® 2 çš„æµ‹è¯•è·³è½¬é¡µé¢åŒæ ·ä¸ºè‡ªå¸¦çš„ <code>about</code> é¡µ ä½†æ˜¯ <code>path</code> è¦å†™ä¸ä¸€æ ·<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20230311204644.png" alt=""></p><h3 id="ä¸»é¡¹ç›®-base-é…ç½®"><a href="#ä¸»é¡¹ç›®-base-é…ç½®" class="headerlink" title="ä¸»é¡¹ç›® base é…ç½®"></a>ä¸»é¡¹ç›® base é…ç½®</h3><p><code>App.vue</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;app_first&gt;&lt;/app_first&gt;</span><br><span class="line">    &lt;div class=&quot;app_second&quot;&gt;</span><br><span class="line">      &lt;app_second&gt;&lt;/app_second&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;button @click=&quot;routeToProject(&#x27;child1&#x27;)&quot;&gt;è·³è½¬é¡¹ç›®1&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;routeToProject(&#x27;child2&#x27;)&quot;&gt;è·³è½¬é¡¹ç›®2&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import microApp from &quot;@micro-zoe/micro-app&quot;;</span><br><span class="line">import app_first from &quot;@/views/app_first.vue&quot;;</span><br><span class="line">import app_second from &quot;@/views/app_second.vue&quot;;</span><br><span class="line">type routerType = &quot;child1&quot; | &quot;child2&quot;;</span><br><span class="line">const routeToProject = (type: routerType) =&gt; &#123;</span><br><span class="line">  console.log(type, &quot;type&quot;);</span><br><span class="line">  const typeMapper = &#123;</span><br><span class="line">    child1: &quot;/about/&quot;,</span><br><span class="line">    child2: &quot;/about2/&quot;,</span><br><span class="line">  &#125;;</span><br><span class="line">  microApp.setData(type, &#123; path: typeMapper[type] &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style lang=&quot;scss&quot;&gt;</span><br><span class="line">#app &#123;</span><br><span class="line">  font-family: Avenir, Helvetica, Arial, sans-serif;</span><br><span class="line">  -webkit-font-smoothing: antialiased;</span><br><span class="line">  -moz-osx-font-smoothing: grayscale;</span><br><span class="line">  text-align: center;</span><br><span class="line">  color: #2c3e50;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">nav &#123;</span><br><span class="line">  padding: 30px;</span><br><span class="line"></span><br><span class="line">  a &#123;</span><br><span class="line">    font-weight: bold;</span><br><span class="line">    color: #2c3e50;</span><br><span class="line"></span><br><span class="line">    &amp;.router-link-exact-active &#123;</span><br><span class="line">      color: #42b983;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">.app_second &#123;</span><br><span class="line">  width: 100px;</span><br><span class="line">  height: 400px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><h3 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h3><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20230311204744.png" alt=""></p><p>è·³è½¬é¡¹ç›® 1<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20230311204754.png" alt=""><br>è·³è½¬é¡¹ç›® 2<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20230311204832.png" alt=""><br>æ³¨æ„ï¼šæˆ‘ä»¬å‘ç°è·³è½¬çš„æ—¶å€™ <code>url</code> å˜äº†ï¼Œä½†æ˜¯è·³è½¬çš„è¿‡ç¨‹ä¸­å¹¶æ²¡æœ‰é‡ç½®ä¹‹å‰é¡¹ç›® 1 çš„çŠ¶æ€ï¼Œä¹Ÿå°±æ˜¯é¡¹ç›® 1 çš„çŠ¶æ€ä»ç„¶è¢«ä¿ç•™äº†ä¸‹æ¥<br>æˆ‘ä»¬è¯•ç€åˆ·æ–°é¡µé¢<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20230311204848.png" alt=""><br>å‘ç°æ­¤æ—¶å­é¡¹ç›® 1 çš„çŠ¶æ€æ‰è¢«é‡ç½®ã€‚<br>è§£å†³æ–¹æ³•ä¹Ÿå¾ˆç®€å• ç»™ <code>routerToProject</code> æ–¹æ³•æä¾›ä¸€ä¸ªè¿˜åŸå…¶ä»–é¡µé¢çŠ¶æ€çš„æ“ä½œå°± ok äº† è¿™é‡Œå°±ä¸å†™äº†</p><h2 id="å­åº”ç”¨æ§åˆ¶åŸºåº§è·³è½¬"><a href="#å­åº”ç”¨æ§åˆ¶åŸºåº§è·³è½¬" class="headerlink" title="å­åº”ç”¨æ§åˆ¶åŸºåº§è·³è½¬"></a>å­åº”ç”¨æ§åˆ¶åŸºåº§è·³è½¬</h2><p>å¦‚æœæœ‰åŸºåº§æ§åˆ¶å­åº”ç”¨è·³è½¬ é‚£ä¹ˆè‡ªç„¶æœ‰å­åº”ç”¨æ§åˆ¶åŸºåº§è·³è½¬<br>åŸç†æ˜¯åˆ©ç”¨äº†å›è°ƒå‡½æ•°çš„å†™æ³• ç»™å­é¡¹ç›®ä¼ é€’ä¸€ä¸ªå›è°ƒå‡½æ•°å»è§¦å‘<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20230311213847.png" alt=""></p><h3 id="bug-æ¢è®¨"><a href="#bug-æ¢è®¨" class="headerlink" title="bug æ¢è®¨"></a>bug æ¢è®¨</h3><p>åœ¨ä½¿ç”¨äº†ä¸Šè¿°æ–¹æ³• æµç¨‹æ˜¯ <code>base</code> é¡¹ç›®è§¦å‘è·³è½¬å­é¡¹ç›® 1ï¼Œå­é¡¹ç›® 1 æä¾›æŒ‰é’®å›é€€åˆ° <code>base</code> é¡¹ç›®<br>æ­¤æ—¶æ‹¿ä¸åˆ° <code>pushState</code> æˆ–è€…è¯´æ˜¯ <code>window.mircoApp.getData</code> çš„æ•°æ®è¢«åˆ·æ–°äº†<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20230311213905.png" alt=""><br>ä½†æ˜¯åˆå§‹åŒ–çš„æ—¶å€™æ˜¯å­˜åœ¨è¿™ä¸ªå†…å®¹çš„<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20230311213915.png" alt=""><br>æ‰€ä»¥æˆ‘ä»¬å¾—é€šè¿‡ç›‘å¬ä¸‹å‘é€šçŸ¥çš„æ–¹å¼å»è§¦å‘è·³è½¬ï¼Œæˆ–è€…ç›´æ¥é€šè¿‡çŠ¶æ€ç®¡ç†å»å­˜å‚¨åˆæ¬¡çš„çŠ¶æ€ åç»­å°±ç›´æ¥è°ƒç”¨<br><code>pinia</code> ä»£ç  <code>/store/useMicro.ts</code></p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineStore &#125; <span class="keyword">from</span> <span class="string">&quot;pinia&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useMicro = defineStore(<span class="string">&quot;useMicro&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> microData = ref&lt;<span class="built_in">any</span>&gt;(<span class="literal">null</span>);</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    microData,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>å­é¡¹ç›® 1 çš„ <code>App.vue</code> æ­¤æ—¶å°±æ”¶é›†åˆ°äº†åŸºåº§é¡¹ç›®çš„ <code>pushState</code> æ–¹æ³•</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;è¿™ä¸ªæ˜¯ç¬¬ä¸€ä¸ªapp&lt;/div&gt;</span><br><span class="line">  &lt;RouterView&gt;&lt;/RouterView&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; useRouter &#125; from &quot;vue-router&quot;;</span><br><span class="line">import &#123; useMicro &#125; from &quot;@/store/useMicro&quot;;</span><br><span class="line">import &#123; storeToRefs &#125; from &quot;pinia&quot;;</span><br><span class="line">const &#123; microData &#125; = storeToRefs(useMicro());</span><br><span class="line">const router = useRouter();</span><br><span class="line">// ç›‘å¬åŸºåº§ä¸‹å‘çš„æ•°æ®å˜åŒ–</span><br><span class="line">if (window?.microApp?.addDataListener) &#123;</span><br><span class="line">  window.microApp.addDataListener((data: any) =&gt; &#123;</span><br><span class="line">    console.log(data.path, &quot;datapath&quot;);</span><br><span class="line">    // å½“åŸºåº§ä¸‹å‘è·³è½¬æŒ‡ä»¤æ—¶è¿›è¡Œè·³è½¬</span><br><span class="line">    if (data.path) &#123;</span><br><span class="line">      router.push(data.path);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">  microData.value = window.microApp.getData();</span><br><span class="line">  console.log(microData.value, &quot;window.microApp.getData()&quot;);</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>å¯¹åº”é¡µé¢å›è°ƒå‡ºå»</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;about&quot;&gt;</span><br><span class="line">    &lt;h1&gt;This is an about page child1&lt;/h1&gt;</span><br><span class="line">    &lt;button @click=&quot;routeToBaseProject&quot;&gt;åŸºåº§è·³è½¬å›é¦–é¡µ&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup&gt;</span><br><span class="line">// import &#123; nextTick &#125; from &quot;vue&quot;;</span><br><span class="line">import &#123; useMicro &#125; from &quot;@/store/useMicro&quot;;</span><br><span class="line">import &#123; storeToRefs &#125; from &quot;pinia&quot;;</span><br><span class="line">const &#123; microData &#125; = storeToRefs(useMicro());</span><br><span class="line">const routeToBaseProject = () =&gt; &#123;</span><br><span class="line">  // nextTick(() =&gt; &#123;</span><br><span class="line">  if (window?.microApp?.getData) &#123;</span><br><span class="line">    console.log(window.microApp.getData(), &quot;window.microApp&quot;);</span><br><span class="line">    // window.microApp.getData().pushState(&quot;/&quot;);</span><br><span class="line">  &#125;</span><br><span class="line">  console.log(microData.value, &quot;microData.value&quot;);</span><br><span class="line">  microData.value.pushState(&quot;/baseTest&quot;);</span><br><span class="line">  // &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h1 id="å¤šé¡¹ç›®å¯åŠ¨"><a href="#å¤šé¡¹ç›®å¯åŠ¨" class="headerlink" title="å¤šé¡¹ç›®å¯åŠ¨"></a>å¤šé¡¹ç›®å¯åŠ¨</h1><p>ä¸€èˆ¬æ¥è¯´ <code>npm</code> ä¸æ”¯æŒå¹³è¡Œå¯åŠ¨å¤šä¸ªé¡¹ç›®ï¼Œå‚è€ƒäº† <code>microapp</code> ä»“åº“ï¼Œä»–çš„ <code>packagejson</code> é‡Œé¢æœ‰å¦‚ä¸‹çš„ä¸œè¥¿<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20230311232951.png" alt=""><br>å°†å­é¡¹ç›®å’Œä¸»é¡¹ç›®åˆ†å¼€ ç„¶åé€šè¿‡ä¸€ä¸ª <code>run-all</code> çš„å‘½ä»¤å»å…¨éƒ¨æ‰§è¡Œ<br>äºæ˜¯æ‰¾åˆ°äº†å¯¹åº”çš„ <code>npm</code> ä»“åº“</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm install npm-run-all --save-dev</span><br></pre></td></tr></table></figure><p>ä»é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆå§‹åŒ–ä¸€ä¸ª <code>packagejson</code><br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20230311233029.png" alt=""></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line"><span class="string">&quot;test&quot;</span>: <span class="string">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span>,</span><br><span class="line"><span class="string">&quot;dev-child:child1&quot;</span>: <span class="string">&quot;cd first_child &amp;&amp; pnpm run serve&quot;</span>,</span><br><span class="line"><span class="string">&quot;dev-child:child2&quot;</span>: <span class="string">&quot;cd second_child &amp;&amp; pnpm run serve&quot;</span>,</span><br><span class="line"><span class="string">&quot;dev-main:base&quot;</span>: <span class="string">&quot;cd base &amp;&amp; pnpm run serve&quot;</span>,</span><br><span class="line"><span class="string">&quot;dev-main&quot;</span>: <span class="string">&quot;npm-run-all --parallel dev-main:base dev-child:_&quot;</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p>ç»“æœï¼š<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20230311233056.png" alt=""></p><h1 id="å¤šé¡¹ç›®æ‰“åŒ…"><a href="#å¤šé¡¹ç›®æ‰“åŒ…" class="headerlink" title="å¤šé¡¹ç›®æ‰“åŒ…"></a>å¤šé¡¹ç›®æ‰“åŒ…</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"><span class="string">&quot;build-main:base&quot;</span>:<span class="string">&quot;cd base &amp;&amp; pnpm run build&quot;</span>,</span><br><span class="line"><span class="string">&quot;build-child:child1&quot;</span>:<span class="string">&quot;cd first_child &amp;&amp; pnpm run build&quot;</span>,</span><br><span class="line"><span class="string">&quot;build-child:child2&quot;</span>:<span class="string">&quot;cd second_child &amp;&amp; pnpm run build&quot;</span>,</span><br><span class="line"><span class="string">&quot;build-main&quot;</span>:<span class="string">&quot;npm-run-all --parallel build-main:base build-child:_&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="éƒ¨ç½²é¡¹ç›®-æœ¬åœ°-docker"><a href="#éƒ¨ç½²é¡¹ç›®-æœ¬åœ°-docker" class="headerlink" title="éƒ¨ç½²é¡¹ç›®(æœ¬åœ° docker"></a>éƒ¨ç½²é¡¹ç›®(æœ¬åœ° docker</h1><p>å…ˆä¿®æ”¹ä¹‹å‰ <code>base</code> é¡¹ç›®çš„ <code>router</code>ï¼Œå› ä¸ºè¿™æ ·æ–¹ä¾¿æˆ‘ä»¬åç»­æ“ä½œï¼Œå°†åŸæ¥å« <code>micro_app1</code> å’Œ 2 çš„è·¯å¾„åˆ†åˆ«æ”¹ä¸ºå­é¡¹ç›®çš„åå­—</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  createRouter,</span><br><span class="line">  <span class="comment">// createWebHashHistory,</span></span><br><span class="line">  createWebHistory,</span><br><span class="line">  RouteRecordRaw,</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&quot;vue-router&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> HomeView <span class="keyword">from</span> <span class="string">&quot;../views/HomeView.vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> routes: <span class="built_in">Array</span>&lt;RouteRecordRaw&gt; = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&quot;/&quot;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;home&quot;</span>,</span><br><span class="line">    <span class="attr">component</span>: HomeView,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&quot;/baseTest&quot;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;baseTest&quot;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&quot;@/views/AboutView.vue&quot;</span>),</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&quot;/first_child/*&quot;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;child1&quot;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&quot;@/views/app_first.vue&quot;</span>),</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&quot;/second_child/*&quot;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;child2&quot;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&quot;@/views/app_second.vue&quot;</span>),</span><br><span class="line">  &#125;,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = createRouter(&#123;</span><br><span class="line">  <span class="comment">// history: createWebHashHistory(),</span></span><br><span class="line">  <span class="attr">history</span>: createWebHistory(<span class="string">&quot;/base&quot;</span>),</span><br><span class="line">  routes,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router;</span><br></pre></td></tr></table></figure><h2 id="Output-dir-é…ç½®æ‰“åŒ…è·¯å¾„ï¼ˆå¯ä»¥ä¸å†™ï¼Œå‚è§-Dockerfileï¼‰"><a href="#Output-dir-é…ç½®æ‰“åŒ…è·¯å¾„ï¼ˆå¯ä»¥ä¸å†™ï¼Œå‚è§-Dockerfileï¼‰" class="headerlink" title="Output dir é…ç½®æ‰“åŒ…è·¯å¾„ï¼ˆå¯ä»¥ä¸å†™ï¼Œå‚è§ Dockerfileï¼‰"></a>Output dir é…ç½®æ‰“åŒ…è·¯å¾„ï¼ˆå¯ä»¥ä¸å†™ï¼Œå‚è§ Dockerfileï¼‰</h2><p>æˆ‘ä»¬ç»§ç»­ç¼–å†™å„ä¸ª <code>vueconfigjs</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// base é¡¹ç›®</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="attr">publicPath</span>: <span class="string">&quot;/base&quot;</span>,</span><br><span class="line">  <span class="attr">devServer</span>: &#123;</span><br><span class="line">    <span class="attr">host</span>: <span class="string">&quot;localhost&quot;</span>,</span><br><span class="line">    <span class="attr">port</span>: <span class="number">3000</span>,</span><br><span class="line">    <span class="attr">headers</span>: &#123;</span><br><span class="line">      <span class="string">&quot;Access-Control-Allow-Origin&quot;</span>: <span class="string">&quot;_&quot;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">outputDir</span>: <span class="string">&quot;base&quot;</span>,</span><br><span class="line">  <span class="comment">// vue.config.js</span></span><br><span class="line">  <span class="attr">chainWebpack</span>: <span class="function">(<span class="params">config</span>) =&gt;</span> &#123;</span><br><span class="line">    config.module</span><br><span class="line">      .rule(<span class="string">&quot;vue&quot;</span>)</span><br><span class="line">      .use(<span class="string">&quot;vue-loader&quot;</span>)</span><br><span class="line">      .tap(<span class="function">(<span class="params">options</span>) =&gt;</span> &#123;</span><br><span class="line">        options.compilerOptions = &#123;</span><br><span class="line">          ...(options.compilerOptions || &#123;&#125;),</span><br><span class="line">          <span class="attr">isCustomElement</span>: <span class="function">(<span class="params">tag</span>) =&gt;</span> <span class="regexp">/^micro-app/</span>.test(tag),</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">return</span> options;</span><br><span class="line">      &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// first_child é¡¹ç›®</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="comment">// publicPath: &quot;/micro-app1&quot;,</span></span><br><span class="line">  <span class="attr">devServer</span>: &#123;</span><br><span class="line">    <span class="attr">host</span>: <span class="string">&quot;localhost&quot;</span>,</span><br><span class="line">    <span class="attr">port</span>: <span class="number">1111</span>,</span><br><span class="line">    <span class="attr">headers</span>: &#123;</span><br><span class="line">      <span class="string">&quot;Access-Control-Allow-Origin&quot;</span>: <span class="string">&quot;_&quot;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">outputDir</span>: <span class="string">&quot;first_child&quot;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// second_child é¡¹ç›®</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="comment">// publicPath: &quot;/micro-app2&quot;,</span></span><br><span class="line">  <span class="attr">devServer</span>: &#123;</span><br><span class="line">    <span class="attr">host</span>: <span class="string">&quot;localhost&quot;</span>,</span><br><span class="line">    <span class="attr">port</span>: <span class="number">1112</span>,</span><br><span class="line">    <span class="attr">headers</span>: &#123;</span><br><span class="line">      <span class="string">&quot;Access-Control-Allow-Origin&quot;</span>: <span class="string">&quot;*&quot;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">outputDir</span>: <span class="string">&quot;second_child&quot;</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="ç¼–å†™-default-conf"><a href="#ç¼–å†™-default-conf" class="headerlink" title="ç¼–å†™ default.conf"></a>ç¼–å†™ default.conf</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">listen 80;</span><br><span class="line">server_name localhost;</span><br><span class="line"></span><br><span class="line">location / &#123;</span><br><span class="line">root /usr/share/nginx/html;</span><br><span class="line">index index.php index.html index.htm; # add_header Cache-Control;</span><br><span class="line">add_header Access-Control-Allow-Origin _;</span><br><span class="line">if ( $request_uri ~_ ^.+.(js|css|jpg|png|gif|tif|dpg|jpeg|eot|svg|ttf|woff|json|mp4|rmvb|rm|wmv|avi|3gp)$ )&#123;</span><br><span class="line">add_header Cache-Control max-age=7776000;</span><br><span class="line">add_header Access-Control-Allow-Origin \*;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># ä¸»åº”ç”¨ base</span><br><span class="line"></span><br><span class="line">location /base &#123;</span><br><span class="line">root /usr/share/nginx/html;</span><br><span class="line">add_header Access-Control-Allow-Origin _;</span><br><span class="line">if ( $request_uri ~_ ^.+.(js|css|jpg|png|gif|tif|dpg|jpeg|eot|svg|ttf|woff|json|mp4|rmvb|rm|wmv|avi|3gp)$ )&#123;</span><br><span class="line">add_header Cache-Control max-age=7776000;</span><br><span class="line">add_header Access-Control-Allow-Origin \*;</span><br><span class="line">&#125;</span><br><span class="line">try_files $uri $uri/ /base/index.html;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># å­åº”ç”¨ first_child</span><br><span class="line"></span><br><span class="line">location /first_child &#123;</span><br><span class="line">root /usr/share/nginx/html;</span><br><span class="line">add_header Access-Control-Allow-Origin _;</span><br><span class="line">if ( $request_uri ~_ ^.+.(js|css|jpg|png|gif|tif|dpg|jpeg|eot|svg|ttf|woff|json|mp4|rmvb|rm|wmv|avi|3gp)$ )&#123;</span><br><span class="line">add_header Cache-Control max-age=7776000;</span><br><span class="line">add_header Access-Control-Allow-Origin \*;</span><br><span class="line">&#125;</span><br><span class="line">try_files $uri $uri/ /first_child/index.html;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># å­åº”ç”¨ second_child</span><br><span class="line"></span><br><span class="line">location /second_child &#123;</span><br><span class="line">root /usr/share/nginx/html;</span><br><span class="line">add_header Access-Control-Allow-Origin _;</span><br><span class="line">if ( $request_uri ~_ ^.+.(js|css|jpg|png|gif|tif|dpg|jpeg|eot|svg|ttf|woff|json|mp4|rmvb|rm|wmv|avi|3gp)$ )&#123;</span><br><span class="line">add_header Cache-Control max-age=7776000;</span><br><span class="line">add_header Access-Control-Allow-Origin \*;</span><br><span class="line">&#125;</span><br><span class="line">try_files $uri $uri/ /second_child/index.html;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">error_page 404 /404.html;</span><br><span class="line">location = /40x.html &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">error_page 500 502 503 504 /50x.html;</span><br><span class="line">location = /50x.html &#123;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Dockerfile"><a href="#Dockerfile" class="headerlink" title="Dockerfile"></a>Dockerfile</h2><p>æ³¨æ„åœ¨ <code>window</code> ä¸‹ <code>mkdir</code> ä¼šäº§ç”Ÿä¸€ä¸ªé¢å¤–çš„ç›®å½• ä¸è¿‡é—®é¢˜ä¸å¤§</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> nginx</span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> mkdir -p /usr/share/nginx/html/&#123;base,first_child,second_child&#125;</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> /base/base/ /usr/share/nginx/html/base</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> /first_child/first_child/ /usr/share/nginx/html/first_child</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> /second_child/second_child/ /usr/share/nginx/html/second_child</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> default.conf /etc/nginx/conf.d/default.conf</span></span><br></pre></td></tr></table></figure><p>å¦‚æœåœ¨ä¸Šè¿° <code>outputdir</code> é‡Œé¢æ²¡æœ‰ç¼–å†™æ‰“åŒ…åç§°çš„è¯ é—®é¢˜ä¹Ÿä¸å¤§ é“ç†æ˜¯ä¸€æ ·çš„ å¯ä»¥è¿™æ ·å†™</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> nginx</span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> mkdir -p /usr/share/nginx/html/&#123;base,first_child,second_child&#125;</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> /base/dist/ /usr/share/nginx/html/base</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> /first_child/dist/ /usr/share/nginx/html/first_child</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> /second_child/dist/ /usr/share/nginx/html/second_child</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> default.conf /etc/nginx/conf.d/default.conf</span></span><br></pre></td></tr></table></figure><h2 id="è¿è¡Œ-docker"><a href="#è¿è¡Œ-docker" class="headerlink" title="è¿è¡Œ docker"></a>è¿è¡Œ docker</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">docker pull nginx//æ‹‰ nginx</span><br><span class="line">docker images// æŸ¥çœ‹é•œåƒ</span><br><span class="line">docker build -t docker_micro_app . --no-cache//æ„å»ºé•œåƒ è®°å¾—åŠ .</span><br><span class="line">dokcer run -d -p 5555:80 --name micro_app docker_micro_app // è¿è¡Œå®¹å™¨</span><br><span class="line">docker <span class="built_in">exec</span> -it å®¹å™¨ id bash // è¿›å…¥å®¹å™¨</span><br><span class="line"><span class="built_in">cd</span> /usr/share/nginx/html // è¿›å…¥ nginx å†…éƒ¨çš„ html</span><br><span class="line">ls //æŸ¥çœ‹æ‰€æœ‰æ–‡ä»¶ å¦‚ä¸‹å›¾ è¯´æ˜å·²ç»æœ‰å¯¹åº”çš„æ–‡ä»¶äº†</span><br><span class="line"><span class="built_in">exit</span> //é€€å‡º</span><br><span class="line">// å¦‚æœä¸å¯¹ è¯·åˆ é™¤é•œåƒå†æ“ä½œ</span><br><span class="line">docker rm -f xxxID</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20230311233444.png" alt=""></p><p>åœ¨åœ°å€æ æŸ¥çœ‹ <code>localhost:5555/base</code> å¦‚æœæœ‰å†…å®¹åˆ™æˆåŠŸ</p><h2 id="è¿è¡Œåˆ°æœ¬åœ°-ip"><a href="#è¿è¡Œåˆ°æœ¬åœ°-ip" class="headerlink" title="è¿è¡Œåˆ°æœ¬åœ° ip"></a>è¿è¡Œåˆ°æœ¬åœ° ip</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dokcer run -d -p ä½ çš„ ip:5555:80 --name micro_app docker_micro_app // è¿è¡Œé•œåƒ</span><br></pre></td></tr></table></figure><h1 id="å¸¸è§é—®é¢˜"><a href="#å¸¸è§é—®é¢˜" class="headerlink" title="å¸¸è§é—®é¢˜"></a>å¸¸è§é—®é¢˜</h1><h2 id="åŸºåº§åº”ç”¨è­¦æŠ¥"><a href="#åŸºåº§åº”ç”¨è­¦æŠ¥" class="headerlink" title="åŸºåº§åº”ç”¨è­¦æŠ¥"></a>åŸºåº§åº”ç”¨è­¦æŠ¥</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vue3: [Vue warn]: Failed to resolve component: micro-app</span><br></pre></td></tr></table></figure><p>è§£å†³</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vue.config.js</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="attr">chainWebpack</span>: <span class="function">(<span class="params">config</span>) =&gt;</span> &#123;</span><br><span class="line">    config.module</span><br><span class="line">      .rule(<span class="string">&quot;vue&quot;</span>)</span><br><span class="line">      .use(<span class="string">&quot;vue-loader&quot;</span>)</span><br><span class="line">      .tap(<span class="function">(<span class="params">options</span>) =&gt;</span> &#123;</span><br><span class="line">        options.compilerOptions = &#123;</span><br><span class="line">          ...(options.compilerOptions || &#123;&#125;),</span><br><span class="line">          <span class="attr">isCustomElement</span>: <span class="function">(<span class="params">tag</span>) =&gt;</span> <span class="regexp">/^micro-app/</span>.test(tag),</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">return</span> options;</span><br><span class="line">      &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="å‰ç«¯è¿›é˜¶" scheme="https://zlinni.github.io/categories/%E5%89%8D%E7%AB%AF%E8%BF%9B%E9%98%B6/"/>
    
    
    <category term="å‰ç«¯" scheme="https://zlinni.github.io/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="microapp" scheme="https://zlinni.github.io/tags/microapp/"/>
    
  </entry>
  
  <entry>
    <title>åˆ©ç”¨hå‡½æ•°ç¼–å†™ç»„ä»¶</title>
    <link href="https://zlinni.github.io/posts/1435485109/"/>
    <id>https://zlinni.github.io/posts/1435485109/</id>
    <published>2023-02-09T15:23:14.000Z</published>
    <updated>2023-02-09T15:37:32.200Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>h å‡½æ•° <code>hyperscript</code> ï¼ˆç”Ÿæˆ scriptï¼‰ç”¨äºç”Ÿæˆå¯¹åº”çš„æ ‡ç­¾<br>å…¶å®æ‰€æœ‰çš„ <code>vue</code> ç»„ä»¶éƒ½æ˜¯ç»è¿‡ä¸€æ¬¡ <code>render</code> ä¹‹åè½¬åŒ–æˆ h å‡½æ•°ï¼Œç„¶åå†å»å¯¹åº”çš„æ¸²æŸ“ <code>dom</code> çš„ã€‚é‚£ä¹ˆä½¿ç”¨ h å‡½æ•°æ¸²æŸ“ç»„ä»¶æœ‰ä»€ä¹ˆä¼˜åŠ¿å‘¢ï¼Ÿ</p><h1 id="sfc-ç»“æ„"><a href="#sfc-ç»“æ„" class="headerlink" title="sfc ç»“æ„"></a>sfc ç»“æ„</h1><p><code>vue</code> æ˜¯ä½¿ç”¨äº†ä¸€æ®µå«åš <code>sfc</code> çš„ç»“æ„ï¼Œç±»ä¼¼äºä¸€å¼€å§‹å­¦ä¹ å‰ç«¯çš„æ—¶å€™ <code>body script style</code>ï¼Œç°åœ¨ <code>vue</code> æ˜¯ <code>template script style</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;example&quot;&gt;&#123;&#123; msg &#125;&#125;&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      msg: &quot;Hello world!&quot;,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">.example &#123;</span><br><span class="line">  color: red;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br><span class="line">&lt;custom1&gt;</span><br><span class="line">  This could be e.g. documentation for the component.</span><br><span class="line">&lt;/custom1&gt;</span><br></pre></td></tr></table></figure><p>è€Œåœ¨ <code>template</code> ç»“æ„ç§çš„ <code>html</code> ä»£ç  æœ€åä¼šè¢«è½¬åŒ–ä¸º <code>h</code> å‡½æ•°ï¼Œå¦‚ä¸‹</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">h(<span class="string">&quot;div&quot;</span>, &#123; <span class="attr">class</span>: <span class="string">&quot;example&quot;</span> &#125;, msg);</span><br></pre></td></tr></table></figure><p><code>Vue</code> é€šè¿‡è¿™ä¸ª <code>h</code> å‡½æ•°å»çœŸå®çš„æ¸²æŸ“ <code>dom</code>ï¼Œå’Œè™šæ‹ŸèŠ‚ç‚¹çš„ <code>diff</code> å¯¹æ¯”ç­‰</p><h1 id="å¦‚ä½•ç¼–å†™-h-å‡½æ•°"><a href="#å¦‚ä½•ç¼–å†™-h-å‡½æ•°" class="headerlink" title="å¦‚ä½•ç¼–å†™ h å‡½æ•°"></a>å¦‚ä½•ç¼–å†™ h å‡½æ•°</h1><p><code>h</code> å‡½æ•°æ¥æ”¶çš„å‚æ•°æ˜¯æ ¹æ®ä½¿ç”¨è€…ä¼ å…¥çš„å‚æ•°å†³å®šçš„ï¼Œä¸‹é¢åªä»‹ç»é‡è¦çš„å‡ ä¸ªéƒ¨åˆ†ï¼ˆæœ‰åä¹ç§ï¼Œä¸€èˆ¬ä¸å¯èƒ½éƒ½ä½¿ç”¨ä¸Šï¼‰<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20230209232459.png" alt=""></p><ul><li>å‚æ•°ä¸€ <code>type</code>ï¼š å¯ä»¥å†™ä¸€ä¸ªæ ‡ç­¾æˆ–è€… <code>component</code> ä¾‹å¦‚</li></ul><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">h(<span class="string">&quot;div&quot;</span>, <span class="string">&quot;this is a div tag&quot;</span>);</span><br><span class="line">h(YourComponent, <span class="string">&quot;do sth.&quot;</span>);</span><br></pre></td></tr></table></figure><ul><li>å¯é€‰å‚æ•°äºŒ <code>props</code>ï¼š ç”¨äºç»™æ ‡ç­¾æˆ–è€… <code>component</code> ä¼ é€’ <code>props</code>,ä¸€èˆ¬æ˜¯å¯¹è±¡å½¢å¼ å¯ä»¥ç»“åˆ tw ç­‰ css ä½¿ç”¨,å¯ä»¥å†™äº‹ä»¶ç›‘å¬å™¨,æ³¨æ„ä½¿ç”¨ <code>on</code> å‰ç¼€</li></ul><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">h(<span class="string">&quot;div&quot;</span>, &#123; <span class="attr">class</span>: <span class="string">&quot;h-full w-full text-[grey]&quot;</span> &#125;);</span><br><span class="line">h(<span class="string">&quot;div&quot;</span>, &#123;</span><br><span class="line">  <span class="function"><span class="title">onClick</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;hahahhaha&quot;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><ul><li>å¯é€‰å‚æ•°ä¸‰ <code>children</code>ï¼šå­—ç¬¦ä¸²|number|å¯¹è±¡ç±»å‹ ç”¨äºæ¸²æŸ“å­èŠ‚ç‚¹ æ³¨æ„å­èŠ‚ç‚¹ä¹Ÿå¯ä»¥æ˜¯ h å‡½æ•°ç”Ÿæˆçš„èŠ‚ç‚¹ï¼Œå¯ä»¥æ¨¡æ‹Ÿ <code>v-if</code> çš„æ“ä½œ</li></ul><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">h(<span class="string">&quot;div&quot;</span>, <span class="string">&quot;this is a div tag&quot;</span>);</span><br><span class="line">h(<span class="string">&quot;div&quot;</span>, [h(<span class="string">&quot;div&quot;</span>, <span class="string">&quot;hahahah&quot;</span>), h(<span class="string">&quot;span&quot;</span>, <span class="string">&quot;???&quot;</span>)]);</span><br><span class="line"><span class="keyword">const</span> isShow = ref&lt;<span class="built_in">boolean</span>&gt;(<span class="literal">false</span>);</span><br><span class="line">h(<span class="string">&quot;div&quot;</span>, isShow ? h(<span class="string">&quot;div&quot;</span>, <span class="string">&quot;show&quot;</span>) : <span class="string">&quot;noShow&quot;</span>);</span><br></pre></td></tr></table></figure><h1 id="æ³¨æ„"><a href="#æ³¨æ„" class="headerlink" title="æ³¨æ„"></a>æ³¨æ„</h1><p>ä¸€å¼€å§‹ç¼–å†™ <code>h</code> å‡½æ•°çš„æ—¶å€™ï¼Œä¼ é€’äº† <code>type</code> ä¹‹å é»˜è®¤æ˜¯ä»¥ä¸‹å¯ä»¥ç›´æ¥ä¼ é€’ <code>children</code> çš„ç±»å‹ï¼Œä¹Ÿå°±æ˜¯ <code>h</code> å‡½æ•°çš„åç»­å‚æ•°æ˜¯æ ¹æ®ç”¨äºç”¨æˆ·ä¼ é€’çš„å€¼çš„ç±»å‹å»åˆ¤æ–­çš„<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20230209232604.png" alt=""><br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20230209232610.png" alt=""><br>è¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆ <code>prop</code> æ˜¯å¯¹è±¡ç±»å‹ è€Œ <code>children</code> æ˜¯ <code>string | number | array</code> ç±»å‹äº† å› ä¸ºæ–¹ä¾¿åˆ¤æ–­</p><h1 id="åœ¨-ts-js-ä¸­ç¼–å†™-component"><a href="#åœ¨-ts-js-ä¸­ç¼–å†™-component" class="headerlink" title="åœ¨ ts/js ä¸­ç¼–å†™ component"></a>åœ¨ ts/js ä¸­ç¼–å†™ component</h1><p>å…¶å®å¾ˆæ—©ä¹‹å‰å°±æœ‰ä¸€ä¸ªç–‘é—®ï¼Œå°±æ˜¯ <code>component</code> æ˜¯å¦å¯ä»¥ç›´æ¥åœ¨ <code>javascript</code> æ–‡ä»¶é‡Œé¢ç¼–å†™ï¼Œå› ä¸ºæœ‰ç‚¹æ—¶å€™ï¼Œåªæ˜¯ä¸€ç‚¹ç‚¹çš„å†…å®¹ï¼Œå…¶å®å®Œå…¨ä¸éœ€è¦å†™æˆä¸€ä¸ª <code>vue</code> æ–‡ä»¶ï¼Œéœ€æ±‚ä¾‹å¦‚ï¼š<br>åœ¨è¡¨æ ¼ä¸Šé¢çš„æŸä¸€é¡¹ï¼Œé»˜è®¤æ˜¾ç¤ºå¯¹åº”çš„æ–‡æœ¬ï¼Œå½“ç‚¹å‡»çš„æ—¶å€™æ¸²æŸ“ä¸€ä¸ª <code>input</code> æ¡†<br>ç„¶å <code>blur</code> æˆ–è€… <code>change</code> äº‹ä»¶è§¦å‘çš„æ—¶å€™ å»è°ƒç”¨åå°æ¥å£æ”¹å˜è¯¥é¡¹çš„å€¼<br>å¦‚æœå†™æˆä¸€ä¸ª <code>vue</code> æ–‡ä»¶ å¤§è‡´ä¸Šé•¿è¿™æ ·ï¼ˆå¯èƒ½ä¼šå†™é”™ ä½†å¤§è‡´æ˜¯è¿™æ ·çš„ï¼‰</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;input v-if=&#x27;props.text&#x27; onChange=&#x27;xxx&#x27; onBlur=&#x27;xxx&#x27;&gt;&#123;&#123;props.text&#125;&#125;&lt;/input&gt;</span><br><span class="line">    &lt;div v-else&gt;&#123;&#123;props.text&#125;&#125;&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export</span><br><span class="line">    xxx...</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>å®é™…ä¸Š åšçš„åŠŸèƒ½å¾ˆå°‘ ä½†å†™èµ·æ¥æ€»æ„Ÿè§‰ æ²¡æœ‰å¿…è¦è£…æˆä¸€ä¸ª <code>vue</code> æ–‡ä»¶ å› ä¸ºæœ€åéƒ½æ˜¯æ¸²æŸ“æˆ <code>h</code> å‡½æ•° é‚£ä¸ºä»€ä¹ˆä¸ç›´æ¥å†™ <code>h</code> å‡½æ•°å‘¢ï¼Ÿ</p><h1 id="defineComponent-æ¸²æŸ“ç»„ä»¶-æ¸²æŸ“ä¸€ä¸ªå¸¦çŠ¶æ€çš„-h-å‡½æ•°"><a href="#defineComponent-æ¸²æŸ“ç»„ä»¶-æ¸²æŸ“ä¸€ä¸ªå¸¦çŠ¶æ€çš„-h-å‡½æ•°" class="headerlink" title="defineComponent = æ¸²æŸ“ç»„ä»¶ = æ¸²æŸ“ä¸€ä¸ªå¸¦çŠ¶æ€çš„ h å‡½æ•°"></a>defineComponent = æ¸²æŸ“ç»„ä»¶ = æ¸²æŸ“ä¸€ä¸ªå¸¦çŠ¶æ€çš„ h å‡½æ•°</h1><p>æˆ‘ä»¬åˆ©ç”¨ <code>defineComponent</code> è¿™ä¸ªå‡½æ•° å¯¹åº”æ¸²æŸ“ç»„ä»¶<br>å…¶ä¸­ä»–æœ‰ä¸€ä¸ªçŠ¶æ€ <code>props</code> å’Œ åŸæ¥çš„ <code>props</code> æ˜¯ä¸€æ ·çš„<br>è¿˜æœ‰ä¸€ä¸ª <code>setup</code> å‡½æ•° ä¹Ÿæ˜¯ä¸€æ ·çš„ æ¥æ”¶ <code>props</code> ç„¶åè¿”å›ä¸€ä¸ªè™šæ‹ŸèŠ‚ç‚¹ ä¹Ÿå°±æ˜¯æˆ‘ä»¬ <code>html</code> ä¸Šçš„å†…å®¹<br>è¿™æ ·æœ‰äº† <code>setup</code> å‡½æ•° æˆ‘ä»¬å°±æœ‰äº†çŠ¶æ€çš„ç¼–å†™ å°±å¤§äºå•ç‹¬ç¼–å†™ <code>h</code> å‡½æ•°çš„ä½œç”¨äº†</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> editableInputComponent = defineComponent(&#123;</span><br><span class="line">  <span class="attr">props</span>: &#123;</span><br><span class="line">    <span class="attr">val</span>: <span class="built_in">String</span>,</span><br><span class="line">    <span class="attr">onUpdateValue</span>: <span class="built_in">Function</span> <span class="keyword">as</span> PropType&lt;<span class="function">(<span class="params">v: <span class="built_in">string</span></span>) =&gt;</span> <span class="built_in">void</span>&gt;,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">setup</span>(<span class="params">props</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> isEdit = ref&lt;<span class="built_in">boolean</span>&gt;(<span class="literal">false</span>);</span><br><span class="line">    <span class="keyword">const</span> inputRef = ref&lt;<span class="built_in">any</span>&gt;(<span class="literal">null</span>);</span><br><span class="line">    <span class="keyword">const</span> inputValue = ref(props.val || <span class="string">&quot;&quot;</span>);</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">handleOnClick</span>(<span class="params">e: <span class="built_in">any</span></span>) </span>&#123;</span><br><span class="line">      e.stopPropagation();</span><br><span class="line">      isEdit.value = <span class="literal">true</span>;</span><br><span class="line">      nextTick(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// inputRef.value &amp;&amp; inputRef.value?.focus();</span></span><br><span class="line">        inputRef.value?.focus();</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">handleChange</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      props.onUpdateValue &amp;&amp; props.onUpdateValue(inputValue.value);</span><br><span class="line">      isEdit.value = <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> h(</span><br><span class="line">        <span class="string">&quot;div&quot;</span>,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">class</span>: <span class="string">&quot;text-[#0256FF] h-[22.39px]&quot;</span>,</span><br><span class="line">          <span class="comment">// style: &quot;min-height: 22px&quot;,</span></span><br><span class="line">          <span class="attr">onClick</span>: handleOnClick,</span><br><span class="line">        &#125;,</span><br><span class="line">        isEdit.value</span><br><span class="line">          ? h(NInput, &#123;</span><br><span class="line">              <span class="attr">ref</span>: inputRef,</span><br><span class="line">              <span class="attr">value</span>: inputValue.value,</span><br><span class="line">              <span class="attr">class</span>: <span class="string">&quot;h-full&quot;</span>,</span><br><span class="line">              <span class="attr">onUpdateValue</span>: <span class="function">(<span class="params">v: <span class="built_in">any</span></span>) =&gt;</span> &#123;</span><br><span class="line">                inputValue.value = v;</span><br><span class="line">              &#125;,</span><br><span class="line">              <span class="attr">onChange</span>: handleChange,</span><br><span class="line">              <span class="attr">onBlur</span>: handleChange,</span><br><span class="line">            &#125;)</span><br><span class="line">          : h(NEllipsis, <span class="literal">null</span>, &#123;</span><br><span class="line">              <span class="attr">default</span>: <span class="function">() =&gt;</span> props.val,</span><br><span class="line">            &#125;)</span><br><span class="line">      );</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>ç»“è®ºå°±æ˜¯ <code>defineComponent</code> å°±æ˜¯æ¸²æŸ“ç»„ä»¶ ä¹Ÿå°±æ˜¯æ‰§è¡Œä¸€ä¸ªå¸¦äº†è‡ªæˆ‘çŠ¶æ€çš„ <code>h</code> å‡½æ•°<br><code>defineComponent</code> = æ¸²æŸ“ç»„ä»¶ = æ¸²æŸ“ä¸€ä¸ªå¸¦çŠ¶æ€çš„ <code>h</code> å‡½æ•°</p><h1 id="PropType"><a href="#PropType" class="headerlink" title="PropType"></a>PropType</h1><p>æœ‰ä¸ªå°ç»†èŠ‚ å› ä¸º <code>defineComponent</code> çš„ <code>props</code> ä¸èƒ½å¾ˆæ˜ç¡®çš„å®šä¹‰ æ¥æ”¶åˆ°çš„æ•°æ®ç±»å‹<br>æ‰€ä»¥ä½¿ç”¨äº† <code>PropType</code> å»æ‹“å±•ä»–çš„ç±»å‹ ä¾‹å¦‚ä¸‹é¢æŠŠ <code>Function</code> æ‹“å±•æˆæ¥æ”¶ä¸€ä¸ªå‚æ•°ç±»å‹ä¸º <code>string</code>ï¼Œè¿”å›å€¼ä¸ºç©ºçš„å‡½æ•°</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">props: &#123;</span><br><span class="line">   <span class="attr">val</span>: <span class="built_in">String</span>,</span><br><span class="line">   <span class="attr">onUpdateValue</span>: <span class="built_in">Function</span> <span class="keyword">as</span> PropType&lt;<span class="function">(<span class="params">v: <span class="built_in">string</span></span>) =&gt;</span> <span class="built_in">void</span>&gt;,</span><br><span class="line"> &#125;,</span><br></pre></td></tr></table></figure><p>ä½†éœ€è¦æ³¨æ„çš„æ˜¯æ˜¯ å¦‚æœå¤šç±»å‹å®šä¹‰ æ˜¯ä¸èƒ½ä½¿ç”¨ <code>PropType</code> çš„</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">props: &#123;</span><br><span class="line">   <span class="attr">val</span>: [<span class="built_in">String</span>,<span class="built_in">Array</span> <span class="keyword">as</span> PropType&lt;<span class="built_in">string</span>[]&gt;],<span class="comment">//x é”™è¯¯çš„</span></span><br><span class="line">   <span class="attr">onUpdateValue</span>: <span class="built_in">Function</span> <span class="keyword">as</span> PropType&lt;<span class="function">(<span class="params">v: <span class="built_in">string</span></span>) =&gt;</span> <span class="built_in">void</span>&gt;,</span><br><span class="line"> &#125;,</span><br></pre></td></tr></table></figure><p>å»ºè®®æ”¹ä¸º</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> selectVal = <span class="built_in">string</span> | <span class="built_in">string</span>[]</span><br><span class="line"><span class="attr">props</span>: &#123;</span><br><span class="line">   <span class="attr">val</span>: <span class="built_in">Object</span> <span class="keyword">as</span> PropType&lt;selectVal&gt;,</span><br><span class="line">   onUpdateValue: <span class="built_in">Function</span> <span class="keyword">as</span> PropType&lt;<span class="function">(<span class="params">v: <span class="built_in">string</span></span>) =&gt;</span> <span class="built_in">void</span>&gt;,</span><br><span class="line"> &#125;,</span><br></pre></td></tr></table></figure><p>æˆ–è€…ç›´æ¥ä½¿ç”¨</p><h1 id="æ‹“å±•"><a href="#æ‹“å±•" class="headerlink" title="æ‹“å±•"></a>æ‹“å±•</h1><p>å…³äº <code>h</code> å‡½æ•° å®æ“çš„è¿‡ç¨‹ä¸­è¿˜æ˜¯ä¼šé‡åˆ°ä¸çŸ¥é“æ€ä¹ˆå†™çš„æƒ…å†µï¼Œæ¯”å¦‚ä¸çŸ¥é“æ€ä¹ˆå†™è‡ªå®šä¹‰æŒ‡ä»¤ï¼Œä¸çŸ¥é“æ€ä¹ˆå†™ <code>v-model</code> ç­‰<br>å¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç« ï¼š<a href="https://www.lanmper.cn/vue/t9645">https://www.lanmper.cn/vue/t9645</a></p><h1 id="ç»“è¯­"><a href="#ç»“è¯­" class="headerlink" title="ç»“è¯­"></a>ç»“è¯­</h1><p>è¦ç”¨ <code>h</code> å‡½æ•°å°è£…ç»„ä»¶è¿˜æ˜¯ç›´æ¥å†™ç»„ä»¶å»å°è£… å„æœ‰åˆ©å¼Š <code>h</code> å‡½æ•°éœ€è¦æ›´å¤šçš„å­¦ä¹ æˆæœ¬ï¼Œå¦‚æœç»„ä»¶åº“æ”¯æŒ <code>render</code> å‡½æ•°ç¼–å†™è‚¯å®šæ˜¯æ›´é«˜çš„ï¼Œæ¯”å¦‚ <code>Naive</code> ç»„ä»¶åº“ï¼Œä¼˜åŠ¿å°±æ˜¯å®Œå…¨å‡½æ•°å¼ç¼–ç¨‹ï¼Œé€‚ç”¨äºä¸å¤ªéœ€è¦ <code>css</code> å’Œ <code>html</code> çš„æƒ…å†µã€‚å°è£… <code>vue</code> ç»„ä»¶çš„è¯ï¼Œå°±æ˜¯èƒ½å¤Ÿæ›´æ–¹ä¾¿çš„ç¼–å†™ <code>html</code> å’Œ <code>css</code>ï¼Œç¼ºç‚¹å°±æ˜¯å¯èƒ½ä¼šå¾ˆå†—ä½™ã€‚<br>ä¸»è¦è®°ä½ä¸€å¥è¯ï¼šé«˜ç²’åº¦çš„å°è£…æ— æ³•é€‚åº”ä½ç²’åº¦çš„å˜åŒ–ã€‚è°¨æ…å°è£…ï¼</p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="Vueç³»åˆ—" scheme="https://zlinni.github.io/categories/Vue%E7%B3%BB%E5%88%97/"/>
    
    
    <category term="Vue" scheme="https://zlinni.github.io/tags/Vue/"/>
    
  </entry>
  
  <entry>
    <title>dockerå­¦ä¹ ç¬”è®°</title>
    <link href="https://zlinni.github.io/posts/394001834/"/>
    <id>https://zlinni.github.io/posts/394001834/</id>
    <published>2023-01-19T06:07:33.000Z</published>
    <updated>2023-01-19T06:25:07.608Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="å‰ç½®çŸ¥è¯†"><a href="#å‰ç½®çŸ¥è¯†" class="headerlink" title="å‰ç½®çŸ¥è¯†"></a>å‰ç½®çŸ¥è¯†</h1><p>Nginx é¡¹ç›®è¿è¡Œå’Œæ‰“åŒ…</p><h1 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h1><p>å®‰è£…ä¸€ä¸ª windows çš„ docker ç•¥</p><h1 id="æŸ¥çœ‹-docker"><a href="#æŸ¥çœ‹-docker" class="headerlink" title="æŸ¥çœ‹ docker"></a>æŸ¥çœ‹ docker</h1><p>Cmd<br><code>docker version</code><br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20230119141035.png" alt=""><br>ä½¿ç”¨ docker å¯åŠ¨ä¸€ä¸ªé¡¹ç›®<br>æ–°å»ºé¡¹ç›®<br><code>npm init vue@latest</code><br>ç„¶åä¸€è·¯å›è½¦ ç»™ä»–èµ·åå­—å«<code>docker-demo-vue</code><br>ä¹‹å</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> docker-demo-vue</span><br><span class="line">npm install</span><br><span class="line">npm run dev</span><br></pre></td></tr></table></figure><p>å°±å¯ä»¥çœ‹è§é¡¹ç›®è¢«è¿è¡Œèµ·æ¥äº†<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20230119141109.png" alt=""><br>è¿è¡Œèµ·æ¥åç»™é¡¹ç›®æ‰“åŒ…<br><code>npm run build</code></p><h1 id="åˆ›å»º-Dockerfile"><a href="#åˆ›å»º-Dockerfile" class="headerlink" title="åˆ›å»º Dockerfile"></a>åˆ›å»º Dockerfile</h1><p>ç„¶ååœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º Dockerfile<br>æ³¨æ„å¤§å°å†™ ä¸€å®šä¸èƒ½é”™ è€Œä¸”æ–‡ä»¶æ²¡æœ‰åç¼€<br>é‡Œé¢çš„å†…å®¹åé¢é…ç½®é•œåƒçš„æ—¶å€™ä¼šè®²åˆ°</p><h1 id="æ‹‰å–-nginx-é•œåƒ"><a href="#æ‹‰å–-nginx-é•œåƒ" class="headerlink" title="æ‹‰å– nginx é•œåƒ"></a>æ‹‰å– nginx é•œåƒ</h1><p>ä¹‹åæ‹‰å– nginx é•œåƒ<br><code>win+r cmd</code> æ‰“å¼€æ§åˆ¶å° è¾“å…¥<br><code>docker pull nginx</code><br>æ­¤æ—¶ä¼šæœ‰ä¸¤ç§æƒ…å†µ</p><ul><li>å¦‚æœæ²¡æœ‰æ‹‰å–è¿‡ <code>nginx</code> åé¢ä¼šæœ‰æ¡ <code>Status</code> æ˜¯ <code>Downloaded newer image for nginx:lastest</code></li><li>å¦‚æœä¹‹å‰æ¥è§¦è¿‡æ‹‰è¿‡ åˆ™æ˜¾ç¤º <code>image is up to date for nginx:lastest</code><br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20230119141200.png" alt=""></li></ul><h1 id="æŸ¥çœ‹é•œåƒ"><a href="#æŸ¥çœ‹é•œåƒ" class="headerlink" title="æŸ¥çœ‹é•œåƒ"></a>æŸ¥çœ‹é•œåƒ</h1><p>docker images<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20230119141400.png" alt=""><br>æ­¤æ—¶æˆ‘ä»¬æ‰¾åˆ°äº† <code>nginx</code> çš„é•œåƒ 142mb<br>åˆ›å»º <code>nginx</code> é…ç½®æ–‡ä»¶<br>é¡¹ç›®æ ¹ç›®å½•æ–°å»º <code>default.conf</code><br>å…ˆä¸ç®¡æ„æ€ ç»§ç»­ä¸‹é¢çš„æ­¥éª¤</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line"><span class="attribute">listen</span> <span class="number">80</span>;</span><br><span class="line"><span class="attribute">server_name</span> localhost;</span><br><span class="line"></span><br><span class="line">    <span class="comment">#charset koi8-r;</span></span><br><span class="line">    <span class="attribute">access_log</span>  /var/log/nginx/host.access.log  main;</span><br><span class="line">    <span class="attribute">error_log</span>  /var/log/nginx/error.log  <span class="literal">error</span>;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">location</span> / &#123;</span><br><span class="line">        <span class="attribute">root</span>   /usr/share/nginx/html;</span><br><span class="line">        <span class="attribute">index</span>  index.html index.htm;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">error_page</span>   <span class="number">500</span> <span class="number">502</span> <span class="number">503</span> <span class="number">504</span>  /50x.html;</span><br><span class="line">    <span class="attribute">location</span> = /50x.html &#123;</span><br><span class="line">        <span class="attribute">root</span>   /usr/share/nginx/html;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="é…ç½®é•œåƒ"><a href="#é…ç½®é•œåƒ" class="headerlink" title="é…ç½®é•œåƒ"></a>é…ç½®é•œåƒ</h1><p>æ‰“å¼€æˆ‘ä»¬åˆšåˆšçš„ <code>Dockerfile</code> å†™å…¥</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> nginx</span><br><span class="line"> <span class="keyword">COPY</span><span class="bash"> dist/ /usr/share/nginx/html/</span></span><br><span class="line"> <span class="keyword">COPY</span><span class="bash"> default.conf /etc/nginx/conf.d/default.conf</span></span><br></pre></td></tr></table></figure><ul><li><code>From nginx</code> çš„æ„æ€æ˜¯æŒ‡å®šè¯¥é•œåƒæ˜¯åŸºäº <code>nginx:latest</code> é•œåƒè€Œæ„æˆçš„</li><li><code>COPY dist/ /usr/share/nginx/html/</code> æ„æ€æ˜¯å°†æ ¹ç›®å½•ä¸‹çš„æ‰“åŒ…åçš„ <code>dist</code> æ–‡ä»¶å¤¹ä¸­çš„æ‰€æœ‰æ–‡ä»¶å¤åˆ¶åˆ°é•œåƒä¸­å¯¹åº”çš„ç›®å½•ä¸‹ é•œåƒä¸­çš„ç›®å½•æ˜¯ä¸ä¼šå˜çš„</li><li><code>COPY default.conf /etc/nginx/conf.d/default.conf</code> æ„æ€æ˜¯å°† <code>default.conf</code> æ›¿æ¢é•œåƒä¸­çš„ <code>conf</code> é…ç½®</li></ul><h1 id="æ„å»ºé•œåƒ"><a href="#æ„å»ºé•œåƒ" class="headerlink" title="æ„å»ºé•œåƒ"></a>æ„å»ºé•œåƒ</h1><p>å‘½ä»¤<br><code>docker build -t docker-demo-vue .</code></p><ul><li><code>-t</code> çš„æ„æ€æ˜¯ç»™é•œåƒå‘½å</li><li><code>.</code> æ˜¯åŸºäºå½“å‰ç›®å½•çš„ <code>Dockerfile</code> æ„å»ºé•œåƒ<br>ç„¶åç»§ç»­è¿è¡Œ <code>docker images</code> æŸ¥çœ‹é•œåƒ<br><code>docker images</code><br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20230119141922.png" alt=""><br>çœ‹åˆ°ç›®å‰æœ‰ä¸¤ä¸ªé•œåƒ å¹¶ä¸”é•œåƒçš„åå­—ä¹Ÿå¾ˆæ¸…æ¥š å¤§å°æ˜¯ 142mb åŸºæœ¬ä¸Šå°±æ˜¯ <code>nginx</code> çš„å†…å®¹</li></ul><h1 id="æŸ¥çœ‹ç«¯å£æ˜¯å¦è¢«å ç”¨"><a href="#æŸ¥çœ‹ç«¯å£æ˜¯å¦è¢«å ç”¨" class="headerlink" title="æŸ¥çœ‹ç«¯å£æ˜¯å¦è¢«å ç”¨"></a>æŸ¥çœ‹ç«¯å£æ˜¯å¦è¢«å ç”¨</h1><p><code>netstat -a</code><br>æŸ¥çœ‹æ‰€æœ‰çš„ç«¯å£<br><code>netstat -ano|findstr 3000</code><br>æ‰¾åˆ°å¯¹åº”çš„ç«¯å£</p><h1 id="è¿è¡Œå®¹å™¨"><a href="#è¿è¡Œå®¹å™¨" class="headerlink" title="è¿è¡Œå®¹å™¨"></a>è¿è¡Œå®¹å™¨</h1><p><code>docker run -d -p 3000:80 --name docker-vue docker-demo-vue</code></p><ul><li><code>-d</code> è¡¨ç¤ºå®¹å™¨åœ¨åå°è¿è¡Œ</li><li><code>-p</code> è¡¨ç¤ºç«¯å£æ˜ å°„ï¼ŒæŠŠæœ¬æœºçš„ <code>3000</code> ç«¯å£æ˜ å°„åˆ° <code>container</code> çš„ <code>80</code> ç«¯å£ï¼ˆé—®é¢˜ï¼šå®¹å™¨è¿è¡Œå‰æ€ä¹ˆçŸ¥é“ç«¯å£æ˜¯å¦è¢«å ç”¨ æ€ä¹ˆçœ‹å®¹å™¨å†…éƒ¨çš„ç«¯å£ï¼‰</li><li><code>--name</code> è®¾ç½®å®¹å™¨å</li><li><code>docker-demo-vue</code> æ˜¯é•œåƒçš„åå­—</li></ul><h1 id="æŸ¥çœ‹å®¹å™¨"><a href="#æŸ¥çœ‹å®¹å™¨" class="headerlink" title="æŸ¥çœ‹å®¹å™¨"></a>æŸ¥çœ‹å®¹å™¨</h1><p><code>docker ps</code><br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20230119142342.png" alt=""><br>æˆ‘ä»¬å°±å¯ä»¥çœ‹åˆ°å¯¹åº”çš„ <code>docker</code> å®¹å™¨åå­— è¿™é‡Œ <code>nginx</code> ç”±äºæˆ‘ä»¬æ²¡æœ‰å¯¹ä»–å‘½åæ‰€ä»¥ä»–æ˜¯é»˜è®¤çš„åå­—<br>ä¿®æ”¹å®¹å™¨åå­—<br>æˆ‘ä»¬çœ‹åˆ°ä¸Šè¿°çš„ <code>nginx</code> åå­—å«åš <code>great_villani</code> é‚£ä¹ˆå¯¹ä»–é‡å‘½åçš„æ–¹å¼å°±æ˜¯<br><code>docker rename great_villani nginx</code><br>å½“ç„¶å®é™…å¼€å‘ä¸­è‚¯å®šæ˜¯ç›´æ¥åœ¨ run å®¹å™¨çš„æ—¶å€™å°±ç›´æ¥å‘½åäº†<br>æ¯”å¦‚<br><code>docker run --name nginx -d nginx</code><br>å…³é—­å®¹å™¨<br><code>docker stop container_name</code><br>å°è¯•ä¸€ä¸‹å…³é—­ <code>nginx</code><br><code>docker stop nginx</code><br>çœ‹åˆ°å‡ºç°ä¸€ä¸ª <code>nginx</code> å°±æ˜¯å…³é—­æˆåŠŸäº†</p><h1 id="æŸ¥çœ‹é™æ€é¡¹ç›®èµ„æº"><a href="#æŸ¥çœ‹é™æ€é¡¹ç›®èµ„æº" class="headerlink" title="æŸ¥çœ‹é™æ€é¡¹ç›®èµ„æº"></a>æŸ¥çœ‹é™æ€é¡¹ç›®èµ„æº</h1><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡æŒ‡ä»¤å»æŸ¥çœ‹é™æ€çš„æ‰“åŒ…æ–‡ä»¶<br><code>curl -v -i localhost:3000</code><br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20230119142415.png" alt=""></p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="å‰ç«¯è¿›é˜¶" scheme="https://zlinni.github.io/categories/%E5%89%8D%E7%AB%AF%E8%BF%9B%E9%98%B6/"/>
    
    
    <category term="å‰ç«¯" scheme="https://zlinni.github.io/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="docker" scheme="https://zlinni.github.io/tags/docker/"/>
    
  </entry>
  
  <entry>
    <title>npmå‘å¸ƒå‰ç«¯å·¥å…·åº“</title>
    <link href="https://zlinni.github.io/posts/447422923/"/>
    <id>https://zlinni.github.io/posts/447422923/</id>
    <published>2023-01-19T03:51:55.000Z</published>
    <updated>2023-01-19T06:09:32.125Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>ç™½æµªè´¹äº†é‚£ä¹ˆå¤šæœ‰ç”¨çš„ä»£ç .jpg<br>é¿å…ä»Šåç”¨åˆ°ç›¸åŒçš„ä»£ç å´è¦åœ¨ä¸åŒçš„ä»“åº“é‡Œåå¤æ‰¾å®ç° æˆ‘å†³å®šæŠŠå…¬ç”¨çš„ä»£ç æŠ½å‡ºæ¥ æ–¹ä¾¿ä»¥åèƒ½ç”¨(æ–¹ä¾¿è„‘å­çŸ­è·¯çš„æ—¶å€™æ‰¾ä¸åˆ°åˆé€‚çš„ä»£ç )<br>æˆæœï¼š<br><a href="https://www.npmjs.com/package/zlinni_common_pkg?activeTab=readme">https://www.npmjs.com/package/zlinni_common_pkg?activeTab=readme</a></p><h1 id="ç¼–å†™ä»£ç "><a href="#ç¼–å†™ä»£ç " class="headerlink" title="ç¼–å†™ä»£ç "></a>ç¼–å†™ä»£ç </h1><p>é¦–å…ˆ GitHub å»ºä¸€ä¸ªä»“åº“ï¼Œæˆ‘å†™çš„æ˜¯ zlinni_common_pkg ä¹‹åæ·»åŠ ä¸€ä¸ª READMEï¼Œç„¶åå¯¼å‡º<br>clone ä»“åº“åï¼Œnpm init å‡ºç° packgejson(ç¨åçœ‹)<br>æ–°å»ºä¸€ä¸ª src æ–‡ä»¶å¤¹<br>æ–°å»ºä¸€ç‚¹ä»£ç  zlinniTool.ts</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> sayHi = (): <span class="function"><span class="params">string</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&quot;Hello~&quot;</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h1 id="åŒ…çš„è§„åˆ™"><a href="#åŒ…çš„è§„åˆ™" class="headerlink" title="åŒ…çš„è§„åˆ™"></a>åŒ…çš„è§„åˆ™</h1><p>æ‰“å¼€æˆ‘ä»¬çš„ pkgjson<br>è¿™æ˜¯æˆ‘å†™çš„è§„åˆ™ é™„åŠ æ³¨é‡Š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;zlinni_common_pkg&quot;</span>, <span class="comment">//npmä»“åº“å¯¹åº”çš„åå­— ä¸æ˜¯githubä»“åº“çš„åå­— è¿™ä¸ªåŒ…åä¸€å®šä¸èƒ½é‡å¤</span></span><br><span class="line">  <span class="attr">&quot;version&quot;</span>: <span class="string">&quot;1.0.0&quot;</span>, <span class="comment">//åŒ…ä½“å¯¹åº”çš„ç‰ˆæœ¬</span></span><br><span class="line">  <span class="attr">&quot;description&quot;</span>: <span class="string">&quot;ä¸ªäººå·¥å…·åº“&quot;</span>, <span class="comment">//åŒ…ä½“çš„åŠŸèƒ½æ€§æè¿°</span></span><br><span class="line">  <span class="attr">&quot;main&quot;</span>: <span class="string">&quot;./dist/zlinniTool.js&quot;</span>, <span class="comment">//å…¥å£æ–‡ä»¶</span></span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;test&quot;</span>: <span class="string">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;build&quot;</span>: <span class="string">&quot;tsup src/zlinniTool.ts --minify&quot;</span> <span class="comment">//æ‰“åŒ…è„šæœ¬ è¿™ä¸ªä¹‹åçœ‹</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;repository&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;git&quot;</span>, <span class="comment">//git å’Œä»“åº“åœ°å€</span></span><br><span class="line">    <span class="attr">&quot;url&quot;</span>: <span class="string">&quot;git+https://github.com/Zlinni/common_pkg.git&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;author&quot;</span>: <span class="string">&quot;zlinni&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;license&quot;</span>: <span class="string">&quot;ISC&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;bugs&quot;</span>: &#123;</span><br><span class="line">    <span class="comment">// æäº¤bugçš„åœ°å€</span></span><br><span class="line">    <span class="attr">&quot;url&quot;</span>: <span class="string">&quot;https://github.com/Zlinni/common_pkg/issues&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;homepage&quot;</span>: <span class="string">&quot;https://github.com/Zlinni/common_pkg#readme&quot;</span>, <span class="comment">// npmé¦–é¡µå±•ç¤º</span></span><br><span class="line">  <span class="attr">&quot;devDependencies&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;tsup&quot;</span>: <span class="string">&quot;^6.5.0&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;keywords&quot;</span>: [</span><br><span class="line">    <span class="comment">//æœç´¢å…³é”®è¯</span></span><br><span class="line">    <span class="string">&quot;zlinni&quot;</span>,</span><br><span class="line">    <span class="string">&quot;common_pkg&quot;</span></span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…³äºåŒ…åæŸ¥é‡</p><ol><li>ç›´æ¥å»ç½‘ç«™æœ</li><li>æ‰§è¡Œå‘½ä»¤<br><code>npm view åŒ…å</code><br>å¦‚æœæ‰¾ä¸åˆ° å°±ä¸é‡å¤</li></ol><h1 id="åŒ…çš„æ„å»º"><a href="#åŒ…çš„æ„å»º" class="headerlink" title="åŒ…çš„æ„å»º"></a>åŒ…çš„æ„å»º</h1><p>æ„å»ºåŒ…ä½“æˆ‘ä»¬ç”¨åˆ°äº† tsup è¿™ä¸ªå·¥å…·<br>æ˜¯ä¸€æ¬¾å¿«é€Ÿæ„å»º ts åŒ…ä½“çš„å·¥å…·<br>å‘½ä»¤<br><code>tsup &lt;å…¥å£js&gt; --minify</code></p><ul><li><code>--minify</code> å¯ä»¥ç¼©å°æ‰“åŒ…ä½“ç§¯<br>ç„¶åå°±å¯ä»¥å†™åœ¨ <code>packagejson</code> çš„ <code>build</code> é‡Œé¢<br>æ‰§è¡Œ <code>npm run build</code> å°±å¯ä»¥è¿›è¡Œæ„å»º<br>å°±ä¼šçœ‹åˆ°æ‰“åŒ…å‡ºäº†ä¸€ä¸ª <code>dist</code> æ–‡ä»¶ï¼Œé‡Œé¢æœ‰ <code>zlinniTool.js</code> å’Œ <code>zlinniTool.mjs</code> ä¸¤ä¸ªæ–‡ä»¶<h1 id="tsup-å·¥å…·é…ç½®"><a href="#tsup-å·¥å…·é…ç½®" class="headerlink" title="tsup å·¥å…·é…ç½®"></a><code>tsup</code> å·¥å…·é…ç½®</h1>åˆ†ä¸ºä¸¤ç§ ä¸€ç§æ˜¯å•ç‹¬å†™ä¸€ä¸ª <code>tsup.config.ts</code> ä¸€ç§æ˜¯ç›´æ¥åœ¨ <code>packgejson</code> é‡Œé¢å†™<br>é¦–å…ˆå‰è€…<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">  <span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;tsup&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> defineConfig(&#123;</span><br><span class="line"><span class="comment">// å…¥å£æ–‡ä»¶ æˆ–è€…å¯ä»¥ä½¿ç”¨ entryPoints åº•å±‚æ˜¯ esbuild</span></span><br><span class="line"><span class="attr">entry</span>: [<span class="string">&#x27;src/zlinniTool.ts&#x27;</span>],</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰“åŒ…ç±»å‹ æ”¯æŒä»¥ä¸‹å‡ ç§ &#x27;cjs&#x27; | &#x27;esm&#x27; | &#x27;iife&#x27;</span></span><br><span class="line"><span class="attr">format</span>: [<span class="string">&quot;cjs&quot;</span>, <span class="string">&quot;esm&quot;</span>],</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç”Ÿæˆç±»å‹æ–‡ä»¶ xxx.d.ts</span></span><br><span class="line"><span class="attr">dts</span>: <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä»£ç åˆ†å‰² é»˜è®¤ esm æ¨¡å¼æ”¯æŒ å¦‚æœ cjs éœ€è¦ä»£ç åˆ†å‰²çš„è¯å°±éœ€è¦é…ç½®ä¸º true</span></span><br><span class="line"><span class="attr">splitting</span>: <span class="literal">false</span>,</span><br><span class="line"></span><br><span class="line"><span class="comment">// sourcemap</span></span><br><span class="line"><span class="attr">sourcemap</span>: <span class="literal">false</span>,</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¯æ¬¡æ‰“åŒ…å…ˆåˆ é™¤ dist</span></span><br><span class="line"><span class="attr">clean</span>: <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line"><span class="comment">// outExtension(&#123;format&#125;)&#123;</span></span><br><span class="line"><span class="comment">// return &#123;</span></span><br><span class="line"><span class="comment">// js:`.$&#123;format&#125;.js`</span></span><br><span class="line"><span class="comment">// &#125;  </span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line">&#125;);</span><br><span class="line">  </span><br></pre></td></tr></table></figure>è¿™é‡Œæ¯”è¾ƒå…³é”®çš„æ˜¯ <code>dts</code> å…ˆå†™ä¸º <code>false</code><br>åè€…åˆ™æ˜¯ç›´æ¥å†™è¿›å» æ¨èå‰è€…<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20230119115909.png" alt=""><h1 id="åŒ…çš„å‘å¸ƒ"><a href="#åŒ…çš„å‘å¸ƒ" class="headerlink" title="åŒ…çš„å‘å¸ƒ"></a>åŒ…çš„å‘å¸ƒ</h1>ä¸Š npm ç½‘ç«™æ³¨å†Œä¸€ä¸ªè´¦å·<a href="https://www.npmjs.com/">https://www.npmjs.com/</a><br>ç„¶åæ§åˆ¶å° <code>npm login</code> ç™»å½•è‡ªå·±çš„è´¦å· <code>npm publish</code> å‘å¸ƒ<br>å»ç½‘ç«™ä¸ŠæŸ¥çœ‹æ˜¯å¦å­˜åœ¨è‡ªå·±çš„åŒ…ä½“ å­˜åœ¨åˆ™æˆåŠŸ<h1 id="å»é™¤æ— ç”¨çš„å†…å®¹"><a href="#å»é™¤æ— ç”¨çš„å†…å®¹" class="headerlink" title="å»é™¤æ— ç”¨çš„å†…å®¹"></a>å»é™¤æ— ç”¨çš„å†…å®¹</h1>å½“æˆ‘ä»¬åœ¨ç½‘ç«™ä¸Šæµè§ˆçš„æ—¶å€™ ä¼šå‘ç°æœ‰ <code>dist</code> ç›®å½•ï¼Œ<code>src</code> ç›®å½•ç­‰<br>å®é™…ä¸Š å¯¹äºåŒ…ä½“çš„ä½¿ç”¨è€…æ¥è¯´ æ˜¯ä¸éœ€è¦ <code>src</code> ç›®å½•çš„ ä¹Ÿå°±æ˜¯ä¸éœ€è¦çœŸå®çš„ä»£ç <br>æ‰“ä¸ªæ¯”æ–¹ å‰ç«¯æ‰“åŒ…å‡ºæ¥çš„ <code>dist</code> ç›®å½• æ˜¯å¯ä»¥ç›´æ¥ç»™åˆ°è¿ç»´å»æ„å»ºçš„ ä»–ä»¬ä¹Ÿä¸éœ€è¦å…³æ³¨æˆ‘ä»¬çš„çœŸå®ä»£ç  åªè¦ <code>dist</code> èƒ½è·‘å°±è¡Œ<br>åŒæ—¶ ä¸Šä¼ äº† <code>src</code> ç›®å½•ä¹Ÿå¢åŠ äº†æˆ‘ä»¬åŒ…ä½“çš„ä½“ç§¯<br>ä¿®æ”¹æ–¹å¼å¦‚ä¸‹ï¼š<br>æ‰“å¼€ <code>packgejson</code> å¢åŠ ä¸€è¡Œ<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;files&quot;</span>: [<span class="string">&quot;/dist&quot;</span>,<span class="string">&quot;/README.md&quot;</span>,<span class="string">&quot;/package.json&quot;</span>]<span class="comment">// åªä¸Šä¼ è¿™äº›ä¿¡æ¯ å¾ˆé‡è¦</span></span><br></pre></td></tr></table></figure>ç„¶åæˆ‘ä»¬ <code>npm publish</code> å‘ç°ä¸è¡Œ è¿™æ˜¯å› ä¸ºæˆ‘ä»¬æ²¡æœ‰ä¿®æ”¹ç‰ˆæœ¬å·<br>æˆ‘ä»¬åªåšäº†ç‚¹å°ä¿®æ”¹ æ‰€ä»¥æŠŠç‰ˆæœ¬å·æ”¹ä¸º <code>1.0.1</code> å³å¯</li></ul><p>å‘å¸ƒä¹‹åå°±ä¼šçœ‹åˆ°åªå‰©ä¸‹è¿™äº›ä¸œè¥¿äº†<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20230119120031.png" alt=""></p><h1 id="dts"><a href="#dts" class="headerlink" title="dts"></a>dts</h1><p>åœ¨è‡ªå·±çš„é¡¹ç›®ä¸­æ‰§è¡Œ <code>npm install zlinni_common_pkg</code><br>è·å–åˆ°ç›¸å…³çš„ä¾èµ–å å¼•å…¥æ–‡ä»¶<br>ä¼šå‘ç°æ²¡æœ‰ç±»å‹æç¤º è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ å› ä¸ºæ²¡æœ‰å†™ <code>dts</code><br><code>dts</code> å¼•å…¥æ–¹æ³• <code>tsup.config.ts</code> ä¸­ <code>dts</code> è®¾ç½®ä¸º <code>true</code><br><code>dts: true</code><br>ç„¶åç»§ç»­ <code>build</code> å‘ç°ç¼ºå°‘äº†å†…å®¹ <code>typescript</code><br>å› ä¸º <code>tsup</code> è™½ç„¶å¤„ç† <code>ts</code> ä½†æ˜¯å¯¹äº <code>ts</code> çš„ç”Ÿæˆè¿˜æ˜¯éœ€è¦ <code>typescript</code> çš„æ”¯æŒ<br>æ‰€ä»¥æˆ‘ä»¬è¦å®‰è£…ä¸€ä¸‹ <code>ts</code><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i typescript -D</span><br></pre></td></tr></table></figure><br>å†æ¬¡ <code>build</code> å‘ç° <code>build</code> æˆåŠŸäº†<br>æ‰“å¼€ <code>dist</code> ç›®å½• æ‰¾åˆ°äº† <code>zlinniTool.d.ts</code><br>è¿™ä¸ªå°±æ˜¯å‡½æ•°çš„ç±»å‹æ–‡ä»¶<br>å†æ¬¡ <code>publish</code><br>åœ¨å¯¹åº”çš„é¡¹ç›®ä¸­æ‰§è¡Œ<br><code>npm update zlinni_common_pkg</code><br>è¿›è¡Œæ›´æ–° å°±æ‰¾å¾—åˆ°ç±»å‹å£°æ˜äº†<br>ä¸€äº›é—®é¢˜<br>å¦‚æœæ²¡æœ‰å¯¹ <code>tsconfig</code> è¿›è¡Œé…ç½®ï¼Œé‚£ä¹ˆå¯èƒ½è¾“å‡ºçš„æ—¶å€™ä¼šç¼ºå°‘ <code>module</code> çš„è¯†åˆ«<br>æ·»åŠ ä»£ç  <code>tsconfig.json</code><br><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"><span class="attr">&quot;compilerOptions&quot;</span>: &#123;</span><br><span class="line"><span class="attr">&quot;moduleResolution&quot;</span>: <span class="string">&quot;node&quot;</span>,</span><br><span class="line"><span class="attr">&quot;allowSyntheticDefaultImports&quot;</span>: <span class="literal">true</span>,</span><br><span class="line"><span class="attr">&quot;lib&quot;</span>: [</span><br><span class="line"><span class="string">&quot;esnext&quot;</span>,</span><br><span class="line"><span class="string">&quot;dom&quot;</span>,</span><br><span class="line"><span class="string">&quot;dom.iterable&quot;</span>,</span><br><span class="line"><span class="string">&quot;scripthost&quot;</span>,</span><br><span class="line"><span class="string">&quot;ES6&quot;</span>,</span><br><span class="line"><span class="string">&quot;ES2015&quot;</span>,</span><br><span class="line"><span class="string">&quot;ES2015.Promise&quot;</span>,</span><br><span class="line"><span class="string">&quot;ES2015.Generator&quot;</span></span><br><span class="line">]</span><br><span class="line">&#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h1 id="CICDï¼Ÿ"><a href="#CICDï¼Ÿ" class="headerlink" title="CICDï¼Ÿ"></a>CICDï¼Ÿ</h1><p>Git ä¸Šä¼ ä¹‹åè‡ªåŠ¨è§¦å‘ <code>npm publish</code></p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="å‰ç«¯è¿›é˜¶" scheme="https://zlinni.github.io/categories/%E5%89%8D%E7%AB%AF%E8%BF%9B%E9%98%B6/"/>
    
    
    <category term="å‰ç«¯" scheme="https://zlinni.github.io/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="npm" scheme="https://zlinni.github.io/tags/npm/"/>
    
  </entry>
  
  <entry>
    <title>jestå•å…ƒæµ‹è¯•å­¦ä¹ </title>
    <link href="https://zlinni.github.io/posts/2976841894/"/>
    <id>https://zlinni.github.io/posts/2976841894/</id>
    <published>2023-01-19T03:05:58.000Z</published>
    <updated>2023-01-19T03:44:49.418Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h1><p>åˆå§‹åŒ–ä¸€ä¸ªé¡¹ç›®ï¼š<br><code>yarn init</code><br><code>yarn add jest</code><br>æ’ä»¶ vscode jest çš„ snippet<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20230119111503.png" alt=""><br>Jest ç”¨äºç›´æ¥æ£€æµ‹(è‡ªåŠ¨ run è„šæœ¬)<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20230119111545.png" alt=""></p><h1 id="æµ‹è¯•åŠ æ³•å‡½æ•°"><a href="#æµ‹è¯•åŠ æ³•å‡½æ•°" class="headerlink" title="æµ‹è¯•åŠ æ³•å‡½æ•°"></a>æµ‹è¯•åŠ æ³•å‡½æ•°</h1><p>æ–°å»º src ç¼–å†™ä¸€ä¸ª math.js</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> sum = <span class="function">(<span class="params">a, b</span>) =&gt;</span> a + b;</span><br><span class="line"><span class="built_in">module</span>.exports = &#123; sum &#125;;</span><br></pre></td></tr></table></figure><p>åœ¨åŒç›®å½•ä¸‹ç¼–å†™<code>math.jest.js</code><br>ä¸€ä¸ªæµ‹è¯•æ–‡ä»¶ç»„æˆ</p><ol><li>å¼•å…¥çš„æµ‹è¯• js</li><li>æ¨¡å—å‡½æ•° describe<br>a. åŒ…å«äº† test å‡½æ•°ï¼Œå’Œ given when then</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; sum &#125; = <span class="built_in">require</span>(<span class="string">&quot;./math&quot;</span>);</span><br><span class="line">describe(<span class="string">&quot;Math module&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  test(<span class="string">&quot;jest math return sum&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// given</span></span><br><span class="line">    <span class="keyword">const</span> number = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">const</span> anotherNumber = <span class="number">2</span>;</span><br><span class="line">    <span class="comment">// when</span></span><br><span class="line">    <span class="keyword">const</span> result = sum(number, anotherNumber);</span><br><span class="line">    <span class="comment">// then</span></span><br><span class="line">    expect(result).toEqual(<span class="number">3</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="ç¼–å†™è„šæœ¬-packgejson"><a href="#ç¼–å†™è„šæœ¬-packgejson" class="headerlink" title="ç¼–å†™è„šæœ¬ packgejson"></a>ç¼–å†™è„šæœ¬ packgejson</h2><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;jestDemo&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;version&quot;</span>: <span class="string">&quot;1.0.0&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;main&quot;</span>: <span class="string">&quot;index.js&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;license&quot;</span>: <span class="string">&quot;MIT&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;dependencies&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;jest&quot;</span>: <span class="string">&quot;^29.3.1&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;test&quot;</span>: <span class="string">&quot;jest &quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="è·‘è„šæœ¬"><a href="#è·‘è„šæœ¬" class="headerlink" title="è·‘è„šæœ¬"></a>è·‘è„šæœ¬</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn jest</span><br></pre></td></tr></table></figure><h3 id="æˆåŠŸçŠ¶æ€"><a href="#æˆåŠŸçŠ¶æ€" class="headerlink" title="æˆåŠŸçŠ¶æ€"></a>æˆåŠŸçŠ¶æ€</h3><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20230119111741.png" alt=""><br>æŠŠ equal æ”¹æˆ 1 æµ‹è¯•å¤±è´¥çŠ¶æ€</p><h3 id="å¤±è´¥çŠ¶æ€"><a href="#å¤±è´¥çŠ¶æ€" class="headerlink" title="å¤±è´¥çŠ¶æ€"></a>å¤±è´¥çŠ¶æ€</h3><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20230119111806.png" alt=""><br>çœ‹è¿™ä¸ªæŠ¥é”™ä¹Ÿå¯ä»¥çŸ¥é“æ˜¯ toEqual çš„æŠ¥é”™<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20230119111822.png" alt=""></p><h1 id="toBe-å’Œ-toEqual"><a href="#toBe-å’Œ-toEqual" class="headerlink" title="toBe å’Œ toEqual"></a>toBe å’Œ toEqual</h1><p>toBe ç›¸å½“äº=== ç¼ºç‚¹ ä¸èƒ½åˆ¤æ–­å¼•ç”¨ç±»å‹<br>toEqual åˆ™æ˜¯å®Œå…¨ç›¸å¯¹ åŒ…æ‹¬å¼•ç”¨ç±»å‹é‡Œé¢çš„å€¼ä¹Ÿè¦ç›¸ç­‰<br>ç¼–å†™<code>demo.test.js</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æµ‹è¯•toBeå’ŒtoEqual</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> can1 = &#123;</span><br><span class="line">  <span class="attr">test</span>: <span class="string">&quot;abc&quot;</span>,</span><br><span class="line">  <span class="attr">test2</span>: <span class="number">123</span>,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> can2 = &#123;</span><br><span class="line">  <span class="attr">test</span>: <span class="string">&quot;abc&quot;</span>,</span><br><span class="line">  <span class="attr">test2</span>: <span class="number">123</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">describe(<span class="string">&quot;test&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  test(<span class="string">&quot;expect().toBe();&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    expect(<span class="number">1</span> + <span class="number">1</span>).toBe(<span class="number">2</span>);</span><br><span class="line">    expect(<span class="number">1</span> + <span class="number">1</span>).not.toBe(<span class="number">3</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">  test(<span class="string">&quot;expect().toEqual();&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    expect(can1).toEqual(can2);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>run è„šæœ¬<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20230119111904.png" alt=""></p><h1 id="æ¨¡å—é—´ä¾èµ–"><a href="#æ¨¡å—é—´ä¾èµ–" class="headerlink" title="æ¨¡å—é—´ä¾èµ–"></a>æ¨¡å—é—´ä¾èµ–</h1><p>ä¾èµ–åˆ†ä¸ºä¸¤ç§ç±»å‹ï¼š<br>ç¤¾äº¤å‹æµ‹è¯•å•å…ƒå’Œç‹¬ç«‹å‹æµ‹è¯•å•å…ƒ<br>å½“ä¸€ä¸ªæ¨¡å—éœ€è¦ä¾èµ–å…¶ä»–æ¨¡å—æ¥å®ç°ä»–çš„åŠŸèƒ½çš„æ—¶å€™ï¼Œä»–å°±æ˜¯ä¸€ä¸ªç¤¾äº¤å‹å•å…ƒ<br>å½“ä¸€ä¸ªæ¨¡å—ä¸éœ€è¦ä¾èµ–å…¶ä»–æ¨¡å—å°±èƒ½å®ç°è‡ªå·±çš„åŠŸèƒ½çš„æ—¶å€™ å°±æ˜¯ä¸€ä¸ªç‹¬ç«‹å‹å•å…ƒ</p><h1 id="Mock-stub-å’Œ-spy"><a href="#Mock-stub-å’Œ-spy" class="headerlink" title="Mock stub å’Œ spy"></a>Mock stub å’Œ spy</h1><p>mock ç”¨äºæ›¿ä»£æŸä¸ªæ¨¡å—</p><p>stub æ„ä¸ºæ‰“æ¡© ç”¨äºæ¨¡æ‹Ÿç‰¹å®šçš„è¡Œä¸º<br>ä»£ç ä¾‹å­<br>ç¬¬ä¸€ä¸ª test åˆ›å»ºäº†ä¸€ä¸ª<code>jestfn</code> è™½ç„¶é‡Œé¢æ²¡æœ‰å†™ä¸œè¥¿ä½†æ˜¯ä»£è¡¨ä»–å·²ç»æ˜¯ä¸€ä¸ªå‡½æ•° <code>toHaveBeenCalled</code>ä»£è¡¨ä»–æ˜¯å¦è¢«è°ƒç”¨<br>ç¬¬äºŒä¸ª test åˆ›å»ºäº†ä¸ªè¿”å›å€¼æ°¸è¿œä¸º<code>true</code>çš„<code>jestfn</code>, è°ƒç”¨è¿”å›äº†<code>true</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// stubç”¨äºæ¨¡æ‹Ÿç‰¹å®šè¡Œä¸º</span></span><br><span class="line">describe(<span class="string">&quot;jest stub&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  test(<span class="string">&quot;jestfn&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> mockFn = jest.fn();</span><br><span class="line">    mockFn();</span><br><span class="line">    expect(mockFn).toHaveBeenCalled();</span><br><span class="line">  &#125;);</span><br><span class="line">  test(<span class="string">&quot;returnsTrue&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> returnsTrue = jest.fn(<span class="function">() =&gt;</span> <span class="literal">true</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(returnsTrue());</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20230119111958.png" alt=""><br>spy ç”¨äºç›‘å¬æ¨¡å—çš„è¡Œä¸º</p><h1 id="å•å…ƒæ¨¡å—çš„æ˜“æµ‹æ€§"><a href="#å•å…ƒæ¨¡å—çš„æ˜“æµ‹æ€§" class="headerlink" title="å•å…ƒæ¨¡å—çš„æ˜“æµ‹æ€§"></a>å•å…ƒæ¨¡å—çš„æ˜“æµ‹æ€§</h1><p>æˆ‘ä»¬ç¼–å†™æµ‹è¯•ä»£ç çš„æ—¶å€™ï¼Œç›¸äº’é—´ä¾èµ–çš„æ¨¡å—åº”è¯¥ä»¥æœ€ç®€å•çš„å½¢å¼å±•ç°å‡ºæ¥ï¼Œè€Œæˆ‘ä»¬çš„ mock ä½œç”¨æ˜¯ä»£æ›¿æŸä¸ªæ¨¡å—ï¼Œå¦‚æœæˆ‘ä»¬ mock æ¬¡æ•°å¤šäº†å°±è¦è€ƒè™‘è¿™ä¸ªæ¨¡å—çš„ç‹¬ç«‹æ€§äº†</p><p>æ‰€ä»¥åœ¨ä¿æŒæ¨¡å—ç‹¬ç«‹æ€§çš„åŒæ—¶ï¼Œä¹Ÿæ˜¯ä¿ƒä½¿è‡ªå·±å»æ€è€ƒä»€ä¹ˆæ ·çš„æ¨¡å—ç¬¦åˆèŒè´£å•ä¸€åŸåˆ™</p><p>ä»£ç çš„æ˜“æµ‹æ€§ä¹Ÿä»£è¡¨ç€ä»£ç çš„å¯ç»´æŠ¤æ€§</p><h1 id="å®ç°ä¸€ä¸ªæŸ¥æ‰¾åç§°çš„æ–¹æ³•å¹¶æµ‹è¯•"><a href="#å®ç°ä¸€ä¸ªæŸ¥æ‰¾åç§°çš„æ–¹æ³•å¹¶æµ‹è¯•" class="headerlink" title="å®ç°ä¸€ä¸ªæŸ¥æ‰¾åç§°çš„æ–¹æ³•å¹¶æµ‹è¯•"></a>å®ç°ä¸€ä¸ªæŸ¥æ‰¾åç§°çš„æ–¹æ³•å¹¶æµ‹è¯•</h1><p>æ–°å»ºä¸€ä¸ª searchName.js</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> services <span class="keyword">from</span> <span class="string">&quot;./service&quot;</span>; <span class="comment">// è¿™ä¸ªæ˜¯åç«¯ä»£ç  å¯ä»¥æš‚æ—¶ä¸å†™</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¦‚æœæ•°æ®å¤§äºä¸‰ä¸ªè¿”å›ä¸‰ä¸ª å°äºä¸‰ä¸ªç›´æ¥è¿”å›</span></span><br><span class="line"><span class="keyword">const</span> searchNames = <span class="function">(<span class="params">term</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> matches = services.getNames().filter(<span class="function">(<span class="params">name</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> name.includes(term);</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> matches.length &gt; <span class="number">3</span> ? matches.slice(<span class="number">0</span>, <span class="number">3</span>) : matches;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> searchNames;</span><br><span class="line">ç¼–å†™æµ‹è¯•ä»£ç searchName.test.js;</span><br><span class="line"><span class="keyword">import</span> searchNames <span class="keyword">from</span> <span class="string">&quot;./searchName&quot;</span>;</span><br><span class="line">test(<span class="string">&quot;should return empty result when not search&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">//given</span></span><br><span class="line">  <span class="keyword">const</span> keyword = <span class="string">&quot;JOJO&quot;</span>;</span><br><span class="line">  <span class="comment">//when</span></span><br><span class="line">  <span class="keyword">const</span> result = searchNames(keyword);</span><br><span class="line">  <span class="comment">//then</span></span><br><span class="line">  expect(result).toEqual([]);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶è¿è¡Œ<br>å‘ç°ä»–ä¸æ”¯æŒ esm æ‰€ä»¥æˆ‘ä»¬éœ€è¦å€ŸåŠ© babel<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20230119112059.png" alt=""><br><a href="https://jestjs.io/docs/getting-started">https://jestjs.io/docs/getting-started</a><br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20230119112109.png" alt=""><br>æ“ä½œå®Œæˆåå°±å¯ä»¥æ‰§è¡Œäº†</p><h2 id="å€ŸåŠ©äº-jest-mock"><a href="#å€ŸåŠ©äº-jest-mock" class="headerlink" title="å€ŸåŠ©äº jest mock"></a>å€ŸåŠ©äº jest mock</h2><p>å…¶å®æˆ‘ä»¬åšæµ‹è¯•çš„æ—¶å€™å¹¶ä¸å…³å¿ƒä¼ è¿‡æ¥çš„æ•°æ®ï¼Œè€Œæ˜¯æƒ³æµ‹è¯•è¿™ä¸ªå‡½æ•°çš„åŠŸèƒ½æ˜¯å¦å¥å£®<br>é‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥åˆ©ç”¨ jest çš„ mock å»å–ä»£è¿™ä¸ªæ¨¡å— æ³¨æ„ä¸è¦å†™<code>desrcribe</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> searchNames <span class="keyword">from</span> <span class="string">&quot;./searchName&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç›¸å½“äºæ‹¦æˆªäº†serviceé‡Œé¢çš„getNames</span></span><br><span class="line">jest.mock(<span class="string">&quot;./service&quot;</span>, <span class="function">() =&gt;</span> (&#123;</span><br><span class="line">  <span class="attr">getNames</span>: jest.fn(<span class="function">() =&gt;</span> [<span class="string">&quot;John&quot;</span>, <span class="string">&quot;Paul&quot;</span>, <span class="string">&quot;George&quot;</span>, <span class="string">&quot;Ringo&quot;</span>]),</span><br><span class="line">&#125;));</span><br><span class="line">test(<span class="string">&quot;should return empty result when not search&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">//given</span></span><br><span class="line">  <span class="keyword">const</span> keyword = <span class="string">&quot;JOJO&quot;</span>;</span><br><span class="line">  <span class="comment">//when</span></span><br><span class="line">  <span class="keyword">const</span> result = searchNames(keyword);</span><br><span class="line">  <span class="comment">//then</span></span><br><span class="line">  expect(result).toEqual([]);</span><br><span class="line">&#125;);</span><br><span class="line">test(<span class="string">&quot;should return empty result when found search&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">//given</span></span><br><span class="line">  <span class="keyword">const</span> keyword = <span class="string">&quot;John&quot;</span>;</span><br><span class="line">  <span class="comment">//when</span></span><br><span class="line">  <span class="keyword">const</span> result = searchNames(keyword);</span><br><span class="line">  <span class="comment">//then</span></span><br><span class="line">  expect(result).toEqual([<span class="string">&quot;John&quot;</span>]);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶å°±å¯ä»¥è·‘é€šä¸Šè¿°ä¸¤ä¸ªæµ‹è¯•</p><h2 id="mockImplementation-å•ç‹¬æ¨¡æ‹Ÿ"><a href="#mockImplementation-å•ç‹¬æ¨¡æ‹Ÿ" class="headerlink" title="mockImplementation å•ç‹¬æ¨¡æ‹Ÿ"></a>mockImplementation å•ç‹¬æ¨¡æ‹Ÿ</h2><p>å¦‚æœæˆ‘ä»¬æƒ³å¯¹å•ä¸ªæµ‹è¯•ä½¿ç”¨å•ç‹¬çš„ mockï¼Œé‚£ä¹ˆå¯ä»¥å†™æ‹¦æˆªæ–¹æ³•.mockImplementation<br>è¿™ä¸ªæ–¹æ³•å¯ä»¥å•ç‹¬æ¨¡æ‹Ÿ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> searchNames <span class="keyword">from</span> <span class="string">&quot;./searchName&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; getNames &#125; <span class="keyword">from</span> <span class="string">&quot;./service&quot;</span>;</span><br><span class="line"><span class="comment">// describe(&#x27;searchName&#x27;, () =&gt; &#123;</span></span><br><span class="line"><span class="comment">// æ‹¦æˆªäº†serviceé‡Œé¢çš„getNames</span></span><br><span class="line"><span class="comment">// jest.mock(&quot;./service&quot;, () =&gt; (&#123;</span></span><br><span class="line"><span class="comment">//   getNames: jest.fn(() =&gt; [&quot;John&quot;, &quot;Paul&quot;, &quot;George&quot;, &quot;Ringo&quot;]),</span></span><br><span class="line"><span class="comment">// &#125;));</span></span><br><span class="line">jest.mock(<span class="string">&quot;./service&quot;</span>, <span class="function">() =&gt;</span> (&#123;</span><br><span class="line">  <span class="attr">getNames</span>: jest.fn(),</span><br><span class="line">&#125;));</span><br><span class="line">test(<span class="string">&quot;should return empty result when not search&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">//given</span></span><br><span class="line">  <span class="keyword">const</span> keyword = <span class="string">&quot;JOJO&quot;</span>;</span><br><span class="line">  getNames.mockImplementation(<span class="function">() =&gt;</span> []);</span><br><span class="line">  <span class="comment">//when</span></span><br><span class="line">  <span class="keyword">const</span> result = searchNames(keyword);</span><br><span class="line">  <span class="comment">//then</span></span><br><span class="line">  expect(result).toEqual([]);</span><br><span class="line">&#125;);</span><br><span class="line">test(<span class="string">&quot;should return empty result when found search&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">//given</span></span><br><span class="line">  <span class="keyword">const</span> keyword = <span class="string">&quot;John&quot;</span>;</span><br><span class="line">  getNames.mockImplementation(<span class="function">() =&gt;</span> [<span class="string">&quot;John&quot;</span>, <span class="string">&quot;Paul&quot;</span>, <span class="string">&quot;George&quot;</span>, <span class="string">&quot;Ringo&quot;</span>]);</span><br><span class="line">  <span class="comment">//when</span></span><br><span class="line">  <span class="keyword">const</span> result = searchNames(keyword);</span><br><span class="line">  <span class="comment">//then</span></span><br><span class="line">  expect(result).toEqual([<span class="string">&quot;John&quot;</span>]);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// &#125;);</span></span><br></pre></td></tr></table></figure><p>ä¸è¿‡æ­¤æ—¶æŠ›å‡ºä¸€ä¸ªç–‘é—® ä¸ºä»€ä¹ˆæ²¡æœ‰æç¤º<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20230119112216.png" alt=""><br>ä¸ºäº†ä¿è¯æµ‹è¯•çš„å®Œæ•´æ€§å’Œç®€å•æ€§ æˆ‘ä»¬åº”è¯¥é‡å¤çš„å»ä½¿ç”¨ä»– ä¹Ÿå°±æ˜¯è¯´æµ‹è¯•é‡Œé¢ä¸åº”è¯¥æœ‰ä»»ä½•é€»è¾‘</p><h2 id="toHaveLength-åˆ¤æ–­é•¿åº¦"><a href="#toHaveLength-åˆ¤æ–­é•¿åº¦" class="headerlink" title="toHaveLength åˆ¤æ–­é•¿åº¦"></a>toHaveLength åˆ¤æ–­é•¿åº¦</h2><p>è¡¥å……ä¸¤ä¸ªæµ‹è¯• å¹¶å­¦ä¹  toHaveLength çš„ç”¨æ³•</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">test(<span class="string">&quot;should not return more than 3 matches&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">//given</span></span><br><span class="line">  <span class="keyword">const</span> keyword = <span class="string">&quot;John&quot;</span>;</span><br><span class="line">  getNames.mockImplementation(<span class="function">() =&gt;</span> [<span class="string">&quot;John 1&quot;</span>, <span class="string">&quot;John 2&quot;</span>, <span class="string">&quot;John 3 &quot;</span>, <span class="string">&quot;John4&quot;</span>]);</span><br><span class="line">  <span class="comment">//when</span></span><br><span class="line">  <span class="keyword">const</span> result = searchNames(keyword);</span><br><span class="line">  <span class="comment">//then</span></span><br><span class="line">  expect(result).toHaveLength(<span class="number">3</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">test(<span class="string">&quot;should handle null or undefined as input&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">//given</span></span><br><span class="line">  getNames.mockImplementation(<span class="function">() =&gt;</span> []);</span><br><span class="line">  <span class="comment">//when</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">//then</span></span><br><span class="line">  expect(searchNames(<span class="literal">undefined</span>)).toEqual([]);</span><br><span class="line">  expect(searchNames(<span class="literal">null</span>)).toEqual([]);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="æµ‹è¯•å¸®åŠ©æˆ‘ä»¬å¿«é€Ÿé‡æ„ä»£ç "><a href="#æµ‹è¯•å¸®åŠ©æˆ‘ä»¬å¿«é€Ÿé‡æ„ä»£ç " class="headerlink" title="æµ‹è¯•å¸®åŠ©æˆ‘ä»¬å¿«é€Ÿé‡æ„ä»£ç "></a>æµ‹è¯•å¸®åŠ©æˆ‘ä»¬å¿«é€Ÿé‡æ„ä»£ç </h2><p>å¦‚æœæˆ‘ä»¬æƒ³å®ç°è¾“å‡ºçš„ç»“æœå¯¹äºè¾“å…¥çš„å¤§å°å†™ä¸æ•æ„Ÿ é‚£ä¹ˆæµ‹è¯•ç”¨ä¾‹åº”è¯¥æ˜¯å¦‚ä¸‹ç¼–å†™ æ­¤æ—¶æ˜¯è·‘ä¸é€šçš„ æ‰€ä»¥æˆ‘ä»¬å»é‡æ„ä»£ç </p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">test(<span class="string">&quot;should return search result is not case sensitive&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">//given</span></span><br><span class="line">  getNames.mockImplementation(<span class="function">() =&gt;</span> [<span class="string">&quot;John&quot;</span>, <span class="string">&quot;Paul&quot;</span>, <span class="string">&quot;George&quot;</span>, <span class="string">&quot;Ringo&quot;</span>]);</span><br><span class="line">  <span class="comment">//when</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">//then</span></span><br><span class="line">  <span class="comment">// ç›®å‰è¿™ä¸ªæµ‹è¯•ç”¨ä¾‹æ˜¯è·‘ä¸é€šçš„ å› ä¸ºæˆ‘ä»¬å¹¶æ²¡æœ‰å®ç°è¿™æ ·çš„åŠŸèƒ½</span></span><br><span class="line">  expect(searchNames(<span class="string">&quot;john&quot;</span>)).toEqual([<span class="string">&quot;John&quot;</span>]);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> services <span class="keyword">from</span> <span class="string">&quot;./service&quot;</span>;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¦‚æœæ•°æ®å¤§äºä¸‰ä¸ªè¿”å›ä¸‰ä¸ª å°äºä¸‰ä¸ªç›´æ¥è¿”å›</span></span><br><span class="line"><span class="keyword">const</span> searchNames = <span class="function">(<span class="params">keyword</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> matches = services.getNames().filter(<span class="function">(<span class="params">name</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> name.toUpperCase().includes(keyword.toUpperCase());</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> matches.length &gt; <span class="number">3</span> ? matches.slice(<span class="number">0</span>, <span class="number">3</span>) : matches;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> searchNames;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20230119112320.png" alt=""><br>æ€»ç»“<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20230119112339.png" alt=""><br>æˆ‘ä»¬å¯ä»¥é€šè¿‡ vscode çœ‹åˆ°æ¯ä¸ªå•å…ƒæµ‹è¯•ï¼Œè®©æˆ‘ä»¬èƒ½å¤Ÿå¿«é€Ÿå›é¡¾é€»è¾‘ï¼Œå¹¶ä¸”ä»–ä»¬éƒ½æ˜¯å¯ä»¥è‡ªåŠ¨åŒ–è¿è¡Œçš„ï¼Œé¿å…åœ¨æˆ‘ä»¬ä»Šåæ”¹åŠ¨äº†æŸäº›å®ç°å¯¼è‡´æµ‹è¯•å¤±è´¥</p><h1 id="jest-çš„-watch-æ¨¡å¼"><a href="#jest-çš„-watch-æ¨¡å¼" class="headerlink" title="jest çš„ watch æ¨¡å¼"></a>jest çš„ watch æ¨¡å¼</h1><p>æ³¨æ„è¯¥åŠŸèƒ½éœ€è¦<code>git init</code><br>ç›‘è§†è€…æ¨¡å¼<br><code>yarn jest --watch</code><br>æœ‰å¤šä¸ªè¾…åŠ©å‘½ä»¤</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">Watch Usage</span><br><span class="line"> <span class="comment"># æŒ‰ a è¿›å…¥ a æ¨¡å¼ï¼šè¿è¡Œæ‰€æœ‰çš„æµ‹è¯•ã€‚</span></span><br><span class="line"> <span class="comment"># a è¿›å…¥ï¼Œa é€€å‡º</span></span><br><span class="line"> <span class="comment"># ä¹Ÿå¯ä»¥ä½¿ç”¨ jest --watchAll ç›´æ¥è¿›å…¥ a æ¨¡å¼</span></span><br><span class="line"> <span class="comment"># åªæœ‰ jest --watch æ—¶æ‰èƒ½ä½¿ç”¨</span></span><br><span class="line"> â€º Press a to run all tests.</span><br><span class="line"></span><br><span class="line"> <span class="comment"># æŒ‰ f è¿›å…¥ f æ¨¡å¼ï¼šåªè¿è¡Œå¤±è´¥çš„æµ‹è¯•ã€‚</span></span><br><span class="line"> <span class="comment"># f è¿›å…¥ï¼Œf é€€å‡º</span></span><br><span class="line"> â€º Press f to run only failed tests.</span><br><span class="line"></span><br><span class="line"> <span class="comment"># æŒ‰ o è¿›å…¥ o æ¨¡å¼ï¼šåªè¿è¡Œä¸æ›´æ”¹æ–‡ä»¶ç›¸å…³çš„æµ‹è¯•ã€‚</span></span><br><span class="line"> <span class="comment"># éœ€è¦ Git æ”¯æŒ</span></span><br><span class="line"> <span class="comment"># ä¹Ÿå¯ä»¥ä½¿ç”¨ jest --watch ç›´æ¥è¿›å…¥ o æ¨¡å¼</span></span><br><span class="line"> <span class="comment"># åªæœ‰ jest --watchAll æ—¶æ‰èƒ½ä½¿ç”¨</span></span><br><span class="line"> â€º Press o to only run tests related to changed files.</span><br><span class="line"></span><br><span class="line"> <span class="comment"># æŒ‰ p ä»¥æ–‡ä»¶åæ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼è¿›è¡Œè¿‡æ»¤ã€‚</span></span><br><span class="line"> <span class="comment"># åªæœ‰ --watchAll çš„æ—¶å€™ p æ¨¡å¼æ‰å¯ä»¥ä½¿ç”¨</span></span><br><span class="line"> <span class="comment"># æ³¨æ„ï¼štestRegex å°†å°è¯•ä½¿ç”¨ç»å¯¹æ–‡ä»¶è·¯å¾„æ¥æ£€æµ‹æµ‹è¯•æ–‡ä»¶ï¼Œå› æ­¤ï¼Œå…·æœ‰åç§°ä¸ä¹‹åŒ¹é…çš„æ–‡ä»¶å¤¹å°†æ‰€æœ‰æ–‡ä»¶ä½œä¸ºæµ‹è¯•è¿è¡Œ</span></span><br><span class="line"> <span class="comment"># testRegex ä¼šå¿½ç•¥ testMatch</span></span><br><span class="line"> â€º Press p to filter by a filename regex pattern.</span><br><span class="line"></span><br><span class="line"> <span class="comment"># æŒ‰ t ä»¥æµ‹è¯•åç§°ï¼ˆtest æ–¹æ³•ç¬¬ä¸€ä¸ªå‚æ•°ï¼‰æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼è¿›è¡Œè¿‡æ»¤ã€‚</span></span><br><span class="line"> â€º Press t to filter by a <span class="built_in">test</span> name regex pattern.</span><br><span class="line"></span><br><span class="line"> <span class="comment"># æŒ‰ q é€€å‡ºç›‘è§†æ¨¡å¼</span></span><br><span class="line"> â€º Press q to quit watch mode.</span><br><span class="line"></span><br><span class="line"> <span class="comment"># æŒ‰ Enter é”®è§¦å‘æµ‹è¯•è¿è¡Œ</span></span><br><span class="line"> â€º Press Enter to trigger a <span class="built_in">test</span> run.</span><br></pre></td></tr></table></figure><h1 id="jest-çš„-coverage"><a href="#jest-çš„-coverage" class="headerlink" title="jest çš„ coverage"></a>jest çš„ coverage</h1><p>å‘½ä»¤:<br><code>yarn jest --coverage</code><br>Jest coverage æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æœ‰å¤šå°‘è¯­å¥æ˜¯è¢«æµ‹è¯•è¿‡çš„ï¼Œæœ‰å¤šå°‘åˆ†æ”¯æ˜¯è¢«æµ‹è¯•è¿‡çš„<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20230119112444.png" alt=""><br>ç„¶åä»–ä¼šåœ¨æ ¹ç›®å½•ç”Ÿæˆä¸€ä¸ªæ–‡ä»¶å¤¹ coverage<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20230119112454.png" alt=""><br>é‡Œé¢çš„ html å¯ä»¥æ‰“å¼€çœ‹æ­¤æ¬¡çš„æµ‹è¯•æŠ¥å‘Š<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20230119112503.png" alt=""></p><h1 id="å¿«ç…§ç³»ç»Ÿ"><a href="#å¿«ç…§ç³»ç»Ÿ" class="headerlink" title="å¿«ç…§ç³»ç»Ÿ"></a>å¿«ç…§ç³»ç»Ÿ</h1><p>jest æä¾›äº†ä¸€ä¸ªå¿«ç…§æ–¹æ³•èƒ½å¤Ÿç›´æ¥æ‰“å°å‡ºå¯¹åº”çš„ç»“æœ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> sayHelloToName = <span class="function">(<span class="params">name</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&quot;Hello &quot;</span> + name;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// ä¸‹é¢æ˜¯æµ‹è¯•</span></span><br><span class="line">test(<span class="string">&quot;should say Hello when search&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> result = sayHelloToName(<span class="string">&quot;JOJO&quot;</span>);</span><br><span class="line">  <span class="comment">// expect(result).toEqual(&quot;Hello JOJO&quot;);</span></span><br><span class="line">  <span class="comment">// èƒ½å¤Ÿå¿«é€Ÿçš„æŠŠç»“æœæ˜¾ç¤ºå‡ºæ¥</span></span><br><span class="line">  expect(result).toMatchInlineSnapshot(<span class="string">`&quot;Hello JOJO&quot;`</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h1 id="æµ‹è¯•åŸåˆ™"><a href="#æµ‹è¯•åŸåˆ™" class="headerlink" title="æµ‹è¯•åŸåˆ™"></a>æµ‹è¯•åŸåˆ™</h1><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20230119112533.png" alt=""></p><p>åˆ†ä¸ºç«¯åˆ°ç«¯æµ‹è¯•ï¼ˆæ¨¡æ‹Ÿç”¨æˆ·è¡Œä¸ºï¼‰é›†æˆæµ‹è¯•ï¼ˆéªŒè¯å¤šä¸ªå•å…ƒèƒ½å¦åè°ƒå·¥ä½œï¼‰å•å…ƒæµ‹è¯•ï¼Œé™æ€æ£€æŸ¥ï¼ˆts eslintï¼‰</p><h1 id="ç»„ä»¶åŒ–æµ‹è¯•"><a href="#ç»„ä»¶åŒ–æµ‹è¯•" class="headerlink" title="ç»„ä»¶åŒ–æµ‹è¯•"></a>ç»„ä»¶åŒ–æµ‹è¯•</h1><p>å®‰è£…é¡¹ç›®<br><code>yarn create react-app fed-testing-react --template typescript</code><br>æ‰§è¡Œæµ‹è¯•<br><code>yarn test</code><br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20230119112558.png" alt=""><br>è§‚å¯Ÿä¸€ä¸‹ä»–çš„æµ‹è¯•ä»£ç  ä¹Ÿæ˜¯éå¸¸ç»å…¸çš„ given when then</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; render, screen &#125; <span class="keyword">from</span> <span class="string">&quot;@testing-library/react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">&quot;./App&quot;</span>;</span><br><span class="line"></span><br><span class="line">test(<span class="string">&quot;renders learn react link&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// given</span></span><br><span class="line">  render(<span class="xml"><span class="tag">&lt;<span class="name">App</span> /&gt;</span></span>);</span><br><span class="line">  <span class="comment">// when</span></span><br><span class="line">  <span class="keyword">const</span> linkElement = screen.getByText(<span class="regexp">/learn react/i</span>);</span><br><span class="line">  <span class="comment">// then</span></span><br><span class="line">  expect(linkElement).toBeInTheDocument();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>ä¼ é€’äº†ä¸¤ä¸ªå‡½æ•° ä¸€ä¸ªæ˜¯<code>render</code> ç”¨äºæ¸²æŸ“ç»„ä»¶ï¼Œ<code>screen</code> ç”¨äºè·å–å¯¹åº”çš„ç»„ä»¶å…ƒç´  è¿™é‡Œæ˜¯åœ¨ app é‡Œé¢é€šè¿‡æ–‡æœ¬çš„æ–¹å¼æ‰¾åˆ°äº†è¿™ä¸ª a æ ‡ç­¾<br>ç„¶å <code>toBeInTheDocument</code> å°±å¯ä»¥éªŒè¯è¿™ä¸ªå…ƒç´ æ˜¯å¦åœ¨ <code>document</code> ä¸­</p><h2 id="ç¼–å†™ä¸€ä¸ªè¾“å…¥æ¡†ï¼ŒæŸ¥çœ‹è¾“å…¥çš„å†…å®¹æ˜¯å¦æ˜¾ç¤ºåœ¨å¯¹åº”çš„æ ‡ç­¾ä¸­å¹¶æµ‹è¯•"><a href="#ç¼–å†™ä¸€ä¸ªè¾“å…¥æ¡†ï¼ŒæŸ¥çœ‹è¾“å…¥çš„å†…å®¹æ˜¯å¦æ˜¾ç¤ºåœ¨å¯¹åº”çš„æ ‡ç­¾ä¸­å¹¶æµ‹è¯•" class="headerlink" title="ç¼–å†™ä¸€ä¸ªè¾“å…¥æ¡†ï¼ŒæŸ¥çœ‹è¾“å…¥çš„å†…å®¹æ˜¯å¦æ˜¾ç¤ºåœ¨å¯¹åº”çš„æ ‡ç­¾ä¸­å¹¶æµ‹è¯•"></a>ç¼–å†™ä¸€ä¸ªè¾“å…¥æ¡†ï¼ŒæŸ¥çœ‹è¾“å…¥çš„å†…å®¹æ˜¯å¦æ˜¾ç¤ºåœ¨å¯¹åº”çš„æ ‡ç­¾ä¸­å¹¶æµ‹è¯•</h2><p>ç¨å¾®ä¿®æ”¹ä¸€ä¸‹æˆ‘ä»¬çš„ <code>app.tsx</code></p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useState &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="comment">// import logo from &#x27;./logo.svg&#x27;;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./App.css&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [fullName, setFullName] = useState(<span class="string">&quot;&quot;</span>);</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;App&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">input</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">type</span>=<span class="string">&quot;text&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">placeholder</span>=<span class="string">&#123;</span>&quot;<span class="attr">Type</span> <span class="attr">your</span> <span class="attr">name</span>&quot;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">value</span>=<span class="string">&#123;fullName&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">onChange</span>=<span class="string">&#123;(e)</span> =&gt;</span> setFullName(e.target.value)&#125;</span></span><br><span class="line"><span class="xml">      &gt;<span class="tag">&lt;/<span class="name">input</span>&gt;</span></span></span><br><span class="line"><span class="xml">      &#123;/_ è¦ç”¨ span åŒ…èµ·æ¥ _/&#125;</span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="xml">        my name is <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;fullName&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> App;</span><br></pre></td></tr></table></figure><p>è¿è¡Œ<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20230119112659.png" alt=""><br>å¯ä»¥æ“ä½œ<br>æ¥ä¸‹æ¥ä¿®æ”¹æˆ‘ä»¬çš„æµ‹è¯•ä»£ç  æˆ‘ä»¬å‘ç°æˆ‘ä»¬éœ€è¦æ‰¾åˆ°è¾“å…¥æ¡†ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥é€šè¿‡æ‰¾è¾“å…¥æ¡†ä¸€å¼€å§‹çš„ placeHolder å»æŸ¥æ‰¾åˆ°è¯¥è¾“å…¥æ¡†<br>è¿™é‡Œä»‹ç»ä¸€ä¸‹ä¸¤ä¸ª api</p><ul><li><code>getByPlaceholderText</code> æ‰¾åˆ°è¾“å…¥æ¡†çš„ <code>placeHolder</code> æ‰¾ä¸åˆ°è¿”å› <code>null</code></li><li><code>queryByPlaceholderText</code> åŒç† ä½† ts ä¼šæŠ¥é”™<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20230119112710.png" alt=""><br>å› ä¸ºæˆ‘ä»¬éœ€è¦ç¡®å®šä¸€å®šèƒ½æ‰¾åˆ° æ‰€ä»¥ä¸€èˆ¬ç”¨çš„æ˜¯å‰è€…</li></ul><p>ç„¶åæˆ‘ä»¬éœ€è¦æ‰¾åˆ°è¾“å…¥çš„ <code>name</code> æ˜¯å¦åœ¨é¡µé¢ä¸­ åˆ™è¦ç”¨åˆ° <code>getByText</code></p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; render, screen &#125; <span class="keyword">from</span> <span class="string">&quot;@testing-library/react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">&quot;./App&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> userEvent <span class="keyword">from</span> <span class="string">&quot;@testing-library/user-event&quot;</span>;</span><br><span class="line"></span><br><span class="line">test(<span class="string">&quot;should show fullName when type&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">//given</span></span><br><span class="line">  <span class="keyword">const</span> name = <span class="string">&quot;JOJO&quot;</span>;</span><br><span class="line">  <span class="comment">//when</span></span><br><span class="line">  render(<span class="xml"><span class="tag">&lt;<span class="name">App</span> /&gt;</span></span>);</span><br><span class="line">  <span class="comment">// æ¨¡æ‹Ÿç”¨æˆ·è¡Œä¸ºåœ¨è¾“å…¥æ¡†ä¸Šé¢è¾“å…¥</span></span><br><span class="line">  userEvent.type(screen.getByPlaceholderText(<span class="string">&quot;Type your name&quot;</span>), name);</span><br><span class="line">  <span class="comment">//then</span></span><br><span class="line">  <span class="comment">// æ‰¾åˆ°è¾“å‡ºç»“æœä¸€è‡´çš„åœ°æ–¹</span></span><br><span class="line">  expect(screen.getByText(name)).toBeInTheDocument();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20230119112803.png" alt=""><br>è¿è¡ŒæˆåŠŸ æˆåŠŸæµ‹è¯•ç»„ä»¶</p><h2 id="TODO-ç»„ä»¶æµ‹è¯•"><a href="#TODO-ç»„ä»¶æµ‹è¯•" class="headerlink" title="TODO ç»„ä»¶æµ‹è¯•"></a>TODO ç»„ä»¶æµ‹è¯•</h2><p>ä»£ç ä»“åº“ï¼š<a href="https://github.com/JimmyLv/fed-testing-react">https://github.com/JimmyLv/fed-testing-react</a><br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20230119112907.png" alt=""><br>é¦–å…ˆè¿™ä¸ª <code>todo</code> ç»„ä»¶æœ‰ä¸‰ä¸ªé»˜è®¤çš„äº‹ä»¶ï¼Œè€Œä¸”æˆ‘ä»¬å¯ä»¥å¯¹ä»–è¿›è¡Œå¢åˆ æ”¹ï¼Œç°åœ¨æˆ‘ä»¬è¦å¯¹ä»–çš„åŠŸèƒ½è¿›è¡Œæµ‹è¯•<br>ç„¶ååœ¨å¯¹åº”çš„ <code>Todo.tsx</code> ç›®å½•ä¸‹é¢æ–°å»º <code>Todo.test.tsx</code><br>æˆ‘ä»¬äº†è§£åˆ°è¿™ä¸ª <code>todo</code> èƒ½åˆ†åˆ«è¿›è¡Œä»¥ä¸‹çš„äº‹æƒ…</p><ul><li>æ¸²æŸ“æ–°çš„ <code>todo</code></li><li>ç‚¹å‡» <code>complete</code> æŒ‰é’®æ‰§è¡Œ <code>toggleTodo</code></li><li>ç‚¹å‡» <code>Redo</code> æŒ‰é’®æ‰§è¡Œ <code>toggleTodo</code></li><li>ç‚¹å‡» <code>x</code> æŒ‰é’®æ‰§è¡Œ <code>removeTodo</code></li></ul><p>æ‰€ä»¥æˆ‘ä»¬è¦é’ˆå¯¹è¿™å‡ ä¸ªäº¤äº’äº‹ä»¶å»åšå•æµ‹</p><h3 id="æ¸²æŸ“æ–°çš„-item"><a href="#æ¸²æŸ“æ–°çš„-item" class="headerlink" title="æ¸²æŸ“æ–°çš„ item"></a>æ¸²æŸ“æ–°çš„ <code>item</code></h3><p>æˆ‘ä»¬åœ¨è¾“å…¥æ¡†è¾“å…¥äº‹ä»¶ä¹‹åå›è½¦ä¼šç”Ÿæˆæ–°çš„ <code>todo</code> ç°åœ¨æˆ‘ä»¬è¦å¼€å§‹æµ‹è¯•è¿™ä¸€é¡¹<br>é¦–å…ˆè§‚å¯Ÿç»„ä»¶ä¼ é€’æ–° <code>todo</code> çš„æ–¹å¼<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20230119112920.png" alt=""><br>æˆ‘ä»¬å‘ç°ä»–æ˜¯é€šè¿‡ <code>prop</code> ä¼ é€’äº† <code>todo</code> äº‹ä»¶ <code>index</code> å’Œä¸¤ä¸ª <code>function</code> è¿›å»çš„<br>æ‰€ä»¥æˆ‘ä»¬å¯¹åº”ä¹Ÿè¦åˆ›å»ºæ–°çš„ <code>todo</code> ç»™ä»–é€è¿›å» å¯¹äº <code>function</code> æˆ‘ä»¬å¯ä»¥ç”¨ <code>jest.fn()</code>å»æš‚æ—¶éš”ç¦» é‚£ä¹ˆä»£ç å°±æ˜¯</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; render,screen &#125; <span class="keyword">from</span> <span class="string">&quot;@testing-library/react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; Todo &#125; <span class="keyword">from</span> <span class="string">&quot;./Todo&quot;</span>;</span><br><span class="line"></span><br><span class="line">describe(<span class="string">&#x27;Name of the group&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">test(<span class="string">&quot;should render new item&quot;</span>,<span class="function">()=&gt;</span>&#123;</span><br><span class="line"><span class="keyword">const</span> todo = &#123;</span><br><span class="line"><span class="attr">id</span>:<span class="number">1</span>,</span><br><span class="line"><span class="attr">text</span>:<span class="string">&#x27;Hello World&#x27;</span>,</span><br><span class="line"><span class="attr">completed</span>:<span class="literal">false</span></span><br><span class="line">&#125;</span><br><span class="line">render(<span class="xml"><span class="tag">&lt;<span class="name">Todo</span> <span class="attr">todo</span>=<span class="string">&#123;todo&#125;</span> <span class="attr">index</span>=<span class="string">&#123;todo.id&#125;</span> <span class="attr">toggleTodo</span>=<span class="string">&#123;jest.fn()&#125;</span> <span class="attr">removeTodo</span>=<span class="string">&#123;jest.fn()&#125;/</span>&gt;</span></span>)</span><br><span class="line">expect(screen.getByText(<span class="string">&quot;Hello World&quot;</span>)).toBeInTheDocument();</span><br><span class="line">&#125;)</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>é‚£ä¹ˆè¿™ä¸ªå•ä¾§å°±èƒ½é€šè¿‡äº†</p><h3 id="test-todo"><a href="#test-todo" class="headerlink" title="test.todo"></a><code>test.todo</code></h3><p>æˆ‘ä»¬å†™å®Œæ•´çš„æµ‹è¯•ä»£ç ä¹‹å‰å¯èƒ½è¦ç»å†ä¸€ä¸ªç±»ä¼¼äº <code>todo</code> çš„è¿‡ç¨‹ï¼Œé‚£ä¹ˆå…¶å® <code>jest</code> ä¹Ÿæ˜¯æœ‰æä¾›ç±»ä¼¼çš„ä»£ç çš„</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">test.todo(<span class="string">&quot;should render completed item&quot;</span>);</span><br><span class="line">test.todo(<span class="string">&quot;should delete item&quot;</span>);</span><br><span class="line">test.todo(<span class="string">&quot;should toggle item&quot;</span>);</span><br></pre></td></tr></table></figure><p>ç¼–å†™å¥½ä¹‹åï¼Œä¼šå‘ç°ä»–å®é™…ä¸Šæ˜¯ä¸ä¼šè·‘çš„ï¼Œå°±ç›¸å½“äºä¸€ä¸ªæ³¨é‡Šæ”¾åœ¨é‚£é‡Œç”¨äºåç»­çš„æµ‹è¯•æµç¨‹<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20230119113056.png" alt=""></p><h3 id="æ¸²æŸ“å®ŒæˆçŠ¶æ€"><a href="#æ¸²æŸ“å®ŒæˆçŠ¶æ€" class="headerlink" title="æ¸²æŸ“å®ŒæˆçŠ¶æ€"></a>æ¸²æŸ“å®ŒæˆçŠ¶æ€</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">test(<span class="string">&quot;should render completed item&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> todo = &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">text</span>: <span class="string">&quot;Hello World&quot;</span>,</span><br><span class="line">    <span class="attr">isCompleted</span>: <span class="literal">true</span>,</span><br><span class="line">  &#125;;</span><br><span class="line">  render(</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">Todo</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">      <span class="attr">todo</span>=<span class="string">&#123;todo&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">      <span class="attr">index</span>=<span class="string">&#123;todo.id&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">      <span class="attr">toggleTodo</span>=<span class="string">&#123;jest.fn()&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">      <span class="attr">removeTodo</span>=<span class="string">&#123;jest.fn()&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">    /&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">  expect(screen.getByText(<span class="string">&quot;Redo&quot;</span>)).toBeInTheDocument();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="æ˜¯å¦è°ƒç”¨äº†-toggleTodo"><a href="#æ˜¯å¦è°ƒç”¨äº†-toggleTodo" class="headerlink" title="æ˜¯å¦è°ƒç”¨äº† toggleTodo"></a>æ˜¯å¦è°ƒç”¨äº† <code>toggleTodo</code></h3><ul><li>å¯¹äºå·²å®Œæˆçš„äº‹ä»¶ ç‚¹å‡» Redo</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">test(<span class="string">&quot;should toggle item&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> todo = &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">text</span>: <span class="string">&quot;Hello World&quot;</span>,</span><br><span class="line">    <span class="attr">isCompleted</span>: <span class="literal">true</span>,</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">const</span> toggleTodo = jest.fn();</span><br><span class="line">  render(</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">Todo</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">      <span class="attr">todo</span>=<span class="string">&#123;todo&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">      <span class="attr">index</span>=<span class="string">&#123;todo.id&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">      <span class="attr">toggleTodo</span>=<span class="string">&#123;toggleTodo&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">      <span class="attr">removeTodo</span>=<span class="string">&#123;jest.fn()&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">    /&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">  <span class="comment">// å·²ç»å®Œæˆçš„äº‹ä»¶ ç‚¹å‡»äº† Redo ä¹‹å</span></span><br><span class="line">  userEvent.click(screen.getByText(<span class="string">&quot;Redo&quot;</span>));</span><br><span class="line">  <span class="comment">// toggleTodo è¿™ä¸ªå‡½æ•°æ˜¯å¦è¢«è§¦å‘ä¸€æ¬¡</span></span><br><span class="line">  expect(toggleTodo).toHaveBeenCalledTimes(<span class="number">1</span>);</span><br><span class="line">  <span class="comment">// æˆ‘ä»¬åœ¨æ­¤å•å…ƒæµ‹è¯•é‡Œé¢ä¸éœ€è¦å…³å¿ƒ toggleTodo è¿™ä¸ªå‡½æ•°äº§ç”Ÿäº†ä»€ä¹ˆæ ·çš„ç»“æœ</span></span><br><span class="line">  <span class="comment">// åªéœ€è¦çŸ¥é“ä»–è¢«è°ƒç”¨è¿‡äº†å³å¯</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><ul><li>å¯¹äºæœªå®Œæˆçš„äº‹ä»¶ ç‚¹å‡» Complete</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">test(<span class="string">&quot;should toggle item when todo not completed&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> todo = &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">text</span>: <span class="string">&quot;Hello World&quot;</span>,</span><br><span class="line">    <span class="attr">isCompleted</span>: <span class="literal">false</span>,</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">const</span> toggleTodo = jest.fn();</span><br><span class="line">  render(</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">Todo</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">      <span class="attr">todo</span>=<span class="string">&#123;todo&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">      <span class="attr">index</span>=<span class="string">&#123;todo.id&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">      <span class="attr">toggleTodo</span>=<span class="string">&#123;toggleTodo&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">      <span class="attr">removeTodo</span>=<span class="string">&#123;jest.fn()&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">    /&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">  <span class="comment">// æœªå®Œæˆçš„äº‹ä»¶ ç‚¹å‡» Complete ä¹‹å</span></span><br><span class="line">  userEvent.click(screen.getByText(<span class="string">&quot;Complete&quot;</span>));</span><br><span class="line">  <span class="comment">// removeTodo è¿™ä¸ªå‡½æ•°æ˜¯å¦è¢«è§¦å‘ä¸€æ¬¡</span></span><br><span class="line">  expect(toggleTodo).toHaveBeenCalledTimes(<span class="number">1</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="æ˜¯å¦è°ƒç”¨äº†-deleteTodo"><a href="#æ˜¯å¦è°ƒç”¨äº†-deleteTodo" class="headerlink" title="æ˜¯å¦è°ƒç”¨äº† deleteTodo"></a>æ˜¯å¦è°ƒç”¨äº† <code>deleteTodo</code></h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">test(<span class="string">&quot;should delete item&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> todo = &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">text</span>: <span class="string">&quot;Hello World&quot;</span>,</span><br><span class="line">    <span class="attr">isCompleted</span>: <span class="literal">true</span>,</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">const</span> removeTodo = jest.fn();</span><br><span class="line">  render(</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">Todo</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">      <span class="attr">todo</span>=<span class="string">&#123;todo&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">      <span class="attr">index</span>=<span class="string">&#123;todo.id&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">      <span class="attr">toggleTodo</span>=<span class="string">&#123;jest.fn()&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">      <span class="attr">removeTodo</span>=<span class="string">&#123;removeTodo&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">    /&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">  <span class="comment">// ç‚¹å‡»äº† Redo ä¹‹å</span></span><br><span class="line">  userEvent.click(screen.getByText(<span class="string">&quot;x&quot;</span>));</span><br><span class="line">  <span class="comment">// removeTodo è¿™ä¸ªå‡½æ•°æ˜¯å¦è¢«è§¦å‘ä¸€æ¬¡</span></span><br><span class="line">  expect(removeTodo).toHaveBeenCalledTimes(<span class="number">1</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="æ£€éªŒæµ‹è¯•è¦†ç›–ç‡"><a href="#æ£€éªŒæµ‹è¯•è¦†ç›–ç‡" class="headerlink" title="æ£€éªŒæµ‹è¯•è¦†ç›–ç‡"></a>æ£€éªŒæµ‹è¯•è¦†ç›–ç‡</h3><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20230119113252.png" alt=""></p><h2 id="Todo-Form-ç»„ä»¶æµ‹è¯•"><a href="#Todo-Form-ç»„ä»¶æµ‹è¯•" class="headerlink" title="Todo Form ç»„ä»¶æµ‹è¯•"></a>Todo Form ç»„ä»¶æµ‹è¯•</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useState &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">TodoForm</span>(<span class="params">&#123; addTodo &#125;: &#123; addTodo: (todo: string) =&gt; <span class="keyword">void</span> &#125;</span>) </span>&#123;</span><br><span class="line"><span class="keyword">const</span> [value, setValue] = useState(<span class="string">&quot;&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> handleSubmit = <span class="function">(<span class="params">e: React.FormEvent</span>) =&gt;</span> &#123;</span><br><span class="line">e.preventDefault();</span><br><span class="line"><span class="keyword">if</span> (!value) <span class="keyword">return</span>;</span><br><span class="line">addTodo(value);</span><br><span class="line">setValue(<span class="string">&quot;&quot;</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> (</span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">form</span> <span class="attr">onSubmit</span>=<span class="string">&#123;handleSubmit&#125;</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">input</span></span></span></span><br><span class="line"><span class="tag"><span class="xml"><span class="attr">type</span>=<span class="string">&quot;text&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml"><span class="attr">placeholder</span>=<span class="string">&#123;</span>`<span class="attr">What</span>&#x27;<span class="attr">s</span> <span class="attr">your</span> <span class="attr">plan</span>?`&#125;</span></span></span><br><span class="line"><span class="tag"><span class="xml"><span class="attr">className</span>=<span class="string">&quot;input&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml"><span class="attr">value</span>=<span class="string">&#123;value&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml"><span class="attr">onChange</span>=<span class="string">&#123;(e)</span> =&gt;</span> setValue(e.target.value)&#125;</span></span><br><span class="line"><span class="xml">/&gt;</span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span></span><br><span class="line">);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è§‚å¯Ÿè¿™æ®µç»„ä»¶ä»£ç  æˆ‘ä»¬å¯ä»¥çŸ¥é“ <code>form</code> ç»„ä»¶åšäº†ä»¥ä¸‹å‡ ä»¶äº‹æƒ…</p><ul><li>è¾“å…¥å€¼ä¹‹å æ‰§è¡Œ <code>addTodo</code> å’Œ <code>setValue</code></li><li>è¾“å…¥ç©ºå€¼ ä¸æ‰§è¡Œ <code>addTodo</code><h3 id="è¾“å…¥å€¼åæ‰§è¡Œ-addTodo"><a href="#è¾“å…¥å€¼åæ‰§è¡Œ-addTodo" class="headerlink" title="è¾“å…¥å€¼åæ‰§è¡Œ addTodo"></a>è¾“å…¥å€¼åæ‰§è¡Œ <code>addTodo</code></h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">test(<span class="string">&quot;should allow add todo when not empty input&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line"><span class="comment">//given</span></span><br><span class="line"><span class="keyword">const</span> addTodo = jest.fn();</span><br><span class="line">render(<span class="xml"><span class="tag">&lt;<span class="name">TodoForm</span> <span class="attr">addTodo</span>=<span class="string">&#123;addTodo&#125;</span> /&gt;</span></span>);</span><br><span class="line"><span class="comment">//when</span></span><br><span class="line"><span class="comment">// æ¨¡æ‹Ÿå›è½¦è¾“å…¥å€¼</span></span><br><span class="line">userEvent.type(screen.getByPlaceholderText(<span class="string">&quot;What&#x27;s your plan?&quot;</span>), <span class="string">&quot;do sth&#123;enter&#125;&quot;</span>);</span><br><span class="line"><span class="comment">//then</span></span><br><span class="line"><span class="comment">//è¿™é‡Œå†™ toBeCalledWith æ˜¯ä»£è¡¨ addTodo è¿™ä¸ªå‡½æ•°æ˜¯å¦è¢« do sth è¿™ä¸ªå‚æ•°è°ƒç”¨</span></span><br><span class="line">expect(addTodo).toBeCalledWith(<span class="string">&#x27;do sth&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="è¾“å…¥ç©ºå€¼ä¸æ‰§è¡Œ-addTodo"><a href="#è¾“å…¥ç©ºå€¼ä¸æ‰§è¡Œ-addTodo" class="headerlink" title="è¾“å…¥ç©ºå€¼ä¸æ‰§è¡Œ addTodo"></a>è¾“å…¥ç©ºå€¼ä¸æ‰§è¡Œ addTodo</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">test(<span class="string">&quot;should ignore empty input&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line"><span class="comment">//given</span></span><br><span class="line"><span class="keyword">const</span> addTodo = jest.fn();</span><br><span class="line">render(<span class="xml"><span class="tag">&lt;<span class="name">TodoForm</span> <span class="attr">addTodo</span>=<span class="string">&#123;addTodo&#125;</span> /&gt;</span></span>);</span><br><span class="line"><span class="comment">//when</span></span><br><span class="line"><span class="comment">// æ¨¡æ‹Ÿå›è½¦è¾“å…¥ç©ºå€¼ ç”¨èŠ±æ‹¬å·æ ‡è¯†å›è½¦</span></span><br><span class="line">userEvent.type(screen.getByPlaceholderText(<span class="string">&quot;What&#x27;s your plan?&quot;</span>), <span class="string">&quot;&#123;enter&#125;&quot;</span>);</span><br><span class="line"><span class="comment">//then</span></span><br><span class="line"><span class="comment">// è¿™é‡Œè¦å†™ toBeCalled ä¸èƒ½å†™ toHaveBeenCalled å› ä¸ºåè€…éœ€è¦ä¼ é€’å¤§äº 0 çš„æ•´æ•°</span></span><br><span class="line">expect(addTodo).not.toBeCalled();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul><h2 id="app-ç»„ä»¶æµ‹è¯•"><a href="#app-ç»„ä»¶æµ‹è¯•" class="headerlink" title="app ç»„ä»¶æµ‹è¯•"></a>app ç»„ä»¶æµ‹è¯•</h2><p>  è§‚å¯Ÿä¸€ä¸‹ app ç»„ä»¶çš„ä»£ç <br>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">  </span><br><span class="line">  <span class="keyword">import</span> React, &#123; useState &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line">  <span class="keyword">import</span> <span class="string">&quot;./App.css&quot;</span>;</span><br><span class="line">  <span class="keyword">import</span> &#123; Todo &#125; <span class="keyword">from</span> <span class="string">&quot;./components/Todo&quot;</span>;</span><br><span class="line">  <span class="keyword">import</span> &#123; TodoForm &#125; <span class="keyword">from</span> <span class="string">&quot;./components/TodoForm&quot;</span>;</span><br><span class="line">  <span class="keyword">import</span> &#123; TodoType &#125; <span class="keyword">from</span> <span class="string">&#x27;./types&#x27;</span></span><br><span class="line">  <span class="keyword">import</span> &#123; toggleOneTodo &#125; <span class="keyword">from</span> <span class="string">&quot;./utils/toggleOneTodo&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="keyword">const</span> [todos, setTodos] = useState&lt;TodoType[]&gt;([</span><br><span class="line">&#123;</span><br><span class="line"><span class="attr">text</span>: <span class="string">&quot;Learn about React&quot;</span>,</span><br><span class="line"><span class="attr">isCompleted</span>: <span class="literal">false</span>,</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line"><span class="attr">text</span>: <span class="string">&quot;Meet friend for lunch&quot;</span>,</span><br><span class="line"><span class="attr">isCompleted</span>: <span class="literal">false</span>,</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line"><span class="attr">text</span>: <span class="string">&quot;Build really cool todo app&quot;</span>,</span><br><span class="line"><span class="attr">isCompleted</span>: <span class="literal">false</span>,</span><br><span class="line">&#125;,</span><br><span class="line">]);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> addTodo = <span class="function">(<span class="params">text: string</span>) =&gt;</span> &#123;</span><br><span class="line"><span class="keyword">const</span> newTodos = [...todos, &#123; text &#125;];</span><br><span class="line">setTodos(newTodos);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> toggleTodo = <span class="function">(<span class="params">index: number</span>) =&gt;</span> &#123;</span><br><span class="line"><span class="keyword">const</span> newTodos = toggleOneTodo(todos, index);</span><br><span class="line">setTodos(newTodos);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> removeTodo = <span class="function">(<span class="params">index: number</span>) =&gt;</span> &#123;</span><br><span class="line"><span class="keyword">const</span> newTodos = [...todos];</span><br><span class="line">newTodos.splice(index, <span class="number">1</span>);</span><br><span class="line">setTodos(newTodos);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> (</span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;todo-list&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">&#123;todos.map((todo, index) =&gt; (</span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">Todo</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">            <span class="attr">key</span>=<span class="string">&#123;index&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">            <span class="attr">index</span>=<span class="string">&#123;index&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">            <span class="attr">todo</span>=<span class="string">&#123;todo&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">            <span class="attr">toggleTodo</span>=<span class="string">&#123;toggleTodo&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">            <span class="attr">removeTodo</span>=<span class="string">&#123;removeTodo&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">          /&gt;</span></span></span><br><span class="line"><span class="xml">))&#125;</span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">TodoForm</span> <span class="attr">addTodo</span>=<span class="string">&#123;addTodo&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> App;</span><br></pre></td></tr></table></figure></p><p>ä»–åšäº†ä»¥ä¸‹å‡ ä»¶äº‹æƒ…</p><ul><li>æ¸²æŸ“äº†ä¸‰ä¸ª todo list</li><li>æ‰§è¡Œ <code>addTodo</code> ä¼šæ·»åŠ ä¸€ä¸ª <code>item</code></li><li>æ‰§è¡Œ <code>removeTodo</code> ä¼šåˆ é™¤ä¸€ä¸ª <code>item</code></li><li>æ‰§è¡Œ <code>toggleTodo</code> ä¼šåˆ‡æ¢ <code>todo</code> çš„çŠ¶æ€<h3 id="æ¸²æŸ“ä¸‰ä¸ª-todoï¼ˆgetAllByTestId-çš„ä½¿ç”¨ï¼‰"><a href="#æ¸²æŸ“ä¸‰ä¸ª-todoï¼ˆgetAllByTestId-çš„ä½¿ç”¨ï¼‰" class="headerlink" title="æ¸²æŸ“ä¸‰ä¸ª todoï¼ˆgetAllByTestId çš„ä½¿ç”¨ï¼‰"></a>æ¸²æŸ“ä¸‰ä¸ª todoï¼ˆ<code>getAllByTestId</code> çš„ä½¿ç”¨ï¼‰</h3>æˆ‘ä»¬åœ¨è¿™é‡Œä¼šå‘ç°æ²¡åŠæ³•å€ŸåŠ©ä»€ä¹ˆæ ‡è¯†ç¬¦å»çŸ¥é“æˆ‘ä»¬åˆ°åº•æ¸²æŸ“äº†å¤šå°‘ä¸ªåˆå§‹ todo<br>é‚£ä¹ˆå›å» todo ç»„ä»¶æŸ¥çœ‹ å‘ç°å†™äº†ä¸€ä¸ª <code>data-testid</code><br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20230119113517.png" alt=""><br>é‚£ä¹ˆå°±å¯ä»¥å€ŸåŠ©è¿™ä¸ª <code>id</code> æ¥çœ‹ç›®å‰æ¸²æŸ“çš„ item æ•°ç›®<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">test(<span class="string">&#x27;should render todo-list&#x27;</span>,<span class="function">()=&gt;</span>&#123;</span><br><span class="line"><span class="comment">//given</span></span><br><span class="line">render(<span class="xml"><span class="tag">&lt;<span class="name">App</span>/&gt;</span></span>)</span><br><span class="line"><span class="comment">//when</span></span><br><span class="line"><span class="keyword">const</span> todos = screen.getAllByTestId(<span class="string">&quot;todo-item&quot;</span>);</span><br><span class="line"><span class="comment">//then</span></span><br><span class="line">expect(todos).toHaveLength(<span class="number">3</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="æ£€æµ‹-add-Todo"><a href="#æ£€æµ‹-add-Todo" class="headerlink" title="æ£€æµ‹ add Todo"></a>æ£€æµ‹ add Todo</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">test(<span class="string">&quot;should add todo&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line"><span class="comment">//given</span></span><br><span class="line">render(<span class="xml"><span class="tag">&lt;<span class="name">App</span> /&gt;</span></span>);</span><br><span class="line"><span class="comment">//when</span></span><br><span class="line"><span class="comment">// æ¨¡æ‹Ÿç”¨æˆ·è¾“å…¥</span></span><br><span class="line">userEvent.type(</span><br><span class="line">screen.getByPlaceholderText(<span class="string">&quot;What&#x27;s your plan?&quot;</span>),</span><br><span class="line"><span class="string">&quot;do sth&#123;enter&#125;&quot;</span></span><br><span class="line">);</span><br><span class="line"><span class="comment">//then</span></span><br><span class="line"><span class="keyword">const</span> todos = screen.getAllByTestId(<span class="string">&quot;todo-item&quot;</span>);</span><br><span class="line"><span class="comment">//then</span></span><br><span class="line">expect(todos).toHaveLength(<span class="number">4</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul><h3 id="æ£€æµ‹-removeTodoï¼ˆwithinï¼ŒgetByTestId-çš„ä½¿ç”¨ï¼‰"><a href="#æ£€æµ‹-removeTodoï¼ˆwithinï¼ŒgetByTestId-çš„ä½¿ç”¨ï¼‰" class="headerlink" title="æ£€æµ‹ removeTodoï¼ˆwithinï¼ŒgetByTestId çš„ä½¿ç”¨ï¼‰"></a>æ£€æµ‹ removeTodoï¼ˆ<code>within</code>ï¼Œ<code>getByTestId</code> çš„ä½¿ç”¨ï¼‰</h3><p>  removeTodo çš„è¯å‘¢ æˆ‘ä»¬æœ€å¥½å°±æ˜¯å¯¹é»˜è®¤çš„æ•°æ®è¿›è¡Œæ“ä½œï¼Œå› ä¸ºå¦‚æœæˆ‘ä»¬éœ€è¦å…ˆæ·»åŠ åæ“ä½œçš„è¯å…¶å®æ˜¯ä¼šæœ‰å¯èƒ½å‡ºé”™çš„<br> <img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20230119113621.png" alt=""><br>  æˆ‘ä»¬å¯ä»¥é€šè¿‡ remove-todo è¿™ä¸ª <code>testid</code> å»æ‰¾åˆ° <code>remove</code><br>  ä½†æ˜¯é¡µé¢æœ‰ä¸‰ä¸ªé»˜è®¤çš„ item æˆ‘ä»¬è¦æ€ä¹ˆå»æ‰¾åˆ°å¯¹åº” <code>item</code> çš„ <code>remove</code> å‘¢<br>  è¿™é‡Œå°±æ¶‰åŠåˆ°ä¸€ä¸ªæ–°çš„ api within ä»–èƒ½æ‰¾åˆ°åœ¨è¿™ä¸ªå¯¹åº”å…ƒç´ å†…éƒ¨çš„ä¸œè¥¿<br>  é‚£æˆ‘ä»¬å°±éœ€è¦æ ¹æ®é»˜è®¤ item çš„åå­—åŠ ä¸Š within å»æ‰¾åˆ°é‡Œé¢çš„ testid å°±å¯ä»¥äº†<br> <code>within(screen.getByText(&quot;Learn about React&quot;)).getByTestId(&#39;remove-todo&#39;)</code><br> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">test(<span class="string">&quot;should remove todo&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line"><span class="comment">//given</span></span><br><span class="line">render(<span class="xml"><span class="tag">&lt;<span class="name">App</span> /&gt;</span></span>);</span><br><span class="line"><span class="comment">//when</span></span><br><span class="line"><span class="comment">// æ¨¡æ‹Ÿç”¨æˆ·è¾“å…¥</span></span><br><span class="line">userEvent.click(</span><br><span class="line">within(screen.getByText(<span class="string">&quot;Learn about React&quot;</span>)).getByTestId(<span class="string">&#x27;remove-todo&#x27;</span>)</span><br><span class="line">);</span><br><span class="line"><span class="comment">//then</span></span><br><span class="line">expect(screen.getAllByTestId(<span class="string">&quot;todo-item&quot;</span>)).toHaveLength(<span class="number">2</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p><h3 id="æ£€æµ‹-toggleTodo"><a href="#æ£€æµ‹-toggleTodo" class="headerlink" title="æ£€æµ‹ toggleTodo"></a>æ£€æµ‹ toggleTodo</h3><p>  æ­¥éª¤æ˜¯å…ˆæ‰¾åˆ°ç¬¬ä¸€ä¸ªé»˜è®¤çš„ item<br>  ä½¿ç”¨ within æ‰¾åˆ°å…¶ä¸­çš„ Complete æŒ‰é’®<br>  æ¨¡æ‹Ÿç”¨æˆ·ç‚¹å‡»<br>  æœŸæœ›è¯¥é»˜è®¤çš„ item èƒ½ç»™åˆ° Redo æ˜¾ç¤º<br>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">test(<span class="string">&quot;should toggle todo&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line"><span class="comment">//given</span></span><br><span class="line">render(<span class="xml"><span class="tag">&lt;<span class="name">App</span> /&gt;</span></span>);</span><br><span class="line"><span class="comment">//when</span></span><br><span class="line"><span class="comment">// æ ¹æ®åå­—æ‰¾åˆ°ç¬¬ä¸€ä¸ª item</span></span><br><span class="line"><span class="keyword">const</span> firstTodo = within(screen.getByText(<span class="string">&quot;Learn about React&quot;</span>));</span><br><span class="line"><span class="comment">// æ¨¡æ‹Ÿç”¨æˆ·ç‚¹å‡» Complete</span></span><br><span class="line">userEvent.click(firstTodo.getByText(<span class="string">&quot;Complete&quot;</span>));</span><br><span class="line"><span class="comment">//then</span></span><br><span class="line"><span class="comment">// æœŸæœ›ç¬¬ä¸€ä¸ª item ä¸­çš„ Redo å‡ºç°åœ¨ dom ä¸­</span></span><br><span class="line">expect(firstTodo.getByText(<span class="string">&quot;Redo&quot;</span>)).toBeInTheDocument();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p><h1 id="æµ‹è¯•å¼‚æ­¥ä»£ç "><a href="#æµ‹è¯•å¼‚æ­¥ä»£ç " class="headerlink" title="æµ‹è¯•å¼‚æ­¥ä»£ç "></a>æµ‹è¯•å¼‚æ­¥ä»£ç </h1><p>  å¦‚ä½•æµ‹è¯•å¼‚æ­¥ä»£ç å‘¢</p><ul><li><code>callback</code> å›è°ƒå‡½æ•°çš„æ–¹å¼<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20230119113737.png" alt=""><br>è¿™ç§æ–¹å¼æ˜¯ä½¿ç”¨äº†ä¸€ä¸ª <code>done</code> æ–¹æ³•æ¥ç»™å‡½æ•°ä¸€ä¸ªæ–­è¨€ å‘Šè¯‰ <code>jest</code> è¿™é‡Œæ˜¯å¼‚æ­¥ç»ˆæ­¢çš„åœ°æ–¹<br>ä½†æ˜¯è¿™ä¸ªæ–¹æ³•æœ‰ä¸€ä¸ªç¼ºç‚¹ å°±æ˜¯å¤§é‡å¼‚æ­¥å›è°ƒçš„æ—¶å€™ä¼šäº§ç”Ÿç±»ä¼¼äºå›è°ƒåœ°ç‹±çš„æƒ…å†µ å¹¶ä¸”è¿èƒŒäº†æˆ‘ä»¬ä¹‹å‰ given when then çš„ä¸‰æ®µå¼å†™æ³•</li><li><code>Promise then</code><br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20230119113753.png" alt=""><br>è¿™ç§æ–¹å¼æ˜¯ä½¿ç”¨äº† <code>promise</code> çš„ <code>then</code> æ¥è¿›è¡Œå¼‚æ­¥ç»“æœçš„åˆ¤æ–­ ä½†æ˜¯ä»£ç æ˜¾å¾—å¾ˆé•¿ è€Œä¸”æœ¬è´¨ä¸Šå°±æ˜¯æŠŠ <code>done</code> æ¢æˆäº† <code>then</code>ï¼Œè¿˜æ˜¯å½±å“äº†æˆ‘ä»¬å¯¹ given when then çš„ä½¿ç”¨<br><code>fetchData</code> å°±ç›¸å½“äº when then å°±ç›¸å½“äº <code>then</code><br>ä½†æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ <code>resolve</code> å’Œ <code>reject</code> æŠ½ç¦»å‡ºç»“æœ å•ç‹¬å¯¹ä»–ä»¬è¿›è¡Œç»“æœçš„æµ‹è¯•</li><li><code>async/await</code><br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20230119113825.png" alt=""><br>è¿™ä¸ª <code>await</code> çš„å¥½å¤„å°±æ˜¯ç¬¦åˆ gwt çš„åŸåˆ™ è€Œä¸”ä»£ç çœ‹ä¸Šå»æ¯”è¾ƒå¥½çœ‹<h2 id="æœ€ä½³å®è·µ-MSW-mock-service-worker"><a href="#æœ€ä½³å®è·µ-MSW-mock-service-worker" class="headerlink" title="æœ€ä½³å®è·µ MSW (mock service worker)"></a>æœ€ä½³å®è·µ MSW (mock service worker)</h2>msw å¯ä»¥åœ¨æµè§ˆå™¨å’Œ api ä¹‹é—´çš„ service worker ä¸­æ‹¦æˆªå¯¹åº”çš„è¯·æ±‚<h3 id="å®‰è£…-1"><a href="#å®‰è£…-1" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><code>yarn add msw</code><h3 id="æ¡ˆä¾‹"><a href="#æ¡ˆä¾‹" class="headerlink" title="æ¡ˆä¾‹"></a>æ¡ˆä¾‹</h3><code>app.tsx</code> ä»£ç <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">  <span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span>;</span><br><span class="line">  <span class="keyword">import</span> React, &#123; useEffect, useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line">  <span class="keyword">import</span> <span class="string">&#x27;./App.css&#x27;</span>;</span><br><span class="line">  <span class="keyword">const</span> url = <span class="string">&#x27;https://randomuser.me/api&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="keyword">const</span> [fullName,setFullName] = useState(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> [loading,setLoading] = useState(<span class="literal">false</span>);</span><br><span class="line">useEffect(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">setLoading(<span class="literal">true</span>);</span><br><span class="line">axios.get(url).then(<span class="function">(<span class="params">&#123;data&#125;</span>)=&gt;</span>&#123;</span><br><span class="line"><span class="keyword">const</span> &#123;first,last&#125; = data.results[<span class="number">0</span>].name;</span><br><span class="line">setFullName(<span class="string">`<span class="subst">$&#123;first&#125;</span> <span class="subst">$&#123;last&#125;</span>`</span>);</span><br><span class="line">setLoading(<span class="literal">false</span>)</span><br><span class="line">&#125;)</span><br><span class="line">&#125;,[]);</span><br><span class="line"><span class="keyword">if</span>(loading)&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>Loading...<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> (</span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;App&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&#123;</span>&quot;<span class="attr">Type</span> <span class="attr">your</span> <span class="attr">name</span>&quot;&#125; <span class="attr">value</span>=<span class="string">&#123;fullName&#125;</span> <span class="attr">onChange</span>=<span class="string">&#123;(e)</span>=&gt;</span>setFullName(e.target.value)&#125;&gt;<span class="tag">&lt;/<span class="name">input</span>&gt;</span></span></span><br><span class="line"><span class="xml">&#123;/_ è¦ç”¨ span åŒ…èµ·æ¥ _/&#125;</span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>my name is <span class="tag">&lt;<span class="name">span</span> <span class="attr">data-testid</span>=<span class="string">&quot;full-name&quot;</span>&gt;</span>&#123;fullName&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> App;</span><br><span class="line">  </span><br></pre></td></tr></table></figure></li></ul><h3 id="æ‹¦æˆªè¯·æ±‚"><a href="#æ‹¦æˆªè¯·æ±‚" class="headerlink" title="æ‹¦æˆªè¯·æ±‚"></a>æ‹¦æˆªè¯·æ±‚</h3><p>æˆ‘ä»¬çœ‹åˆ° æˆ‘ä»¬å€ŸåŠ©äº†è¿™ä¸ªç½‘å€å»è¯·æ±‚å¼‚æ­¥çš„æ•°æ®æ¸²æŸ“åˆ°æˆ‘ä»¬é¡µé¢å¯¹åº”çš„ input æ¡†å†…<br>é‚£æˆ‘ä»¬ç¼–å†™æµ‹è¯•ä»£ç çš„æ—¶å€™ å°±è¦å»æ¨¡æ‹Ÿè¿™ä¸ªè¯·æ±‚<br>æˆ‘ä»¬æ–°å»ºä¸€ä¸ª Mock æ–‡ä»¶å¤¹ å†æ–°å»ºä¸€ä¸ª handlers.ts<br>å¼•å…¥ msw çš„ rest è¿™ä¸ªæ˜¯ä»–çš„ä¸€ä¸ªæ¨¡æ‹Ÿ api ç›¸å½“äº axios æˆ‘ä»¬å¯ä»¥æ‹¦æˆªè¿™ä¸ªåœ°å€ å¹¶æŠŠå®ƒæœ€åçš„è¯·æ±‚ç»“æœä¿®æ”¹æˆæˆ‘ä»¬æƒ³è¦çš„ç»“æœ<br>ä»–æ‹¥æœ‰ä¸€ä¸ª req å’Œ res ä»¥åŠä¸Šä¸‹æ–‡ ctx è¿™ç‚¹ç”¨æ³•å’Œ express éå¸¸ç›¸ä¼¼<br>è¿™ä¸ª handlers æ˜¯ä¸€ä¸ªæ•°ç»„ é‡Œé¢å¯ä»¥å†™å¾ˆå¤šæ‹¦æˆª<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;rest&#125; <span class="keyword">from</span> <span class="string">&#x27;msw&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> handlers = [</span><br><span class="line">rest.get(<span class="string">&quot;https://randomuser.me/api&quot;</span>,<span class="function">(<span class="params">req,res,ctx</span>)=&gt;</span>&#123;</span><br><span class="line"><span class="keyword">return</span> res(</span><br><span class="line">ctx.status(<span class="number">200</span>),</span><br><span class="line">ctx.json(&#123;</span><br><span class="line"><span class="attr">results</span>:[&#123;</span><br><span class="line"><span class="attr">name</span>:&#123;</span><br><span class="line"><span class="attr">title</span>:<span class="string">&#x27;Mr&#x27;</span>,</span><br><span class="line"><span class="attr">first</span>:<span class="string">&#x27;JOJO&#x27;</span>,</span><br><span class="line"><span class="attr">last</span>:<span class="string">&#x27;ABC&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;]</span><br><span class="line">&#125;)</span><br><span class="line">)</span><br><span class="line">&#125;)</span><br><span class="line">]</span><br><span class="line"></span><br></pre></td></tr></table></figure></p><h3 id="å»ºç«‹æœåŠ¡å™¨"><a href="#å»ºç«‹æœåŠ¡å™¨" class="headerlink" title="å»ºç«‹æœåŠ¡å™¨"></a>å»ºç«‹æœåŠ¡å™¨</h3><p>æˆ‘ä»¬æœ‰äº†æ‹¦æˆªä»£ç  è¿˜éœ€è¦ä¸€ä¸ª <code>node</code> æœåŠ¡å™¨ ç»§ç»­æ–°å»ºä¸€ä¸ª <code>server.ts</code><br>å¼•å…¥æˆ‘ä»¬çš„ <code>handlers</code> å› ä¸ºä»–æ˜¯ä¸€ä¸ªæ•°ç»„ æ‰€ä»¥å¯ä»¥è§£æ„å‡ºæ¥ ç›´æ¥ä½¿ç”¨åœ¨ <code>setupServer</code> ä¸­<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;setupServer&#125; <span class="keyword">from</span> <span class="string">&#x27;msw/node&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; handlers &#125; <span class="keyword">from</span> <span class="string">&#x27;./handlers&#x27;</span>;</span><br><span class="line"><span class="comment">// è®¾ç½®ä¸€ä¸ªæœåŠ¡å™¨</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> server = setupServer(...handlers)</span><br></pre></td></tr></table></figure></p><p>ä¹‹åæˆ‘ä»¬è¦åœ¨ setupTest.ts é‡Œé¢å»å¯åŠ¨æœåŠ¡å™¨çš„ç›‘å¬ å‘Šè¯‰æœåŠ¡å™¨ä»€ä¹ˆæ—¶å€™å¼€å§‹å‡†å¤‡æ‹¦æˆªè¯·æ±‚</p><h3 id="jest-å››ä¸ªé’©å­-beforeAll-beforeEach-afterEach-afterAll"><a href="#jest-å››ä¸ªé’©å­-beforeAll-beforeEach-afterEach-afterAll" class="headerlink" title="jest å››ä¸ªé’©å­ beforeAll beforeEach afterEach afterAll"></a>jest å››ä¸ªé’©å­ <code>beforeAll</code> <code>beforeEach</code> <code>afterEach</code> <code>afterAll</code></h3><p>è¿™é‡Œæœ‰å››ä¸ªé˜¶æ®µ <code>beforeAll</code> <code>beforeEach</code> <code>afterEach</code> <code>afterAll</code><br>åˆ†åˆ«ä»£è¡¨å…¨éƒ¨æµ‹è¯•å¼€å§‹å‰ å•ä¸ªæµ‹è¯•å¼€å§‹å‰ å•ä¸ªæµ‹è¯•ç»“æŸå å…¨éƒ¨æµ‹è¯•ç»“æŸå<br>æˆ‘ä»¬å¯¹åº”è¦åšçš„äº‹æƒ…å°±æ˜¯åœ¨å…¨éƒ¨æµ‹è¯•å¼€å§‹å‰è¿›è¡Œç›‘è§† åœ¨å•ä¸ªæµ‹è¯•ç»“æŸåé‡ç½®æˆ‘ä»¬çš„æ‹¦æˆª åœ¨å…¨éƒ¨æµ‹è¯•ç»“æŸåå…³é—­ server<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jest-dom adds custom jest matchers for asserting on DOM nodes.</span></span><br><span class="line"><span class="comment">// allows you to do things like:</span></span><br><span class="line"><span class="comment">// expect(element).toHaveTextContent(/react/i)</span></span><br><span class="line"><span class="comment">// learn more: https://github.com/testing-library/jest-dom</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;@testing-library/jest-dom&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; server &#125; <span class="keyword">from</span> <span class="string">&#x27;./mock/server&#x27;</span>;</span><br><span class="line">beforeAll(<span class="function">()=&gt;</span>server.listen())</span><br><span class="line">afterEach(<span class="function">()=&gt;</span>server.resetHandlers())</span><br><span class="line">afterAll(<span class="function">()=&gt;</span>server.close())</span><br></pre></td></tr></table></figure></p><h3 id="æµ‹è¯•æ‹¦æˆªçš„ç»“æœæ˜¯å¦æ˜¾ç¤ºåœ¨-dom-ä¸­"><a href="#æµ‹è¯•æ‹¦æˆªçš„ç»“æœæ˜¯å¦æ˜¾ç¤ºåœ¨-dom-ä¸­" class="headerlink" title="æµ‹è¯•æ‹¦æˆªçš„ç»“æœæ˜¯å¦æ˜¾ç¤ºåœ¨ dom ä¸­"></a>æµ‹è¯•æ‹¦æˆªçš„ç»“æœæ˜¯å¦æ˜¾ç¤ºåœ¨ dom ä¸­</h3><p>æˆ‘ä»¬åˆšåˆšå†™çš„ <code>mock</code> ç»“æœæ˜¯ <code>JOJO ABC</code> æ‰€ä»¥ <code>setFullName</code> ä¼šæŠŠä»–è½¬ä¸º <code>JOJO ABC</code><br>æˆ‘ä»¬ç°åœ¨å°±è¦åˆ©ç”¨ <code>findByText</code> è¿™ä¸ª api å»æ­£åˆ™æŸ¥æ‰¾è¿™å‡ ä¸ªå•è¯æ˜¯å¦åœ¨ <code>screen</code> ä¸­<br>å› ä¸ºè¿™ä¸ª <code>api</code> æ˜¯å¼‚æ­¥çš„ æ‰€ä»¥è¦åŠ  <code>async</code> <code>await</code><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">test(<span class="string">&quot;should display name from api directly&quot;</span>,<span class="keyword">async</span>()=&gt;&#123;</span><br><span class="line"><span class="comment">//given</span></span><br><span class="line">render(<span class="xml"><span class="tag">&lt;<span class="name">App</span>/&gt;</span></span>)</span><br><span class="line"><span class="comment">//when</span></span><br><span class="line"><span class="comment">// æ‰¾åˆ°å¯¹åº”çš„åå­— è¿™ä¸ªæ–¹æ³•æ˜¯å¼‚æ­¥æ–¹æ³• æ‰€ä»¥è¦ await</span></span><br><span class="line"><span class="keyword">const</span> text = <span class="keyword">await</span> screen.findByText(<span class="regexp">/JOJO ABC/ig</span>);</span><br><span class="line"><span class="comment">//then</span></span><br><span class="line">expect(text).toBeInTheDocument();</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><h3 id="å¼‚æ­¥ä¿®æ”¹äº†åˆå§‹çŠ¶æ€-æµ‹è¯•å¼‚æ­¥åçš„ç»“æœ"><a href="#å¼‚æ­¥ä¿®æ”¹äº†åˆå§‹çŠ¶æ€-æµ‹è¯•å¼‚æ­¥åçš„ç»“æœ" class="headerlink" title="å¼‚æ­¥ä¿®æ”¹äº†åˆå§‹çŠ¶æ€ æµ‹è¯•å¼‚æ­¥åçš„ç»“æœ"></a>å¼‚æ­¥ä¿®æ”¹äº†åˆå§‹çŠ¶æ€ æµ‹è¯•å¼‚æ­¥åçš„ç»“æœ</h3><p>åšå®Œäº†ä¸Šè¿°çš„æµ‹è¯• å‘ç°æˆ‘ä»¬åŸå…ˆçš„æµ‹è¯•ä»£ç å‡ºé”™äº†ï¼Œè¿™ä¸ªæ˜¯å› ä¸ºæˆ‘ä»¬çš„ç»„ä»¶é‡Œé¢å·²ç»æœ‰äº†å¼‚æ­¥çš„ <code>setState</code><br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20230119114140.png" alt=""><br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20230119114146.png" alt=""><br>å¯¼è‡´ç»“æœå‘ç”Ÿäº†å˜åŒ– æ‰€ä»¥ä»–æ‰¾ä¸åˆ°è¿™ä¸ªå…ƒç´ <br>æ‰€ä»¥æˆ‘ä»¬è¦ä½¿ç”¨ <code>findByPlaceholderText</code> å¹¶è¿›è¡Œ <code>await</code> æ¥æ‰¾åˆ° <code>input</code> æ¡†<br>å¹¶é€šè¿‡æ­£åˆ™è·å–å¯¹åº”çš„æµ‹è¯•ç»“æœ<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">test(<span class="string">&#x27;should show fullName when type&#x27;</span>, <span class="keyword">async</span>() =&gt; &#123;</span><br><span class="line"><span class="comment">//given</span></span><br><span class="line"><span class="keyword">const</span> appendText = <span class="string">&#x27;Welcome&#x27;</span>;</span><br><span class="line"><span class="comment">//when  </span></span><br><span class="line"> render(<span class="xml"><span class="tag">&lt;<span class="name">App</span>/&gt;</span></span>);</span><br><span class="line"><span class="comment">// æ¨¡æ‹Ÿç”¨æˆ·è¡Œä¸ºåœ¨è¾“å…¥æ¡†ä¸Šé¢è¾“å…¥ å› ä¸ºä¸€å¼€å§‹åœ¨ setState é‡Œé¢æœ‰å¼‚æ­¥çš„æ“ä½œ æ‰€ä»¥æ‰¾ä¸åˆ°</span></span><br><span class="line"><span class="comment">// è¦ä½¿ç”¨ findByPlaceholderText å¹¶è¿›è¡Œ await æ¥æ‰¾åˆ° input æ¡†</span></span><br><span class="line"><span class="keyword">const</span> input = <span class="keyword">await</span> screen.findByPlaceholderText(<span class="string">&#x27;Type your name&#x27;</span>)</span><br><span class="line">userEvent.type(</span><br><span class="line">input,</span><br><span class="line">appendText</span><br><span class="line">)</span><br><span class="line"><span class="comment">//then</span></span><br><span class="line"><span class="comment">//ç”±äºæˆ‘ä»¬ä¸€å¼€å§‹è¯·æ±‚è·å–äº†ä¸€äº›äººå æ‰€ä»¥æˆ‘ä»¬è¿™é‡Œè¦ç”¨æ­£åˆ™æ¥æ‰¾åˆ°å¯¹åº”çš„æµ‹è¯•ç»“æœ</span></span><br><span class="line">expect(screen.getByText(<span class="regexp">/Welcome/i</span>).textContent).toMatchInlineSnapshot(<span class="string">`&quot;JOJO ABCWelcome&quot;`</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure></p><h1 id="è®©-msw-å’Œå¼€å‘ç¯å¢ƒå…±ç”¨ä¸€å¥—-mock"><a href="#è®©-msw-å’Œå¼€å‘ç¯å¢ƒå…±ç”¨ä¸€å¥—-mock" class="headerlink" title="è®© msw å’Œå¼€å‘ç¯å¢ƒå…±ç”¨ä¸€å¥— mock"></a>è®© msw å’Œå¼€å‘ç¯å¢ƒå…±ç”¨ä¸€å¥— mock</h1><p>æˆ‘ä»¬å‘ç°æˆ‘ä»¬åœ¨å†™ <code>msw</code> çš„æ—¶å€™éœ€è¦å†™ä¸€å¥— <code>mock</code> ä½†æ˜¯æˆ‘ä»¬åœ¨å¼€å‘çš„æ—¶å€™ä¹Ÿéœ€è¦å†™ä¸€å¥— <code>mock</code><br>è¿™ä¸ªæ—¶å€™ <code>mock</code> èƒ½ä¸èƒ½å…±ç”¨ä¸€å¥—å‘¢ï¼Ÿ<br>ç­”æ¡ˆæ˜¯å¯ä»¥çš„<br>å…ˆåœ¨ <code>mock</code> æ–‡ä»¶å¤¹ä¸‹é¢ç¼–å†™ä¸€ä¸ª <code>browser.ts</code><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; setupWorker &#125; <span class="keyword">from</span> <span class="string">&quot;msw&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; handlers &#125; <span class="keyword">from</span> <span class="string">&quot;./handlers&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¾ç½®ä¸€ä¸ª worker</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> worker = setupWorker(...handlers);</span><br><span class="line"></span><br></pre></td></tr></table></figure><br>æˆ‘ä»¬å‘ç°å’Œä¹‹å‰çš„ <code>server</code> æœ‰å¼‚æ›²åŒå·¥ä¹‹å¦™ï¼Œ<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20230119114304.png" alt=""><br>ä½†æ˜¯ <code>server</code> æ˜¯å€Ÿç”¨äº† <code>node</code> çš„ å±äºæœåŠ¡ç«¯çš„ æˆ‘ä»¬è¿™æ¬¡ç”¨çš„æ˜¯ç›´æ¥å€ŸåŠ©äºæµè§ˆå™¨çš„<br>ç„¶ååœ¨ <code>app.tsx</code>ä¸­æ·»åŠ ä»¥ä¸‹ä»£ç <br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(process.env.NODE_ENV === <span class="string">&#x27;development&#x27;</span>)&#123;</span><br><span class="line"><span class="keyword">const</span> &#123;worker&#125; = <span class="built_in">require</span>(<span class="string">&#x27;./mock/browser&#x27;</span>);</span><br><span class="line">worker.start();</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><br>å¹¶é…ç½® <code>msw</code><br><code>npx init msw public/ --save</code><br>ç„¶åå°±ä¼šçœ‹åˆ° <code>public</code> ä¸‹é¢å¤šäº†ä¸ª <code>mockServiceWorker.js</code><br><code>packagejson</code> é‡Œé¢å¤šäº†<br><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;msw&quot;</span>: &#123;</span><br><span class="line"><span class="attr">&quot;workerDirectory&quot;</span>: <span class="string">&quot;public&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>è¯´æ˜å·²ç»ç”Ÿæˆå¥½äº† è¿è¡Œé¡¹ç›® ä¼šå‘ç°è¯·æ±‚çš„å€¼ä¸€ç›´æ˜¯æˆ‘ä»¬ <code>mock</code> çš„å€¼<br>æ‰€ä»¥å¼€å‘ä¹Ÿç›´æ¥åœ¨ <code>handlers.ts</code> é‡Œé¢å»ä½¿ç”¨ <code>mock</code> å³å¯</p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="å‰ç«¯è¿›é˜¶" scheme="https://zlinni.github.io/categories/%E5%89%8D%E7%AB%AF%E8%BF%9B%E9%98%B6/"/>
    
    
    <category term="å‰ç«¯" scheme="https://zlinni.github.io/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="å•å…ƒæµ‹è¯•" scheme="https://zlinni.github.io/tags/%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/"/>
    
  </entry>
  
  <entry>
    <title>ä»æµè§ˆå™¨åœ°å€æ è¾“å…¥urlåˆ°æ˜¾ç¤ºé¡µé¢çš„æ­¥éª¤</title>
    <link href="https://zlinni.github.io/posts/1583217180/"/>
    <id>https://zlinni.github.io/posts/1583217180/</id>
    <published>2022-09-15T12:33:14.000Z</published>
    <updated>2022-09-17T07:58:00.699Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><div class="note primary flat"><p>è¿™æ˜¯ä¸€é“éå¸¸éå¸¸ç»å…¸çš„é¢è¯•é¢˜ï¼Œä½†æ¶‰åŠåˆ°çš„å†…å®¹éå¸¸çš„å¹¿ï¼Œæ¥ä¸‹æ¥ä»å°åˆ°å¤§é€æ­¥åˆ†æä»–æ‰€åŒ…å«çš„å†…å®¹</p></div><h1 id="è¯¦ç»†ç‰ˆ"><a href="#è¯¦ç»†ç‰ˆ" class="headerlink" title="è¯¦ç»†ç‰ˆ"></a>è¯¦ç»†ç‰ˆ</h1><ol><li>åœ¨æµè§ˆå™¨åœ°å€æ è¾“å…¥ url(è¿™é‡Œå¯èƒ½ä¼šé—® url çš„é•¿åº¦æœ€é•¿æ˜¯å¤šå°‘ï¼ŒçŠ¶æ€ç ï¼Œç¼–ç æ–¹å¼ï¼Œ)</li><li>æµè§ˆå™¨æŸ¥çœ‹ç¼“å­˜ï¼Œå¦‚æœè¯·æ±‚èµ„æºåœ¨ç¼“å­˜ä¸­ä¸”æ–°é²œï¼Œåˆ™è·³åˆ°è½¬ç æ­¥éª¤(è¿™é‡Œè€ƒç¼“å­˜çš„å½¢å¼ï¼Œæ–°é²œåº¦çš„è®¡ç®—ï¼Œç¼“å­˜çš„å¤´å­—æ®µï¼Œç¼“å­˜ç­–ç•¥)<br>2.1 å¦‚æœèµ„æºæœªç¼“å­˜ï¼Œå‘èµ·æ–°è¯·æ±‚<br>2.2 å¦‚æœå·²ç¼“å­˜ï¼Œæ£€æµ‹æ˜¯å¦è¶³å¤Ÿæ–°é²œï¼Œè¶³å¤Ÿæ–°é²œæä¾›ç»™å®¢æˆ·ç«¯ï¼Œå¦åˆ™ä¸æœåŠ¡å™¨è¿›è¡ŒéªŒè¯ã€‚</li><li>è§£æ url è·å–åè®® ç«¯å£ ä¸»æœº path(è¿™é‡Œå¯èƒ½ä¼šè€ƒ https åè®® ç«¯å£çœ‹åè®® ä¸»æœºå¯èƒ½å’Œä¸»æœºæ‰˜ç®¡ç›¸å…³)</li><li>æµè§ˆå™¨ç»„è£…ä¸€ä¸ª HTTP è¯·æ±‚æŠ¥æ–‡(å½“ç„¶è¿™ä¸ªä¸ä¸€å®šæ˜¯ get è¯·æ±‚ï¼Œæ‰€ä»¥å¯èƒ½è€ƒå„ç§è¯·æ±‚æ–¹å¼ï¼Œå¦‚æœæ˜¯ 2 çš„è¯è¿˜è¦è€ƒæµçš„è¿è¾“ç»„è£…)</li><li>æµè§ˆå™¨è·å–ä¸»æœº ip åœ°å€ è¿‡ç¨‹å¦‚ä¸‹<br>5.1 æµè§ˆå™¨æœ¬åœ°ç¼“å­˜<br>5.2 æœ¬æœºç¼“å­˜<br>5.3 hosts æ–‡ä»¶(è€ƒ host çš„è¯å¯èƒ½è€ƒ linux é‡Œé¢çš„ host è·¯å¾„å’Œ windows ä¸‹çš„ host è·¯å¾„ å…¶å®æ”¹ host èƒ½è§£å†³ github è¢«å¢™çš„åŸå› ä¹Ÿæ˜¯æ¥è‡ªäºæ­¤)<br>5.4 è·¯ç”±å™¨ç¼“å­˜(è¿™ä¸ªä¸äº†è§£)<br>5.5 ISP DNS ç¼“å­˜()<br>5.6 DNS é€’å½’æŸ¥è¯¢</li></ol><h1 id="url-æœ€é•¿é•¿åº¦"><a href="#url-æœ€é•¿é•¿åº¦" class="headerlink" title="url æœ€é•¿é•¿åº¦"></a>url æœ€é•¿é•¿åº¦</h1><p>å…³äºè¿™ä¸ªé—®é¢˜å…¶å®ä¸åŒçš„æµè§ˆå™¨è§„èŒƒä¸ä¸€æ ·çš„ï¼Œæ¯”å¦‚ ie æ˜¯ 2083ï¼Œchrome8182 ç­‰ã€‚ä½†æœ€å¥½ä¸è¦è¶…è¿‡ 2048 ä¸ªå­—ç¬¦ï¼Œè™½ç„¶ ie è¢«å¹²æ‰äº†ï¼Œä½†æ˜¯è¿˜æ˜¯ä¿æŒ get è¯·æ±‚çš„ url çŸ­ä¸€ç‚¹å§<br>æ‰€ä»¥å¦‚æœåç«¯ç»™æ‰¹é‡æ“ä½œçš„æ¥å£çš„æ—¶å€™ï¼Œä½ å°±æœ‰ç†ç”±å‘Šè¯‰ä»–æ”¹æˆ post äº†</p><h1 id="å­—èŠ‚"><a href="#å­—èŠ‚" class="headerlink" title="å­—èŠ‚"></a>å­—èŠ‚</h1><p>è¿™å—é‡åˆ°è¿‡è€ƒå¯Ÿ æ±‰å­—æ˜¯å¤šå°‘ä¸ªå­—èŠ‚<br>åœ¨ GBK ä¸­ï¼Œæˆ‘ä»¬çš„æ±‰å­—æ˜¯ä¸¤ä¸ªå­—èŠ‚ï¼ŒUTF-16 ä¸­æ˜¯ä¸¤ä¸ªå­—èŠ‚ï¼ŒUTF-8 åˆ™æ˜¯ 3 ä¸ªå­—èŠ‚</p><p>è¿™é‡Œä¸è®²åŸç† å› ä¸ºæˆ‘ä¹Ÿä¸ä¼š å½“ä»–è‡ªå·±æ˜¯è¿™ä¹ˆå®šä¹‰çš„å¥½äº†</p><p>é—®é¢˜æ˜¯ä½ çŸ¥é“æ€ä¹ˆè¾“å‡ºä¸€ä¸ªå­—æ¯æˆ–è€…æ±‰å­—çš„å­—èŠ‚å—</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> enc = <span class="keyword">new</span> TextEncoder();</span><br><span class="line"><span class="built_in">console</span>.log(enc.encode(<span class="string">&quot;å“ˆ&quot;</span>).length); <span class="comment">//3</span></span><br><span class="line"><span class="built_in">console</span>.log(enc.encode(<span class="string">&quot;1&quot;</span>).length); <span class="comment">//1</span></span><br><span class="line"><span class="built_in">console</span>.log(enc.encode(<span class="string">&quot;j&quot;</span>).length); <span class="comment">//1</span></span><br></pre></td></tr></table></figure><p>ä½¿ç”¨è¿™ä¸ª api å¯ä»¥è¿”å› utf-8 ä¸‹é¢çš„å­—èŠ‚æ•°ã€‚å…¶å®ä»–æœ¬æ¥æ˜¯å¯ä»¥ä¼ å…¥å‚æ•°çš„ï¼Œä½†ç›®å‰ mdn ä¸Šè¯´è¢«åºŸå¼ƒæ‰äº†</p><p>æœ‰äº† encoder è‚¯å®šä¼šæœ‰ decoder</p><p>ä¸‹é¢æ˜¯æˆ‘æ¬è¿ mdn çš„ä¾‹å­</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> utf8decoder = <span class="keyword">new</span> TextDecoder(); <span class="comment">// default &#x27;utf-8&#x27; or &#x27;utf8&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> u8arr = <span class="keyword">new</span> <span class="built_in">Uint8Array</span>([<span class="number">240</span>, <span class="number">160</span>, <span class="number">174</span>, <span class="number">183</span>]);</span><br><span class="line"><span class="keyword">let</span> i8arr = <span class="keyword">new</span> <span class="built_in">Int8Array</span>([-<span class="number">16</span>, -<span class="number">96</span>, -<span class="number">82</span>, -<span class="number">73</span>]);</span><br><span class="line"><span class="keyword">let</span> u16arr = <span class="keyword">new</span> <span class="built_in">Uint16Array</span>([<span class="number">41200</span>, <span class="number">47022</span>]);</span><br><span class="line"><span class="keyword">let</span> i16arr = <span class="keyword">new</span> <span class="built_in">Int16Array</span>([-<span class="number">24336</span>, -<span class="number">18514</span>]);</span><br><span class="line"><span class="keyword">let</span> i32arr = <span class="keyword">new</span> <span class="built_in">Int32Array</span>([-<span class="number">1213292304</span>]);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(utf8decoder.decode(u8arr)); <span class="comment">//ğ ®·</span></span><br><span class="line"><span class="built_in">console</span>.log(utf8decoder.decode(i8arr)); <span class="comment">//ğ ®·</span></span><br><span class="line"><span class="built_in">console</span>.log(utf8decoder.decode(u16arr)); <span class="comment">//ğ ®·</span></span><br><span class="line"><span class="built_in">console</span>.log(utf8decoder.decode(i16arr)); <span class="comment">//ğ ®·</span></span><br><span class="line"><span class="built_in">console</span>.log(utf8decoder.decode(i32arr)); <span class="comment">//ğ ®·</span></span><br></pre></td></tr></table></figure><p>è¿™ä¸ªçœ‹ä¸€çœ‹å°±å¥½äº† å¹³æ—¶å¯èƒ½å°±ä¸å¤ªä¼šç”¨åˆ°</p><h1 id="çŠ¶æ€ç "><a href="#çŠ¶æ€ç " class="headerlink" title="çŠ¶æ€ç "></a>çŠ¶æ€ç </h1><p>è¯´åˆ°è¿™ä¸ªçŠ¶æ€ç  url è¶…å‡ºæœåŠ¡å™¨é™åˆ¶çš„æ—¶å€™è¿”å›çš„æ˜¯ 414(URI Too Long)</p><h1 id="ç¼“å­˜"><a href="#ç¼“å­˜" class="headerlink" title="ç¼“å­˜"></a>ç¼“å­˜</h1><p>ç¼“å­˜è¿™å—æ¶‰åŠçš„çŸ¥è¯†ç‚¹å°±å¾ˆå¤šäº†ï¼Œä¸»è¦åˆ†ä¸ºå¼ºç¼“å­˜å’Œåå•†ç¼“å­˜ã€‚</p><h2 id="å¼ºç¼“å­˜æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ"><a href="#å¼ºç¼“å­˜æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ" class="headerlink" title="å¼ºç¼“å­˜æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ"></a>å¼ºç¼“å­˜æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</h2><p>æŒ‡çš„æ˜¯è¯¥ç¼“å­˜åœ¨å­˜åœ¨çš„æœŸé—´ä¸éœ€è¦å‘é€è¯·æ±‚ï¼Œä¼šè¿”å›çŠ¶æ€ç  200 ä¸”å‘Šè¯‰ä½ æ˜¯ memoryCache è¿˜æ˜¯ diskCache</p><p>memoryCacheæŒ‡çš„æ˜¯èµ„æºå­˜åœ¨å†…å­˜ä¸­ï¼Œå½“é¡µé¢è¢«å…³é—­å°±ä¼šé‡Šæ”¾<br>diskCacheæŒ‡çš„æ˜¯èµ„æºå­˜åœ¨ç£ç›˜ä¸­</p><p>è‡³äºè¿™ä¸¤è€…ä»€ä¹ˆæ—¶å€™æ˜¯ memoryCache ä»€ä¹ˆæ—¶å€™æ˜¯ diskCache å–å†³äºæµè§ˆå™¨</p><p>å‚è€ƒç½‘ä¸Šçš„ä¸€ä¸ªè¡¨æ ¼ï¼Œchromeæµè§ˆå™¨å¯¹äºcacheçš„ç»Ÿè®¡<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220917115135.png" alt=""></p><p>ä¸€èˆ¬æ ·å¼å°±å­˜åœ¨diskï¼Œä½†æ˜¯jsè¿™ç±»çš„å°±å­˜åœ¨memoryï¼Œå› ä¸ºä»ç£ç›˜è¯»è„šæœ¬å¯¹IOçš„å¼€é”€æ¯”è¾ƒå¤§</p><h2 id="æµè§ˆå™¨ä¸­æŸ¥çœ‹çš„æ–¹å¼ï¼š"><a href="#æµè§ˆå™¨ä¸­æŸ¥çœ‹çš„æ–¹å¼ï¼š" class="headerlink" title="æµè§ˆå™¨ä¸­æŸ¥çœ‹çš„æ–¹å¼ï¼š"></a>æµè§ˆå™¨ä¸­æŸ¥çœ‹çš„æ–¹å¼ï¼š</h2><p>å…ˆæŠŠåœç”¨ç¼“å­˜/disable cacheå…³æ‰ ç„¶åctrl+råˆ·æ–°ä½ çš„é¡µé¢ è¿™é‡Œæ‹¿æ˜é‡‘ä¸ºä¾‹å­ å¯ä»¥çœ‹è§ç¼“å­˜ä¸­memoryCacheå’ŒdiskCacheéƒ½æœ‰<br>memoryCache<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220917105130.png" alt=""></p><p>diskCache<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220917105300.png" alt=""></p><p>æ²¡èµ°ç¼“å­˜ è¦ä¸‹è½½çš„èµ„æºï¼Œæ³¨æ„äº†å™¢ å¦‚æœæ˜¯200 åˆ™æ˜¯èµ„æºçš„å¤§å° å¦‚æœæ˜¯304åˆ™æ˜¯æŠ¥æ–‡çš„å¤§å°<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220917105328.png" alt=""></p><h2 id="å¼ºç¼“å­˜æ€ä¹ˆè§¦å‘å‘¢ï¼Ÿ"><a href="#å¼ºç¼“å­˜æ€ä¹ˆè§¦å‘å‘¢ï¼Ÿ" class="headerlink" title="å¼ºç¼“å­˜æ€ä¹ˆè§¦å‘å‘¢ï¼Ÿ"></a>å¼ºç¼“å­˜æ€ä¹ˆè§¦å‘å‘¢ï¼Ÿ</h2><p>è¿™å—æ¶‰åŠåˆ°å¤´å­—æ®µ:<code>Expires</code>å’Œ<code>Cache-Control:max-age</code></p><p>é¦–å…ˆå‰è€… æ¥è‡ªäº http1.0 å…¶ä¸­çš„å€¼æ˜¯ä¸€ä¸ª GMT æ ¼å¼å­—ç¬¦ä¸² ä»£è¡¨ç¼“å­˜è¿‡æœŸæ—¶é—´</p><p>eg</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Expires: Wed, <span class="number">22</span> Oct <span class="number">2018</span> <span class="number">08</span>:<span class="number">41</span>:<span class="number">00</span> GMT</span><br></pre></td></tr></table></figure><p>è®¾ç½®çš„æ–¹å¼ä¹Ÿå¾ˆç®€å•ï¼š<br>(ä¸åŒæ¡†æ¶å®ç°ä¸ä¸€æ · éšä¾¿å†™ä¸ªä¾‹å­)<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xxx.set(<span class="string">&quot;Expires&quot;</span>, <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="built_in">Date</span>.now() + <span class="number">30000</span>).toUTCString());<span class="comment">//å½“å‰æ—¶é—´+30s</span></span><br></pre></td></tr></table></figure></p><h2 id="expiresçš„ç¼ºç‚¹"><a href="#expiresçš„ç¼ºç‚¹" class="headerlink" title="expiresçš„ç¼ºç‚¹"></a>expiresçš„ç¼ºç‚¹</h2><p>å—é™äºæœ¬åœ°æ—¶é—´ ä¿®æ”¹æœ¬åœ°æ—¶é—´å¯èƒ½å¯¼è‡´ç¼“å­˜å¤±è´¥</p><h2 id="Cache-Control-max-age"><a href="#Cache-Control-max-age" class="headerlink" title="Cache-Control:max-age"></a><code>Cache-Control:max-age</code></h2><p>1.1æå‡ºçš„è§„èŒƒ</p><p>ä¼˜å…ˆçº§é«˜äºExpiresï¼Œä¸”è®¾ç½®çš„æ˜¯ç§’æ•°ï¼Œå‰è€…æ˜¯æ¯«ç§’æ•°</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xxx.set(<span class="string">&#x27;Cache-Control&#x27;</span>, <span class="string">&#x27;max-age=30&#x27;</span>)</span><br></pre></td></tr></table></figure><p>cachecontrolé™¤äº†æ˜¯è®¾ç½®maxageä¹‹å¤–è¿˜æœ‰åˆ«çš„value<br>å¯ä»¥è¿èµ·æ¥å†™ </p><ul><li><code>private</code>ï¼šå®¢æˆ·ç«¯å¯ä»¥ç¼“å­˜</li><li><code>public</code>ï¼šå®¢æˆ·ç«¯å’Œä»£ç†æœåŠ¡å™¨éƒ½å¯ä»¥ç¼“å­˜</li><li><code>s-maxage</code>ï¼šå’Œmax-ageä¸€æ ·ï¼Œä½†è¿™ä¸ªæ˜¯è®¾å®šä»£ç†æœåŠ¡å™¨çš„ç¼“å­˜æ—¶é—´</li><li><code>no-cache</code>ï¼šéœ€è¦ä½¿ç”¨åå•†ç¼“å­˜æ¥éªŒè¯ç¼“å­˜æ•°æ®</li><li><code>no-store</code>ï¼šæ‰€æœ‰å†…å®¹éƒ½ä¸ä¼šç¼“å­˜</li></ul><p>æ³¨æ„ç»å¸¸è€ƒçš„æ˜¯ <code>no-store</code>å’Œ<code>no-cache</code>çš„åŒºåˆ«ï¼Œè¿™ä¸ªè¦ç‰¢è®°</p><p>é™¤æ­¤ä¹‹å¤– å¦‚æœæ˜¯é‡‡ç”¨äº†CDNçš„å½¢å¼ ä½†æ˜¯æœ‰äº›å†…å®¹ä¸æƒ³æ”¾åœ¨CDNä¸Šï¼Œæ¯”å¦‚ä¸€äº›æ•æ„Ÿä¿¡æ¯ æ­¤æ—¶é‡‡ç”¨privateæ›´åŠ åˆé€‚ åªæœ‰å®¢æˆ·ç«¯æ‰èƒ½ç¼“å­˜</p><h2 id="åå•†ç¼“å­˜"><a href="#åå•†ç¼“å­˜" class="headerlink" title="åå•†ç¼“å­˜"></a>åå•†ç¼“å­˜</h2><p>è¿™å—çš„è¯ åˆ†ä¸¤ä¸ªå­—æ®µï¼š<code>Last-Modified</code>,<code>If-Modified-Since</code><br><code>Last-modified</code>æ˜¯æœåŠ¡ç«¯è¿”å›ç»™å®¢æˆ·ç«¯æºå¸¦çš„å¤´å­—æ®µ<br><code>If-Modified-Since</code>æ˜¯å®¢æˆ·ç«¯è¯·æ±‚çš„å¤´å­—æ®µ</p><p>å…ˆä»å­—é¢ä¸Šå»ç†è§£å­—æ®µçš„æ„æ€ï¼šå‰è€…æ˜¯æœ€åä¸€æ¬¡æ“ä½œ(èµ„æº)ï¼Œåè€…æ˜¯å¦‚æœæœ‰æ“ä½œ(èµ„æº)çš„è¯ï¼Œåˆ™ä»æ“ä½œ(èµ„æº)ä¹‹åå‘é€æ–°çš„(èµ„æº)</p><p>å‰è€…çš„å€¼æ˜¯èµ„æºæœ€åçš„æ›´æ–°æ—¶é—´ï¼Œåè€…çš„å€¼æ˜¯å‰è€…çš„å€¼ã€‚</p><p>è¿‡ç¨‹æ˜¯è¿™æ ·çš„ï¼š<br>é¦–å…ˆæœ‰ä¸€ä¸ªtxtæ–‡ä»¶ï¼Œå‰ç«¯è¯·æ±‚åç«¯è¿”å›ï¼Œè¿”å›çš„è¿‡ç¨‹æºå¸¦äº†<code>Last-modified</code>å“åº”å¤´ï¼Œå€¼æ˜¯è¿™ä¸ªtxtæ–‡ä»¶æœ€åä¸€æ¬¡ä¿®æ”¹çš„æ—¶é—´</p><p>ç„¶åå‰ç«¯æ¥æ”¶åˆ°äº†ï¼Œå†æ¬¡è¯·æ±‚è¯¥txtæ–‡ä»¶ï¼Œè¯·æ±‚çš„æ—¶å€™å¸¦ä¸Š(è¿™ä¸€æ­¥æ˜¯æµè§ˆå™¨å¸®ä½ å¸¦çš„ä¸éœ€è¦è‡ªå·±å¸¦)<code>If-Modified-Since</code>å­—æ®µï¼Œå€¼æ˜¯<code>Last-modified</code>çš„å€¼ï¼Œåˆ°åç«¯ åç«¯ä¼šå»éªŒè¯ è¯¥è¯·æ±‚å­—æ®µçš„å€¼æ˜¯å¦å’Œtxtæ–‡ä»¶æœ€åä¸€æ¬¡ä¿®æ”¹çš„æ—¶é—´ä¸€è‡´ï¼Œå¦‚æœä¸€è‡´ï¼Œè¯´æ˜txtæ–‡ä»¶æ²¡æ”¹ï¼Œæ²¡æ”¹çš„è¯åˆ™è¿”å›304ã€‚ä¸”ä¸ä¼šè¿”å›<code>Last-modified</code><br>å’Œèµ„æºå†…å®¹</p><p>ä¸Šä¸€æ®µæ¥è‡ªæ˜é‡‘çš„ä»£ç <br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è·å–æ–‡ä»¶ä¿¡æ¯</span></span><br><span class="line"><span class="keyword">const</span> getFileStat = <span class="function">(<span class="params">path</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</span><br><span class="line">    fs.stat(path, <span class="function">(<span class="params">_, stat</span>) =&gt;</span> &#123;</span><br><span class="line">      resolve(stat)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">app.use(<span class="keyword">async</span> (ctx) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> url = ctx.request.url</span><br><span class="line">  <span class="keyword">if</span> (url === <span class="string">&#x27;/&#x27;</span>) &#123;</span><br><span class="line">    <span class="comment">// è®¿é—®æ ¹è·¯å¾„è¿”å›index.html</span></span><br><span class="line">    ctx.set(<span class="string">&#x27;Content-Type&#x27;</span>, <span class="string">&#x27;text/html&#x27;</span>)</span><br><span class="line">    ctx.body = <span class="keyword">await</span> parseStatic(<span class="string">&#x27;./index.html&#x27;</span>)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> filePath = path.resolve(__dirname, <span class="string">`.<span class="subst">$&#123;url&#125;</span>`</span>)</span><br><span class="line">    <span class="keyword">const</span> ifModifiedSince = ctx.request.header[<span class="string">&#x27;if-modified-since&#x27;</span>]</span><br><span class="line">    <span class="keyword">const</span> fileStat = <span class="keyword">await</span> getFileStat(filePath)</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">new</span> <span class="built_in">Date</span>(fileStat.mtime).getTime())</span><br><span class="line">    ctx.set(<span class="string">&#x27;Cache-Control&#x27;</span>, <span class="string">&#x27;no-cache&#x27;</span>)</span><br><span class="line">    ctx.set(<span class="string">&#x27;Content-Type&#x27;</span>, parseMime(url))</span><br><span class="line">    <span class="comment">// æ¯”å¯¹æ—¶é—´ï¼Œmtimeä¸ºæ–‡ä»¶æœ€åä¿®æ”¹æ—¶é—´</span></span><br><span class="line">    <span class="comment">// å¦‚æœæ—¶é—´ä¸å˜åˆ™è¿”å›304ï¼Œä¸”ä¸æºå¸¦`Last-Modified`å’Œèµ„æºæ–‡ä»¶</span></span><br><span class="line">    <span class="keyword">if</span> (ifModifiedSince === fileStat.mtime.toGMTString()) &#123;</span><br><span class="line">      ctx.status = <span class="number">304</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      ctx.set(<span class="string">&#x27;Last-Modified&#x27;</span>, fileStat.mtime.toGMTString())</span><br><span class="line">      ctx.body = <span class="keyword">await</span> parseStatic(filePath)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><h2 id="Last-modifiedçš„ç¼ºç‚¹"><a href="#Last-modifiedçš„ç¼ºç‚¹" class="headerlink" title="Last-modifiedçš„ç¼ºç‚¹"></a><code>Last-modified</code>çš„ç¼ºç‚¹</h2><p>å…¶å®lastmodifyæœ¬èº«ä¹Ÿæœ‰ç¼ºç‚¹ï¼Œå°±æ˜¯ä»–ä¸»è¦åŒºåˆ†çš„è¯è¿˜æ˜¯åœ¨äºæ–‡ä»¶çš„ä¿®æ”¹æ—¶é—´çš„ä¸€ä¸ªå¯¹æ¯”</p><p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªtxtæ–‡ä»¶é‡Œé¢æœ‰ä¸€ä¸ªå­—ç¬¦ä¸²jojoï¼Œæ­¤æ—¶ä¿®æ”¹çš„æ—¶é—´æ˜¯a</p><p>é‚£ä¹ˆæˆ‘æŠŠtxté‡Œé¢çš„jojoå»æ‰ ä¿å­˜ä¹‹å åˆé‡æ–°æ·»åŠ å›å» å†ä¿å­˜ æ­¤æ—¶ä¿®æ”¹çš„æ—¶é—´å˜æˆäº†b</p><p>æŒ‰æ­£å¸¸äººçš„æ€è·¯è‚¯å®šæ˜¯æœŸæœ›è¿™ä¸ªèµ„æºè¿˜èƒ½è¢«ç¼“å­˜ï¼Œå› ä¸ºå†…å®¹æ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼Œè¿™æ ·ä¸€ä¸ªå‘¨æœŸæ€§çš„å˜åŒ–ï¼Œ<code>Last-modified</code>æ˜¯æ£€æµ‹ä¸äº†çš„ï¼Œå› ä¸ºä¿®æ”¹çš„æ—¶é—´å˜äº†</p><p>å†è¯´å¦å¤–ä¸€ä¸ªç¼ºç‚¹<br>æ–‡ä»¶ä¿®æ”¹æ—¶é—´è¿™ä¸ªå€¼æœ¬èº«è¿”å›çš„æ˜¯ç§’ï¼Œè¦æ˜¯æˆ‘çš„å†…å®¹æœ¬èº«å°äºå•ä½ç§’ï¼Œæ¯”å¦‚å‡ æ¯«ç§’å†…ä¿®æ”¹äº†ï¼Œé‚£ä¹ˆä¾æ—§ä¹Ÿæ˜¯æ£€æµ‹ä¸åˆ°çš„</p><h2 id="ETag"><a href="#ETag" class="headerlink" title="ETag"></a>ETag</h2><p>æ‰€ä»¥å‡ºç°äº†å¦å¤–ä¸€ä¸ªç»ˆææ–¹æ¡ˆå«Etagï¼Œä»–æ˜¯å€Ÿç”±æ–‡ä»¶çš„å†…å®¹ç”Ÿæˆçš„hashå€¼ï¼Œè¿™æ ·å°±èƒ½ä¿è¯èµ„æºå‘¨æœŸæ€§å’Œå”¯ä¸€æ€§ï¼Œç„¶åEtagä¹Ÿæ˜¯åç«¯å‘æ¥çš„ï¼Œå‰ç«¯å†æ¬¡è¯·æ±‚ä¼šæºå¸¦ä¸€ä¸ª<code>If-None-Match</code>ã€‚</p><p>ä¹Ÿå°±æ˜¯åªè¦è®°å¾—ä»–æ˜¯é€šè¿‡æ–‡ä»¶å†…å®¹ç”Ÿæˆhashå€¼å°±è¡Œäº†ï¼Œä»–çš„ä¼˜å…ˆçº§æ¯”lastmodifyé«˜ï¼Œä»–çš„æ ¡éªŒæ–¹å¼å’Œlastmodifyæ˜¯ä¸€æ ·çš„</p><h1 id="å¾…è¡¥å……çš„ï¼š"><a href="#å¾…è¡¥å……çš„ï¼š" class="headerlink" title="å¾…è¡¥å……çš„ï¼š"></a>å¾…è¡¥å……çš„ï¼š</h1><p>è¿™ä¸€å—è¿˜æœ‰çš„å†…å®¹æ˜¯æ–°é²œåº¦çš„è®¡ç®—ï¼Œå¯å‘å¼ç¼“å­˜ï¼Œä»£ç†ç¼“å­˜ï¼Œå®¢æˆ·ç«¯çš„ä»£ç†å®½å®¹é™åˆ¶ç­‰</p><h1 id="httpsåè®®"><a href="#httpsåè®®" class="headerlink" title="httpsåè®®"></a>httpsåè®®</h1><p>sæŒ‡çš„æ˜¯TLS/SSLè¯ä¹¦ ä»¥å‰æ˜¯å«åšSSLï¼Œç°åœ¨è¿˜æ˜¯å«TLSå¥½ä¸€ç‚¹ç‚¹ï¼Œå’Œhttpçš„åŒºåˆ«å¦‚ä¸‹:(è€ç”Ÿå¸¸è°ˆ)<br>é¦–å…ˆæ˜¯é’± httpsè¦ç”³è¯·CAè¯ä¹¦ï¼Œç”»çš„æ¯”è¾ƒå¤šï¼Œä½†å®‰å…¨ï¼Œhttpçº¯ç™½å«–<br>å®‰å…¨æ€§ä¸Šé¢ httpsåŠ å¯†ä¼ è¾“ï¼Œhttpæ˜æ–‡<br>ç«¯å£ httpsæ˜¯443ç«¯å£ httpæ˜¯80</p><p>è¿™å—æ¶‰åŠåˆ°çš„å†…å®¹æœ‰å¾ˆå¤š ä¸€ä¸ªæ˜¯TLS1.2å’Œ1.3çš„æ¡æ‰‹æ–¹å¼ã€‚OSIä¸ƒå±‚æ¨¡å‹ã€‚æ•°å­—ç­¾åï¼ŒCAè¯ä¹¦ï¼Œå®‰å…¨é—®é¢˜(ä¸­é—´äºº)ï¼Œå¯¹ç§°åŠ å¯†éå¯¹ç§°åŠ å¯†ï¼Œ</p><h2 id="OSIä¸ƒå±‚æ¨¡å‹"><a href="#OSIä¸ƒå±‚æ¨¡å‹" class="headerlink" title="OSIä¸ƒå±‚æ¨¡å‹"></a>OSIä¸ƒå±‚æ¨¡å‹</h2><p>å…ˆç®€å•çš„è¯´ä¸€ä¸‹OSIä¸ƒå±‚æ¨¡å‹ï¼Œè¿™å—ç»å¸¸å¿˜è®°ï¼Œå®é™…ä¸Šå®ƒæ˜¯ä¸€ä¸ªå¯ä»¥å±•å¼€æè¿°çš„é‡ç‚¹å†…å®¹</p><p>ä¸ƒå±‚åˆ†åˆ«æ˜¯åº”ç”¨å±‚ï¼Œè¡¨ç¤ºå±‚ï¼Œä¼šè¯å±‚ï¼Œä¼ è¾“å±‚ï¼Œç½‘ç»œå±‚ï¼Œæ•°æ®é“¾è·¯å±‚ï¼Œç‰©ç†å±‚</p><p>å›¾ç‰‡æ¥è‡ªç½‘ç»œï¼š<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220917150035.png" alt=""></p><p>é¦–å…ˆåº”ç”¨å±‚æ˜¯ä¸ºäº†æä¾›ç»™ç”¨æˆ·æ¥å£æˆ–è€…è¯´ç½‘ç»œæœåŠ¡ï¼Œæ‰€ä»¥åœ¨è¿™ä¸€å±‚é‡Œé¢è‡ªç„¶çš„å°±æ˜¯ä¸€äº›ç½‘ç»œæœåŠ¡åè®®<br>å¯èƒ½æ¯”è¾ƒé™Œç”Ÿçš„åè®®æä¸€å˜´ï¼štelnetï¼Œå®ƒæ˜¯TCP/IPåè®®ä¸­çš„ä¸€å‘˜ï¼Œç”¨äºå¤„ç†è¿œç¨‹ç™»é™†æœåŠ¡è¿™å—çš„ï¼›SNMPåè®®å…¨ç§°Simple Network Management Protocolç®€å•ç½‘ç»œç®¡ç†åè®®,å®ƒä»¬æä¾›äº†ä¸€ç§ä»ç½‘ç»œä¸Šçš„è®¾å¤‡ä¸­æ”¶é›†ç½‘ç»œç®¡ç†ä¿¡æ¯çš„æ–¹æ³•,ç®€å•æ¥è¯´å®ƒå°±æ˜¯æ”¶é›†ä¿¡æ¯çš„</p><p>è¡¨ç¤ºå±‚è¿™å—æ˜¯ä¸ºäº†ç»™ä¸Šè¿°çš„åº”ç”¨å±‚æä¾›ä¸€ä¸ªæ•°æ®æ ¼å¼æœåŠ¡è½¬æ¢çš„åŠŸèƒ½è®©å¯¹æ–¹çš„åº”ç”¨å±‚èƒ½å¤Ÿç†è§£ï¼Œä¹Ÿå°±æ˜¯å®ƒç±»ä¼¼äºç”Ÿæ´»ä¸­çš„ç¿»è¯‘å®˜ï¼Œéœ€è¦ç»™å¯¹æ–¹çš„åº”ç”¨å±‚åšä¸€ä¸ªç¿»è¯‘ï¼Œæˆ–è€…è¯´å®ƒæ˜¯ä¸€ä¸ªç”µæŠ¥å‘˜éœ€è¦å‘åŠ å¯†çš„ç”µæŠ¥é˜²æ­¢ä¸­é—´äººçªƒå–è¿™æ ·ã€‚ä¸»è¦å°±æ˜¯åŠ å¯†è§£å¯†ï¼Œç¼–ç è§£ç ã€‚ä½†å…¶å®å‹ç¼©å’Œè§£å‹ç¼©ä¹Ÿæ˜¯åœ¨è¿™å—çš„éœ€è¦æ³¨æ„ã€‚</p><p>ä¼šè¯å±‚è¿™å—æ˜¯ä¸ºäº†ç»™ä¸Šè¿°è¡¨ç¤ºå±‚åšä¸€ä¸ªé€šä¿¡å¤„ç†çš„ï¼Œé¦–å…ˆå®ƒä¼šå»ºç«‹ä¸€ä¸ªä¼šè¯è¿æ¥ï¼Œç„¶åå»éªŒè¯å¯¹æ–¹æ˜¯å¦æ˜¯è‡ªå·±è¿™è¾¹çš„äººï¼Œç„¶åæŠŠæˆ‘æ–¹è¡¨ç¤ºå±‚çš„èµ„æ–™åŒ…è£…èµ·æ¥ç»™åˆ°ä¸‹é¢çš„ä¼ è¾“å±‚å»ä¼ è¾“ï¼Œç¡®å®šäº†ä¼ è¾“å®Œæˆä¹‹åä¼šè¯å°±ä¼šç»ˆæ­¢ã€‚<br>ä¼šè¯å±‚ä¸»è¦çš„ä½œç”¨å°±æ˜¯é›†ä¸­ç®¡ç†è¿™äº›ä¼šè¯ï¼Œè¿‡ç¨‹ä¸­æœ‰ä¸€äº›å¸¸è§çš„åœºæ™¯æ¯”å¦‚éªŒè¯ç™»é™†ï¼Œæ–­ç‚¹ç»­ä¼ ã€‚</p><p>ä¼ è¾“å±‚å°±æ˜¯æŠŠä¸Šè¿°ä¼šè¯å±‚å°è£…å¥½çš„è¡¨ç¤ºå±‚èµ„æ–™ç»™ä¼ è¾“åˆ°å¯¹æ–¹ï¼ŒTCPå’ŒUDPå°±æ˜¯å¸¸è§çš„ä¼ è¾“åè®®ï¼Œåœ¨è¿™ä¸€å±‚é‡Œé¢è¿˜è¦è´Ÿè´£å¤„ç†ä¸€äº›æ•°æ®åŒ…çš„é”™è¯¯ã€‚</p><p>ç½‘ç»œå±‚å‘¢ï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ªIPå±‚ï¼Œå®ƒé€šè¿‡ipå¯»å€æ¥å»ºç«‹ä¸¤ä¸ªèŠ‚ç‚¹çš„è¿æ¥ï¼Œä¸ºä¸Šè¿°ä¼ è¾“å±‚çš„æ•°æ®é€‰æ‹©ä¸€ä¸ªåˆé€‚çš„è·¯ç”±å’Œäº¤æ¢èŠ‚ç‚¹ï¼Œæ­£ç¡®æ— è¯¯çš„æŒ‰ç…§åœ°å€ä¼ é€ç»™å¯¹æ–¹çš„ä¼ è¾“å±‚ã€‚ä¼ è¾“å±‚å’Œç½‘ç»œå±‚å°±ç›¸å½“äºå¿«é€’å‘˜å’Œå¿«é€’ä¸­å¿ƒçš„å…³ç³»</p><p>æ•°æ®é“¾è·¯å±‚å’Œç‰©ç†å±‚å°±ä¸å¤ªå±•å¼€ä»‹ç»äº†æ¶‰åŠåˆ°çš„ä¸œè¥¿å¾ˆå¤š</p><h2 id="æ•°å­—ç­¾å-CAè¯ä¹¦"><a href="#æ•°å­—ç­¾å-CAè¯ä¹¦" class="headerlink" title="æ•°å­—ç­¾å CAè¯ä¹¦"></a>æ•°å­—ç­¾å CAè¯ä¹¦</h2><p>æ•°å­—ç­¾åæ˜¯å…¬é’¥åŠ ä¸€äº›ä¸ªäººä¿¡æ¯ç”¨å“ˆå¸Œç®—æ³•ç”Ÿæˆæ‘˜è¦ä¹‹åï¼Œå†ç”¨ç§é’¥åŠ å¯†ç”Ÿæˆçš„ä¸œè¥¿ã€‚<br>æ•°å­—è¯ä¹¦åº”ç”¨äº†æ•°å­—ç­¾åçš„æŠ€æœ¯ï¼Œå°†ä¸ªäººä¿¡æ¯å’Œå…¬é’¥ç”¨å“ˆå¸Œç®—æ³•ç”Ÿæˆæ‘˜è¦ä¹‹åï¼Œå†ç”¨CAçš„ç§é’¥åŠ å¯†ï¼Œè¿™æ•´ä¸ªå°±æ˜¯æ•°å­—è¯ä¹¦ã€‚</p><h2 id="TLS1-2å’Œ1-3çš„æ¡æ‰‹æ–¹å¼"><a href="#TLS1-2å’Œ1-3çš„æ¡æ‰‹æ–¹å¼" class="headerlink" title="TLS1.2å’Œ1.3çš„æ¡æ‰‹æ–¹å¼"></a>TLS1.2å’Œ1.3çš„æ¡æ‰‹æ–¹å¼</h2><h3 id="TLS1-2æ¡æ‰‹"><a href="#TLS1-2æ¡æ‰‹" class="headerlink" title="TLS1.2æ¡æ‰‹"></a>TLS1.2æ¡æ‰‹</h3><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220413091420.png" alt=""></p><h4 id="step1ï¼šClient-Hello"><a href="#step1ï¼šClient-Hello" class="headerlink" title="step1ï¼šClient Hello"></a>step1ï¼šClient Hello</h4><p>é¦–å…ˆæµè§ˆå™¨å‘é€client_random,TLSç‰ˆæœ¬ï¼ŒåŠ å¯†å¥—ä»¶åˆ—è¡¨ã€‚</p><p>client_randomæ˜¯ä»€ä¹ˆï¼Ÿç”¨æ¥å½¢æˆæœ€ç»ˆsecretçš„ä¸€ä¸ªå‚æ•°</p><p>åŠ å¯†å¥—ä»¶åˆ—è¡¨æ˜¯ä»€ä¹ˆï¼Ÿeg<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">TLS_ECDHE_WITH_AES_128_GCM_SHA256</span><br></pre></td></tr></table></figure></p><p>æ„æ€æ˜¯åœ¨TLSæ¡æ‰‹çš„è¿‡ç¨‹ä¸­ï¼Œä½¿ç”¨ECDHEç®—æ³•pre_random,128ä½çš„AESç®—æ³•è¿›è¡Œå¯¹ç§°åŠ å¯†ï¼Œåœ¨å¯¹ç§°åŠ å¯†çš„è¿‡ç¨‹ä¸­ä½¿ç”¨ä¸»æµçš„GCMåˆ†ç»„æ¨¡å¼ï¼Œå› ä¸ºå¯¹ç§°åŠ å¯†ä¸­å¾ˆé‡è¦çš„ä¸€ä¸ªé—®é¢˜å°±æ˜¯å¦‚ä½•åˆ†ç»„ï¼Œæœ€åä¸€ä¸ªæ˜¯é‡‡ç”¨å“ˆå¸Œæ‘˜è¦ç®—æ³•ï¼Œé‡‡ç”¨SHA256ç®—æ³•ã€‚</p><p>å…¶ä¸­å€¼å¾—è§£é‡Šçš„æ˜¯è¿™ä¸ªå“ˆå¸Œæ‘˜è¦ç®—æ³•ï¼Œè¯•æƒ³ä¸€ä¸‹è¿™ä¸ªåœºæ™¯ï¼ŒæœåŠ¡ç«¯ç°åœ¨ç»™å®¢æˆ·ç«¯å‘ä¿¡æ¯æ¥äº†ï¼Œè€Œå®¢æˆ·ç«¯ä¸çŸ¥é“æ­¤æ—¶çš„æ¶ˆæ¯æ˜¯æœåŠ¡ç«¯çš„è¿˜æ˜¯ä¸­é—´äººçš„ï¼Œç°åœ¨å¼•å…¥è¿™ä¸ªå“ˆå¸Œæ‘˜è¦ç®—æ³•ï¼Œå°†æœåŠ¡ç«¯çš„è¯ä¹¦ä¿¡æ¯é€šè¿‡è¿™ä¸ªç®—æ³•ç”Ÿæˆä¸€ä¸ªæ‘˜è¦ï¼Œç”¨æ¥æ ‡è¯†è¿™ä¸ªæœåŠ¡å™¨çš„èº«ä»½ï¼Œç„¶åç”¨CAç§é’¥åŠ å¯†åæŠŠåŠ å¯†åçš„æ ‡è¯†å’ŒCAå…¬é’¥å‘ç»™å®¢æˆ·ç«¯ã€‚å®¢æˆ·ç«¯æ‹¿åˆ°è¿™ä¸ªCAå…¬é’¥æ¥è§£å¯†ï¼Œç”Ÿæˆå¦å¤–ä¸€ä»½æ‘˜è¦ã€‚ä¸¤ä¸ªæ‘˜è¦è¿›è¡Œå¯¹æ¯”ï¼Œå¦‚æœç›¸åŒåˆ™èƒ½ç¡®è®¤æœåŠ¡å™¨çš„èº«ä»½ã€‚è¿™ä¹Ÿå°±æ˜¯æ‰€è°“æ•°å­—ç­¾åçš„åŸç†ã€‚å…¶ä¸­é™¤äº†å“ˆå¸Œæ‘˜è¦ç®—æ³•ï¼Œæœ€é‡è¦çš„æ˜¯ç§é’¥åŠ å¯†ï¼Œå…¬é’¥è§£å¯†ã€‚</p><h4 id="step2-Server-Hello"><a href="#step2-Server-Hello" class="headerlink" title="step2 Server Hello"></a>step2 Server Hello</h4><p>server_randomå‘é€è¿™ä¸ªéšæœºæ•°ï¼Œç¡®è®¤TLSç‰ˆæœ¬ï¼Œéœ€è¦ä½¿ç”¨çš„åŠ å¯†å¥—ä»¶å’Œè‡ªå·±çš„è¯ä¹¦ï¼Œé‚£ä¹ˆè¿™ä¸ªserver_paramsæ˜¯åšä»€ä¹ˆçš„å‘¢ï¼Ÿ</p><h4 id="step3-ClientéªŒè¯è¯ä¹¦ï¼Œç”Ÿæˆsecret"><a href="#step3-ClientéªŒè¯è¯ä¹¦ï¼Œç”Ÿæˆsecret" class="headerlink" title="step3 ClientéªŒè¯è¯ä¹¦ï¼Œç”Ÿæˆsecret"></a>step3 ClientéªŒè¯è¯ä¹¦ï¼Œç”Ÿæˆsecret</h4><p>å®¢æˆ·ç«¯éªŒè¯æœåŠ¡å™¨ä¼ è¿‡æ¥çš„è¯ä¹¦å’Œç­¾åæ˜¯å¦é€šè¿‡ï¼Œå¦‚æœéªŒè¯é€šè¿‡ï¼Œåˆ™å°†client_paramsä¼ é€’ç»™æœåŠ¡å™¨ã€‚</p><p>æ¥ç€å®¢æˆ·ç«¯é€šè¿‡ECDHEç®—æ³•è®¡ç®—å‡ºäº†pre_random,å…¶ä¸­ä¼ å…¥ä¸¤ä¸ªå‚æ•°ï¼šserver_paramså’Œclient_paramsã€‚ç°åœ¨ä½ åº”è¯¥æ¸…æ¥šè¿™ä¸¤ä¸ªå‚æ•°çš„ä½œç”¨äº†å§ï¼Œç”±äºECDHEç®—æ³•æ˜¯åŸºäºæ¤­åœ†æ›²çº¿ç¦»æ•£å¯¹æ•°ï¼Œè¿™ä¸¤ä¸ªå‚æ•°ä¹Ÿç§°ä½œæ¤­åœ†æ›²çº¿çš„å…¬é’¥ã€‚</p><p>å®¢æˆ·ç«¯ç°åœ¨æ‹¥æœ‰äº†client_random,server_randomå’Œpre_random,æ¥ä¸‹æ¥è¿™ä¸‰ä¸ªæ•°é€šè¿‡ä¸€ä¸ªä¼ªéšæœºæ•°å‡½æ•°è®¡ç®—å‡ºæœ€ç»ˆçš„secret</p><h4 id="step4-Serverç”Ÿæˆsecret"><a href="#step4-Serverç”Ÿæˆsecret" class="headerlink" title="step4 Serverç”Ÿæˆsecret"></a>step4 Serverç”Ÿæˆsecret</h4><p>å®¢æˆ·ç«¯ä¼ äº†client_paramsè¿‡æ¥äº†ï¼ŒæœåŠ¡ç«¯å¼€å§‹ç”¨ECDHEç®—æ³•ç”Ÿæˆpre_random,æ¥ç€ç”¨å’Œå®¢æˆ·ç«¯åŒæ ·çš„ä¼ªéšæœºå‡½æ•°ç”Ÿæˆæœ€åçš„secret</p><h4 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h4><div class="note primary flat"><p>TLSæ¡æ‰‹å®é™…ä¸Šæ˜¯ä¸€ä¸ªåŒå‘è®¤è¯çš„è¿‡ç¨‹ï¼Œä»step1å¯ä»¥çœ‹å‡ºå®¢æˆ·ç«¯æœ‰èƒ½åŠ›éªŒè¯æœåŠ¡å™¨çš„èº«ä»½ï¼ˆæ•°å­—ç­¾åï¼‰ï¼Œé‚£ä¹ˆæœåŠ¡å™¨èƒ½ä¸èƒ½éªŒè¯å®¢æˆ·ç«¯çš„èº«ä»½å‘¢ï¼Ÿ</p></div><p>å½“ç„¶æ˜¯å¯ä»¥çš„ã€‚å…·ä½“æ¥è¯´ï¼Œåœ¨step3ä¸­ï¼Œå®¢æˆ·ç«¯å‘é€client_params,å®é™…ä¸Šæ˜¯ç»™æœåŠ¡å™¨ä¸€ä¸ªéªŒè¯æ¶ˆæ¯ï¼Œè®©æœåŠ¡å™¨èµ°ç›¸åŒçš„æµç¨‹ï¼ˆå“ˆå¸Œæ‘˜è¦ï¼Œç§é’¥åŠ å¯†ï¼Œå…¬é’¥è§£å¯†ï¼‰ï¼Œç¡®è®¤å®¢æˆ·ç«¯çš„èº«ä»½</p><div class="note primary flat"><p>åœ¨å®¢æˆ·ç«¯ç”Ÿæˆsecretåï¼Œä¼šç»™æœåŠ¡å™¨å‘é€ä¸€ä¸ªæ”¶å°¾çš„ä¿¡æ¯ï¼Œå‘Šè¯‰æœåŠ¡å™¨ä¹‹åéƒ½è¦ç”¨å¯¹ç§°åŠ å¯†ï¼Œå¯¹ç§°åŠ å¯†çš„ç®—æ³•å°±æ˜¯ç”¨ç¬¬ä¸€æ¬¡çº¦å®šçš„ï¼ŒæœåŠ¡å™¨ç”Ÿæˆå®Œsecretåä¹Ÿä¼šå‘å®¢æˆ·ç«¯å‘é€ä¸€ä¸ªæ”¶å°¾ä¿¡æ¯ï¼Œå‘Šè¯‰å®¢æˆ·ç«¯ä»¥åç”¨å¯¹ç§°åŠ å¯†æ¥é€šä¿¡ã€‚</p></div><p>è¿™ä¸ªæ”¶å°¾ä¿¡æ¯åŒ…æ‹¬ä¸¤ä¸ªéƒ¨åˆ†ï¼Œä¸€éƒ¨åˆ†æ˜¯<code>Change Cipher Spec</code>,æ„å‘³ç€åé¢åŠ å¯†ä¼ è¾“äº†ï¼Œå¦å¤–ä¸€ä¸ªæ˜¯Finishedæ¶ˆæ¯ï¼Œè¿™ä¸ªæ¶ˆæ¯æ˜¯å¯¹ä¹‹å‰å‘é€çš„æ‰€æœ‰æ•°æ®åšçš„æ‘˜è¦ï¼Œå¯¹æ‘˜è¦è¿›è¡ŒåŠ å¯†ï¼Œè®©å¯¹æ–¹éªŒè¯ä¸€ä¸‹ã€‚</p><p>å½“åŒæ–¹éƒ½éªŒè¯é€šè¿‡ä¹‹åï¼Œæ¡æ‰‹æ‰æ­£å¼ç»“æŸï¼Œåé¢çš„HTTPæ­£å¼å¼€å§‹ä¼ è¾“åŠ å¯†æŠ¥æ–‡ã€‚</p><h2 id="ä»€ä¹ˆæ˜¯ä¸­é—´äººæ”»å‡»ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯ä¸­é—´äººæ”»å‡»ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ä¸­é—´äººæ”»å‡»ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ä¸­é—´äººæ”»å‡»ï¼Ÿ</h2><p>ä¸­é—´äººæ”»å‡»(Man-in-the-MiddleAttackï¼Œç®€ç§°â€œMITMæ”»å‡»â€)æ˜¯æŒ‡æ”»å‡»è€…ä¸é€šè®¯çš„ä¸¤ç«¯åˆ†åˆ«åˆ›å»ºç‹¬ç«‹çš„è”ç³»ï¼Œå¹¶äº¤æ¢å…¶æ‰€æ”¶åˆ°çš„æ•°æ®ï¼Œä½¿é€šè®¯çš„ä¸¤ç«¯è®¤ä¸ºä»–ä»¬æ­£åœ¨é€šè¿‡ä¸€ä¸ªç§å¯†çš„è¿æ¥ä¸å¯¹æ–¹ ç›´æ¥å¯¹è¯ï¼Œä½†äº‹å®ä¸Šæ•´ä¸ªä¼šè¯éƒ½è¢«æ”»å‡»è€…å®Œå…¨æ§åˆ¶ã€‚åœ¨ä¸­é—´äººæ”» å‡»ä¸­ï¼Œæ”»å‡»è€…å¯ä»¥æ‹¦æˆªé€šè®¯åŒæ–¹çš„é€šè¯å¹¶æ’å…¥æ–°çš„å†…å®¹ã€‚ä¸­é—´äººæ”»å‡»æ˜¯ä¸€ä¸ª(ç¼ºä¹)ç›¸äº’è®¤è¯çš„æ”»å‡»ã€‚å¤§å¤šæ•°çš„åŠ å¯†åè®®éƒ½ä¸“é—¨åŠ å…¥äº†ä¸€äº›ç‰¹æ®Šçš„è®¤è¯æ–¹æ³•ä»¥é˜»æ­¢ä¸­é—´äººæ”»å‡»ã€‚ä¾‹å¦‚ï¼ŒSSLåè®®å¯ä»¥éªŒè¯å‚ä¸é€šè®¯çš„ä¸€æ–¹æˆ–åŒæ–¹ä½¿ç”¨çš„è¯ä¹¦æ˜¯å¦æ˜¯ç”±æƒå¨çš„å—ä¿¡ ä»»çš„æ•°å­—è¯ä¹¦è®¤è¯æœºæ„é¢å‘ï¼Œå¹¶ä¸”èƒ½æ‰§è¡ŒåŒå‘èº«ä»½è®¤è¯ã€‚<br>ä¸­é—´äººæ”»å‡»è¿‡ç¨‹ 1å®¢æˆ·ç«¯å‘é€è¯·æ±‚åˆ°æœåŠ¡ç«¯ï¼Œè¯·æ±‚è¢«ä¸­é—´äººæˆªè·ã€‚<br>2)æœåŠ¡å™¨å‘å®¢æˆ·ç«¯å‘é€å…¬é’¥ã€‚<br>3)ä¸­é—´äººæˆªè·å…¬é’¥ï¼Œä¿ç•™åœ¨è‡ªå·±æ‰‹ä¸Šã€‚ç„¶åè‡ªå·±ç”Ÿæˆä¸€ä¸ªã€ä¼ª é€ çš„ã€‘å…¬é’¥ï¼Œå‘ç»™å®¢æˆ·ç«¯ã€‚<br>4)å®¢æˆ·ç«¯æ”¶åˆ°ä¼ªé€ çš„å…¬é’¥åï¼Œç”ŸæˆåŠ å¯†hashå€¼å‘ç»™æœåŠ¡å™¨ã€‚<br>5)ä¸­é—´äººè·å¾—åŠ å¯†hashå€¼ï¼Œç”¨è‡ªå·±çš„ç§é’¥è§£å¯†è·å¾—çœŸç§˜é’¥ã€‚åŒæ—¶ç”Ÿæˆå‡çš„åŠ å¯†hashå€¼ï¼Œå‘ç»™æœåŠ¡å™¨ã€‚<br>6 ) æœåŠ¡å™¨ç”¨ç§é’¥è§£å¯†è·å¾—å‡å¯†é’¥ã€‚ç„¶ååŠ å¯†æ•°æ®ä¼ è¾“ç»™å®¢æˆ·ç«¯ã€‚</p><h1 id="hosts"><a href="#hosts" class="headerlink" title="hosts"></a>hosts</h1><p>windowä¸‹ï¼š<code>C:\windows\system32\drivers\etcã€‚</code></p><p>hostæ–‡ä»¶çš„ä½œç”¨ï¼š<br>ä½œç”¨1. åŠ å¿«åŸŸåè§£æä½œç”¨<br>æˆ‘ä»¬ä¼šç»å¸¸è®¿é—®ç½‘ç«™ï¼Œé‚£ä¹ˆæˆ‘ä»¬åˆ™å¯ä»¥é€šè¿‡hostsæ–‡ä»¶æ¥é…ç½®åŸŸåä»¥åŠIPä¹‹é—´çš„å…³ç³»ï¼Œæé«˜åŸŸåè§£æé€Ÿåº¦ã€‚è¿™ä¸»è¦æ˜¯å› ä¸ºä¸¤è€…ä¹‹é—´çš„æ˜ å°„å…³ç³»ï¼Œç®€å•æ¥è¯´å°±æ˜¯æˆ‘ä»¬è¾“å…¥åŸŸåè®¡ç®—æœºå°±èƒ½å¾ˆå¿«è§£æå‡ºIPã€‚è€Œä¸æ˜¯åœ¨ç½‘ç»œä¸Šè¯·æ±‚æœåŠ¡å™¨ã€‚</p><p>ä½œç”¨2.æ–¹ä¾¿å±€åŸŸç½‘ç”¨æˆ·<br>åœ¨å¾ˆå¤šçš„å±€åŸŸç½‘ä¸­ï¼Œæˆ‘ä»¬ä¼šæœ‰å¾ˆå¤šçš„æœåŠ¡å™¨æä¾›ç»™ç”¨æˆ·è¿›è¡Œä½¿ç”¨ã€‚è€Œåœ¨å±€åŸŸç½‘ä¸­æ˜¯ç¼ºå°‘DNSæœåŠ¡å™¨çš„ï¼Œé‚£ä¹ˆè¾“å…¥è¿›å»çš„IPåœ°å€å°±å¾ˆéš¾è®°ä½ã€‚hostsæ–‡ä»¶åˆ™æ˜¯èƒ½å¤Ÿæœ‰æ•ˆå‡å°‘è¿™æ ·çš„éº»çƒ¦ï¼Œæ–¹ä¾¿ç”¨æˆ·ä½¿ç”¨ã€‚</p><p>ä½œç”¨3.å±è”½ç½‘ç«™<br>åœ¨å¾ˆå¤šçš„ç½‘ç«™ä¸­ï¼Œæˆ‘ä»¬ä¼šçœ‹è§å¾ˆå¤šæ²¡æœ‰ç»è¿‡ç”¨æˆ·åŒæ„å°±å®‰è£…ä¸Šå»çš„æ’ä»¶ã€‚åœ¨è¿™äº›æ’ä»¶ä¸­å­˜åœ¨æœ¨é©¬ç—…æ¯’çš„å¯èƒ½æ€§å¾ˆå¤§ï¼Œä½¿ç”¨hostsæ–‡ä»¶å¯ä»¥å°†é”™è¯¯IPæ˜ å°„åˆ°æœ¬åœ°IPä¹‹ä¸­ï¼Œå°†ç½‘ç«™å±è”½ã€‚</p><h1 id="DNS"><a href="#DNS" class="headerlink" title="DNS"></a>DNS</h1><h2 id="DNS-1"><a href="#DNS-1" class="headerlink" title="DNS"></a>DNS</h2><div class="note primary flat"><p>DNSçš„ä½œç”¨å°±æ˜¯é€šè¿‡åŸŸåæŸ¥è¯¢åˆ°IP</p></div><p>å› ä¸ºIPå­˜åœ¨æ•°å­—å’Œè‹±æ–‡çš„ç»„åˆIPv6ï¼Œå¾ˆä¸åˆ©äºäººç±»è®°å¿†ï¼Œæ‰€ä»¥å‡ºç°äº†åŸŸåã€‚ä½ å¯ä»¥æŠŠåŸŸåçœ‹æˆæŸä¸ªIPçš„åˆ«åï¼ŒDNSå°±æ˜¯å»æŸ¥è¯¢è¿™ä¸ªåˆ«åçœŸæ­£çš„åç§°æ˜¯ä»€ä¹ˆ</p><div class="note primary flat"><p>åœ¨TCPæ¡æ‰‹ä¹‹å‰å°±å·²ç»è¿›è¡Œäº†DNSæŸ¥è¯¢ï¼Œè¿™ä¸ªæŸ¥è¯¢æ˜¯æ“ä½œç³»ç»Ÿè‡ªå·±å®Œæˆçš„ï¼Œå½“åœ¨æµè§ˆå™¨ä¸­æƒ³è®¿é—®<code>www.google.com</code>ä¼šè¿›è¡Œä»¥ä¸‹æ“ä½œã€‚</p></div><ul><li>æœ¬åœ°å®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚æŸ¥è¯¢ IP åœ°å€</li><li>æŸ¥çœ‹æµè§ˆå™¨æœ‰æ²¡æœ‰è¯¥åŸŸåçš„ IP ç¼“å­˜</li><li>æŸ¥çœ‹æ“ä½œç³»ç»Ÿæœ‰æ²¡æœ‰è¯¥åŸŸåçš„ IP ç¼“å­˜</li><li>æŸ¥çœ‹ Host æ–‡ä»¶æœ‰æ²¡æœ‰è¯¥åŸŸåçš„è§£æé…ç½®</li><li>å¦‚æœè¿™æ—¶å€™è¿˜æ²¡å¾—è¯ï¼Œä¼šé€šè¿‡ç›´æ¥å» DNS æ ¹æœåŠ¡å™¨æŸ¥è¯¢ï¼Œè¿™ä¸€æ­¥æŸ¥è¯¢ä¼šæ‰¾å‡ºè´Ÿè´£ com è¿™ä¸ªä¸€çº§åŸŸåçš„æœåŠ¡å™¨</li><li>ç„¶åå»è¯¥æœåŠ¡å™¨æŸ¥è¯¢ google.com è¿™ä¸ªäºŒçº§åŸŸå</li><li>æ¥ä¸‹æ¥æŸ¥è¯¢ www.google.com è¿™ä¸ªä¸‰çº§åŸŸåçš„åœ°å€</li><li>è¿”å›ç»™ DNS å®¢æˆ·ç«¯å¹¶ç¼“å­˜èµ·æ¥</li></ul><div class="note primary flat"><p>ä»¥ä¸Šä»‹ç»çš„æ˜¯DNSè¿­ä»£æŸ¥è¯¢ï¼Œè¿˜æœ‰ä¸€ç§æ˜¯é€’å½’æŸ¥è¯¢ï¼ŒåŒºåˆ«æ˜¯å‰è€…æ˜¯ç”±å®¢æˆ·ç«¯å»è¯·æ±‚ï¼Œåè€…æ˜¯ç”±ç³»ç»Ÿé…ç½®çš„DNSå»è¯·æ±‚ï¼Œå¾—åˆ°ç»“æœä¹‹åå°†æ•°æ®è¿”å›ç»™å®¢æˆ·ç«¯ã€‚</p></div><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220414083618.png" alt=""></p><h3 id="DNSè§£æä¼˜åŒ–"><a href="#DNSè§£æä¼˜åŒ–" class="headerlink" title="DNSè§£æä¼˜åŒ–"></a>DNSè§£æä¼˜åŒ–</h3><p>ä¸»è¦åˆ†ä¸ºä¸¤ä¸ªæ–¹æ¡ˆ</p><ul><li>DNSé¢„è§£æ</li><li>å‡å°‘DNSè¯·æ±‚</li></ul><h3 id="DNSé¢„è§£æ"><a href="#DNSé¢„è§£æ" class="headerlink" title="DNSé¢„è§£æ"></a>DNSé¢„è§£æ</h3><div class="note primary flat"><p>DNSè§£æä¹Ÿéœ€è¦æ—¶é—´çš„ï¼Œå¯ä»¥é€šè¿‡é¢„è§£æçš„æ–¹å¼æ¥é¢„å…ˆè·å–åŸŸåæ‰€å¯¹åº”çš„IP</p></div><p>linkæ–¹å¼ï¼šæ‰‹åŠ¨è§£æ<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;dns-prefetch&quot;</span> <span class="attr">href</span>=<span class="string">&quot;//blog.poetries.top&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><br>metaæ–¹å¼ï¼šhttpsè‡ªåŠ¨è§£æ<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;x-dns-prefetch-control&quot;</span> <span class="attr">content</span>=<span class="string">&quot;on&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><br>è®¾ç½®å“åº”å¤´ï¼šè‡ªåŠ¨è§£æ<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ctx.set(<span class="string">&#x27;X-DNS-Prefetch-Control&#x27;</span>, <span class="string">&#x27;on&#x27;</span>)</span><br></pre></td></tr></table></figure></p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="é¢è¯•æŒ‡å—" scheme="https://zlinni.github.io/categories/%E9%9D%A2%E8%AF%95%E6%8C%87%E5%8D%97/"/>
    
    
    <category term="å‰ç«¯" scheme="https://zlinni.github.io/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="é¢è¯•" scheme="https://zlinni.github.io/tags/%E9%9D%A2%E8%AF%95/"/>
    
  </entry>
  
  <entry>
    <title>æ„Ÿå—æ­£åˆ™ä¹‹ç¾</title>
    <link href="https://zlinni.github.io/posts/2097459314/"/>
    <id>https://zlinni.github.io/posts/2097459314/</id>
    <published>2022-09-10T02:13:08.000Z</published>
    <updated>2022-09-12T04:13:10.636Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><div class="note primary flat"><p>ä¹‹å‰å¯¹æ­£åˆ™çš„ç†è§£ä¸€ç›´æ˜¯åŠæ‡‚ä¸æ‡‚ï¼Œç°åœ¨å’Œhoudunrenå­¦ä¸€æ³¢æ­£åˆ™ã€‚æœ¬ç¯‡æ˜¯jsæ­£åˆ™ç›¸å…³çš„æ¡ˆä¾‹ä¸ç»†èŠ‚å­¦ä¹ ç¬”è®°</p><p>ååˆ†å»ºè®®é…å¥—quokkaä½¿ç”¨,æ˜¯vscodeä¸€ä¸ªæ˜¾ç¤ºä»£ç å®æ—¶ç»“æœçš„ä¸€ä¸ªæ’ä»¶,éå¸¸æ–¹ä¾¿.</p><p>å­¦ä¹ ç¬”è®°GitHubä»“åº“:<a href="">ä¼ é€é—¨</a></p></div><h1 id="å–å‡ºæ•°å­—"><a href="#å–å‡ºæ•°å­—" class="headerlink" title="å–å‡ºæ•°å­—"></a>å–å‡ºæ•°å­—</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å–å‡ºæ•°å­—</span></span><br><span class="line"><span class="comment">// case: jojo123jojo321</span></span><br><span class="line"><span class="comment">// æ­£å¸¸å†™æ³•ï¼š</span></span><br><span class="line"><span class="keyword">let</span> test = <span class="string">&quot;jojo123jojo321&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> num = [...test].filter(<span class="function"><span class="params">n</span>=&gt;</span>!<span class="built_in">Number</span>.isNaN(<span class="built_in">parseInt</span>(n)));</span><br><span class="line"><span class="built_in">console</span>.log(num.join(<span class="string">&#x27;&#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ­£åˆ™å†™æ³•</span></span><br><span class="line"><span class="built_in">console</span>.log(test.match(<span class="regexp">/\d/g</span>).join(<span class="string">&#x27;&#x27;</span>))</span><br></pre></td></tr></table></figure><h1 id="å­—é¢é‡åˆ›å»ºæ­£åˆ™-å­˜æ”¾å˜é‡"><a href="#å­—é¢é‡åˆ›å»ºæ­£åˆ™-å­˜æ”¾å˜é‡" class="headerlink" title="å­—é¢é‡åˆ›å»ºæ­£åˆ™/å­˜æ”¾å˜é‡"></a>å­—é¢é‡åˆ›å»ºæ­£åˆ™/å­˜æ”¾å˜é‡</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å­—é¢é‡åˆ›å»ºæ­£åˆ™</span></span><br><span class="line"><span class="keyword">let</span> test = <span class="string">&quot;jojo123jojo321&quot;</span>;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="regexp">/o/</span>.test(test))</span><br><span class="line"></span><br><span class="line"><span class="comment">//å­—é¢é‡ä¸­æ”¾å˜é‡</span></span><br><span class="line"><span class="keyword">let</span> useO = <span class="string">&#x27;o&#x27;</span>;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">eval</span>(<span class="string">`/<span class="subst">$&#123;useO&#125;</span>/`</span>).test(test))</span><br></pre></td></tr></table></figure><h1 id="å¯¹è±¡åˆ›å»ºæ­£åˆ™"><a href="#å¯¹è±¡åˆ›å»ºæ­£åˆ™" class="headerlink" title="å¯¹è±¡åˆ›å»ºæ­£åˆ™"></a>å¯¹è±¡åˆ›å»ºæ­£åˆ™</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> test = <span class="string">&quot;jojolin&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> a = <span class="string">&quot;lin&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> reg = <span class="keyword">new</span> <span class="built_in">RegExp</span>(a, <span class="string">&quot;g&quot;</span>); <span class="comment">//gä»£è¡¨å…¨å±€</span></span><br><span class="line"><span class="comment">//æ˜¯å¦åŒ…å«æŸä¸ªå­—ç¬¦ä¸²</span></span><br><span class="line"><span class="built_in">console</span>.log(reg.test(test));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// replace åé¢ä¹Ÿå¯ä»¥æ ¹ä¸€ä¸ªå‡½æ•°è‡ªå®šä¹‰æ›¿æ¢</span></span><br><span class="line">test = test.replace(<span class="regexp">/\w/g</span>,<span class="function">(<span class="params">str</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;dio&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(test)</span><br></pre></td></tr></table></figure><h1 id="é€‰æ‹©ç¬¦"><a href="#é€‰æ‹©ç¬¦" class="headerlink" title="é€‰æ‹©ç¬¦"></a>é€‰æ‹©ç¬¦</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> test = <span class="string">&quot;jojolin&quot;</span>;</span><br><span class="line"><span class="comment">// | è¡¨ç¤ºæˆ–</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="regexp">/j|k/</span>.test(test))</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> tel = <span class="string">&#x27;010-9999999&#x27;</span></span><br><span class="line"><span class="keyword">let</span> tel2 = <span class="string">&#x27;010&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="regexp">/(010|020)\-\d&#123;7,8&#125;/</span>.test(tel))</span><br><span class="line"><span class="built_in">console</span>.log(<span class="regexp">/(010|020)\-\d&#123;7,8&#125;/</span>.test(tel2))</span><br></pre></td></tr></table></figure><h1 id="åŸå­è¡¨å’ŒåŸå­ç»„"><a href="#åŸå­è¡¨å’ŒåŸå­ç»„" class="headerlink" title="åŸå­è¡¨å’ŒåŸå­ç»„"></a>åŸå­è¡¨å’ŒåŸå­ç»„</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åŸå­è¡¨å’ŒåŸå­ç»„</span></span><br><span class="line"><span class="keyword">let</span> reg = <span class="regexp">/[123456]/</span></span><br><span class="line"><span class="keyword">let</span> hd = <span class="string">&#x27;123123&#x27;</span></span><br><span class="line"><span class="comment">// åŸå­è¡¨ [] è¡¨ç¤ºä»»é€‰é‡Œé¢çš„å…¶ä¸­ä¸€ä¸ª/å¤šé€‰ä¸€ æ³¨æ„åªèƒ½é€‰ä¸€</span></span><br><span class="line"><span class="built_in">console</span>.log(hd.match(reg))</span><br><span class="line"></span><br><span class="line"><span class="comment">// åŸå­ç»„ () æ•´ä½“æ­£åˆ™</span></span><br><span class="line"><span class="keyword">let</span> reg2 = <span class="regexp">/(12|34)/</span>;<span class="comment">//è¡¨ç¤º12æ˜¯ä¸€ä¸ªæ•´ä½“æˆ–è€…34æ˜¯ä¸€ä¸ªæ•´ä½“</span></span><br><span class="line"><span class="built_in">console</span>.log(hd.match(reg2))</span><br></pre></td></tr></table></figure><h1 id="æ­£åˆ™è¡¨è¾¾å¼ä¸­çš„è½¬ä¹‰"><a href="#æ­£åˆ™è¡¨è¾¾å¼ä¸­çš„è½¬ä¹‰" class="headerlink" title="æ­£åˆ™è¡¨è¾¾å¼ä¸­çš„è½¬ä¹‰"></a>æ­£åˆ™è¡¨è¾¾å¼ä¸­çš„è½¬ä¹‰</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ­£åˆ™è¡¨è¾¾å¼ä¸­çš„è½¬ä¹‰</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> price = <span class="number">23.34</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// .æœ‰ä¸¤å±‚å«ä¹‰ ä¼˜å…ˆçº§æœ€é«˜çš„ï¼šé™¤æ¢è¡Œå¤–æ‰€æœ‰å­—ç¬¦ æ­£å¸¸ï¼šæ™®é€šçš„ç‚¹</span></span><br><span class="line"><span class="comment">// æ‰€ä»¥æˆ‘ä»¬éœ€è¦å¯¹.è¿›è¡Œè½¬ä¹‰</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="regexp">/\d+\.\d+/</span>.test(price))</span><br><span class="line"></span><br><span class="line"><span class="comment">// åœ¨å¯¹è±¡é‡Œé¢å°±åˆä¸ä¸€æ ·äº†,éœ€è¦å¤šä¸€å±‚è½¬ä¹‰ å»ºè®®å…ˆçœ‹çœ‹å¯¹åº”å­—ç¬¦ä¸²è½¬å‡ºæ¥æ˜¯å¦å’Œå­—é¢é‡ç›¸åŒ</span></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">&quot;\\d+\\.\\d+&quot;</span>;</span><br><span class="line"><span class="built_in">console</span>.log(str)</span><br><span class="line"><span class="keyword">let</span> reg = <span class="keyword">new</span> <span class="built_in">RegExp</span>(str)</span><br><span class="line"><span class="built_in">console</span>.log(reg.test(price)) </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// åŒ¹é…æ˜¯å¦åˆæ³•ç½‘ç«™</span></span><br><span class="line"><span class="keyword">let</span> url = <span class="string">&#x27;https://www.baidu.com&#x27;</span>;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="regexp">/^https?:\/\/\w+\.\w+\.\w+/</span>.test(url))</span><br></pre></td></tr></table></figure><h1 id="å­—ç¬¦è¾¹ç•Œçº¦æŸ"><a href="#å­—ç¬¦è¾¹ç•Œçº¦æŸ" class="headerlink" title="å­—ç¬¦è¾¹ç•Œçº¦æŸ"></a>å­—ç¬¦è¾¹ç•Œçº¦æŸ</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å­—ç¬¦è¾¹ç•Œçº¦æŸ</span></span><br><span class="line"><span class="keyword">let</span> test = <span class="string">&quot;123&quot;</span>;</span><br><span class="line"><span class="comment">// ^åŒ¹é…ä»¥xå¼€å¤´çš„ $åŒ¹é…ä»¥xç»“æŸçš„ \dåŒ¹é…å•ä¸ªæ•°å­—</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="regexp">/^\d$/</span>.test(test))</span><br><span class="line"><span class="comment">// ä¸Šé¢æœ‰ä¸ªå‘ç‚¹å°±æ˜¯\dåªåŒ¹é…ä¸€ä¸ªæ•°å­— éœ€è¦ä½¿ç”¨\d+</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="regexp">/^\d+$/</span>.test(test))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//æ¡ˆä¾‹ ä½¿å¾—å­—ç¬¦ä¸²æ»¡è¶³3-6ä½æ˜¯å­—æ¯ä¸”åªæœ‰3-6ä½</span></span><br><span class="line"><span class="keyword">const</span> reg  = <span class="regexp">/^[a-z]&#123;3,6&#125;$/</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;&#x27;</span>.match(reg))</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;a&#x27;</span>.match(reg))</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;ab&#x27;</span>.match(reg))</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;abc&#x27;</span>.match(reg))</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;abcd&#x27;</span>.match(reg))</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;abcde&#x27;</span>.match(reg))</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;abcdef&#x27;</span>.match(reg))</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;abcdefg&#x27;</span>.match(reg))</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰€ä»¥å¾—å‡º é™å®šçš„æƒ…å†µä¸‹ å°±ä½¿ç”¨å¼€å¤´ç¬¦å’Œç»“æŸç¬¦å·,é¡ºä¾¿è¿™é‡Œå¤ä¹ ä¸€ä¸‹åŸå­è¡¨ æ˜¯å¤šé€‰1 </span></span><br></pre></td></tr></table></figure><h1 id="æ•°å€¼ä¸ç©ºç™½å…ƒå­—ç¬¦"><a href="#æ•°å€¼ä¸ç©ºç™½å…ƒå­—ç¬¦" class="headerlink" title="æ•°å€¼ä¸ç©ºç™½å…ƒå­—ç¬¦"></a>æ•°å€¼ä¸ç©ºç™½å…ƒå­—ç¬¦</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ•°å€¼ä¸ç©ºç™½å…ƒå­—ç¬¦</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// åŒ¹é…ä¸­æ–‡é™¤å¤–çš„æ‰€æœ‰å­—ç¬¦</span></span><br><span class="line"><span class="keyword">let</span> hd = <span class="string">`</span></span><br><span class="line"><span class="string">    å¼ ä¸‰:010-9999999,æå››:020-99999999</span></span><br><span class="line"><span class="string">`</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‰é¢è®²åˆ°çš„\d å…¶å®æ˜¯åŒ¹é…0-9çš„æ•°å­— \d+æ˜¯åŒ¹é…å¤šä¸ªè¿™æ ·çš„æ•°å­—</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// \D åˆ™ç›¸å æ˜¯åŒ¹é…æ‰€æœ‰çš„éæ•°å­—</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å†æ¬¡å¤ä¹ ä¸€ä¸‹ æˆ‘ä»¬æƒ³ç”¨æ­£åˆ™å–å‡ºä¸œè¥¿ å¯ä»¥ä½¿ç”¨match ä¼šæŠŠåŒ¹é…çš„ç»“æœè¿”å›æ•°ç»„å›æ¥ æˆ–è€…replaceå»æ‰ä¸æƒ³è¦çš„ å†æˆ–è€…execé€ä¸ªåŒ¹é…</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å› ä¸ºæˆ‘ä»¬ä¸çŸ¥é“æ€ä¹ˆç›´æ¥åŒ¹é…ä¸­æ–‡ æ‰€ä»¥è¿™é‡ŒæŠŠé™¤äº†ä¸­æ–‡ä¹‹å¤–çš„æ’é™¤ä¹Ÿèƒ½æ‹¿åˆ°ä¸­æ–‡</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// \s è¡¨ç¤ºåŒ¹é…åˆ°ç©ºç™½ \nè¿™ç§ä¹Ÿç®—ç©ºç™½</span></span><br><span class="line"><span class="comment">// ^åœ¨åŸå­è¡¨é‡Œé¢æ˜¯éçš„æ„æ€ ä¹Ÿå°±æ˜¯ä¸è¦è¿™é‡Œé¢ä»»æ„ä¸€ä¸ª</span></span><br><span class="line"><span class="built_in">console</span>.log(hd.match(<span class="regexp">/[^\d,:-\s]+/g</span>));</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="wä¸Wå…ƒå­—ç¬¦"><a href="#wä¸Wå…ƒå­—ç¬¦" class="headerlink" title="wä¸Wå…ƒå­—ç¬¦"></a>wä¸Wå…ƒå­—ç¬¦</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// wä¸Wå…ƒå­—ç¬¦</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// \w è¡¨ç¤ºå­—æ¯æ•°å­—ä¸‹åˆ’çº¿ å·²ç»å›Šæ‹¬äº†\d</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å®ç°é‚®ç®±åŒ¹é…</span></span><br><span class="line"><span class="keyword">let</span> email = <span class="string">&#x27;9813123123@qq.com&#x27;</span></span><br><span class="line"><span class="built_in">console</span>.log(email.match(<span class="regexp">/^\w+@\w+\.\w+$/</span>));</span><br></pre></td></tr></table></figure><h1 id="ç‚¹å…ƒå­—ç¬¦çš„ä½¿ç”¨"><a href="#ç‚¹å…ƒå­—ç¬¦çš„ä½¿ç”¨" class="headerlink" title="ç‚¹å…ƒå­—ç¬¦çš„ä½¿ç”¨"></a>ç‚¹å…ƒå­—ç¬¦çš„ä½¿ç”¨</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç‚¹å…ƒå­—ç¬¦çš„ä½¿ç”¨</span></span><br><span class="line"><span class="comment">// å› ä¸º.åªèƒ½åŒ¹é…é™¤äº†æ¢è¡Œç¬¦çš„ ä¹Ÿå°±æ˜¯é‡åˆ°æ¢è¡Œä»–å°±åœæ­¢äº†ï¼Œé‚£ä¹ˆåœ¨æ¨¡æ¿çš„è¿™ä¸ªæƒ…å†µä¸‹æ˜¯èµ°ä¸é€šçš„</span></span><br><span class="line"><span class="comment">// ä½¿ç”¨ /s è§†ä¸ºå•è¡ŒåŒ¹é…ï¼Œå°±å¯ä»¥äº†</span></span><br><span class="line"><span class="keyword">let</span> hd = <span class="string">`</span></span><br><span class="line"><span class="string">    jojo</span></span><br><span class="line"><span class="string">    jojolin</span></span><br><span class="line"><span class="string">`</span></span><br><span class="line"><span class="built_in">console</span>.log(hd.match(<span class="regexp">/.+/</span>)[<span class="number">0</span>])</span><br><span class="line"><span class="built_in">console</span>.log(hd.match(<span class="regexp">/.+/</span>s))</span><br></pre></td></tr></table></figure><h1 id="åŒ¹é…æ‰€æœ‰å­—ç¬¦"><a href="#åŒ¹é…æ‰€æœ‰å­—ç¬¦" class="headerlink" title="åŒ¹é…æ‰€æœ‰å­—ç¬¦"></a>åŒ¹é…æ‰€æœ‰å­—ç¬¦</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åŒ¹é…æ‰€æœ‰å­—ç¬¦</span></span><br><span class="line"><span class="keyword">let</span> hd = <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;span&gt;</span></span><br><span class="line"><span class="string">        jojolin @abc</span></span><br><span class="line"><span class="string">        @@@cajsocj    </span></span><br><span class="line"><span class="string">    &lt;/span&gt;</span></span><br><span class="line"><span class="string">`</span>   </span><br><span class="line"><span class="comment">// [\s\S]è¡¨ç¤ºæ‰€æœ‰å­—ç¬¦ å½“ç„¶[\d\D]ä¹Ÿæ˜¯</span></span><br><span class="line"><span class="built_in">console</span>.log(hd.match(<span class="regexp">/&lt;span&gt;[\s\S]+&lt;\/span&gt;/</span>))</span><br></pre></td></tr></table></figure><h1 id="æ¨¡å¼ä¿®æ­£ç¬¦gi"><a href="#æ¨¡å¼ä¿®æ­£ç¬¦gi" class="headerlink" title="æ¨¡å¼ä¿®æ­£ç¬¦gi"></a>æ¨¡å¼ä¿®æ­£ç¬¦gi</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ¨¡å¼ä¿®æ­£ç¬¦</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// /iå¿½ç•¥å¤§å°å†™ /gå…¨å±€åŒ¹é… /gi æ¨¡å¼ç»„åˆ</span></span><br><span class="line"><span class="keyword">let</span> text = <span class="string">&#x27;jojoJOJOJO&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(text.match(<span class="regexp">/o/gi</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ›¿æ¢</span></span><br><span class="line"><span class="built_in">console</span>.log(text.replace(<span class="regexp">/o/gi</span>,<span class="string">&#x27;?&#x27;</span>))</span><br></pre></td></tr></table></figure><h1 id="æ¨¡å¼ä¿®æ­£ç¬¦m"><a href="#æ¨¡å¼ä¿®æ­£ç¬¦m" class="headerlink" title="æ¨¡å¼ä¿®æ­£ç¬¦m"></a>æ¨¡å¼ä¿®æ­£ç¬¦m</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> hd = <span class="string">`</span></span><br><span class="line"><span class="string">    #1 js,200å…ƒ #</span></span><br><span class="line"><span class="string">    #2 php,300å…ƒ #</span></span><br><span class="line"><span class="string">    #55 houdunren.com # åç›¾äºº</span></span><br><span class="line"><span class="string">    #56 nodejs,180å…ƒ #</span></span><br><span class="line"><span class="string">`</span>;</span><br><span class="line"><span class="comment">// æ¨¡å¼mä¿®æ­£ç¬¦å°†å¤šè¡Œä¸­æ¯ä¸€è¡Œå•ç‹¬çœ‹å¾… </span></span><br><span class="line"><span class="comment">// ä¸ç”¨mçš„è¯ è¿™ä¸ªè¯­æ³• ä½¿ç”¨.ä¼šåŒ¹é…åˆ°# ç„¶å\s+#ä¼šåŒ¹é…åˆ°ä¸‹ä¸€è¡Œçš„# å¾ˆæ˜æ˜¾ä¸æ˜¯æƒ³è¦çš„ç»“æœ</span></span><br><span class="line"><span class="built_in">console</span>.log(hd.match(<span class="regexp">/\s*#\d+\s+.+\s+#/g</span>));</span><br><span class="line"><span class="comment">// ä½¿ç”¨må</span></span><br><span class="line"><span class="built_in">console</span>.log(hd.match(<span class="regexp">/^\s*#\d+\s+.+\s+#$/gm</span>));</span><br><span class="line"><span class="keyword">let</span> lessons = hd.match(<span class="regexp">/^\s*#\d+\s+.+\s+#$/gm</span>).map(<span class="function">(<span class="params">v</span>) =&gt;</span> &#123;</span><br><span class="line">  v = v.replace(<span class="regexp">/^\s*#\d+\s+/</span>, <span class="string">&quot;&quot;</span>).replace(<span class="regexp">/\s#$/</span>, <span class="string">&quot;&quot;</span>)</span><br><span class="line">  <span class="built_in">console</span>.log(v)</span><br><span class="line">  <span class="keyword">let</span> [name,price] = v.split(<span class="string">&#x27;,&#x27;</span>);</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    name,price</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">JSON</span>.stringify(lessons,<span class="literal">null</span>,<span class="number">2</span>))</span><br></pre></td></tr></table></figure><h1 id="æ¨¡å¼ä¿®æ­£ç¬¦u"><a href="#æ¨¡å¼ä¿®æ­£ç¬¦u" class="headerlink" title="æ¨¡å¼ä¿®æ­£ç¬¦u"></a>æ¨¡å¼ä¿®æ­£ç¬¦u</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ¨¡å¼u unicode</span></span><br><span class="line"><span class="comment">// æ¯ä¸ªå­—ç¬¦éƒ½æœ‰ç›¸åº”çš„å±æ€§å»åŒºåˆ†</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿™é‡Œè™½ç„¶ä¸æ˜¯å¾ˆæ‡‚ ä½†æ˜¯æœ‰å‡ ä¸ªä¾‹å­ </span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> text = <span class="string">&#x27;jojostoneocean2022.,&#125;[comç¬‘æ­»æˆ‘äº†å“ˆå“ˆå“ˆ&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//æ£€æµ‹å­—ç¬¦çš„å±æ€§ä¸ºå­—æ¯çš„æƒ…å†µ (ä¸­æ–‡ä¹ŸåŠ è¿›å»äº†ï¼Ÿï¼Ÿ)</span></span><br><span class="line"><span class="built_in">console</span>.log(text.match(<span class="regexp">/\p&#123;L&#125;/gu</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ£€æµ‹æ ‡ç‚¹ç¬¦å·</span></span><br><span class="line"><span class="built_in">console</span>.log(text.match(<span class="regexp">/\p&#123;P&#125;/gu</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//æ£€æµ‹ä¸­æ–‡</span></span><br><span class="line"><span class="built_in">console</span>.log(text.match(<span class="regexp">/\p&#123;sc=Han&#125;/gu</span>))</span><br></pre></td></tr></table></figure><h1 id="lastIndexå±æ€§çš„ä½¿ç”¨"><a href="#lastIndexå±æ€§çš„ä½¿ç”¨" class="headerlink" title="lastIndexå±æ€§çš„ä½¿ç”¨"></a>lastIndexå±æ€§çš„ä½¿ç”¨</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//lastIndexå±æ€§çš„ä½¿ç”¨</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> text = <span class="string">&#x27;jojo&#x27;</span></span><br><span class="line"><span class="comment">//æ­£å¸¸è¿™æ ·æ“ä½œä¼šå¾—åˆ°åŒ¹é…å­—ç¬¦çš„å±æ€§</span></span><br><span class="line"><span class="built_in">console</span>.log(text.match(<span class="regexp">/\w/</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">//åŠ äº†gå…¨åŒ¹é…ä¹‹å å°±ä¸¢å¤±äº†ç›¸å…³å±æ€§</span></span><br><span class="line"><span class="built_in">console</span>.log(text.match(<span class="regexp">/\w/g</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨exec</span></span><br><span class="line"><span class="keyword">const</span> reg = <span class="regexp">/\w/g</span></span><br><span class="line"><span class="built_in">console</span>.log(reg.lastIndex)</span><br><span class="line"><span class="built_in">console</span>.log(reg.exec(text))</span><br><span class="line"><span class="built_in">console</span>.log(reg.lastIndex)</span><br><span class="line"><span class="built_in">console</span>.log(reg.exec(text))</span><br><span class="line"><span class="built_in">console</span>.log(reg.lastIndex)</span><br><span class="line"><span class="built_in">console</span>.log(reg.exec(text))</span><br><span class="line"><span class="built_in">console</span>.log(reg.lastIndex)</span><br><span class="line"><span class="built_in">console</span>.log(reg.exec(text))</span><br><span class="line"><span class="built_in">console</span>.log(reg.lastIndex)</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿™ä¸ªå±æ€§ä¼šæœ‰ä¸€ä¸ªindex æ¯æ¬¡æ‰§è¡Œçš„æ—¶å€™indexå°±ä¼š+1 ç›´åˆ°èµ°å®Œ</span></span><br><span class="line"><span class="keyword">const</span> reg2 = <span class="regexp">/\w/g</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨å¾ªç¯</span></span><br><span class="line"><span class="keyword">while</span>((res = reg2.exec(text)))&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(res)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(res) </span><br><span class="line"></span><br><span class="line"><span class="comment">// æ³¨æ„execåªæœ‰åœ¨å…¨æ¨¡å¼gçš„æƒ…å†µä¸‹ æ‰ä¼šé€ä¸ªæœç´¢ </span></span><br><span class="line"><span class="keyword">const</span> reg3 = <span class="regexp">/\w/</span></span><br><span class="line"><span class="built_in">console</span>.log(reg3.lastIndex)</span><br><span class="line"><span class="built_in">console</span>.log(reg3.exec(text))</span><br><span class="line"><span class="built_in">console</span>.log(reg3.lastIndex)</span><br><span class="line"><span class="built_in">console</span>.log(reg3.exec(text))</span><br><span class="line"><span class="built_in">console</span>.log(reg3.lastIndex)</span><br><span class="line"><span class="built_in">console</span>.log(reg3.exec(text))</span><br><span class="line"><span class="built_in">console</span>.log(reg3.lastIndex)</span><br><span class="line"><span class="built_in">console</span>.log(reg3.exec(text))</span><br><span class="line"><span class="built_in">console</span>.log(reg3.lastIndex)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ³¨æ„regåœ¨æœ€åä¸€ä¸ªæœç´¢å®Œä¹‹ååˆä¼šå¼€å§‹é‡æ–°æœç´¢</span></span><br><span class="line"><span class="built_in">console</span>.log(reg.lastIndex)</span><br><span class="line"><span class="built_in">console</span>.log(reg.exec(text))</span><br><span class="line"><span class="built_in">console</span>.log(reg.lastIndex)</span><br><span class="line"><span class="built_in">console</span>.log(reg.exec(text))</span><br><span class="line"><span class="built_in">console</span>.log(reg.lastIndex)</span><br><span class="line"><span class="built_in">console</span>.log(reg.exec(text))</span><br><span class="line"><span class="built_in">console</span>.log(reg.lastIndex)</span><br><span class="line"><span class="built_in">console</span>.log(reg.exec(text))</span><br><span class="line"><span class="built_in">console</span>.log(reg.lastIndex)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ€»ç»“ execå°±æ˜¯ä¸€ä¸ªå¯é‡æ–°æ‰§è¡Œçš„è¿­ä»£å™¨</span></span><br></pre></td></tr></table></figure><h1 id="æœ‰æ•ˆç‡çš„yæ¨¡å¼"><a href="#æœ‰æ•ˆç‡çš„yæ¨¡å¼" class="headerlink" title="æœ‰æ•ˆç‡çš„yæ¨¡å¼"></a>æœ‰æ•ˆç‡çš„yæ¨¡å¼</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æœ‰æ•ˆç‡çš„yæ¨¡å¼</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// çœ‹ä¸ªä¾‹å­</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> text = <span class="string">&#x27;asdasdasdasçš„,213123123,33333,asdasd&#x27;</span></span><br><span class="line"><span class="keyword">const</span> reg = <span class="regexp">/\d/g</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(reg.exec(text))</span><br><span class="line"><span class="built_in">console</span>.log(reg.exec(text))</span><br><span class="line"><span class="built_in">console</span>.log(reg.exec(text))</span><br><span class="line"><span class="built_in">console</span>.log(reg.exec(text))</span><br><span class="line"><span class="built_in">console</span>.log(reg.exec(text))</span><br><span class="line"><span class="built_in">console</span>.log(reg.exec(text))</span><br><span class="line"><span class="built_in">console</span>.log(reg.exec(text))</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¨¡å¼gä¼šä½¿å¾—æ•´ä¸ªéœ€è¦åŒ¹é…çš„å­—ç¬¦ä¸²éƒ½èµ°ä¸‹å»ï¼Œå‡è®¾æˆ‘åªéœ€è¦å–å‡ºé‡Œé¢çš„æŸæ®µè¿ç»­æ•°å­—ï¼Œç„¶ååé¢åˆæ²¡æœ‰è¿ç»­æ•°å­—ï¼Œä½¿ç”¨mæ€§èƒ½ä¸Šå°±ä¸å¤ªå¥½</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰€ä»¥è¯ç”Ÿäº†ä¸ªæ¨¡å¼yï¼ŒåŒ¹é…ä¸åˆ°å°±è¿”å›null åé¢å°±ä¸åŒ¹é…äº†</span></span><br><span class="line"><span class="keyword">const</span> reg2 = <span class="regexp">/(\d+,?)/y</span></span><br><span class="line">reg2.lastIndex = <span class="number">13</span></span><br><span class="line"><span class="keyword">while</span>((res=reg2.exec(text)))&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(res)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å…¶å®ä¹Ÿæœ‰å¼Šç«¯ ä¹Ÿå°±æ˜¯yæ¨¡å¼ä¾èµ–äºlastIndex å¾—äº‹å…ˆçŸ¥é“ä»–åœ¨å“ªé‡Œæ‰è¡Œ</span></span><br></pre></td></tr></table></figure><h1 id="åŸå­è¡¨åŸå­ç»„-æ–°ä½¿ç”¨"><a href="#åŸå­è¡¨åŸå­ç»„-æ–°ä½¿ç”¨" class="headerlink" title="åŸå­è¡¨åŸå­ç»„ æ–°ä½¿ç”¨"></a>åŸå­è¡¨åŸå­ç»„ æ–°ä½¿ç”¨</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åŸå­è¡¨ æ–°ä½¿ç”¨</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»™ä¸ªå…·ä½“æ¡ˆä¾‹å¦‚ä¸‹</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> date = <span class="string">&#x27;2022-01-22&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è¦æ±‚dateå¯ä»¥æ˜¯-è¿æ¥ä¹Ÿå¯ä»¥æ˜¯/è¿æ¥ ä½†æ˜¯å‰åçš„ç¬¦å·å¿…é¡»ä¸€è‡´</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> date2 = <span class="string">&#x27;2022/01/22&#x27;</span>;</span><br><span class="line"><span class="keyword">let</span> date3 = <span class="string">&#x27;2022-01/22&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿™é‡Œæ³¨æ„çš„æ˜¯/éœ€è¦è½¬ä¹‰</span></span><br><span class="line"><span class="keyword">const</span> reg = <span class="regexp">/^\d&#123;4&#125;[-\/]\d&#123;2&#125;[-\/]\d&#123;2&#125;/</span></span><br><span class="line"><span class="built_in">console</span>.log(reg.exec(date))</span><br><span class="line"><span class="built_in">console</span>.log(reg.exec(date2))</span><br><span class="line"><span class="built_in">console</span>.log(reg.exec(date3))</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ ¹æ®ç»“æœæˆ‘ä»¬å‘ç°date3 è¿™ä¸ªæƒ…å†µä¹Ÿè¢«åŒ¹é…äº†</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ”¹å†™reg ä½¿ç”¨åŸå­ç»„åŠ åŸå­è¡¨</span></span><br><span class="line"><span class="keyword">const</span> reg2 = <span class="regexp">/^\d&#123;4&#125;([-\/])\d&#123;2&#125;\1\d&#123;2&#125;/</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(reg2.exec(date))</span><br><span class="line"><span class="built_in">console</span>.log(reg2.exec(date2))</span><br><span class="line"><span class="built_in">console</span>.log(reg2.exec(date3))</span><br><span class="line"></span><br><span class="line"><span class="comment">// åŸç†æ˜¯åŸå­ç»„é‡Œé¢çš„ä¸œè¥¿æ˜¯ä¸€ä¸ªæ•´ä½“ åç»­ç”¨\1è¡¨ç¤ºé‡‡ç”¨ä¹‹å‰çš„ç»“æœ æ‰€ä»¥å‰åä¸€è‡´æ‰æ»¡è¶³</span></span><br></pre></td></tr></table></figure><h1 id="åŒºé—´åŒ¹é…"><a href="#åŒºé—´åŒ¹é…" class="headerlink" title="åŒºé—´åŒ¹é…"></a>åŒºé—´åŒ¹é…</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åŒºé—´åŒ¹é…</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å…¶å®ä¹‹å‰ç”¨è¿‡äº† æ³¨æ„çš„ç‚¹æ˜¯ åŒºé—´åŒ¹é…ä¸èƒ½é™åº åªèƒ½å‡åº</span></span><br><span class="line"><span class="keyword">let</span> text = <span class="string">&#x27;213123jojoj&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(text.match(<span class="regexp">/[0-9]/g</span>));</span><br><span class="line"><span class="comment">// console.log(text.match(/[9-0]/g));</span></span><br></pre></td></tr></table></figure><h1 id="æ’é™¤åŒ¹é…"><a href="#æ’é™¤åŒ¹é…" class="headerlink" title="æ’é™¤åŒ¹é…"></a>æ’é™¤åŒ¹é…</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ’é™¤åŒ¹é…</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> text = <span class="string">&#x27;å¼ ä¸‰:010-9999999;æå››:020-9999999&#x27;</span></span><br><span class="line"><span class="built_in">console</span>.log(text.match(<span class="regexp">/[^\d\-:;]+/g</span>))</span><br></pre></td></tr></table></figure><h1 id="åŸå­è¡¨å­—ç¬¦ä¸è§£æ"><a href="#åŸå­è¡¨å­—ç¬¦ä¸è§£æ" class="headerlink" title="åŸå­è¡¨å­—ç¬¦ä¸è§£æ"></a>åŸå­è¡¨å­—ç¬¦ä¸è§£æ</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åŸå­è¡¨å­—ç¬¦ä¸è§£æ</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> text = <span class="string">&#x27;(jo-jo).+&#x27;</span></span><br><span class="line"><span class="comment">//åŸå­ç»„åœ¨å¤–é¢æ‰æ˜¯åŸå­ç»„,åœ¨åŸå­è¡¨é‡Œé¢æ˜¯æ‹¬å·çš„æ„æ€</span></span><br><span class="line"><span class="built_in">console</span>.log(text.match(<span class="regexp">/[()]/g</span>))</span><br><span class="line"><span class="comment">// .+åœ¨åŸå­è¡¨é‡Œé¢ä¹Ÿæ˜¯å•ä¸€çš„å«ä¹‰ å°±æ˜¯æœ¬èº«çš„æ„æ€ ä¸éœ€è¦è½¬ä¹‰</span></span><br><span class="line"><span class="built_in">console</span>.log(text.match(<span class="regexp">/[.+]/g</span>))</span><br><span class="line"><span class="comment">// ç›´æ¥ç”¨- æœ¬èº«ä»–æœ‰ä¸¤ä¸ªæ„æ€ ä¸€ä¸ªæ˜¯-è‡ªèº« ä¸€ä¸ªæ˜¯åŒºé—´åŒ¹é… æ­£å¸¸æƒ…å†µä¸‹æˆ‘ä»¬ä¼šè½¬ä¹‰-æ¥ä¿è¯ä»–æ˜¯ç¬¬ä¸€å±‚æ„æ€</span></span><br><span class="line"><span class="built_in">console</span>.log(text.match(<span class="regexp">/[-]/g</span>))</span><br><span class="line"><span class="built_in">console</span>.log(text.match(<span class="regexp">/[\-]/g</span>))</span><br><span class="line"><span class="built_in">console</span>.log(text.match(<span class="regexp">/[j\-]/g</span>))</span><br><span class="line"><span class="built_in">console</span>.log(text.match(<span class="regexp">/[a-z]/g</span>))</span><br></pre></td></tr></table></figure><h1 id="æ¡ˆä¾‹åˆ é™¤domå…ƒç´ "><a href="#æ¡ˆä¾‹åˆ é™¤domå…ƒç´ " class="headerlink" title="æ¡ˆä¾‹åˆ é™¤domå…ƒç´ "></a>æ¡ˆä¾‹åˆ é™¤domå…ƒç´ </h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ é™¤domå…ƒç´ </span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¡ˆä¾‹</span></span><br><span class="line"><span class="keyword">let</span> dom = <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;h1&gt;</span></span><br><span class="line"><span class="string">        jojo</span></span><br><span class="line"><span class="string">    &lt;/h1&gt;</span></span><br><span class="line"><span class="string">`</span></span><br><span class="line"><span class="keyword">let</span> dom2 = <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;H3&gt;</span></span><br><span class="line"><span class="string">    &lt;/H3&gt;</span></span><br><span class="line"><span class="string">`</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> reg = <span class="regexp">/&lt;(h[1-6])&gt;[\s\S]*&lt;\/\1&gt;/gi</span></span><br><span class="line"><span class="built_in">console</span>.log(dom.replace(reg,<span class="string">&#x27;&#x27;</span>))</span><br><span class="line"><span class="built_in">console</span>.log(dom2.replace(reg,<span class="string">&#x27;&#x27;</span>))</span><br></pre></td></tr></table></figure><h1 id="é‚®ç®±éªŒè¯ä¸­åŸå­ç»„çš„ä½¿ç”¨"><a href="#é‚®ç®±éªŒè¯ä¸­åŸå­ç»„çš„ä½¿ç”¨" class="headerlink" title="é‚®ç®±éªŒè¯ä¸­åŸå­ç»„çš„ä½¿ç”¨"></a>é‚®ç®±éªŒè¯ä¸­åŸå­ç»„çš„ä½¿ç”¨</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é‚®ç®±éªŒè¯ä¸­åŸå­ç»„çš„ä½¿ç”¨</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> test1 = <span class="string">&#x27;123131313@qq.com&#x27;</span>;</span><br><span class="line"><span class="keyword">let</span> test2 = <span class="string">&#x27;123131313@sina.com.cn&#x27;</span>;</span><br><span class="line"><span class="keyword">let</span> test3 = <span class="string">&#x27;jojo-123@qq.com&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å¯¹äºç¬¬äºŒç§æƒ…å†µæ˜¯ä¸è¡Œçš„ è¦ç»§ç»­ä¿®æ”¹</span></span><br><span class="line"><span class="built_in">console</span>.log(test1.match(<span class="regexp">/^[\w-]+@\w+\.(com|cn|org)$/</span>))</span><br><span class="line"><span class="built_in">console</span>.log(test2.match(<span class="regexp">/^[\w-]+@\w+\.(com|cn|org)$/</span>))</span><br><span class="line"><span class="built_in">console</span>.log(test3.match(<span class="regexp">/^[\w-]+@\w+\.(com|cn|org)$/</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">// (\w+\.)+ è¡¨ç¤ºè¿™æ ·ä¸€ç»„çš„å¯èƒ½æœ‰å¾ˆå¤šä¸ª ä½†æ˜¯æœ€åéƒ½è¦ä»¥com cn orgç»“å°¾</span></span><br><span class="line"><span class="built_in">console</span>.log(test2.match(<span class="regexp">/^[\w-]+@(\w+\.)+(com|cn|org)$/</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">//æµ‹è¯•</span></span><br><span class="line"><span class="built_in">console</span>.log(test1.match(<span class="regexp">/^[\w-]+@(\w+\.)+(com|cn|org)$/</span>))</span><br><span class="line"><span class="built_in">console</span>.log(test2.match(<span class="regexp">/^[\w-]+@(\w+\.)+(com|cn|org)$/</span>))</span><br><span class="line"><span class="built_in">console</span>.log(test3.match(<span class="regexp">/^[\w-]+@(\w+\.)+(com|cn|org)$/</span>))</span><br></pre></td></tr></table></figure><h1 id="åŸå­ç»„å¼•ç”¨å®Œæˆæ›¿æ¢æ“ä½œ"><a href="#åŸå­ç»„å¼•ç”¨å®Œæˆæ›¿æ¢æ“ä½œ" class="headerlink" title="åŸå­ç»„å¼•ç”¨å®Œæˆæ›¿æ¢æ“ä½œ"></a>åŸå­ç»„å¼•ç”¨å®Œæˆæ›¿æ¢æ“ä½œ</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åŸå­ç»„å¼•ç”¨å®Œæˆæ›¿æ¢æ“ä½œ</span></span><br><span class="line"><span class="keyword">let</span> text = <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;h1&gt;jojo&lt;/h1&gt;</span></span><br><span class="line"><span class="string">    &lt;span&gt;jojolin&lt;/span&gt;</span></span><br><span class="line"><span class="string">    &lt;h3&gt;jojostoneocean&lt;/h3&gt;</span></span><br><span class="line"><span class="string">`</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> reg = <span class="regexp">/&lt;(h[1-6])&gt;([\s\S]+)&lt;\/\1&gt;/g</span>;</span><br><span class="line"><span class="built_in">console</span>.log(text.match(reg));</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿™é‡Œå–å‡ºç¬¬äºŒä¸ªæ‹¬å·å†…çš„å†…å®¹å‡ºæ¥ å¹¶æ›¿æ¢æ•´ä¸ªå­—ç¬¦ä¸²</span></span><br><span class="line"><span class="comment">// ç¡®å®šindexçš„æŠ€å·§æ˜¯æ•°æ‹¬å· ç¬¬ä¸€ä¸ªå¯¹äº1 ä»¥æ­¤ç±»æ¨</span></span><br><span class="line"><span class="built_in">console</span>.log(text.replace(reg, <span class="string">&quot;&lt;p&gt;$2&lt;/p&gt;&quot;</span>));</span><br><span class="line"></span><br><span class="line">text.replace(reg,<span class="function">(<span class="params">p0,p1,p2,p3,p4</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(p0)</span><br><span class="line">    <span class="built_in">console</span>.log(p1)</span><br><span class="line">    <span class="built_in">console</span>.log(p2)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="JSç³»åˆ—" scheme="https://zlinni.github.io/categories/JS%E7%B3%BB%E5%88%97/"/>
    
    
    <category term="js" scheme="https://zlinni.github.io/tags/js/"/>
    
  </entry>
  
  <entry>
    <title>è‡ªé—®è‡ªç­”å…«è‚¡æ–‡</title>
    <link href="https://zlinni.github.io/posts/4161554500/"/>
    <id>https://zlinni.github.io/posts/4161554500/</id>
    <published>2022-08-24T11:07:36.000Z</published>
    <updated>2022-09-14T08:51:29.148Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><div class="note primary flat"><p>å…¶å®æœ‰æ—¶å€™å­¦ä¹ å…«è‚¡å¹¶éæ˜¯ä¸€ä»¶ä¸å¥½çš„äº‹æƒ…ï¼Œæˆ‘ä»¬èƒ½ä»å…«è‚¡æ–‡é‡Œé¢å­¦åˆ°å¾ˆå¤šå¹³æ—¶è‡ªå·±æ²¡æ³¨æ„åˆ°çš„çŸ¥è¯†ç‚¹ï¼Œç®—æ˜¯æŸ¥æ¼è¡¥ç¼º</p></div><h1 id="js"><a href="#js" class="headerlink" title="js"></a>js</h1><h2 id="js-æœ‰å¤šå°‘ç§æ•°æ®ç±»å‹"><a href="#js-æœ‰å¤šå°‘ç§æ•°æ®ç±»å‹" class="headerlink" title="js æœ‰å¤šå°‘ç§æ•°æ®ç±»å‹"></a>js æœ‰å¤šå°‘ç§æ•°æ®ç±»å‹</h2><p>7+1 USONB undefined string symbol object null number boolean bigint</p><h2 id="æ ˆå’Œå †çš„æ¦‚å¿µ-ä»€ä¹ˆæ˜¯å †ç©ºé—´å…±äº«-å¦‚ä½•æ”¹å˜å¼•ç”¨åœ°å€"><a href="#æ ˆå’Œå †çš„æ¦‚å¿µ-ä»€ä¹ˆæ˜¯å †ç©ºé—´å…±äº«-å¦‚ä½•æ”¹å˜å¼•ç”¨åœ°å€" class="headerlink" title="æ ˆå’Œå †çš„æ¦‚å¿µ ä»€ä¹ˆæ˜¯å †ç©ºé—´å…±äº« å¦‚ä½•æ”¹å˜å¼•ç”¨åœ°å€"></a>æ ˆå’Œå †çš„æ¦‚å¿µ ä»€ä¹ˆæ˜¯å †ç©ºé—´å…±äº« å¦‚ä½•æ”¹å˜å¼•ç”¨åœ°å€</h2><p>æ ˆä¸­å­˜æ”¾åŸºæœ¬æ•°æ®ç±»å‹ï¼Œæ ˆå†…çš„æ•°æ®å¤§å°å›ºå®šï¼Œä½“ç§¯è¾ƒå°ï¼Œä¼šè¢«é¢‘ç¹ä½¿ç”¨ï¼Œæ‹·è´æˆ–è€…å¼•ç”¨çš„æ—¶å€™ä¼šåˆ›å»ºä¸€ä»½ç›¸åŒçš„å¤åˆ¶</p><p>å †å­˜æ”¾å¼•ç”¨ç±»å‹ï¼Œå †å†…çš„æ•°æ®å¤§å°ä¸å®šï¼Œå æ®ç©ºé—´å¤§ã€‚å½“ä¸€ä¸ªå¼•ç”¨ç±»å‹è¢«åˆ›å»ºçš„æ—¶å€™ï¼Œå…¶å±æ€§ä¼šè¢«æ”¾åœ¨å †ç©ºé—´ä¸­ï¼ŒæŒ‡é’ˆæ”¾åœ¨æ ˆä¸­ï¼Œå½“è¢«å¼•ç”¨çš„æ—¶å€™ï¼Œå…ˆä»æ ˆæ‰¾åˆ°å¯¹åº”çš„æŒ‡é’ˆï¼ŒæŒ‡å‘å †ç©ºé—´çš„åœ°å€ï¼Œè·å–å±æ€§ã€‚</p><p>å †ç©ºé—´å…±äº«æŒ‡çš„æ˜¯ å¤šä¸ªå¼•ç”¨æŒ‡å‘åŒä¸€ä¸ªåœ°å€ã€‚</p><p>å¼•ç”¨åœ°å€å¯ä»¥ä½¿ç”¨ bind call apply å»æ”¹å˜ã€‚</p><p>æ ˆå’Œå †çš„å­˜åœ¨æ˜¯ä¸ºäº†ç»´æŒ js çš„å†…å­˜å¹³è¡¡</p><h2 id="é—­åŒ…æ˜¯æ€ä¹ˆå­˜å‚¨çš„"><a href="#é—­åŒ…æ˜¯æ€ä¹ˆå­˜å‚¨çš„" class="headerlink" title="é—­åŒ…æ˜¯æ€ä¹ˆå­˜å‚¨çš„"></a>é—­åŒ…æ˜¯æ€ä¹ˆå­˜å‚¨çš„</h2><p>é—­åŒ…è¢«åˆ›å»ºçš„æ—¶å€™ï¼Œä¼šåˆ›å»ºä¸€ä¸ª closure å¯¹è±¡åˆ°å †ä¸­ï¼Œç”¨äºä¿å­˜é—­åŒ…ä¸­çš„å˜é‡ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆé—­åŒ…å¯ä»¥å¸¸é©»åœ¨å†…å­˜çš„åŸå› ã€‚ä¸”ä¼šå¯¼è‡´å†…å­˜æ³„æ¼ã€‚</p><h2 id="ä»€ä¹ˆæ˜¯å†…å­˜æ³„æ¼"><a href="#ä»€ä¹ˆæ˜¯å†…å­˜æ³„æ¼" class="headerlink" title="ä»€ä¹ˆæ˜¯å†…å­˜æ³„æ¼"></a>ä»€ä¹ˆæ˜¯å†…å­˜æ³„æ¼</h2><p>å†…å­˜æ³„æ¼æŒ‡çš„æ˜¯å †å†…å­˜ä¸­çš„å˜é‡ç”±äºæŸç§åŸå› æ— æ³•åŠæ—¶é‡Šæ”¾é€ æˆç³»ç»Ÿèµ„æºçš„æµªè´¹ï¼Œç”šè‡³å¯¼è‡´ç³»ç»Ÿå´©æºƒã€‚</p><p>æ€ä¹ˆè§£å†³å†…å­˜æ³„æ¼ï¼š<br>é”€æ¯é—­åŒ…çš„å˜é‡ï¼Œæ¯”å¦‚ä½¿ç”¨ clearTimeout æ¶ˆé™¤ settimeout çš„ id ç­‰</p><h2 id="é—­åŒ…çš„ç†è§£"><a href="#é—­åŒ…çš„ç†è§£" class="headerlink" title="é—­åŒ…çš„ç†è§£"></a>é—­åŒ…çš„ç†è§£</h2><p>é—­åŒ…çš„æœ¬è´¨æ˜¯å½“å‰ä½œç”¨åŸŸä¸­å­˜åœ¨æŒ‡å‘çˆ¶çº§ä½œç”¨åŸŸçš„å¼•ç”¨ã€‚</p><p>æ‰€ä»¥é—­åŒ…å¹¶ä¸ä¸€å®šè¡¨ç°ä¸ºè¿”å›ä¸€ä¸ªå‡½æ•°</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fun3;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> a = <span class="number">2</span>;</span><br><span class="line">  fun3 = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(a);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line">fun1();</span><br><span class="line">fun3();</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹å‡ºå…¶ä¸­è¾“å‡ºçš„ç»“æœè¿˜æ˜¯ 2 å› ä¸ºåœ¨ç»™ fun3 èµ‹å€¼çš„æ—¶å€™ï¼Œfun3 å°±å¯ä»¥è®¿é—®åˆ° window fun1 å’Œæœ¬èº«çš„ä½œç”¨åŸŸï¼Œç„¶åç”±ä¸‹å¾€ä¸ŠæŸ¥æ‰¾ æ‰¾åˆ°äº† fun1 ä¸­çš„ 2 è¾“å‡º 2</p><h2 id="å¦‚ä½•è§£å†³å¾ªç¯è¾“å‡ºé—®é¢˜"><a href="#å¦‚ä½•è§£å†³å¾ªç¯è¾“å‡ºé—®é¢˜" class="headerlink" title="å¦‚ä½•è§£å†³å¾ªç¯è¾“å‡ºé—®é¢˜"></a>å¦‚ä½•è§£å†³å¾ªç¯è¾“å‡ºé—®é¢˜</h2><p>let IIFE æ³¨å…¥å˜é‡ å®šæ—¶å™¨ç¬¬ä¸‰ä¸ªå‚æ•°ä¼ å…¥å˜é‡</p><h2 id="undefined-å’Œ-null-çš„ç†è§£"><a href="#undefined-å’Œ-null-çš„ç†è§£" class="headerlink" title="undefined å’Œ null çš„ç†è§£"></a>undefined å’Œ null çš„ç†è§£</h2><p>undefined å’Œ null ä¸€èˆ¬ç”¨äºå¯¹å˜é‡èµ‹åˆå§‹å€¼ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ undefined åœ¨ js ä¸­å¹¶ä¸æ˜¯ä¸€ä¸ªä¿ç•™å­—ï¼Œæ‰€ä»¥ undefined å¯ä»¥ä½œä¸ºå˜é‡åï¼Œé‚£ä¹ˆè¦å¦‚ä½•è·å–å®‰å…¨çš„ undefined å‘¢ï¼Ÿå¯ä»¥ä½¿ç”¨ void<br>null ä»£è¡¨ç©ºå¯¹è±¡ï¼Œä½†ä¸æ˜¯çœŸçš„ç©ºå¯¹è±¡</p><h2 id="ä»€ä¹ˆæ˜¯-BigInt-ç”¨é€”æ˜¯ä»€ä¹ˆ-æ€ä¹ˆå®ç°ä¸€ä¸ª-BigInt-çš„è¿ç®—"><a href="#ä»€ä¹ˆæ˜¯-BigInt-ç”¨é€”æ˜¯ä»€ä¹ˆ-æ€ä¹ˆå®ç°ä¸€ä¸ª-BigInt-çš„è¿ç®—" class="headerlink" title="ä»€ä¹ˆæ˜¯ BigInt ç”¨é€”æ˜¯ä»€ä¹ˆ æ€ä¹ˆå®ç°ä¸€ä¸ª BigInt çš„è¿ç®—"></a>ä»€ä¹ˆæ˜¯ BigInt ç”¨é€”æ˜¯ä»€ä¹ˆ æ€ä¹ˆå®ç°ä¸€ä¸ª BigInt çš„è¿ç®—</h2><p>js åªæ”¯æŒ 2 çš„ 53 æ¬¡æ–¹çš„æ•°å­—ï¼Œå¤§äºè¿™ä¸ªèŒƒå›´ä¼šå››èˆäº”å…¥ï¼Œè¡¨ç°åœ¨æœ€åä¸€ä½æ•°ä¸å¯¹ï¼ŒBigInt æ˜¯æ•°å­—+n æˆ–è€…ä½¿ç”¨ BigInt æ„é€ å‡½æ•°ä¼ å…¥æ•°å­—æ ¼å¼çš„å­—ç¬¦ä¸²å°±å¯ä»¥ç”Ÿæˆã€‚</p><p>æ³¨æ„ bigint å¹¶ä¸æ˜¯ number æ‰€ä»¥ä¸ç­‰äº number ç±»å‹</p><p>bigint å¯ä»¥ç”¨åœ¨æ¯”å¦‚å‘é€è¯·æ±‚ä¹‹å‰å°†è¯·æ±‚çš„æ•°å­—åŒ…è£…æˆ bigint ç±»å‹å‘é€ï¼Œå¸¸ç”¨ä¸€äº›åº“å‡½æ•°ã€‚</p><p>bigint ä¹‹é—´çš„è¿ç®—ä½¿ç”¨ä½è¿ç®—</p><p>leetcode</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">`ç»™å®šä¸€ä¸ªç”±æ•´æ•°ç»„æˆçš„éç©ºæ•°ç»„æ‰€è¡¨ç¤ºçš„éè´Ÿæ•´æ•°ï¼Œåœ¨è¯¥æ•°çš„åŸºç¡€ä¸ŠåŠ ä¸€ã€‚</span></span><br><span class="line"><span class="string">æœ€é«˜ä½æ•°å­—å­˜æ”¾åœ¨æ•°ç»„çš„é¦–ä½ï¼Œ æ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ åªå­˜å‚¨ä¸€ä¸ªæ•°å­—ã€‚</span></span><br><span class="line"><span class="string">ä½ å¯ä»¥å‡è®¾é™¤äº†æ•´æ•° 0 ä¹‹å¤–ï¼Œè¿™ä¸ªæ•´æ•°ä¸ä¼šä»¥é›¶å¼€å¤´ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">ç¤ºä¾‹ 1:</span></span><br><span class="line"><span class="string">è¾“å…¥: [1,2,3]</span></span><br><span class="line"><span class="string">è¾“å‡º: [1,2,4]</span></span><br><span class="line"><span class="string">è§£é‡Š: è¾“å…¥æ•°ç»„è¡¨ç¤ºæ•°å­— 123ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">ç¤ºä¾‹ 2:</span></span><br><span class="line"><span class="string">è¾“å…¥: [4,3,2,1]</span></span><br><span class="line"><span class="string">è¾“å‡º: [4,3,2,2]</span></span><br><span class="line"><span class="string">è§£é‡Š: è¾“å…¥æ•°ç»„è¡¨ç¤ºæ•°å­— 4321ã€‚`</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> plusOne = <span class="function">(<span class="params">digits</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> (<span class="built_in">BigInt</span>(digits.join(<span class="string">&quot;&quot;</span>)) + <span class="number">1n</span>).toString().split(<span class="string">&quot;&quot;</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="0-1-0-2-0-3"><a href="#0-1-0-2-0-3" class="headerlink" title="0.1+0.2!==0.3?"></a>0.1+0.2!==0.3?</h2><p>åˆšåˆšè¯´äº†åªæ”¯æŒåˆ° 2 çš„äº”åä¸‰æ¬¡æ–¹ï¼Œè€Œç”±äºå°æ•°è®¡ç®—æœºæ˜¯è¯†åˆ«ä¸äº†çš„ï¼Œè¦è½¬äºŒè¿›åˆ¶ï¼Œæ‰€ä»¥ 0.1 å…¶å®ç›¸å½“äºä¸€ä¸ªæ— é™å¾ªç¯çš„äºŒè¿›åˆ¶æ•°<code>0.0001100110011001100...</code>ï¼Œè€Œè€ƒè™‘åˆ°å†…å­˜çš„åŸå› ï¼Œåˆ°æŸä¸€ä½å°±è¢«å››èˆäº”å…¥äº†ï¼Œå¯¼è‡´ç»“æœè®¡ç®—å‡ºæ¥ä¸æ˜¯ 0.3 è€Œæ˜¯ä¸€ä¸ªè¿‘ä¼¼å€¼ã€‚</p><p>è§£å†³æ–¹æ³•ï¼š<br>ä½¿ç”¨ toFixed æˆ–è€…å˜æˆæ•´æ•°å†é™¤ä»¥å¯¹åº”çš„å€æ•°</p><h2 id="0-2-0-3-0-5ï¼Ÿ"><a href="#0-2-0-3-0-5ï¼Ÿ" class="headerlink" title="0.2+0.3===0.5ï¼Ÿ"></a>0.2+0.3===0.5ï¼Ÿ</h2><p>å› ä¸ºåé¢è½¬äºŒè¿›åˆ¶éƒ½æ˜¯ 0 æ‰€ä»¥åˆšå¥½æ˜¯ 0.5</p><h2 id="é‚£æ—¢ç„¶-0-1-ä¸æ˜¯-0-1-äº†ï¼Œä¸ºä»€ä¹ˆåœ¨console-log-0-1-çš„æ—¶å€™è¿˜æ˜¯-0-1-å‘¢"><a href="#é‚£æ—¢ç„¶-0-1-ä¸æ˜¯-0-1-äº†ï¼Œä¸ºä»€ä¹ˆåœ¨console-log-0-1-çš„æ—¶å€™è¿˜æ˜¯-0-1-å‘¢" class="headerlink" title="é‚£æ—¢ç„¶ 0.1 ä¸æ˜¯ 0.1 äº†ï¼Œä¸ºä»€ä¹ˆåœ¨console.log(0.1)çš„æ—¶å€™è¿˜æ˜¯ 0.1 å‘¢?"></a>é‚£æ—¢ç„¶ 0.1 ä¸æ˜¯ 0.1 äº†ï¼Œä¸ºä»€ä¹ˆåœ¨<code>console.log(0.1)</code>çš„æ—¶å€™è¿˜æ˜¯ 0.1 å‘¢?</h2><p>åœ¨ console.log çš„æ—¶å€™ä¼šäºŒè¿›åˆ¶è½¬æ¢ä¸ºåè¿›åˆ¶ï¼Œåè¿›åˆ¶å†ä¼šè½¬ä¸ºå­—ç¬¦ä¸²çš„å½¢å¼ï¼Œåœ¨è½¬æ¢çš„è¿‡ç¨‹ä¸­å‘ç”Ÿäº†å–è¿‘ä¼¼å€¼ï¼Œæ‰€ä»¥æ‰“å°å‡ºæ¥çš„æ˜¯ä¸€ä¸ªè¿‘ä¼¼å€¼çš„å­—ç¬¦ä¸²</p><h2 id="js-æœ‰å¤šå°‘ç§åˆ¤æ–­æ•°æ®çš„æ–¹å¼-åˆ†åˆ«æ˜¯ä»€ä¹ˆ"><a href="#js-æœ‰å¤šå°‘ç§åˆ¤æ–­æ•°æ®çš„æ–¹å¼-åˆ†åˆ«æ˜¯ä»€ä¹ˆ" class="headerlink" title="js æœ‰å¤šå°‘ç§åˆ¤æ–­æ•°æ®çš„æ–¹å¼ åˆ†åˆ«æ˜¯ä»€ä¹ˆ"></a>js æœ‰å¤šå°‘ç§åˆ¤æ–­æ•°æ®çš„æ–¹å¼ åˆ†åˆ«æ˜¯ä»€ä¹ˆ</h2><p>4 typeof instanceof constructor Object.prototype.toString.call()</p><h2 id="ä¸ºä»€ä¹ˆ-typeof-null-æ˜¯-object"><a href="#ä¸ºä»€ä¹ˆ-typeof-null-æ˜¯-object" class="headerlink" title="ä¸ºä»€ä¹ˆ typeof null æ˜¯ object"></a>ä¸ºä»€ä¹ˆ typeof null æ˜¯ object</h2><p>typeof çš„åŸç†å°±æ˜¯é€šè¿‡ç±»å‹çš„åœ°å€åˆ¤æ–­ï¼Œå¯¹äº null å’Œ object æ¥è¯´ï¼Œåœ°å€å¼€å¤´çš„å‰å‡ ä½éƒ½æ˜¯ 0 æ‰€ä»¥åˆ¤æ–­ç›¸åŒ</p><p>æ³¨æ„ typeof æ˜¯å¯ä»¥åˆ¤æ–­ function çš„</p><h2 id="instanceof-çš„åŸç†-ä¸ºä»€ä¹ˆ-instanceof-æ— æ³•åˆ¤æ–­-null-å’Œ-undefined-æ‰‹å†™-instanceof"><a href="#instanceof-çš„åŸç†-ä¸ºä»€ä¹ˆ-instanceof-æ— æ³•åˆ¤æ–­-null-å’Œ-undefined-æ‰‹å†™-instanceof" class="headerlink" title="instanceof çš„åŸç† ä¸ºä»€ä¹ˆ instanceof æ— æ³•åˆ¤æ–­ null å’Œ undefined æ‰‹å†™ instanceof"></a>instanceof çš„åŸç† ä¸ºä»€ä¹ˆ instanceof æ— æ³•åˆ¤æ–­ null å’Œ undefined æ‰‹å†™ instanceof</h2><p>instanceof æ˜¯é€šè¿‡åŸå‹é“¾åˆ¤æ–­çš„ï¼Œç›¸å½“äºæ˜¯åœ¨åˆ¤æ–­è¯¥å˜é‡æ˜¯å¦æ˜¯æŸä¸ªç±»çš„å®ä¾‹ã€‚</p><p>null å’Œ undefined æ²¡æœ‰æ„é€ å‡½æ•° ä¹Ÿå°±æ˜¯ä»–æ²¡æœ‰å¯¹åº”çš„åŸå‹</p><p>æ‰‹å†™ instanceof</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> myInstanceof = <span class="function">(<span class="params">example, classFn</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> proto = <span class="built_in">Object</span>.getPrototypeOf(example);</span><br><span class="line">  <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (proto === <span class="literal">null</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">if</span> (proto === <span class="built_in">Object</span>.getPrototypeOf(classFn)) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    proto = <span class="built_in">Object</span>.getPrototypeOf(proto);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="ä½¿ç”¨-constructor-æ£€æµ‹æœ‰ä»€ä¹ˆç¼ºç‚¹ï¼Ÿ"><a href="#ä½¿ç”¨-constructor-æ£€æµ‹æœ‰ä»€ä¹ˆç¼ºç‚¹ï¼Ÿ" class="headerlink" title="ä½¿ç”¨ constructor æ£€æµ‹æœ‰ä»€ä¹ˆç¼ºç‚¹ï¼Ÿ"></a>ä½¿ç”¨ constructor æ£€æµ‹æœ‰ä»€ä¹ˆç¼ºç‚¹ï¼Ÿ</h2><p>constructor æ˜¯æ„é€ å‡½æ•°ï¼Œä¼šæŒ‡å‘åŸå‹ã€‚ä½¿ç”¨ constructor çš„æ—¶å€™ï¼Œç›¸å½“äºåˆ¤æ–­è¯¥å˜é‡çš„æ„é€ å‡½æ•°æ˜¯å¦æŒ‡å‘å¯¹åº”çš„åŸå‹ã€‚</p><p>ä½†ç”±äºåŸå‹æ˜¯å¯ä»¥æ”¹å˜çš„ï¼Œæ‰€ä»¥åŸå‹æŒ‡å‘æ”¹å˜ä¹‹åï¼ŒåŸæœ¬çš„æ„é€ å‡½æ•°å°±ä¼šæŒ‡å‘æ–°çš„åŸå‹ï¼Œæ‰€ä»¥ä¼šåˆ¤æ–­å¤±è¯¯</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Fn</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">Fn.prototype = <span class="keyword">new</span> <span class="built_in">Array</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> f = <span class="keyword">new</span> Fn();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(f.constructor === Fn); <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(f.constructor === <span class="built_in">Array</span>); <span class="comment">// true</span></span><br></pre></td></tr></table></figure><h2 id="Object-prototype-toString-call-ä¸ºä»€ä¹ˆè¦ç”¨-prototypeï¼Œä¸ºä»€ä¹ˆè¦ç”¨-callï¼Œä»¥åŠä»–èƒ½åˆ¤æ–­ä»€ä¹ˆç±»å‹ï¼Œå¦‚ä½•å°è£…ä¸€ä¸ªåˆ¤æ–­ç±»å‹çš„å‡½æ•°"><a href="#Object-prototype-toString-call-ä¸ºä»€ä¹ˆè¦ç”¨-prototypeï¼Œä¸ºä»€ä¹ˆè¦ç”¨-callï¼Œä»¥åŠä»–èƒ½åˆ¤æ–­ä»€ä¹ˆç±»å‹ï¼Œå¦‚ä½•å°è£…ä¸€ä¸ªåˆ¤æ–­ç±»å‹çš„å‡½æ•°" class="headerlink" title="Object.prototype.toString().call ä¸ºä»€ä¹ˆè¦ç”¨ prototypeï¼Œä¸ºä»€ä¹ˆè¦ç”¨ callï¼Œä»¥åŠä»–èƒ½åˆ¤æ–­ä»€ä¹ˆç±»å‹ï¼Œå¦‚ä½•å°è£…ä¸€ä¸ªåˆ¤æ–­ç±»å‹çš„å‡½æ•°"></a>Object.prototype.toString().call ä¸ºä»€ä¹ˆè¦ç”¨ prototypeï¼Œä¸ºä»€ä¹ˆè¦ç”¨ callï¼Œä»¥åŠä»–èƒ½åˆ¤æ–­ä»€ä¹ˆç±»å‹ï¼Œå¦‚ä½•å°è£…ä¸€ä¸ªåˆ¤æ–­ç±»å‹çš„å‡½æ•°</h2><p>ç±»ä¼¼äº Numberï¼ŒString,Array ä¸Šé¢éƒ½é‡å†™äº† toString æ–¹æ³•.è€Œå®ƒä»¬æœ€ç»ˆæŒ‡å‘çš„ Object ä¸Šæœ‰å…±åŒçš„æ–¹æ³•ï¼Œæ‰€ä»¥è¦ä½¿ç”¨ prototype å»æ‰¾ Object ä¸Šçš„æ–¹æ³•ï¼Œä½¿ç”¨ call æ˜¯ä¸ºäº†æ”¹å˜ this çš„æŒ‡å‘ã€‚ä»–èƒ½åˆ¤æ–­æ‰€æœ‰çš„ç±»å‹ï¼Œä»¥åŠä¸€äº›ç‰¹æ®Šçš„æ¯”å¦‚ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.prototype.toString.call(<span class="built_in">document</span>); <span class="comment">//&quot;[object HTMLDocument]&quot;</span></span><br><span class="line"><span class="built_in">Object</span>.prototype.toString.call(<span class="built_in">window</span>); <span class="comment">//&quot;[object Window]&quot;</span></span><br></pre></td></tr></table></figure><p>å°è£…ä¸€ä¸ªåˆ¤æ–­ç±»å‹å‡½æ•°çš„æ€è·¯å°±æ˜¯ï¼ŒåŸºæœ¬ç±»å‹é™¤äº† null ä½¿ç”¨ typeof åˆ¤æ–­ï¼ŒéåŸºæœ¬ç±»å‹ä½¿ç”¨è¯¥æ–¹æ³•åˆ¤æ–­</p><h2 id="å¯¹è±¡æ˜¯æ€ä¹ˆè½¬åŸå§‹ç±»å‹çš„ï¼Œå¯ä»¥è‡ªå·±è®¾ç½®è½¬æ¢è§„åˆ™å—"><a href="#å¯¹è±¡æ˜¯æ€ä¹ˆè½¬åŸå§‹ç±»å‹çš„ï¼Œå¯ä»¥è‡ªå·±è®¾ç½®è½¬æ¢è§„åˆ™å—" class="headerlink" title="å¯¹è±¡æ˜¯æ€ä¹ˆè½¬åŸå§‹ç±»å‹çš„ï¼Œå¯ä»¥è‡ªå·±è®¾ç½®è½¬æ¢è§„åˆ™å—"></a>å¯¹è±¡æ˜¯æ€ä¹ˆè½¬åŸå§‹ç±»å‹çš„ï¼Œå¯ä»¥è‡ªå·±è®¾ç½®è½¬æ¢è§„åˆ™å—</h2><p>å¯¹è±¡ä¸­æœ‰ toPrimitive æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¼˜å…ˆçº§æ˜¯ valueOfï¼Œåˆ° toStringï¼Œèƒ½è½¬åˆ°åŸå§‹ç±»å‹å°±è½¬</p><p>è‡ªå·±è®¾ç½®è½¬æ¢è§„åˆ™çš„è¯ ä½¿ç”¨<code>Symobol.toPrimitive</code>å°±å¯ä»¥è‡ªå®šä¹‰è§„åˆ™äº†</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = &#123;</span><br><span class="line">  <span class="function"><span class="title">valueOf</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">toStirng</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;1&#x27;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  [<span class="built_in">Symbol</span>.toPrimitive]()&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">1</span>+a <span class="comment">//3</span></span><br></pre></td></tr></table></figure><p>å¸¸è€ƒï¼š[1,2,3]è½¬åŸå§‹ç±»å‹</p><h2 id="çš„éšå¼è½¬æ¢"><a href="#çš„éšå¼è½¬æ¢" class="headerlink" title="==çš„éšå¼è½¬æ¢"></a>==çš„éšå¼è½¬æ¢</h2><ol><li>å…¶ä¸­ä¸€ä¸ªæ˜¯<code>null</code>æˆ–è€…<code>undefined</code> å¦å¤–ä¸€ä¸ªä¹Ÿè¦æ˜¯ å¦åˆ™ä¸º false</li><li>å…¶ä¸­ä¸€ä¸ªæ˜¯<code>string/number</code> è½¬ number</li><li>boolean è½¬ number</li><li>object è½¬åŸå§‹ ï¼ˆæ³¨æ„ï¼ï¼ï¼ä¸¤ä¸ª obj æ¯”è¾ƒçš„æ˜¯åœ°å€å€¼ï¼‰</li><li>NaN å’Œä»»ä½•å€¼éƒ½ä¸ç›¸ç­‰ åŒ…æ‹¬ä»–è‡ªå·±</li></ol><p>å¸¸è€ƒ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = &#123;</span><br><span class="line">  <span class="attr">value</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="attr">valueOf</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.value++;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.value;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// æ³¨æ„è¿™é‡Œaåˆå¯ä»¥ç­‰äº1ã€2ã€3</span></span><br><span class="line"><span class="built_in">console</span>.log(a == <span class="number">1</span> &amp;&amp; a == <span class="number">2</span> &amp;&amp; a == <span class="number">3</span>); <span class="comment">//true</span></span><br></pre></td></tr></table></figure><p>å¸¸è§å‘:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å°å‘</span></span><br><span class="line"><span class="string">&quot;0&quot;</span> == <span class="literal">false</span> <span class="comment">// -&gt; true  è¿™é‡Œfalseå…ˆè¢«è½¬ä¸º0ï¼Œ&quot;0&quot;ä¹Ÿä¼šè½¬ä¸º0ï¼Œæ‰€ä»¥ä¸ºtrue</span></span><br><span class="line"><span class="string">&quot;0&quot;</span> == <span class="string">&quot;&quot;</span> <span class="comment">// -&gt; false ä¸¤ä¸ªéƒ½æ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼Œç›´æ¥æ¯”è¾ƒ</span></span><br><span class="line"><span class="number">0</span> == <span class="string">&#x27;&#x27;</span> <span class="comment">// -&gt; true ç©ºå­—ç¬¦ä¸²ç›´æ¥è½¬ä¸º0</span></span><br><span class="line"><span class="literal">false</span> == [] <span class="comment">// -&gt; true falseå…ˆè½¬ä¸º0ï¼›[]ç©ºæ•°ç»„è½¬ä¸º&#x27;&#x27;ï¼Œä¹‹åToNumberæ“ä½œè½¬ä¸º0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¤§å‘</span></span><br><span class="line">[] == ![] <span class="comment">// -&gt; true []  è¿™é‡Œ![]å…ˆè¢«å¼ºåˆ¶è½¬æ¢ä¸ºfalseï¼Œå˜æˆ[]ä¸fasleçš„æ¯”è¾ƒï¼Œä¹‹åfasle-&gt;0ï¼›[]-&gt;&#x27;&#x27;-&gt;0ï¼Œæ‰€ä»¥ä¸ºtrueã€‚</span></span><br><span class="line"><span class="number">2</span>==[<span class="number">2</span>] <span class="comment">// -&gt; true [2]-&gt;&#x27;2&#x27;-&gt;2 æ‰€ä»¥ä¸ºtrue</span></span><br><span class="line"><span class="string">&#x27;&#x27;</span>==[<span class="literal">null</span>] <span class="comment">// true [null]-&gt;&#x27;&#x27;</span></span><br><span class="line"><span class="number">0</span>==<span class="string">&#x27;\n&#x27;</span> <span class="comment">// -&gt; true &#x27;\n&#x27;-&gt;&#x27;&#x27;-&gt;0</span></span><br><span class="line"><span class="string">&#x27;true&#x27;</span>==<span class="literal">true</span> <span class="comment">// -&gt; false true-&gt;0;&#x27;true&#x27;-&gt;NaNï¼Œæ‰€ä»¥ä¸ºfalse</span></span><br></pre></td></tr></table></figure><h2 id="çš„éšå¼è½¬æ¢-1"><a href="#çš„éšå¼è½¬æ¢-1" class="headerlink" title="+çš„éšå¼è½¬æ¢"></a>+çš„éšå¼è½¬æ¢</h2><ol><li>å…¶ä¸­ä¸€ä¸ªæ˜¯å­—ç¬¦ä¸²ï¼Œå¦å¤–çš„æ˜¯åŸºæœ¬ç±»å‹åˆ™è½¬ stringï¼Œå¼•ç”¨ç±»å‹è½¬åŸå§‹(å­˜åœ¨ä¼˜å…ˆçº§)</li><li>å…¶ä¸­ä¸€ä¸ªæ˜¯æ•°å­—ï¼Œå¦å¤–çš„æ˜¯åŸºæœ¬ç±»å‹åˆ™è½¬ numberï¼Œå¼•ç”¨ç±»å‹è½¬åŸå§‹(å­˜åœ¨ä¼˜å…ˆçº§)</li><li>å¦‚æœä¸€ä¸ªæ˜¯å­—ç¬¦ä¸²ä¸€ä¸ªæ˜¯æ•°å­—åˆ™æ‹¼æ¥</li></ol><h2 id="isNaNå’ŒNumber-isNaNçš„åŒºåˆ«"><a href="#isNaNå’ŒNumber-isNaNçš„åŒºåˆ«" class="headerlink" title="isNaNå’ŒNumber.isNaNçš„åŒºåˆ«"></a><code>isNaN</code>å’Œ<code>Number.isNaN</code>çš„åŒºåˆ«</h2><p>å‰è€…æ˜¯ ES6 ä¹‹å‰çš„å…¨å±€æ–¹æ³•ï¼Œåˆ¤æ–­çš„æ–¹å¼æ˜¯å…ˆæŠŠä¼ è¿›æ¥çš„å†…å®¹ä½¿ç”¨ Number è¿›è¡Œè½¬æ¢ï¼Œç„¶åå†åˆ¤æ–­æ˜¯å¦ä¸º NaNï¼Œåè€…æ›´æ–¹ä¾¿ä¸€ç‚¹ï¼Œé¦–å…ˆåˆ¤æ–­ä¼ è¿›æ¥çš„å†…å®¹æ˜¯å¦ä¸ºæ•°å€¼ç±»å‹ï¼Œéæ•°å€¼ç›´æ¥è¿”å› NaNï¼Œ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">isNaN</span>(<span class="literal">true</span>); <span class="comment">// false å¸ƒå°”å€¼trueä¼šè½¬ä¸ºé0å€¼</span></span><br><span class="line"><span class="built_in">isNaN</span>(<span class="literal">false</span>); <span class="comment">// false å¸ƒå°”å€¼falseä¼šè½¬æ¢æˆ0</span></span><br><span class="line"><span class="built_in">isNaN</span>(<span class="literal">null</span>); <span class="comment">// false  nullä¼šè½¬ä¸º0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// strings</span></span><br><span class="line"><span class="built_in">isNaN</span>(<span class="string">&quot;37&quot;</span>); <span class="comment">// false: å¯ä»¥è¢«è½¬æ¢æˆæ•°å€¼37</span></span><br><span class="line"><span class="built_in">isNaN</span>(<span class="string">&quot;37.37&quot;</span>); <span class="comment">// false: å¯ä»¥è¢«è½¬æ¢æˆæ•°å€¼37.37</span></span><br><span class="line"><span class="built_in">isNaN</span>(<span class="string">&quot;37,5&quot;</span>); <span class="comment">// true &quot;37,5&quot;ä¸èƒ½è½¬æ¢ä¸ºæ•°å€¼</span></span><br><span class="line"><span class="built_in">isNaN</span>(<span class="string">&quot;123ABC&quot;</span>); <span class="comment">// trueï¼šparseInt(&quot;123ABC&quot;) = 123, ä½†æ˜¯Number(&quot;123ABC&quot;) = NaN</span></span><br><span class="line"><span class="built_in">isNaN</span>(<span class="string">&quot;&quot;</span>); <span class="comment">// false: ç©ºå­—ç¬¦ä¸²è¢«è½¬æ¢æˆ0</span></span><br><span class="line"><span class="built_in">isNaN</span>(<span class="string">&quot; &quot;</span>); <span class="comment">// false: åŒ…å«ç©ºæ ¼çš„å­—ç¬¦ä¸²è¢«è½¬æ¢æˆ0</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">isNaN</span>(<span class="keyword">new</span> <span class="built_in">Date</span>()); <span class="comment">// false ä¼šè½¬æ¢æˆå½“å‰çš„æ—¶é—´</span></span><br><span class="line"><span class="built_in">isNaN</span>(<span class="keyword">new</span> <span class="built_in">Date</span>().toString()); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">isNaN</span>([]); <span class="comment">// false []è½¬æ¢æˆ0</span></span><br><span class="line"><span class="built_in">isNaN</span>(<span class="keyword">new</span> <span class="built_in">String</span>()); <span class="comment">// false</span></span><br><span class="line"><span class="built_in">isNaN</span>(<span class="keyword">new</span> <span class="built_in">Array</span>()); <span class="comment">// false</span></span><br><span class="line"><span class="built_in">isNaN</span>(<span class="string">&quot;Infinity&quot;</span>); <span class="comment">// falseï¼š&quot;Infinity&quot;è½¬æ¢ä¸ºInfinity</span></span><br><span class="line"><span class="built_in">isNaN</span>(-<span class="number">0.1</span>); <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">isNaN</span>(x) == <span class="built_in">isNaN</span>(<span class="built_in">Number</span>(x)); <span class="comment">// ä¸è®ºxä¸ºä½•å€¼ éƒ½è¿”å›true å“ªæ€•x = undefined</span></span><br><span class="line"><span class="comment">// å› ä¸ºisNaN(undefined) = true ä¸” Number(undefined) = NaN ä½¿å¾—isNaN(NaN) = true</span></span><br><span class="line"><span class="built_in">isNaN</span>() == <span class="built_in">isNaN</span>(<span class="built_in">Number</span>()); <span class="comment">// false, because isNaN() = true and Number() = 0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//ä»¥ä¸‹å…¨éƒ¨è¿”å›true</span></span><br><span class="line"><span class="built_in">isNaN</span>(&#123;&#125;); <span class="comment">// ç©ºå¯¹è±¡æ‰§è¡ŒtoStringæ–¹æ³• ç»“æœæ˜¯&#x27;[object Object]&#x27;</span></span><br><span class="line"><span class="built_in">isNaN</span>(<span class="built_in">String</span>); <span class="comment">//</span></span><br><span class="line"><span class="built_in">isNaN</span>(<span class="built_in">Array</span>); <span class="comment">//</span></span><br><span class="line"><span class="built_in">isNaN</span>(<span class="string">&quot;blabla&quot;</span>); <span class="comment">// &quot;blabla&quot;ä¸èƒ½è½¬æ¢æˆæ•°å€¼</span></span><br><span class="line"><span class="built_in">isNaN</span>(<span class="string">&quot;-blabla&quot;</span>); <span class="comment">//</span></span><br><span class="line"><span class="built_in">isNaN</span>(<span class="number">0</span> / <span class="number">0</span>); <span class="comment">//</span></span><br><span class="line"><span class="built_in">isNaN</span>(<span class="string">&quot;0/0&quot;</span>); <span class="comment">// &quot;0/0&quot;ä¸èƒ½è½¬æ¢æˆæ•°å­—</span></span><br><span class="line"><span class="built_in">isNaN</span>(<span class="literal">Infinity</span> / <span class="literal">Infinity</span>); <span class="comment">//</span></span><br><span class="line"><span class="built_in">isNaN</span>(<span class="literal">NaN</span>); <span class="comment">//</span></span><br><span class="line"><span class="built_in">isNaN</span>(<span class="literal">undefined</span>); <span class="comment">//</span></span><br><span class="line"><span class="built_in">isNaN</span>();</span><br></pre></td></tr></table></figure><h2 id="Object-is"><a href="#Object-is" class="headerlink" title="Object.is"></a><code>Object.is</code></h2><p>ç”¨æ³•å’Œ<code>===</code>åŸºæœ¬ä¸€è‡´ ä¸åŒåœ¨äº</p><ol><li>0 å’Œ+0 æ˜¯ä¸€æ ·çš„ ä½†æ˜¯ 0 å’Œ-0 æ˜¯ä¸ä¸€æ ·çš„</li><li>NaN ä¸ NaN ä¸º true</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.is(<span class="number">0</span>, -<span class="number">0</span>); <span class="comment">// false</span></span><br><span class="line"><span class="built_in">Object</span>.is(+<span class="number">0</span>, -<span class="number">0</span>); <span class="comment">// false</span></span><br><span class="line"><span class="built_in">Object</span>.is(<span class="number">0</span>, +<span class="number">0</span>); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">Object</span>.is(<span class="literal">NaN</span>, <span class="number">0</span> / <span class="number">0</span>); <span class="comment">// true</span></span><br></pre></td></tr></table></figure><h2 id="ç®­å¤´å‡½æ•°ä¸ºä»€ä¹ˆä¸èƒ½å’Œ-this-ç»“åˆ"><a href="#ç®­å¤´å‡½æ•°ä¸ºä»€ä¹ˆä¸èƒ½å’Œ-this-ç»“åˆ" class="headerlink" title="ç®­å¤´å‡½æ•°ä¸ºä»€ä¹ˆä¸èƒ½å’Œ this ç»“åˆ"></a>ç®­å¤´å‡½æ•°ä¸ºä»€ä¹ˆä¸èƒ½å’Œ this ç»“åˆ</h2><p>å› ä¸ºç®­å¤´å‡½æ•°çš„æŒ‡å‘åœ¨å®šä¹‰å‡½æ•°çš„æ—¶å€™å°±å·²ç»æŒ‡å®šå¥½äº†ï¼Œæ‰€ä»¥ä¸èƒ½å’Œ this ç»“åˆ</p><p>å› ä¸º this æ˜¯å›ºå®šçš„äº†ï¼Œæ‰€ä»¥ä¹Ÿä¸èƒ½å»æ”¹å˜<br>æ¯”å¦‚ä½¿ç”¨ call/bind/apply<br>é‚£ä¹ˆè¿›ä¸€æ­¥è¯´ï¼Œnew ä¹Ÿä¸èƒ½ç”¨åœ¨ç®­å¤´å‡½æ•°å®ä¾‹åŒ–ï¼Œå› ä¸º new çš„åŸç†å…¶å®ä¹Ÿæ˜¯æŠŠ this æŒ‡å‘ç»™åˆ°æ–°çš„å®ä¾‹</p><p>å¹¶ä¸” ä¹Ÿæ²¡æœ‰ argumentsï¼Œ(ä¸ºä»€ä¹ˆ) ä½†æ˜¯å¯ä»¥è®¿é—®åˆ«äººçš„ arguments</p><h2 id="this-æœ‰å¤šå°‘ç§æŒ‡å‘"><a href="#this-æœ‰å¤šå°‘ç§æŒ‡å‘" class="headerlink" title="this æœ‰å¤šå°‘ç§æŒ‡å‘"></a>this æœ‰å¤šå°‘ç§æŒ‡å‘</h2><p>5 ç§</p><p>åœ¨æµè§ˆå™¨ä¸­ å…¨å±€èŒƒå›´çš„ this æŒ‡å‘ window(æ§åˆ¶å°)<br>åœ¨å‡½æ•°ä¸­ this æŒ‡å‘æœ€åè°ƒç”¨å®ƒçš„å¯¹è±¡<br>åœ¨æ„é€ å‡½æ•°ä¸­æŒ‡å‘å®ä¾‹<br><code>call/apply/bind</code>ä¸­æŒ‡å‘è¢«å¼ºç»‘å®šçš„å¯¹è±¡<br>ç®­å¤´å‡½æ•°ï¼Œå£°æ˜çš„æ—¶å€™å°±å›ºå®šï¼Œæ˜¯é™æ€çš„</p><h2 id="call-apply-bindä¸‰è€…åŒºåˆ«"><a href="#call-apply-bindä¸‰è€…åŒºåˆ«" class="headerlink" title="call/apply/bindä¸‰è€…åŒºåˆ«"></a><code>call/apply/bind</code>ä¸‰è€…åŒºåˆ«</h2><p>å…±åŒç‚¹ éƒ½èƒ½æ”¹å˜ this æŒ‡å‘<br>call å’Œ apply åŒºåˆ«åœ¨äºä¼ å‚ï¼Œä¸€ä¸ªæ˜¯å­—ç¬¦ä¸²ï¼Œä¸€ä¸ªæ˜¯æ•°ç»„<br>bind çš„è¯ ä¼šç”Ÿæˆä¸€ä¸ªå‡½æ•°æˆ–è€…æ˜¯ç”Ÿæˆä¸€ä¸ªæ–°çš„å¯¹è±¡(å½“ä¼ å…¥ null)çš„æ—¶å€™</p><h2 id="ä¸‰è€…æ‰‹å†™"><a href="#ä¸‰è€…æ‰‹å†™" class="headerlink" title="ä¸‰è€…æ‰‹å†™"></a>ä¸‰è€…æ‰‹å†™</h2><p>å‚è€ƒæ‰‹å†™ç¯‡<br>æ¯”è¾ƒéœ€è¦æ³¨æ„çš„ç‚¹æ˜¯ï¼Œcall å’Œ apply çš„ context ä¸ä¼ çš„æ—¶å€™æ˜¯ windowï¼Œæˆ‘ä»¬ç›´æ¥åœ¨ç¼–è¯‘å™¨é‡Œé¢æ‹¿æ˜¯æ‹¿ä¸åˆ°çš„ï¼Œå¯ä»¥ä½¿ç”¨ globalThis å…³é”®å­—ã€‚</p><p>bind çš„è¯è¦è€ƒè™‘é‚£ä¸ª new çš„æƒ…å†µï¼Œä¹Ÿå°±æ˜¯ä¼  null ç›¸å½“äºç”Ÿæˆäº†ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œéœ€è¦å®ä¾‹åŒ–</p><h2 id="å¦‚ä½•å®ç°æŸ¯é‡ŒåŒ–"><a href="#å¦‚ä½•å®ç°æŸ¯é‡ŒåŒ–" class="headerlink" title="å¦‚ä½•å®ç°æŸ¯é‡ŒåŒ–"></a>å¦‚ä½•å®ç°æŸ¯é‡ŒåŒ–</h2><p>æŸ¯é‡ŒåŒ–æœ‰ä¸¤ç§ï¼šå®šé•¿å’Œä¸å®šé•¿ï¼ŒæŸ¯é‡ŒåŒ–çš„æ€æƒ³æ˜¯ï¼šæ”¶é›†å’Œæ‰§è¡Œ<br>å¯¹äºå®šé•¿çš„æŸ¯é‡ŒåŒ–ï¼š<br>æ”¶é›†å½“å‰å‚æ•°ï¼Œå¦‚æœå½¢å‚é•¿åº¦æœªè¾¾åˆ°çœŸå®å‡½æ•°å½¢å‚é•¿åº¦ï¼Œåˆ™ç»§ç»­å›è°ƒæ”¶é›†ï¼Œå¦åˆ™æ‰§è¡ŒçœŸå®å‡½æ•°</p><p>å¯¹äºä¸å®šé•¿çš„æŸ¯é‡ŒåŒ–ï¼š<br>æ”¶é›†å½“å‰å‚æ•°ï¼Œç„¶åæŠŠæ‰§è¡Œçš„ç»“æœæ”¾åˆ°å‡½æ•°çš„ toString é‡Œé¢ï¼Œè¿™é‡Œæ¶‰åŠåˆ°å¯¹è±¡è½¬åŸå§‹ç±»å‹ä¼˜å…ˆçº§çš„çŸ¥è¯†ã€‚</p><h2 id="å¦‚ä½•ç»™ç±»æ•°ç»„æ·»åŠ -push-æ–¹æ³•"><a href="#å¦‚ä½•ç»™ç±»æ•°ç»„æ·»åŠ -push-æ–¹æ³•" class="headerlink" title="å¦‚ä½•ç»™ç±»æ•°ç»„æ·»åŠ  push æ–¹æ³•"></a>å¦‚ä½•ç»™ç±»æ•°ç»„æ·»åŠ  push æ–¹æ³•</h2><p>å…¶å®å°±æ˜¯ç”¨ bind æ”¹å˜ push æ–¹æ³•çš„ this æŒ‡å‘ å°±å¯ä»¥äº†</p><h2 id="ä»€ä¹ˆæ—¶å€™è¦ä½¿ç”¨åˆ°-bind"><a href="#ä»€ä¹ˆæ—¶å€™è¦ä½¿ç”¨åˆ°-bind" class="headerlink" title="ä»€ä¹ˆæ—¶å€™è¦ä½¿ç”¨åˆ° bind"></a>ä»€ä¹ˆæ—¶å€™è¦ä½¿ç”¨åˆ° bind</h2><p>é˜²æ­¢ this æŒ‡å‘åˆ°ä¸æ­£ç¡®çš„å¯¹è±¡/æ°¸ä¹…ç»‘å®š this æŒ‡å‘</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> person = &#123;</span><br><span class="line">  <span class="attr">nickname</span>: <span class="string">&quot;jojo&quot;</span>,</span><br><span class="line">  <span class="function"><span class="title">eatWatermelon</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.nickname + <span class="string">&quot; åƒè¥¿ç“œ&quot;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">person.eatWatermelon(); <span class="comment">//jojoåƒè¥¿ç“œ</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> eatWatermelon = person.eatWatermelon;</span><br><span class="line">eatWatermelon(); <span class="comment">//undefined</span></span><br></pre></td></tr></table></figure><p>this çš„æŒ‡å‘å˜æˆäº† eatWatermelon() æ‰§è¡Œæ—¶æ‰€åœ¨ä½œç”¨åŸŸçš„ thisã€‚ä¹Ÿå°±æ˜¯ windowï¼Œæ‰€ä»¥æ‰¾ä¸åˆ°</p><p>è§£å†³æ–¹æ³•: ä½¿ç”¨ bind æ°¸ä¹…ç»‘å®š this æŒ‡å‘</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> eatWatermelon = person.eatWatermelon.bind(person);</span><br><span class="line">eatWatermelon(); <span class="comment">//jojoåƒè¥¿ç“œ</span></span><br></pre></td></tr></table></figure><p>é¢„ç½®å‡½æ•°å‚æ•°<br>eg2 é¢„ç½®å‡½æ•°å‚æ•°</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">a, b, c</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> a + b + c;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> addSix = add.bind(<span class="literal">null</span>, <span class="number">6</span>);</span><br><span class="line"><span class="keyword">const</span> addSixThenAddFour = addSix.bind(<span class="literal">null</span>, <span class="number">4</span>);</span><br><span class="line">addSixThenAddFour(<span class="number">5</span>);</span><br><span class="line"><span class="comment">// 15</span></span><br><span class="line"></span><br><span class="line">addSixThenAddFour(<span class="number">7</span>);</span><br><span class="line"><span class="comment">// 17</span></span><br></pre></td></tr></table></figure><h2 id="ä»€ä¹ˆæ˜¯å˜é‡æå‡"><a href="#ä»€ä¹ˆæ˜¯å˜é‡æå‡" class="headerlink" title="ä»€ä¹ˆæ˜¯å˜é‡æå‡"></a>ä»€ä¹ˆæ˜¯å˜é‡æå‡</h2><p>var å£°æ˜å˜é‡çš„æ—¶å€™ var å˜é‡ä¼šæå‡åˆ°ä½œç”¨åŸŸé¡¶éƒ¨ä¸º undefinedï¼Œç„¶ååœ¨å¯¹åº”çš„ä½ç½®é‡æ–°èµ‹å€¼</p><p>è¿™é‡Œè¿˜æ¶‰åŠå‡½æ•°æå‡ å‡½æ•°æå‡ä¼˜äºå˜é‡æå‡</p><p>å¸¸è€ƒçš„ï¼šåœ¨å‡½æ•°ä¸­è¾“å‡ºå‡½æ•°çš„åå­— è¯¯å¯¼æ€§æå¼º</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// case1</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">b</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> b = <span class="string">&quot;jojo&quot;</span>;</span><br><span class="line">  <span class="built_in">console</span>.log(b);</span><br><span class="line">&#125;</span><br><span class="line">b(); <span class="comment">//jojo</span></span><br><span class="line"><span class="built_in">console</span>.log(b); <span class="comment">//[Function: b]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// case2</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">b</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  b = <span class="string">&quot;jojo&quot;</span>;</span><br><span class="line">  <span class="built_in">console</span>.log(b);</span><br><span class="line">&#125;</span><br><span class="line">b(); <span class="comment">//jojo</span></span><br><span class="line"><span class="built_in">console</span>.log(b); <span class="comment">//jojo</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// case3</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">b</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(b);</span><br><span class="line">  <span class="keyword">var</span> b = <span class="string">&quot;jojo&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">b(); <span class="comment">//undefined</span></span><br><span class="line"><span class="built_in">console</span>.log(b); <span class="comment">//[Function: b]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// case4</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">b</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(b);</span><br><span class="line">  b = <span class="string">&quot;jojo&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">b(); <span class="comment">// [Function: b]</span></span><br><span class="line"><span class="built_in">console</span>.log(b)(</span><br><span class="line">  <span class="comment">// jojo</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// case5 è¿™é‡Œæ¶‰åŠçš„æ˜¯é—­åŒ…çš„çŸ¥è¯†ï¼Œé—­åŒ…ä¼šå°†å‡½æ•°åå­˜å‚¨è¿›å»ï¼Œæ— æ³•ä¿®æ”¹</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">b</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    b = <span class="string">&quot;jojo&quot;</span>;</span><br><span class="line">    <span class="built_in">console</span>.log(b); <span class="comment">//[Function: b]</span></span><br><span class="line">  &#125;</span><br><span class="line">)();</span><br></pre></td></tr></table></figure><h2 id="ä»€ä¹ˆæ˜¯æš‚æ—¶æ€§æ­»åŒº"><a href="#ä»€ä¹ˆæ˜¯æš‚æ—¶æ€§æ­»åŒº" class="headerlink" title="ä»€ä¹ˆæ˜¯æš‚æ—¶æ€§æ­»åŒº"></a>ä»€ä¹ˆæ˜¯æš‚æ—¶æ€§æ­»åŒº</h2><p>let const å£°æ˜çš„å˜é‡åœ¨å£°æ˜å‰å°±è¢«è°ƒç”¨ äº§ç”Ÿæš‚æ—¶æ€§æ­»åŒº è¡¨ç°ä¸º Reference Error</p><h2 id="js-æ‰§è¡Œç¯å¢ƒæœ‰å“ªäº›"><a href="#js-æ‰§è¡Œç¯å¢ƒæœ‰å“ªäº›" class="headerlink" title="js æ‰§è¡Œç¯å¢ƒæœ‰å“ªäº›"></a>js æ‰§è¡Œç¯å¢ƒæœ‰å“ªäº›</h2><p>å…¨å±€æ‰§è¡Œç¯å¢ƒå’Œå‡½æ•°æ‰§è¡Œç¯å¢ƒ</p><h2 id="js-æ‰§è¡Œä¸Šä¸‹æ–‡æœ‰å“ªå‡ ç§"><a href="#js-æ‰§è¡Œä¸Šä¸‹æ–‡æœ‰å“ªå‡ ç§" class="headerlink" title="js æ‰§è¡Œä¸Šä¸‹æ–‡æœ‰å“ªå‡ ç§"></a>js æ‰§è¡Œä¸Šä¸‹æ–‡æœ‰å“ªå‡ ç§</h2><p>å…¨å±€ä¸Šä¸‹æ–‡ å‡½æ•°ä¸Šä¸‹æ–‡ eval ä¸Šä¸‹æ–‡</p><h2 id="æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­æœ‰å“ªäº›é‡è¦å±æ€§"><a href="#æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­æœ‰å“ªäº›é‡è¦å±æ€§" class="headerlink" title="æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­æœ‰å“ªäº›é‡è¦å±æ€§"></a>æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­æœ‰å“ªäº›é‡è¦å±æ€§</h2><ul><li>å˜é‡å¯¹è±¡ï¼ˆVO),åŒ…å«å˜é‡ï¼Œå‡½æ•°å£°æ˜å’Œå‡½æ•°çš„å½¢å‚ï¼Œè¯¥å±æ€§åªèƒ½åœ¨å…¨å±€ä¸Šä¸‹æ–‡ä¸­è®¿é—®ã€‚</li><li>ä½œç”¨åŸŸé“¾ï¼Œjs é‡‡ç”¨è¯æ³•ä½œç”¨åŸŸé“¾ï¼Œä¹Ÿå°±æ˜¯è¯´å˜é‡çš„ä½œç”¨åŸŸæ˜¯åœ¨å®šä¹‰çš„æ—¶å€™å†³å®šäº†ã€‚</li><li><code>this</code></li></ul><h2 id="js-ä»£ç æ‰§è¡Œçš„è¿‡ç¨‹"><a href="#js-ä»£ç æ‰§è¡Œçš„è¿‡ç¨‹" class="headerlink" title="js ä»£ç æ‰§è¡Œçš„è¿‡ç¨‹"></a>js ä»£ç æ‰§è¡Œçš„è¿‡ç¨‹</h2><ul><li>å…ˆåˆ›å»ºå…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ global EC</li><li>å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ caller é€è¡Œ è‡ªä¸Šè€Œä¸‹æ‰§è¡Œã€‚é‡åˆ°å‡½æ•°çš„æ—¶å€™ï¼Œå‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ callee ä¼šè¢« push åˆ°æ‰§è¡Œæ ˆé¡¶å±‚</li><li>æ‰§è¡Œä¸Šä¸‹æ–‡è¢«æ¿€æ´»åï¼Œæˆä¸º active EC å¼€å§‹æ‰§è¡Œå‡½æ•°ä¸­çš„ä»£ç ï¼Œcaller è¢«æŒ‚èµ·</li><li>å‡½æ•°æ‰§è¡Œå®Œå callee è¢« pop å‡ºæ‰§è¡Œæ ˆ æ§åˆ¶æƒè¿˜ç»™ caller ç»§ç»­æ‰§è¡Œ</li></ul><h2 id="ä½œç”¨åŸŸå’Œä½œç”¨åŸŸé“¾çš„ç†è§£"><a href="#ä½œç”¨åŸŸå’Œä½œç”¨åŸŸé“¾çš„ç†è§£" class="headerlink" title="ä½œç”¨åŸŸå’Œä½œç”¨åŸŸé“¾çš„ç†è§£"></a>ä½œç”¨åŸŸå’Œä½œç”¨åŸŸé“¾çš„ç†è§£</h2><ul><li>ä½œç”¨åŸŸï¼šä½œç”¨åŸŸå°±æ˜¯å®šä¹‰å˜é‡çš„åŒºåŸŸï¼Œä»–æœ‰ä¸€å¥—è®¿é—®å˜é‡çš„è§„åˆ™ï¼Œè¿™å¥—è§„åˆ™æ¥ç®¡ç†æµè§ˆå™¨å¼•æ“å¦‚ä½•åœ¨å½“å‰ä½œç”¨åŸŸä»¥åŠåµŒå¥—çš„ä½œç”¨åŸŸä¸­æ ¹æ®å˜é‡ï¼ˆæ ‡è¯†ç¬¦ï¼‰è¿›è¡Œå˜é‡æŸ¥æ‰¾</li><li>ä½œç”¨åŸŸé“¾ï¼šä½œç”¨åŸŸé“¾çš„ä½œç”¨æ˜¯ä¿è¯å¯¹æ‰§è¡Œç¯å¢ƒæœ‰æƒè®¿é—®çš„æ‰€æœ‰å˜é‡å’Œå‡½æ•°çš„æœ‰åºè®¿é—®ï¼Œé€šè¿‡ä½œç”¨åŸŸé“¾ï¼Œæˆ‘ä»¬å¯ä»¥è®¿é—®åˆ°å¤–å±‚ç¯å¢ƒçš„å˜é‡å’Œå‡½æ•°</li></ul><div class="note primary flat"><p>ä½œç”¨åŸŸé“¾æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªæŒ‡å‘å˜é‡å¯¹è±¡çš„æŒ‡é’ˆåˆ—è¡¨ã€‚å˜é‡å¯¹è±¡æ˜¯ä¸€ä¸ªåŒ…å«äº†æ‰§è¡Œç¯å¢ƒä¸­æ‰€æœ‰å˜é‡å’Œå‡½æ•°çš„å¯¹è±¡ã€‚ä½œç”¨åŸŸé“¾çš„å‰ç«¯å§‹ç»ˆæ˜¯å½“å‰æ‰§è¡Œä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡ã€‚å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡ï¼ˆä¹Ÿå°±æ˜¯å…¨å±€å¯¹è±¡ï¼‰å§‹ç»ˆæ˜¯ä½œç”¨åŸŸé“¾çš„æœ€åä¸€ä¸ªå¯¹è±¡</p></div><ul><li>å½“æˆ‘ä»¬æŸ¥æ‰¾ä¸€ä¸ªå˜é‡çš„æ—¶å€™ï¼Œå¦‚æœåœ¨å½“å‰æ‰§è¡Œç¯å¢ƒä¸­æ²¡æœ‰æ‰¾åˆ°ï¼Œæˆ‘ä»¬å¯ä»¥æ²¿ç€ä½œç”¨åŸŸé“¾å‘åæŸ¥æ‰¾</li><li>ä½œç”¨åŸŸé“¾çš„åˆ›å»ºè¿‡ç¨‹å’Œæ‰§è¡Œä¸Šä¸‹æ–‡çš„å»ºç«‹æœ‰å…³ã€‚</li></ul><div class="note primary flat"><p>ä½œç”¨åŸŸå¯ä»¥ç†è§£ä¸ºå˜é‡çš„å¯è®¿é—®æ€§ æ€»å…±åˆ†ä¸ºä¸‰ç§ç±»å‹ åˆ†åˆ«ä¸ºï¼š</p></div><ul><li>å…¨å±€ä½œç”¨åŸŸ</li><li>å‡½æ•°ä½œç”¨åŸŸ</li><li>å—çº§ä½œç”¨åŸŸ</li></ul><h2 id="new-çš„åŸç†ä»¥åŠå®ç°"><a href="#new-çš„åŸç†ä»¥åŠå®ç°" class="headerlink" title="new çš„åŸç†ä»¥åŠå®ç°"></a>new çš„åŸç†ä»¥åŠå®ç°</h2><ul><li>åˆ›å»ºä¸€ä¸ªç©ºå¯¹è±¡</li><li>å°†å¯¹è±¡è¿æ¥åˆ°æ„é€ å‡½æ•°åŸå‹(è£…è½½åŸå‹æ–¹æ³•)</li><li>æ”¹å˜æ„é€ å‡½æ•°çš„ this æŒ‡å‘ä¸ºæ–°çš„å¯¹è±¡å¹¶è·å–æ‰§è¡Œæ„é€ è·å–ç»“æœ</li><li>åˆ¤æ–­ç»“æœæ˜¯å¦è¿”å›äº†ä¸€ä¸ªå¯¹è±¡<br>å¦‚æœæ˜¯ é‚£ä¹ˆè¿”å›è¯¥å¯¹è±¡ å¦åˆ™ ä½¿ç”¨è¿æ¥çš„æ–°å¯¹è±¡</li></ul><p>æ³¨æ„ æ„é€ å‡½æ•°é»˜è®¤è¿”å›å®ä¾‹å¯¹è±¡</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">create</span>(<span class="params">fn, ...args</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!fn <span class="keyword">instanceof</span> <span class="built_in">Function</span>) &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&quot;err&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> obj = <span class="built_in">Object</span>.create(fn.prototype);</span><br><span class="line">    <span class="keyword">let</span> res = fn.call(obj, ...args); <span class="comment">//æ”¹å˜äº†thisæŒ‡å‘çš„åŒæ—¶è·å–åˆ°æ„é€ çš„ç»“æœ</span></span><br><span class="line">    <span class="keyword">return</span> res <span class="keyword">instanceof</span> <span class="built_in">Object</span> ? res : obj;</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(error);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="proto-prototype-constructorä¸‰è€…å…³ç³»"><a href="#proto-prototype-constructorä¸‰è€…å…³ç³»" class="headerlink" title="__proto__,prototype,constructorä¸‰è€…å…³ç³»"></a><code>__proto__,prototype,constructor</code>ä¸‰è€…å…³ç³»</h2><p><code>__proto__</code>æ˜¯éšå¼åŸå‹ï¼Œç”¨äºå®ä¾‹å»è®¿é—®å…¶åŸå‹å¯¹è±¡ï¼Œä½†æ˜¯ä¸è§„èŒƒï¼Œä¸€èˆ¬ä½¿ç”¨<code>getPrototypeOf</code>å»è®¿é—®</p><p><code>constructor</code>æ˜¯æ„é€ å‡½æ•°ï¼Œç”¨äºåˆ›å»ºå¯¹è±¡ï¼Œä»¥åŠç»™æ–°å¯¹è±¡è®¾ç½®åŸå‹å¯¹è±¡(ç›¸å½“äºè®¾ç½®äº†ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘ prototype)ã€‚å­˜æ”¾äº<code>constructor.prototype</code>å±æ€§ä¸­ã€‚</p><p><code>prototype</code>æ˜¯å¯¹è±¡ï¼Œé€šå¸¸å«ä»–åŸå‹å¯¹è±¡ï¼Œå­˜åœ¨äºæ„é€ å‡½æ•°ä¸­ï¼Œæ˜¯ä»–çš„ä¸€ä¸ªå±æ€§ã€‚</p><p>å¸¸è€ƒçš„ä¸œè¥¿ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> test = <span class="keyword">new</span> <span class="built_in">Array</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// åŸå‹é“¾</span></span><br><span class="line"><span class="built_in">console</span>.log(test.__proto__ === <span class="built_in">Array</span>.prototype);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Array</span>.prototype.__proto__ === <span class="built_in">Object</span>.prototype);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.prototype.__proto__ === <span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="built_in">console</span>.log(test.constructor === <span class="built_in">Array</span>); <span class="comment">//å®ä¾‹çš„æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Array</span>.prototype.constructor === <span class="built_in">Array</span>); <span class="comment">//æ„é€ å‡½æ•°è‡ªèº«æœ‰åŸå‹å±æ€§å»è®¿é—®åŸå‹ï¼ŒåŸå‹åˆå¯ä»¥é€šè¿‡construtorå±æ€§å»è®¿é—®æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Array</span>.constructor === <span class="built_in">Array</span>); <span class="comment">//åŸå‹é“¾ æ‰¾åˆ°åŸå‹ä¸Šçš„å±æ€§</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ„é€ å‡½æ•°çš„åŸå‹</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Array</span>.__proto__ === <span class="built_in">Function</span>.prototype);</span><br><span class="line"></span><br><span class="line"><span class="comment">// åŸå‹çš„åŸå‹</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Array</span>.prototype.__proto__ === <span class="built_in">Object</span>.prototype);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ„é€ å‡½æ•°çš„åŸå‹çš„åŸå‹</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Function</span>.prototype.__proto__ === <span class="built_in">Object</span>.prototype);</span><br></pre></td></tr></table></figure><p>å¯¹äºå®ä¾‹æ¥è¯´ æœ‰ä¸¤ä¸ªå±æ€§ <code>__proto__</code>å’Œ<code>constructor</code>åˆ†åˆ«å¯ä»¥å»è®¿é—®åŸå‹å’Œæ„é€ å‡½æ•°<br>å¯¹äºæ„é€ å‡½æ•°æ¥è¯´ æœ‰ä¸¤ä¸ªå±æ€§<code>__proto__</code>å’Œ<code>prototype</code>åˆ†åˆ«å¯ä»¥å»è®¿é—®æ„é€ å‡½æ•°çš„åŸå‹å’ŒåŸå‹<br>å¯¹äºåŸå‹æ¥è¯´ æœ‰ä¸¤ä¸ªå±æ€§ <code>__proto__</code>å’Œ<code>constructor</code>åˆ†åˆ«å¯ä»¥å»è®¿é—®åŸå‹çš„åŸå‹å’Œæ„é€ å‡½æ•°</p><h2 id="å¦‚ä½•è·å–å¯¹è±¡çš„åŸå‹"><a href="#å¦‚ä½•è·å–å¯¹è±¡çš„åŸå‹" class="headerlink" title="å¦‚ä½•è·å–å¯¹è±¡çš„åŸå‹"></a>å¦‚ä½•è·å–å¯¹è±¡çš„åŸå‹</h2><ul><li><code>p.__proto__</code></li><li><code>p.constructor.prototype</code></li><li><code>Object.getPrototypeOf(p)</code></li></ul><h2 id="åŸå‹é“¾æœ¬è´¨"><a href="#åŸå‹é“¾æœ¬è´¨" class="headerlink" title="åŸå‹é“¾æœ¬è´¨"></a>åŸå‹é“¾æœ¬è´¨</h2><p>å¯¹è±¡å¯ä»¥é€šè¿‡<code>__proto__</code>æ¥å¯»æ‰¾ä¸å±äºè¯¥å¯¹è±¡çš„å±æ€§ï¼Œ<code>__proto__</code> å°†å¯¹è±¡è¿æ¥èµ·æ¥ç»„æˆäº†åŸå‹é“¾ã€‚æœ¬è´¨ä¸Šå°±æ˜¯é“¾è¡¨ç»“æ„ï¼Œ<code>__proto__</code>ç®—æ˜¯é“¾è¡¨çš„æŒ‡é’ˆï¼ŒæŒ‡å‘ä¸‹ä¸€ä¸ªä½ç½®</p><h2 id="è¯´è¯´ä½ çŸ¥é“çš„-js-ç»§æ‰¿æ–¹å¼ï¼Œä¸ºä»€ä¹ˆè¦ç»§æ‰¿"><a href="#è¯´è¯´ä½ çŸ¥é“çš„-js-ç»§æ‰¿æ–¹å¼ï¼Œä¸ºä»€ä¹ˆè¦ç»§æ‰¿" class="headerlink" title="è¯´è¯´ä½ çŸ¥é“çš„ js ç»§æ‰¿æ–¹å¼ï¼Œä¸ºä»€ä¹ˆè¦ç»§æ‰¿"></a>è¯´è¯´ä½ çŸ¥é“çš„ js ç»§æ‰¿æ–¹å¼ï¼Œä¸ºä»€ä¹ˆè¦ç»§æ‰¿</h2><p>ç»§æ‰¿çš„ç›®çš„æ˜¯ä¸ºäº† è®©å­ç±»æ‹¥æœ‰çˆ¶ç±»çš„å±æ€§å’Œæ–¹æ³•ï¼Œå±æ€§æ”¾åœ¨æ„é€ å‡½æ•°ä¸­ï¼Œæ–¹æ³•æŒ‚è½½åœ¨åŸå‹ä¸­</p><p>ç»„åˆç»§æ‰¿ï¼Œå¯„ç”Ÿç»„åˆç»§æ‰¿ï¼ŒClass ç»§æ‰¿</p><p>ä»£ç å‚è§æ‰‹å†™</p><h2 id="ç»„åˆç»§æ‰¿æœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿ"><a href="#ç»„åˆç»§æ‰¿æœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿ" class="headerlink" title="ç»„åˆç»§æ‰¿æœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿ"></a>ç»„åˆç»§æ‰¿æœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿ</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SuperType</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.name = name;</span><br><span class="line">  <span class="built_in">this</span>.colors = [<span class="string">&quot;red&quot;</span>, <span class="string">&quot;blue&quot;</span>, <span class="string">&quot;green&quot;</span>];</span><br><span class="line">&#125;</span><br><span class="line">SuperType.prototype.sayName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>.name);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SubType</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ç»§æ‰¿å±æ€§</span></span><br><span class="line">  SuperType.call(<span class="built_in">this</span>, name);</span><br><span class="line">  <span class="built_in">this</span>.age = age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">SubType.prototype = <span class="keyword">new</span> SuperType(); <span class="comment">//ç¼ºç‚¹ ä½¿å¾—prototypeä¸Šé¢æœ‰äº†ä¸å¿…è¦çš„å±æ€§</span></span><br><span class="line">SubType.prototype.sayAge = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>.age);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ç»„åˆç»§æ‰¿è®©å®ä¾‹çš„åŸå‹ç»§æ‰¿äº†ä¸åº”è¯¥ç»§æ‰¿çš„ä¸œè¥¿ï¼Œå› ä¸ºä»–æ˜¯åœ¨å­ç±»æ„é€ å‡½æ•°é‡Œç”¨äº†ä¸€æ¬¡ call æ‰§è¡Œçˆ¶ç±»æ„é€ å‡½æ•° ç„¶ååœ¨å¤–é¢é“¾æ¥çˆ¶ç±»åŸå‹çš„æ—¶å€™(é“¾æ¥åŸå‹çš„ç›®çš„æ˜¯ä¸ºäº†ç»§æ‰¿çˆ¶ç±»çš„æ–¹æ³•ï¼Œè€Œç»§æ‰¿çˆ¶ç±»æ–¹æ³•çš„æ–¹å¼å¯ä»¥æ˜¯ä½¿ç”¨ new) ä½¿ç”¨äº† new æ–¹æ³•ï¼Œnew æ–¹æ³•åˆä¼šæ‰§è¡Œä¸€éæ„é€ å‡½æ•°ï¼Œäºæ˜¯å­ç±»åŸå‹ä¸Šé¢ä¹Ÿæœ‰äº†çˆ¶ç±»åŸå‹çš„ä¸€äº›å±æ€§</p><p>è€Œ call çš„æ—¶å€™å·²ç»ç»§æ‰¿è¿‡äº†ä¸€æ¬¡å±æ€§åˆ°å­ç±»æ„é€ å‡½æ•°ä¸­ï¼Œé€ æˆäº†å±æ€§å†—ä½™</p><h2 id="å¯„ç”Ÿç»„åˆç»§æ‰¿æ€ä¹ˆè§£å†³ç»„åˆç»§æ‰¿çš„é—®é¢˜ï¼Ÿåˆæœ‰ä»€ä¹ˆç¼ºç‚¹ï¼Ÿ"><a href="#å¯„ç”Ÿç»„åˆç»§æ‰¿æ€ä¹ˆè§£å†³ç»„åˆç»§æ‰¿çš„é—®é¢˜ï¼Ÿåˆæœ‰ä»€ä¹ˆç¼ºç‚¹ï¼Ÿ" class="headerlink" title="å¯„ç”Ÿç»„åˆç»§æ‰¿æ€ä¹ˆè§£å†³ç»„åˆç»§æ‰¿çš„é—®é¢˜ï¼Ÿåˆæœ‰ä»€ä¹ˆç¼ºç‚¹ï¼Ÿ"></a>å¯„ç”Ÿç»„åˆç»§æ‰¿æ€ä¹ˆè§£å†³ç»„åˆç»§æ‰¿çš„é—®é¢˜ï¼Ÿåˆæœ‰ä»€ä¹ˆç¼ºç‚¹ï¼Ÿ</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SuperType</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.name = name;</span><br><span class="line">  <span class="built_in">this</span>.colors = [<span class="string">&quot;red&quot;</span>, <span class="string">&quot;blue&quot;</span>, <span class="string">&quot;green&quot;</span>];</span><br><span class="line">&#125;</span><br><span class="line">SuperType.prototype.sayName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  alert(<span class="built_in">this</span>.name);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SubType</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ç»§æ‰¿å±æ€§</span></span><br><span class="line">  <span class="comment">// ç¬¬äºŒæ¬¡è°ƒç”¨SuperType()</span></span><br><span class="line">  SuperType.call(<span class="built_in">this</span>, name);</span><br><span class="line">  <span class="built_in">this</span>.age = age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»§æ‰¿æ–¹æ³•</span></span><br><span class="line"><span class="comment">// æ„å»ºåŸå‹é“¾</span></span><br><span class="line"><span class="comment">// ç¬¬ä¸€æ¬¡è°ƒç”¨SuperType()</span></span><br><span class="line"><span class="comment">//   SubType.prototype = new SuperType();</span></span><br><span class="line"><span class="comment">// é‡å†™SubType.prototypeçš„constructorå±æ€§ï¼ŒæŒ‡å‘è‡ªå·±çš„æ„é€ å‡½æ•°SubType</span></span><br><span class="line">SubType.prototype = <span class="built_in">Object</span>.create(SuperType.prototype, &#123;</span><br><span class="line">  <span class="attr">constructor</span>: &#123;</span><br><span class="line">    <span class="attr">value</span>: SubType,</span><br><span class="line">    <span class="attr">enumerable</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">writable</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">configurable</span>: <span class="literal">true</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// SubType.prototype.__proto__ = SuperType.prototype; //æˆ–è€…è¿™ä¹ˆä½¿ç”¨</span></span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬çŸ¥é“ã€‚ç»„åˆç»§æ‰¿çš„é—®é¢˜åœ¨äºç»™å­ç±»æ·»åŠ çˆ¶ç±»æ–¹æ³•çš„æ—¶å€™åˆè°ƒç”¨äº†ä¸€éçˆ¶ç±»çš„æ„é€ å‡½æ•°ä½¿å¾—å­ç±»åŸå‹ä¸Šé¢å¤šäº†å¾ˆå¤šæ— å…³çš„å±æ€§ã€‚</p><p>å¯„ç”Ÿç»„åˆç»§æ‰¿çš„è§£å†³æ–¹æ³•æœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯é‡‡ç”¨ api<code>Object.create(å­ç±»,constructor)</code>å»é‡å†™å­ç±»çš„åŸå‹çš„ constructor å±æ€§ä¸ºå­ç±»è‡ªèº«çš„æ„é€ å‡½æ•°</p><p>æˆ–è€…ç›´æ¥æŠŠå­ç±»çš„åŸå‹é“¾æ¥åˆ°çˆ¶ç±»åŸå‹ä¸Šé¢ã€‚è¿™æ ·å­ç±»è°ƒç”¨æ–¹æ³•çš„æ—¶å€™æ‰¾ä¸åˆ°å°±å»çˆ¶ç±»æ‰¾ï¼Œå±äºåŸå‹é“¾çš„æ–¹æ³•ã€‚</p><p>ç¼ºç‚¹ï¼šç¼ºç‚¹åœ¨äºä¸èƒ½è°ƒç”¨çˆ¶ç±»é™æ€æ–¹æ³•ã€‚</p><h2 id="ä»€ä¹ˆæ˜¯-class-ç»§æ‰¿"><a href="#ä»€ä¹ˆæ˜¯-class-ç»§æ‰¿" class="headerlink" title="ä»€ä¹ˆæ˜¯ class ç»§æ‰¿"></a>ä»€ä¹ˆæ˜¯ class ç»§æ‰¿</h2><p>class å…¶å®ä¹Ÿæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä½¿ç”¨æ–¹æ³•æ˜¯ï¼Œå­ç±»é‡‡ç”¨ extends å…³é”®å­—ç»§æ‰¿çˆ¶ç±»ï¼Œç„¶ååœ¨å­ç±»çš„æ„é€ å‡½æ•°ä¸­ï¼Œé‡‡ç”¨ super ç»§æ‰¿çˆ¶ç±»çš„å±æ€§ã€‚</p><h2 id="äº‹ä»¶æµçš„ä¸‰ä¸ªé˜¶æ®µæ˜¯ä»€ä¹ˆ"><a href="#äº‹ä»¶æµçš„ä¸‰ä¸ªé˜¶æ®µæ˜¯ä»€ä¹ˆ" class="headerlink" title="äº‹ä»¶æµçš„ä¸‰ä¸ªé˜¶æ®µæ˜¯ä»€ä¹ˆ"></a>äº‹ä»¶æµçš„ä¸‰ä¸ªé˜¶æ®µæ˜¯ä»€ä¹ˆ</h2><p>æ•è· ç›®æ ‡ å†’æ³¡</p><h2 id="preventDefaultä¸stopPropagationçš„åŒºåˆ«"><a href="#preventDefaultä¸stopPropagationçš„åŒºåˆ«" class="headerlink" title="preventDefaultä¸stopPropagationçš„åŒºåˆ«"></a><code>preventDefault</code>ä¸<code>stopPropagation</code>çš„åŒºåˆ«</h2><p>å‰è€…æ˜¯é˜»æ­¢é»˜è®¤äº‹ä»¶ æ¯”å¦‚è¡¨å•æäº¤<br>åè€…æ˜¯é˜»æ­¢å†’æ³¡</p><h2 id="onClick-å’Œ-addEventListener-çš„åŒºåˆ«"><a href="#onClick-å’Œ-addEventListener-çš„åŒºåˆ«" class="headerlink" title="onClick å’Œ addEventListener çš„åŒºåˆ«"></a>onClick å’Œ addEventListener çš„åŒºåˆ«</h2><p>å‰è€…ä¸éœ€è¦é”€æ¯ åè€…éœ€è¦<br>å‰è€…é˜»æ­¢å†’æ³¡éœ€è¦ stopPropagationï¼Œåè€…åœ¨ç¬¬ä¸‰ä¸ªå‚æ•°å†³å®šæ˜¯å¦éœ€è¦å†’æ³¡ é»˜è®¤ false æ˜¯å†’æ³¡</p><h2 id="Promise-æ˜¯ä»€ä¹ˆï¼Œè§£å†³äº†ä»€ä¹ˆé—®é¢˜"><a href="#Promise-æ˜¯ä»€ä¹ˆï¼Œè§£å†³äº†ä»€ä¹ˆé—®é¢˜" class="headerlink" title="Promise æ˜¯ä»€ä¹ˆï¼Œè§£å†³äº†ä»€ä¹ˆé—®é¢˜"></a>Promise æ˜¯ä»€ä¹ˆï¼Œè§£å†³äº†ä»€ä¹ˆé—®é¢˜</h2><p>Promise æ˜¯ä¸€ç§çŠ¶æ€æœºï¼ŒçŠ¶æ€æœ‰ fulfilled,rejected,pendingã€‚çŠ¶æ€åªèƒ½ç”± fulfilled å‘å…¶ä»–ä¸¤ä¸ªè½¬æ¢ï¼Œä¸€æ—¦è½¬æ¢å°±ä¸èƒ½å†æ”¹å˜ã€‚</p><p>Promise è§£å†³äº†å›è°ƒåœ°ç‹±çš„é—®é¢˜ï¼Œå›è°ƒåœ°ç‹±æŒ‡çš„æ˜¯å›è°ƒå‡½æ•°é‡Œé¢åˆåµŒå¥—å›è°ƒå‡½æ•°ï¼Œå¯¼è‡´ä»£ç ç¼©è¿›éå¸¸éš¾çœ‹ï¼Œå¯è¯»æ€§å·®ï¼ŒPromise é“¾å¼è°ƒç”¨å¯ä»¥å¸®æˆ‘ä»¬è§£å†³è¿™ä¸ªç—›ç‚¹ã€‚</p><p>è€Œå®é™…ä¸Š async await æ›´æ–¹ä¾¿ä¸€ç‚¹ç‚¹</p><h2 id="Promise-ä¸­ç›´æ¥-return-ä¸€ä¸ª-error-å¯¹è±¡ä¼šå‘ç”Ÿä»€ä¹ˆ"><a href="#Promise-ä¸­ç›´æ¥-return-ä¸€ä¸ª-error-å¯¹è±¡ä¼šå‘ç”Ÿä»€ä¹ˆ" class="headerlink" title="Promise ä¸­ç›´æ¥ return ä¸€ä¸ª error å¯¹è±¡ä¼šå‘ç”Ÿä»€ä¹ˆ"></a>Promise ä¸­ç›´æ¥ return ä¸€ä¸ª error å¯¹è±¡ä¼šå‘ç”Ÿä»€ä¹ˆ</h2><p>åœ¨ promise ä¸­ï¼Œä»»ä½•çš„ return éƒ½è§†ä¸ºæˆåŠŸçš„å›è°ƒã€‚ä¸å†™çš„è¯é»˜è®¤<code>return Promise.resolve(undefined)</code> return ä¸€ä¸ª error å¯¹è±¡ä¹Ÿæ˜¯ä¼šè¿›å…¥æˆåŠŸå›è°ƒçš„</p><h2 id="new-Promise-éœ€è¦æ³¨æ„ä»€ä¹ˆ"><a href="#new-Promise-éœ€è¦æ³¨æ„ä»€ä¹ˆ" class="headerlink" title="new Promise éœ€è¦æ³¨æ„ä»€ä¹ˆ"></a>new Promise éœ€è¦æ³¨æ„ä»€ä¹ˆ</h2><p>new Promise ä¼šå…ˆæ‰§è¡Œæ„é€ å™¨çš„å†…å®¹ï¼Œå¸¸è€ƒåœ¨å¼‚æ­¥ä»»åŠ¡ä¸­</p><h2 id="Promise-all-race-any-allSettled-å…·ä½“å®ç°"><a href="#Promise-all-race-any-allSettled-å…·ä½“å®ç°" class="headerlink" title="Promise.all race any allSettled å…·ä½“å®ç°"></a>Promise.all race any allSettled å…·ä½“å®ç°</h2><p>å‚è€ƒæ‰‹å†™ä»£ç <br>all çš„è¯ ä¼ å…¥å¯è¿­ä»£å¯¹è±¡ï¼Œä¸€èˆ¬æ˜¯æ•°ç»„ï¼Œå¦‚æœå…¶ä¸­çš„æœ‰ä¸€ä¸ªå¤±è´¥åˆ™è¿›å…¥å¤±è´¥å›è°ƒï¼Œå…¨éƒ½æˆåŠŸæ‰ç®—æˆåŠŸ<br>race ä¼ å‚ç›¸åŒï¼Œä»¥ç¬¬ä¸€ä¸ªæ”¹å˜çŠ¶æ€çš„ä»»åŠ¡ä¸ºæœ€ç»ˆç»“æœ<br>any ä¼ å‚ç›¸åŒ å…¨éƒ¨å¤±è´¥ç®—å¤±è´¥ å…¨éƒ¨æˆåŠŸç®—æˆåŠŸ<br>allSettled ä¼ å‚ç›¸åŒï¼Œä¸ä¼šå› ä¸ºä¸€ä¸ªå¤±è´¥å°±åœæ­¢ï¼Œä¼šè¿”å›å…¨éƒ¨ä»»åŠ¡çš„æœ€ç»ˆçŠ¶æ€</p><h2 id="Promise-å®ç°-fetch-è¯·æ±‚çš„-abort"><a href="#Promise-å®ç°-fetch-è¯·æ±‚çš„-abort" class="headerlink" title="Promise å®ç° fetch è¯·æ±‚çš„ abort"></a>Promise å®ç° fetch è¯·æ±‚çš„ abort</h2><p>åˆ©ç”¨ promise race API</p><h2 id="å¦‚æœå®ç°å¼‚æ­¥è¯·æ±‚å¹¶å‘é™åˆ¶"><a href="#å¦‚æœå®ç°å¼‚æ­¥è¯·æ±‚å¹¶å‘é™åˆ¶" class="headerlink" title="å¦‚æœå®ç°å¼‚æ­¥è¯·æ±‚å¹¶å‘é™åˆ¶"></a>å¦‚æœå®ç°å¼‚æ­¥è¯·æ±‚å¹¶å‘é™åˆ¶</h2><p>all æ–¹æ³•å¯ä»¥ä¿è¯ï¼Œpromise æ•°ç»„ä¸­æ‰€æœ‰çš„ promis å¯¹è±¡éƒ½è¾¾åˆ° resolve çš„çŠ¶æ€æ‰æ‰§è¡Œ then çš„å›è°ƒã€‚</p><p>æ­¤æ—¶å¦‚æœæ•°ç»„å†…æœ‰å‡ åä¸‡ä¸ª promiseï¼Œé‚£ä¹ˆå°±ä¼šåœ¨ä¸€ç¬é—´å‘å‡ºå‡ åä¸‡è·³è¯·æ±‚ï¼Œå¯¼è‡´å†…å­˜æº¢å‡ºã€‚</p><p>æ‰€ä»¥éœ€è¦ promiseall è¿›è¡Œå¹¶å‘é™åˆ¶ã€‚æ¯ä¸€ä¸ªæ—¶åˆ»å¹¶å‘æ‰§è¡Œçš„ promise æ•°é‡æ˜¯å›ºå®šçš„ã€‚æœ€ç»ˆæ‰§è¡Œç»“æœå’ŒåŸæ¥çš„ä¿æŒä¸€è‡´ã€‚</p><h2 id="race-æ–¹æ³•çš„ç”¨é€”"><a href="#race-æ–¹æ³•çš„ç”¨é€”" class="headerlink" title="race æ–¹æ³•çš„ç”¨é€”"></a>race æ–¹æ³•çš„ç”¨é€”</h2><p>å®ç°ä¸€ä¸ªè¶…æ—¶åœæ­¢è¯·æ±‚</p><h2 id="Promise-finally-çš„ç”¨æ³•"><a href="#Promise-finally-çš„ç”¨æ³•" class="headerlink" title="Promise finally çš„ç”¨æ³•"></a>Promise finally çš„ç”¨æ³•</h2><p>ä¸è®ºæœ€åçŠ¶æ€å¦‚ä½•éƒ½ä¼šå»æ‰§è¡Œï¼Œä¸€èˆ¬ç”¨åšä¸­é—´ä»¶ï¼Œå› ä¸ºæ— è®ºçŠ¶æ€å¦‚ä½•éƒ½ä¼šèµ° finallyï¼Œè¿™æ ·å°±å¯ä»¥ç”¨ä½œè¿‡åº¦ã€‚</p><h2 id="å¹¶å‘å’Œå¹¶è¡Œçš„åŒºåˆ«"><a href="#å¹¶å‘å’Œå¹¶è¡Œçš„åŒºåˆ«" class="headerlink" title="å¹¶å‘å’Œå¹¶è¡Œçš„åŒºåˆ«"></a>å¹¶å‘å’Œå¹¶è¡Œçš„åŒºåˆ«</h2><p>å¹¶è¡Œæ˜¯æŒ‡å¤šä¸ªäº‹ä»¶åœ¨åŒä¸€æ—¶é—´ç‚¹æ‰§è¡Œ<br>å¹¶å‘æŒ‡çš„æ˜¯å¤šä¸ªäº‹ä»¶åœ¨åŒä¸€æ—¶é—´æ®µæ‰§è¡Œï¼Œä½†æ˜¯å¤šä¸ªæŒ‡ä»¤è¿›ç¨‹è¢«å¿«é€Ÿçš„äº¤æ›¿è¿›è¡Œï¼Œå› æ­¤åœ¨å®è§‚ä¸Šé•¿å¾—å’Œå¹¶è¡Œå·®ä¸å¤šï¼Œä½†æ˜¯å¾®è§‚ä¸Šä¸ä¸€æ ·</p><h2 id="all-æ–¹æ³•æ˜¯å¹¶å‘çš„è¿˜æ˜¯å¹¶è¡Œçš„ã€‚"><a href="#all-æ–¹æ³•æ˜¯å¹¶å‘çš„è¿˜æ˜¯å¹¶è¡Œçš„ã€‚" class="headerlink" title="all æ–¹æ³•æ˜¯å¹¶å‘çš„è¿˜æ˜¯å¹¶è¡Œçš„ã€‚"></a>all æ–¹æ³•æ˜¯å¹¶å‘çš„è¿˜æ˜¯å¹¶è¡Œçš„ã€‚</h2><p>å¹¶å‘çš„ï¼Œä¸è¿‡<code>promise.all().then()</code>ç»“æœä¸­æ•°ç»„çš„é¡ºåºå’Œ<code>Promise.all()</code>æ¥æ”¶åˆ°çš„æ•°ç»„é¡ºåºä¸€è‡´</p><h2 id="generator-æ€ä¹ˆä½¿ç”¨"><a href="#generator-æ€ä¹ˆä½¿ç”¨" class="headerlink" title="generator æ€ä¹ˆä½¿ç”¨"></a>generator æ€ä¹ˆä½¿ç”¨</h2><ul><li>æœ‰ä¸€ä¸ª*ç¬¦å·çš„æ ‡è¯†ç¬¦ åœ¨å‡½æ•°åç§°å‰</li><li>æœ‰ä¸€ä¸ªå…³é”®å­— yield ç”¨äºå®ç°åˆ†æ®µæ‰§è¡Œï¼Œå½“ generator å‡½æ•°é‡åˆ° yield çš„æ—¶å€™ä¼šæš‚åœå¹¶æŠ›å‡ºå…¶ä¹‹åçš„è¡¨è¾¾å¼</li><li>æœ‰ä¸€ä¸ªå…³é”®å­— next è¡¨ç¤ºå½’è¿˜ä»£ç çš„æ§åˆ¶æƒï¼ˆè¿™ä¸€æ­¥éå¸¸é‡è¦ï¼Œèƒ½å¦ç†è§£ä»–å†³å®šèƒ½å¦åš async å’Œ await çš„å¼‚æ­¥é¢˜</li></ul><p>æ‰‹å†™ genertor</p><h2 id="js-äº‹ä»¶å¾ªç¯æ˜¯ä»€ä¹ˆ"><a href="#js-äº‹ä»¶å¾ªç¯æ˜¯ä»€ä¹ˆ" class="headerlink" title="js äº‹ä»¶å¾ªç¯æ˜¯ä»€ä¹ˆ"></a>js äº‹ä»¶å¾ªç¯æ˜¯ä»€ä¹ˆ</h2><p>js çš„ä»»åŠ¡åˆ†ä¸ºåŒæ­¥ä»»åŠ¡å’Œå¼‚æ­¥ä»»åŠ¡ï¼Œå¼‚æ­¥ä»»åŠ¡ä¸­åˆ†ä¸ºå®ä»»åŠ¡å’Œå¾®ä»»åŠ¡ã€‚ä»£ç ç”±ä¸Šè€Œä¸‹æ‰§è¡Œï¼Œé‡åˆ°å‡½æ•°è°ƒç”¨å°†å‡½æ•°å‹å…¥æ‰§è¡Œæ ˆï¼Œå…ˆæ‰§è¡ŒåŒæ­¥ä»»åŠ¡ï¼Œå¦‚æœåœ¨åŒæ­¥ä»»åŠ¡ä¸­å‘ç°äº†å¼‚æ­¥äº‹ä»¶ï¼Œå…ˆå°†å…¶æŒ‚èµ·ï¼Œç»§ç»­æ‰§è¡Œæ‰§è¡Œæ ˆä¸­çš„å…¶ä»–ä»»åŠ¡ã€‚<br>å½“åŒæ­¥äº‹ä»¶æ‰§è¡Œå®Œä¹‹åï¼Œå°†å¼‚æ­¥äº‹ä»¶çš„å›è°ƒåŠ å…¥åˆ°å¼‚æ­¥çš„ä»»åŠ¡é˜Ÿåˆ—ä¸­ç­‰å¾…æ‰§è¡Œã€‚<br>å¼‚æ­¥ä»»åŠ¡é˜Ÿåˆ—åˆ†ä¸ºï¼Œå¾®ä»»åŠ¡é˜Ÿåˆ—å’Œå®ä»»åŠ¡é˜Ÿåˆ—ã€‚<br>ä¼˜å…ˆæ‰§è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œç„¶åæ‰§è¡Œå®ä»»åŠ¡é˜Ÿåˆ—ã€‚<br>ç„¶åé‡å¤ä»¥ä¸Šæ“ä½œ</p><h2 id="process-nextTick-æ˜¯ä»€ä¹ˆ"><a href="#process-nextTick-æ˜¯ä»€ä¹ˆ" class="headerlink" title="process.nextTick æ˜¯ä»€ä¹ˆ"></a>process.nextTick æ˜¯ä»€ä¹ˆ</h2><p>æ˜¯ node ä¸­çš„ä¸€ä¸ª apiï¼Œä»–æŒ‡å®šçš„å¼‚æ­¥ä»»åŠ¡æ€»æ˜¯å‘ç”Ÿäºæ‰€æœ‰å¼‚æ­¥ä»»åŠ¡ä¹‹å‰</p><h2 id="js-ä¸ºä»€ä¹ˆæ˜¯å•çº¿ç¨‹"><a href="#js-ä¸ºä»€ä¹ˆæ˜¯å•çº¿ç¨‹" class="headerlink" title="js ä¸ºä»€ä¹ˆæ˜¯å•çº¿ç¨‹"></a>js ä¸ºä»€ä¹ˆæ˜¯å•çº¿ç¨‹</h2><p>è€ƒè™‘åˆ°ç”¨æˆ·è§†è§’å§‹ç»ˆåªæœ‰ä¸€ä¸ªçš„åŸå› ï¼Œå¦‚æœ js æ˜¯å¤šçº¿ç¨‹çš„è¯ã€‚å…¶ä¸­ä¸€ä¸ªçº¿ç¨‹åˆ›å»ºäº† DOM èŠ‚ç‚¹ï¼Œå¦å¤–ä¸€ä¸ªçº¿ç¨‹é”€æ¯äº† DOM èŠ‚ç‚¹ã€‚æ­¤æ—¶æµè§ˆå™¨çš„è§†å›¾åº”è¯¥ä»¥ä»€ä¹ˆä¸ºå‡†å‘¢ï¼Ÿå› ä¸ºè¿™æ ·çš„åŸå› ï¼Œjs åœ¨ä¸€å¼€å§‹è®¾è®¡ä¸Šå°±æ˜¯å•çº¿ç¨‹çš„ã€‚</p><h2 id="js-æ€ä¹ˆå¼€å¯å¤šçº¿ç¨‹"><a href="#js-æ€ä¹ˆå¼€å¯å¤šçº¿ç¨‹" class="headerlink" title="js æ€ä¹ˆå¼€å¯å¤šçº¿ç¨‹"></a>js æ€ä¹ˆå¼€å¯å¤šçº¿ç¨‹</h2><p>æµè§ˆå™¨çš„çº¿ç¨‹ä¸»è¦åŒ…æ‹¬ js å¼•æ“ï¼Œç•Œé¢æ¸²æŸ“çº¿ç¨‹ï¼Œäº‹ä»¶è§¦å‘çº¿ç¨‹ï¼Œhttp è¯·æ±‚çº¿ç¨‹ã€‚</p><p>å¯¹äº js æ¥è¯´ï¼Œä»–æ˜¯å•çº¿ç¨‹çš„ï¼Œæ‰€ä»¥ä¸€æ—¦æœ‰ä¸€ä¸ªä»»åŠ¡èŠ±è´¹äº†å¤§é‡çš„æ—¶é—´å°±ä¼šé€ æˆé˜»å¡ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œjs æä¾›äº†ä¸€ä¸ª worker ç±» ã€‚</p><p>ä½¿ç”¨è¿™ä¸ª worker ç±»ï¼Œä¼šå‘æµè§ˆå™¨ç”³è¯·ä¸€ä¸ªæ–°çš„çº¿ç¨‹ï¼Œç”¨äºç¼–å†™è€—æ—¶ä»£ç ã€‚ä¸”ä¸»çº¿ç¨‹å¯ä»¥å’Œå­çº¿ç¨‹è¿çº¿ï¼Œè¿™æ ·å°±å®ç°äº†çº¿ç¨‹ä¹‹é—´æ•°æ®çš„ä¼ é€’</p><p>ä¸è¿‡éœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼Œå°½é‡åªæŠŠè€—æ—¶çš„æ“ä½œäº¤ç»™ workerï¼Œå…¶ä»–çš„æ“ä½œäº¤ç»™ä¸»çº¿ç¨‹ï¼Œå› ä¸ºæ‰€æœ‰ js é‡Œé¢é›†æˆçš„å¯¹è±¡éƒ½åœ¨ä¸»çº¿ç¨‹ä¸­ã€‚worker è®¿é—®ä¼šæŠ¥é”™</p><h2 id="å¯¹-async-å’Œ-await-çš„ç†è§£"><a href="#å¯¹-async-å’Œ-await-çš„ç†è§£" class="headerlink" title="å¯¹ async å’Œ await çš„ç†è§£"></a>å¯¹ async å’Œ await çš„ç†è§£</h2><p>æœ¬è´¨æ˜¯ generator çš„è¯­æ³•ç³–ï¼Œasync ç”¨äºäº§ç”Ÿä¸€ä¸ª promiseï¼Œawait éœ€è¦ä¿è¯é¡¶éƒ¨æ˜¯ asyncã€‚</p><p>await å’Œ next çš„ä½œç”¨æ˜¯ä¸€æ ·çš„ï¼Œä»–ä¼šæš‚æ—¶è¿”è¿˜ä»£ç çš„æ§åˆ¶æƒï¼Œä¹Ÿå°±æ˜¯ä¼šè·³å‡ºå½“å‰ä»»åŠ¡åˆ°å¤–é¢ç»§ç»­æ‰§è¡ŒåŒæ­¥ä»»åŠ¡ç­‰ã€‚</p><p>ä»–è¿˜ä¼šä¿ç•™å †æ ˆä¸­çš„ä¸œè¥¿ï¼Œå‡å¦‚åœ¨ await è¿™ä¸€æ­¥æ“ä½œäº†å˜é‡ï¼Œä»–ä¼šä¿ç•™å˜é‡çš„å€¼ï¼Œ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">var</span> b = <span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">  a = a + (<span class="keyword">await</span> <span class="number">10</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;2&quot;</span>, a); <span class="comment">// -&gt; &#x27;2&#x27; 10 //å›åˆ°awiatä¹‹åçš„å†…å®¹ï¼Œä¿ç•™äº†å †æ ˆ æ‰€ä»¥aè¿˜æ˜¯0ï¼Œ0+10= 10</span></span><br><span class="line">  a = (<span class="keyword">await</span> <span class="number">10</span>) + a;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;3&quot;</span>, a); <span class="comment">// -&gt; &#x27;3&#x27; 20</span></span><br><span class="line">&#125;;</span><br><span class="line">b(); <span class="comment">//æ‰§è¡Œbä½†æ˜¯é‡åˆ°await è·³å‡º</span></span><br><span class="line">a++;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;1&quot;</span>, a); <span class="comment">// -&gt; &#x27;1&#x27; 1 //è·³å‡ºåæ‰§è¡ŒåŒæ­¥</span></span><br></pre></td></tr></table></figure><h2 id="async-await-å¯¹æ¯”-promise-çš„ä¼˜åŠ¿"><a href="#async-await-å¯¹æ¯”-promise-çš„ä¼˜åŠ¿" class="headerlink" title="async/await å¯¹æ¯” promise çš„ä¼˜åŠ¿"></a>async/await å¯¹æ¯” promise çš„ä¼˜åŠ¿</h2><p>ä¼˜åŠ¿åœ¨äºå¤„ç† then çš„é“¾å¼è°ƒç”¨ï¼Œèƒ½æ›´æ¸…æ™°çš„å†™å‡ºä»£ç ã€‚<br>ä½†æ˜¯ç¼ºç‚¹åœ¨äº await ä¼šé˜»å¡çº¿ç¨‹ï¼Œå¯èƒ½å¯¼è‡´æ€§èƒ½é—®é¢˜ã€‚</p><h2 id="async-await-å¦‚ä½•æ•è·å¼‚å¸¸"><a href="#async-await-å¦‚ä½•æ•è·å¼‚å¸¸" class="headerlink" title="async/await å¦‚ä½•æ•è·å¼‚å¸¸"></a>async/await å¦‚ä½•æ•è·å¼‚å¸¸</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> a = <span class="keyword">await</span> <span class="built_in">Promise</span>.reject(<span class="string">&quot;error&quot;</span>);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(error);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ€è¿‘æµè¡Œçš„ await-to-jsï¼Œè¿™ç§æ–¹å¼å¯èƒ½æ›´ä¸ºä¼˜é›…</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åŸæ¥çš„Promise</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params">num</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (num &lt; <span class="number">5</span>) &#123;</span><br><span class="line">      resolve(<span class="string">&quot;small&quot;</span> + num);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      reject(<span class="string">&quot;big&quot;</span> + num);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// toå‡½æ•°æ¥æ‰§è¡Œä¸€ä¸‹a()ï¼Œ toå‡½æ•°è¿”å›çš„æ˜¯ä¸€ä¸ªPromise</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">to</span>(<span class="params">P</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> P.then(<span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> [<span class="literal">null</span>, data];</span><br><span class="line">  &#125;).catch(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> [err, <span class="literal">undefined</span>]; <span class="comment">// å› ä¸ºæ²¡æœ‰ä¸»åŠ¨æŠ›å‡ºå¼‚å¸¸ï¼Œæ‰€ä»¥åç»­.thenæ˜¯fullfilledçš„çŠ¶æ€</span></span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">b</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> b1 = <span class="keyword">await</span> to(a(<span class="number">8</span>));</span><br><span class="line">  <span class="built_in">console</span>.log(b1); <span class="comment">// [ &#x27;big8&#x27;, undefined ]</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> b2 = <span class="keyword">await</span> to(a(<span class="number">3</span>));</span><br><span class="line">  <span class="built_in">console</span>.log(b2); <span class="comment">// [ null, &#x27;small3&#x27; ]</span></span><br><span class="line">&#125;</span><br><span class="line">b();</span><br></pre></td></tr></table></figure><h2 id="setTimeout-å’Œ-setInterval-å’Œ-requestAnimationFrame-å„æœ‰ä»€ä¹ˆç‰¹ç‚¹"><a href="#setTimeout-å’Œ-setInterval-å’Œ-requestAnimationFrame-å„æœ‰ä»€ä¹ˆç‰¹ç‚¹" class="headerlink" title="setTimeout å’Œ setInterval å’Œ requestAnimationFrame å„æœ‰ä»€ä¹ˆç‰¹ç‚¹"></a>setTimeout å’Œ setInterval å’Œ requestAnimationFrame å„æœ‰ä»€ä¹ˆç‰¹ç‚¹</h2><p>æ­£å¸¸çš„å±å¹•åˆ·æ–°ç‡æ˜¯ 60hzï¼Œç›¸å½“äº 16.7ms æ‰§è¡Œä¸€æ¬¡ï¼Œæˆ‘ä»¬ä¸ºäº†è¾¾åˆ°è¿™æ ·çš„æ•ˆæœï¼Œè¦è®¾ç½®æ›´æ–°æ—¶é—´ä¸º 1000/60ã€‚ä½†æ˜¯ settimeout å’Œ setInterval å§‹ç»ˆæ˜¯åŸºäº js å¼•æ“çš„ï¼Œä¹Ÿå°±ä¸å¯é¿å…é‡åˆ°é˜»å¡ï¼Œå°±é€ æˆäº†å¹¶ä¸æ˜¯æ¯ä¸€æ¬¡å¾ªç¯éƒ½æ˜¯ç›¸åŒçš„æ—¶é—´é—´éš”</p><p>requestAnimationFrame æ˜¯åŸºäº GUI å¼•æ“çš„ï¼Œä»–çš„åˆ·æ–°æ—¶é—´æ˜¯å’Œç³»ç»Ÿçš„åˆ·æ–°ç‡åŒæ­¥çš„ï¼Œå¦‚æœæ˜¯ 60HZ é‚£ä¹ˆå°±æ˜¯ 16.7ms æ‰§è¡Œä¸€æ¬¡ã€‚è¿™æ ·å°±èƒ½é˜²æ­¢æ‰å¸§è¡Œä¸ºã€‚ä¸”ç”±äº setTimeout å®ç°çš„åŠ¨ç”»ï¼Œåœ¨æµè§ˆå™¨éšè—æˆ–è€…æœ€å°åŒ–çš„æ—¶å€™ä»ç„¶åœ¨å¤„äºæ¿€æ´»çŠ¶æ€(è™½ç„¶å·²ç»æœ‰æµè§ˆå™¨å¯¹å®šæ—¶å™¨åšäº†ä¼˜åŒ–)ï¼Œè€Œ requestAnimationFrame åœ¨é¡µé¢æœªæ¿€æ´»çš„æƒ…å†µä¸‹ä¼šåœæ­¢ã€‚èŠ‚çº¦äº† CPU å¼€é”€</p><h2 id="ä»€ä¹ˆæ˜¯åƒåœ¾å›æ”¶æœºåˆ¶"><a href="#ä»€ä¹ˆæ˜¯åƒåœ¾å›æ”¶æœºåˆ¶" class="headerlink" title="ä»€ä¹ˆæ˜¯åƒåœ¾å›æ”¶æœºåˆ¶?"></a>ä»€ä¹ˆæ˜¯åƒåœ¾å›æ”¶æœºåˆ¶?</h2><h2 id="éå†å¯¹è±¡æœ‰å‡ ç§æ–¹æ³•"><a href="#éå†å¯¹è±¡æœ‰å‡ ç§æ–¹æ³•" class="headerlink" title="éå†å¯¹è±¡æœ‰å‡ ç§æ–¹æ³•"></a>éå†å¯¹è±¡æœ‰å‡ ç§æ–¹æ³•</h2><p>7 ç§<br>forin<br><code>Object.keys()ã€Object.values()ã€Object.entries()</code><br><code>Object.getOwnPropertyNames()</code><br><code>Object.getOwnPropertySymbols()</code><br><code>Reflect.ownKeys()</code></p><h2 id="ä»€ä¹ˆæ–¹æ³•åªè¿”å›å¯¹è±¡æœ¬èº«çš„å±æ€§"><a href="#ä»€ä¹ˆæ–¹æ³•åªè¿”å›å¯¹è±¡æœ¬èº«çš„å±æ€§" class="headerlink" title="ä»€ä¹ˆæ–¹æ³•åªè¿”å›å¯¹è±¡æœ¬èº«çš„å±æ€§"></a>ä»€ä¹ˆæ–¹æ³•åªè¿”å›å¯¹è±¡æœ¬èº«çš„å±æ€§</h2><p><code>Object.keys()ã€Object.values()ã€Object.entries()</code><br><code>Object.getOwnPropertyNames()</code><br><code>Object.getOwnPropertySymbols()</code><br><code>Reflect.ownKeys()</code></p><h2 id="ä»€ä¹ˆæ–¹æ³•èƒ½è¿”å›ä¸å¯æšä¸¾çš„å±æ€§"><a href="#ä»€ä¹ˆæ–¹æ³•èƒ½è¿”å›ä¸å¯æšä¸¾çš„å±æ€§" class="headerlink" title="ä»€ä¹ˆæ–¹æ³•èƒ½è¿”å›ä¸å¯æšä¸¾çš„å±æ€§"></a>ä»€ä¹ˆæ–¹æ³•èƒ½è¿”å›ä¸å¯æšä¸¾çš„å±æ€§</h2><p><code>Object.getOwnPropertySymbols()</code><br><code>Reflect.ownKeys()</code></p><h2 id="é¢å‘å¯¹è±¡çš„æ€æƒ³åŒ…æ‹¬"><a href="#é¢å‘å¯¹è±¡çš„æ€æƒ³åŒ…æ‹¬" class="headerlink" title="é¢å‘å¯¹è±¡çš„æ€æƒ³åŒ…æ‹¬"></a>é¢å‘å¯¹è±¡çš„æ€æƒ³åŒ…æ‹¬</h2><p>ç»§æ‰¿ å°è£… å¤šæ€ æŠ½è±¡</p><h2 id="æ·±æµ…æ‹·è´"><a href="#æ·±æµ…æ‹·è´" class="headerlink" title="æ·±æµ…æ‹·è´"></a>æ·±æµ…æ‹·è´</h2><h2 id="JSON-parse-JSON-stringfy-æœ‰ä»€ä¹ˆé—®é¢˜"><a href="#JSON-parse-JSON-stringfy-æœ‰ä»€ä¹ˆé—®é¢˜" class="headerlink" title="JSON.parse(JSON.stringfy())æœ‰ä»€ä¹ˆé—®é¢˜"></a>JSON.parse(JSON.stringfy())æœ‰ä»€ä¹ˆé—®é¢˜</h2><p>ç¼ºç‚¹ï¼šä¸èƒ½æ‹·è´<code>undefined function æ­£åˆ™ Errorå¯¹è±¡</code></p><h2 id="æ·±æ‹·è´å®ç°ç»†èŠ‚-å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯æ­£åˆ™å¯¹è±¡"><a href="#æ·±æ‹·è´å®ç°ç»†èŠ‚-å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯æ­£åˆ™å¯¹è±¡" class="headerlink" title="æ·±æ‹·è´å®ç°ç»†èŠ‚ å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯æ­£åˆ™å¯¹è±¡"></a>æ·±æ‹·è´å®ç°ç»†èŠ‚ å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯æ­£åˆ™å¯¹è±¡</h2><h2 id="æ·±æ‹·è´å®ç°ç»†èŠ‚-å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯-Date-å¯¹è±¡"><a href="#æ·±æ‹·è´å®ç°ç»†èŠ‚-å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯-Date-å¯¹è±¡" class="headerlink" title="æ·±æ‹·è´å®ç°ç»†èŠ‚ å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯ Date å¯¹è±¡"></a>æ·±æ‹·è´å®ç°ç»†èŠ‚ å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯ Date å¯¹è±¡</h2><h2 id="map-å’Œ-object-çš„åŒºåˆ«"><a href="#map-å’Œ-object-çš„åŒºåˆ«" class="headerlink" title="map å’Œ object çš„åŒºåˆ«"></a>map å’Œ object çš„åŒºåˆ«</h2><p>è®¿é—®ï¼šmap é€šè¿‡ getkey è®¿é—® object ç›´æ¥ç‚¹æˆ–è€…æ‹¬å·<br>èµ‹å€¼ map é€šè¿‡ set èµ‹å€¼ æˆ–è€…ç›´æ¥æ•°ç»„åµŒå¥—æ•°ç»„èµ‹å€¼</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> showContents = <span class="keyword">new</span> <span class="built_in">Map</span>([</span><br><span class="line">  [<span class="string">&quot;title&quot;</span>, <span class="string">&quot;æ ‡é¢˜&quot;</span>],</span><br><span class="line">  [<span class="string">&quot;tags&quot;</span>, <span class="string">&quot;æ ‡ç­¾&quot;</span>],</span><br><span class="line">  [<span class="string">&quot;categories&quot;</span>, <span class="string">&quot;ç›®å½•&quot;</span>],</span><br><span class="line">  [<span class="string">&quot;date&quot;</span>, <span class="string">&quot;åˆ›å»ºæ—¥æœŸ&quot;</span>],</span><br><span class="line">  [<span class="string">&quot;updateTime&quot;</span>, <span class="string">&quot;æœ€åæ›´æ–°æ—¥æœŸ&quot;</span>],</span><br><span class="line">]);</span><br></pre></td></tr></table></figure><p>åˆ é™¤ map é€šè¿‡ delete å»åˆ é™¤ åˆ æˆåŠŸ true åä¹‹ falseï¼Œä¸å­˜åœ¨ä¹Ÿæ˜¯ false<br>ä½† obj çš„è¯ åˆ é™¤ä¸å­˜åœ¨çš„å±æ€§ä¹Ÿè¿”å› true<br>å¤§å°ï¼šmap é€šè¿‡ size è®¿é—®å…ƒç´ ä¸ªæ•°ï¼Œobj éœ€è¦é€šè¿‡<code>Object.keys</code>çš„è½¬æ¢æ‰èƒ½å°†å…¶è½¬æ¢ä¸ºæ•°ç»„ï¼Œå†é€šè¿‡æ•°ç»„çš„<code>length</code>æ–¹æ³•å»è·å¾—æˆ–è€…ä½¿ç”¨<code>Reflect.ownKeys(obj)</code>ä¹Ÿå¯ä»¥è·å–åˆ° keys çš„é›†åˆ</p><p>è¿­ä»£ï¼šmap æœ‰è¿­ä»£å™¨ï¼Œå¯ä»¥ç›´æ¥éå†ã€‚obj æ²¡æœ‰ï¼Œä½†å¯ä»¥é€šè¿‡ forin ä¸è¿‡æ˜¯æ— åºçš„</p><h2 id="å¸¸ç”¨æ­£åˆ™è¡¨è¾¾å¼æœ‰å“ªäº›"><a href="#å¸¸ç”¨æ­£åˆ™è¡¨è¾¾å¼æœ‰å“ªäº›" class="headerlink" title="å¸¸ç”¨æ­£åˆ™è¡¨è¾¾å¼æœ‰å“ªäº›"></a>å¸¸ç”¨æ­£åˆ™è¡¨è¾¾å¼æœ‰å“ªäº›</h2><h2 id="å¯¹-json-çš„ç†è§£"><a href="#å¯¹-json-çš„ç†è§£" class="headerlink" title="å¯¹ json çš„ç†è§£"></a>å¯¹ json çš„ç†è§£</h2><p>JSON æ˜¯ä¸€ç§ç»“æ„åŒ–æ•°æ®ï¼Œå®ƒæ˜¯ä¸€ç§æ•°æ®æ ¼å¼<br>json å¿…é¡»ç”¨<code>&#123;&#125;</code>åŒ…è£¹ï¼Œå†…éƒ¨åªèƒ½åŒå¼•å·ã€‚æ²¡æœ‰åˆ†å·<br>æ–¹æ³•ï¼š<br><code>JSON.stringify()</code>; æŠŠ js å¯¹è±¡åºåˆ—åŒ–ä¸º json å­—ç¬¦ä¸²</p><p><code>JSON.parse()</code>; æŠŠ json å­—ç¬¦ä¸²è§£æä¸ºåŸç”Ÿ js å€¼</p><h2 id="js-è„šæœ¬å»¶è¿ŸåŠ è½½çš„æ–¹å¼æœ‰å“ªäº›"><a href="#js-è„šæœ¬å»¶è¿ŸåŠ è½½çš„æ–¹å¼æœ‰å“ªäº›" class="headerlink" title="js è„šæœ¬å»¶è¿ŸåŠ è½½çš„æ–¹å¼æœ‰å“ªäº›"></a>js è„šæœ¬å»¶è¿ŸåŠ è½½çš„æ–¹å¼æœ‰å“ªäº›</h2><p>1:defer å±æ€§,async å±æ€§<br>2:åŠ¨æ€åˆ›å»º DOM æ–¹å¼<br>3:ä½¿ç”¨ jQuery çš„ getScript æ–¹æ³•<br>4:ä½¿ç”¨ setTimeout å»¶è¿Ÿæ–¹æ³•<br>5:è®© JS æœ€ååŠ è½½ æ”¾åˆ°é¡µé¢åº•éƒ¨</p><h2 id="Unicodeï¼ŒUTF-8ï¼ŒUTF-16ï¼ŒUTF-32-çš„åŒºåˆ«"><a href="#Unicodeï¼ŒUTF-8ï¼ŒUTF-16ï¼ŒUTF-32-çš„åŒºåˆ«" class="headerlink" title="Unicodeï¼ŒUTF-8ï¼ŒUTF-16ï¼ŒUTF-32 çš„åŒºåˆ«"></a>Unicodeï¼ŒUTF-8ï¼ŒUTF-16ï¼ŒUTF-32 çš„åŒºåˆ«</h2><h2 id="å¸¸è§ä½è¿ç®—ç¬¦åŠå…¶è¿ç®—è§„åˆ™"><a href="#å¸¸è§ä½è¿ç®—ç¬¦åŠå…¶è¿ç®—è§„åˆ™" class="headerlink" title="å¸¸è§ä½è¿ç®—ç¬¦åŠå…¶è¿ç®—è§„åˆ™"></a>å¸¸è§ä½è¿ç®—ç¬¦åŠå…¶è¿ç®—è§„åˆ™</h2><h2 id="ä»€ä¹ˆæ˜¯-DOM-å’Œ-BOM"><a href="#ä»€ä¹ˆæ˜¯-DOM-å’Œ-BOM" class="headerlink" title="ä»€ä¹ˆæ˜¯ DOM å’Œ BOM"></a>ä»€ä¹ˆæ˜¯ DOM å’Œ BOM</h2><p>DOM (Document )ï¼Œç®€ç§°æ–‡æ¡£å¯¹è±¡æ¨¡å‹ã€‚é€šè¿‡åˆ›å»ºæ ‘æ¥è¡¨ç¤ºæ–‡æ¡£ï¼Œæè¿°äº†å¤„ç†ç½‘é¡µå†…å®¹çš„æ–¹æ³•å’Œæ¥å£ã€‚ç”¨ DOM API å¯ä»¥è½»æ¾åœ°åˆ é™¤ã€æ·»åŠ å’Œæ›¿æ¢èŠ‚ç‚¹ã€‚</p><p>BOM (browser object model)ï¼Œç®€ç§°æµè§ˆå™¨å¯¹è±¡æ¨¡å‹ã€‚æè¿°äº†ä¸æµè§ˆå™¨è¿›è¡Œäº¤äº’çš„æ–¹æ³•å’Œæ¥å£</p><p>BOM çš„æ ¸å¿ƒæ˜¯ windowï¼Œè€Œ window å¯¹è±¡åˆå…·æœ‰åŒé‡è§’è‰²ï¼Œå®ƒæ—¢æ˜¯é€šè¿‡ js è®¿é—®æµè§ˆå™¨çª—å£çš„ä¸€ä¸ªæ¥å£ï¼Œåˆæ˜¯ä¸€ä¸ª Globalï¼ˆå…¨å±€ï¼‰å¯¹è±¡ã€‚è¿™æ„å‘³ç€åœ¨ç½‘é¡µä¸­å®šä¹‰çš„ä»»ä½•å¯¹è±¡ï¼Œå˜é‡å’Œå‡½æ•°ï¼Œéƒ½ä»¥ window ä½œä¸ºå…¶ global å¯¹è±¡ã€‚</p><h2 id="é‚£ä½ çŸ¥é“æœ‰ä»€ä¹ˆ-dom-æ–¹æ³•å’Œ-bom-æ–¹æ³•å—"><a href="#é‚£ä½ çŸ¥é“æœ‰ä»€ä¹ˆ-dom-æ–¹æ³•å’Œ-bom-æ–¹æ³•å—" class="headerlink" title="é‚£ä½ çŸ¥é“æœ‰ä»€ä¹ˆ dom æ–¹æ³•å’Œ bom æ–¹æ³•å—"></a>é‚£ä½ çŸ¥é“æœ‰ä»€ä¹ˆ dom æ–¹æ³•å’Œ bom æ–¹æ³•å—</h2><p>domï¼š<br>è®¿é—®èŠ‚ç‚¹ï¼š<br><code>document.getElementById( &quot;ID&quot; )</code> é€šè¿‡æŒ‡å®šçš„ ID æ¥è¿”å›å…ƒç´ <br><code>document.getElementByName( &quot;name&quot; )</code> è·å–æ‰€æœ‰ name ç‰¹æ€§ç­‰äºæŒ‡å®šå€¼çš„å…ƒç´ <br><code>document.getElementsByTagName( &quot;p&quot; )</code> ä½¿ç”¨æŒ‡å®šçš„æ ‡ç­¾åè¿”å›æ‰€æœ‰çš„å…ƒç´ åˆ—è¡¨<br><code>document.documentElement è¿”å›å­˜åœ¨äº XML</code>ä»¥åŠ HTML æ–‡æ¡£ä¸­çš„æ–‡æ¡£æ ¹èŠ‚ç‚¹</p><p>èŠ‚ç‚¹çš„æ“ä½œï¼š<br><code>creatElement(element)</code> åˆ›å»ºä¸€ä¸ªæ–°çš„å…ƒç´ èŠ‚ç‚¹<br><code>appendChild()</code> åœ¨èŠ‚ç‚¹åˆ—è¡¨å æ·»åŠ ä¸€ä¸ªæ–°çš„å­èŠ‚ç‚¹<br><code>removeChild()</code> ä»ä¸€ä¸ªç»™å®šå…ƒç´ ä¸­åˆ é™¤å­èŠ‚ç‚¹</p><p>bomï¼š<br><code>window.close();</code>//å…³é—­çª—å£<br><code>window.alert( &quot;message&quot; );</code> //å¼¹å‡ºä¸€ä¸ªå…·æœ‰ OK æŒ‰é’®çš„ç³»ç»Ÿæ¶ˆæ¯æ¡†ï¼Œæ˜¾ç¤ºæŒ‡å®šçš„æ–‡æœ¬</p><h2 id="ç±»æ•°ç»„å¦‚ä½•è½¬æ¢æˆæ•°ç»„"><a href="#ç±»æ•°ç»„å¦‚ä½•è½¬æ¢æˆæ•°ç»„" class="headerlink" title="ç±»æ•°ç»„å¦‚ä½•è½¬æ¢æˆæ•°ç»„"></a>ç±»æ•°ç»„å¦‚ä½•è½¬æ¢æˆæ•°ç»„</h2><p>a. ä½¿ç”¨ Array.from()<br>b. ä½¿ç”¨ Array.prototype.slice.call()<br>c. ä½¿ç”¨ Array.prototype.forEach()è¿›è¡Œå±æ€§éå†å¹¶ç»„æˆæ–°çš„æ•°ç»„</p><h2 id="å¯¹-ajax-çš„ç†è§£-å®ç°ä¸€ä¸ª-ajax"><a href="#å¯¹-ajax-çš„ç†è§£-å®ç°ä¸€ä¸ª-ajax" class="headerlink" title="å¯¹ ajax çš„ç†è§£ å®ç°ä¸€ä¸ª ajax"></a>å¯¹ ajax çš„ç†è§£ å®ç°ä¸€ä¸ª ajax</h2><p>Ajax çš„åŸç†ç®€å•æ¥è¯´æ˜¯åœ¨ç”¨æˆ·å’ŒæœåŠ¡å™¨ä¹‹é—´åŠ äº†â€”ä¸ªä¸­é—´å±‚(AJAX å¼•æ“)ï¼Œé€šè¿‡ XmlHttpRequest å¯¹è±¡æ¥å‘æœåŠ¡å™¨å‘å¼‚æ­¥è¯·æ±‚ï¼Œä»æœåŠ¡å™¨è·å¾—æ•°æ®ï¼Œç„¶åç”¨ javascript æ¥æ“ä½œ DOM è€Œæ›´æ–°é¡µé¢ã€‚ä½¿ç”¨æˆ·æ“ä½œä¸æœåŠ¡å™¨å“åº”å¼‚æ­¥åŒ–ã€‚è¿™å…¶ä¸­æœ€å…³é”®çš„ä¸€æ­¥å°±æ˜¯ä»æœåŠ¡å™¨è·å¾—è¯·æ±‚æ•°æ®</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** 1. åˆ›å»ºè¿æ¥ **/</span></span><br><span class="line"><span class="keyword">var</span> xhr = <span class="literal">null</span>;</span><br><span class="line">xhr = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line"><span class="comment">/** 2. è¿æ¥æœåŠ¡å™¨ **/</span></span><br><span class="line">xhr.open(<span class="string">&quot;get&quot;</span>, url, <span class="literal">true</span>);</span><br><span class="line"><span class="comment">/** 3. å‘é€è¯·æ±‚ **/</span></span><br><span class="line">xhr.send(<span class="literal">null</span>);</span><br><span class="line"><span class="comment">/** 4. æ¥å—è¯·æ±‚ **/</span></span><br><span class="line">xhr.onreadystatechange = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (xhr.readyState == <span class="number">4</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (xhr.status == <span class="number">200</span>) &#123;</span><br><span class="line">      success(xhr.responseText);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">/** false **/</span></span><br><span class="line">      fail &amp;&amp; fail(xhr.status);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ajax çš„ä¼˜ç¼ºç‚¹<br>ä¼˜ç‚¹ï¼š</p><ul><li>é€šè¿‡å¼‚æ­¥æ¨¡å¼ï¼Œæå‡äº†ç”¨æˆ·ä½“éªŒ.</li><li>ä¼˜åŒ–äº†æµè§ˆå™¨å’ŒæœåŠ¡å™¨ä¹‹é—´çš„ä¼ è¾“ï¼Œå‡å°‘ä¸å¿…è¦çš„æ•°æ®å¾€è¿”ï¼Œå‡å°‘äº†å¸¦å®½å ç”¨.</li><li>Ajax åœ¨å®¢æˆ·ç«¯è¿è¡Œï¼Œæ‰¿æ‹…äº†ä¸€éƒ¨åˆ†æœ¬æ¥ç”±æœåŠ¡å™¨æ‰¿æ‹…çš„å·¥ä½œï¼Œå‡å°‘äº†å¤§ç”¨æˆ·é‡ä¸‹çš„æœåŠ¡å™¨è´Ÿè½½ã€‚</li><li>Ajax å¯ä»¥å®ç°åŠ¨æ€ä¸åˆ·æ–°ï¼ˆå±€éƒ¨åˆ·æ–°ï¼‰<br>ç¼ºç‚¹ï¼š</li><li>å®‰å…¨é—®é¢˜ AJAX æš´éœ²äº†ä¸æœåŠ¡å™¨äº¤äº’çš„ç»†èŠ‚ã€‚</li><li>å¯¹æœç´¢å¼•æ“çš„æ”¯æŒæ¯”è¾ƒå¼±ã€‚</li><li>ä¸å®¹æ˜“è°ƒè¯•ã€‚</li></ul><h2 id="ä»€ä¹ˆæ˜¯å°¾è°ƒç”¨ï¼Œæœ‰ä»€ä¹ˆå¥½å¤„"><a href="#ä»€ä¹ˆæ˜¯å°¾è°ƒç”¨ï¼Œæœ‰ä»€ä¹ˆå¥½å¤„" class="headerlink" title="ä»€ä¹ˆæ˜¯å°¾è°ƒç”¨ï¼Œæœ‰ä»€ä¹ˆå¥½å¤„"></a>ä»€ä¹ˆæ˜¯å°¾è°ƒç”¨ï¼Œæœ‰ä»€ä¹ˆå¥½å¤„</h2><p>å°¾è°ƒç”¨ï¼ˆTail Callï¼‰æ˜¯å‡½æ•°å¼ç¼–ç¨‹çš„ä¸€ä¸ªé‡è¦æ¦‚å¿µï¼Œæœ¬èº«éå¸¸ç®€å•ï¼Œä¸€å¥è¯å°±èƒ½è¯´æ¸…æ¥šï¼Œå°±æ˜¯æŒ‡æŸä¸ªå‡½æ•°çš„æœ€åä¸€æ­¥æ˜¯è¿”å›è°ƒç”¨å¦ä¸€ä¸ªå‡½æ•°çš„æ‰§è¡Œç»“æœã€‚</p><p>æ³¨æ„ ç»“å°¾è¿”å›å¦å¤–ä¸€ä¸ªå‡½æ•°ä¹‹åæ²¡åˆ«çš„æ“ä½œæ‰å«å°¾è°ƒç”¨</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> g(x);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æƒ…å†µ1</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> y = g(x);</span><br><span class="line">  <span class="keyword">return</span> y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æƒ…å†µ2</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> g(x) + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æƒ…å†µ3</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line">  g(x);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æƒ…å†µä¸€æ˜¯è°ƒç”¨å‡½æ•° g ä¹‹åï¼Œè¿˜æœ‰èµ‹å€¼æ“ä½œï¼Œæ‰€ä»¥ä¸å±äºå°¾è°ƒç”¨ï¼Œå³ä½¿è¯­ä¹‰å®Œå…¨ä¸€æ ·ã€‚<br>æƒ…å†µäºŒä¹Ÿå±äºè°ƒç”¨åè¿˜æœ‰æ“ä½œï¼Œå³ä½¿å†™åœ¨ä¸€è¡Œå†…ã€‚<br>æƒ…å†µä¸‰ç­‰ä»·äº return undefined<br>å±äºå°¾è°ƒç”¨çš„ç¤ºä¾‹</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (x &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> g(x)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> b(x)</span><br></pre></td></tr></table></figure><p>å°¾è°ƒç”¨ä¸ä¸€å®šå‡ºç°åœ¨å‡½æ•°å°¾éƒ¨ï¼Œåªè¦æ˜¯æœ€åä¸€æ­¥æ“ä½œå³å¯ã€‚ä¸Šé¢ä»£ç ä¸­ï¼Œå‡½æ•° g å’Œ b éƒ½å±äºå°¾è°ƒç”¨ï¼Œå› ä¸ºå®ƒä»¬éƒ½æ˜¯å‡½æ•° f çš„æœ€åä¸€æ­¥æ“ä½œã€‚</p><p>å°¾è°ƒç”¨çš„æƒ…å†µä¸‹ï¼Œæ‰§è¡Œæ ˆä¸­åªæœ‰å½“å‰è°ƒç”¨å‡½æ•°ï¼Œå–ä»£äº†å¤–å±‚å‡½æ•°ï¼Œè¿™å°±æ˜¯å°¾è°ƒç”¨çš„ä¼˜åŒ–ã€‚<br>é“¾æ¥:<a href="https://blog.csdn.net/weixin_45374451/article/details/106495588?spm=1001.2101.3001.6650.1&amp;utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7ECTRLIST%7ERate-1-106495588-blog-123396329.pc_relevant_multi_platform_whitelistv6&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7ECTRLIST%7ERate-1-106495588-blog-123396329.pc_relevant_multi_platform_whitelistv6&amp;utm_relevant_index=2">å°¾è°ƒç”¨</a></p><h2 id="CJS-ES"><a href="#CJS-ES" class="headerlink" title="CJS ES"></a>CJS ES</h2><p>è¿™é‡Œçš„çŸ¥è¯†å¯ä»¥è”ç³» bundless</p><p>cjs æ˜¯ node çš„æ ¼å¼ es æ˜¯ç°ä»£æµè§ˆå™¨æ”¯æŒçš„æ ¼å¼<br>cjs æ˜¯è¿è¡Œæ—¶ å› ä¸ºä»–åŸºäº node ä¼ é€’çš„æ˜¯å€¼çš„æ‹·è´<br>es æ˜¯ç¼–è¯‘æ—¶ ä¼ é€’çš„æ˜¯å€¼çš„å¼•ç”¨</p><p>es æ”¯æŒ tree shaking</p><p>bundless çš„è¿‡ç¨‹å…¶å®å°±æ˜¯æŠŠ cjs è½¬ es çš„è¿‡ç¨‹</p><h2 id="åŠ¨æ€ç±»å‹è¯­è¨€å’Œé™æ€ç±»å‹è¯­è¨€çš„åŒºåˆ«"><a href="#åŠ¨æ€ç±»å‹è¯­è¨€å’Œé™æ€ç±»å‹è¯­è¨€çš„åŒºåˆ«" class="headerlink" title="åŠ¨æ€ç±»å‹è¯­è¨€å’Œé™æ€ç±»å‹è¯­è¨€çš„åŒºåˆ«"></a>åŠ¨æ€ç±»å‹è¯­è¨€å’Œé™æ€ç±»å‹è¯­è¨€çš„åŒºåˆ«</h2><p>é€šå¸¸æˆ‘ä»¬æ‰€è¯´çš„åŠ¨æ€è¯­è¨€ã€é™æ€è¯­è¨€æ˜¯æŒ‡åŠ¨æ€ç±»å‹è¯­è¨€å’Œé™æ€ç±»å‹è¯­è¨€ã€‚</p><p>åŠ¨æ€ç±»å‹è¯­è¨€ï¼šåŠ¨æ€ç±»å‹è¯­è¨€æ˜¯æŒ‡åœ¨è¿è¡ŒæœŸé—´æ‰å»åšæ•°æ®ç±»å‹æ£€æŸ¥çš„è¯­è¨€ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨ç”¨åŠ¨æ€ç±»å‹çš„è¯­è¨€ç¼–ç¨‹æ—¶ï¼Œæ°¸è¿œä¹Ÿä¸ç”¨ç»™ä»»ä½•å˜é‡æŒ‡å®šæ•°æ®ç±»å‹ï¼Œè¯¥è¯­è¨€ä¼šåœ¨ä½ ç¬¬ä¸€æ¬¡èµ‹å€¼ç»™å˜é‡æ—¶ï¼Œåœ¨å†…éƒ¨å°†æ•°æ®ç±»å‹è®°å½•ä¸‹æ¥ã€‚Python å’Œ Ruby å°±æ˜¯ä¸€ç§å…¸å‹çš„åŠ¨æ€ç±»å‹è¯­è¨€ï¼Œå…¶ä»–çš„å„ç§è„šæœ¬è¯­è¨€å¦‚ VBScript ä¹Ÿå¤šå°‘å±äºåŠ¨æ€ç±»å‹è¯­è¨€ã€‚</p><p>é™æ€ç±»å‹è¯­è¨€ï¼šé™æ€ç±»å‹è¯­è¨€ä¸åŠ¨æ€ç±»å‹è¯­è¨€åˆšå¥½ç›¸åï¼Œå®ƒçš„æ•°æ®ç±»å‹æ˜¯åœ¨ç¼–è¯‘å…¶é—´æ£€æŸ¥çš„ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨å†™ç¨‹åºæ—¶è¦å£°æ˜æ‰€æœ‰å˜é‡çš„æ•°æ®ç±»å‹ï¼ŒC/C++æ˜¯é™æ€ç±»å‹è¯­è¨€çš„å…¸å‹ä»£è¡¨ï¼Œå…¶ä»–çš„é™æ€ç±»å‹è¯­è¨€è¿˜æœ‰ C#ã€JAVA ç­‰ã€‚</p><p>å¯¹äºåŠ¨æ€è¯­è¨€ä¸é™æ€è¯­è¨€çš„åŒºåˆ†ï¼Œå¥—ç”¨ä¸€å¥æµè¡Œçš„è¯å°±æ˜¯ï¼šStaTIc typing when possibleï¼Œ dynamictyping when neededã€‚</p><h2 id="å¼ºç±»å‹è¯­è¨€å’Œå¼±ç±»å‹è¯­è¨€çš„åŒºåˆ«"><a href="#å¼ºç±»å‹è¯­è¨€å’Œå¼±ç±»å‹è¯­è¨€çš„åŒºåˆ«" class="headerlink" title="å¼ºç±»å‹è¯­è¨€å’Œå¼±ç±»å‹è¯­è¨€çš„åŒºåˆ«"></a>å¼ºç±»å‹è¯­è¨€å’Œå¼±ç±»å‹è¯­è¨€çš„åŒºåˆ«</h2><p>å¼ºç±»å‹å®šä¹‰è¯­è¨€ï¼šå¼ºåˆ¶æ•°æ®ç±»å‹å®šä¹‰çš„è¯­è¨€ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€æ—¦ä¸€ä¸ªå˜é‡è¢«æŒ‡å®šäº†æŸä¸ªæ•°æ®ç±»å‹ï¼Œå¦‚æœä¸ç»è¿‡å¼ºåˆ¶è½¬æ¢ï¼Œé‚£ä¹ˆå®ƒå°±æ°¸è¿œæ˜¯è¿™ä¸ªæ•°æ®ç±»å‹äº†ã€‚ä¸¾ä¸ªä¾‹å­ï¼šå¦‚æœä½ å®šä¹‰äº†ä¸€ä¸ªæ•´å‹å˜é‡ aï¼Œé‚£ä¹ˆç¨‹åºæ ¹æœ¬ä¸å¯èƒ½å°† a å½“ä½œå­—ç¬¦ä¸²ç±»å‹å¤„ç†ã€‚å¼ºç±»å‹å®šä¹‰è¯­è¨€æ˜¯ç±»å‹å®‰å…¨çš„è¯­è¨€ã€‚</p><p>å¼±ç±»å‹å®šä¹‰è¯­è¨€ï¼šæ•°æ®ç±»å‹å¯ä»¥è¢«å¿½ç•¥çš„è¯­è¨€ã€‚å®ƒä¸å¼ºç±»å‹å®šä¹‰è¯­è¨€ç›¸åï¼Œ ä¸€ä¸ªå˜é‡å¯ä»¥èµ‹ä¸åŒæ•°æ®ç±»å‹çš„å€¼ã€‚</p><p>å¼ºç±»å‹å®šä¹‰è¯­è¨€åœ¨é€Ÿåº¦ä¸Šå¯èƒ½ç•¥é€Šè‰²äºå¼±ç±»å‹å®šä¹‰è¯­è¨€ï¼Œä½†æ˜¯å¼ºç±»å‹å®šä¹‰è¯­è¨€å¸¦æ¥çš„ä¸¥è°¨æ€§èƒ½å¤Ÿæœ‰æ•ˆçš„é¿å…è®¸å¤šé”™è¯¯ã€‚å¦å¤–ï¼Œâ€œè¿™é—¨è¯­è¨€æ˜¯ä¸æ˜¯åŠ¨æ€è¯­è¨€â€ä¸â€œè¿™é—¨è¯­è¨€æ˜¯å¦ç±»å‹å®‰å…¨â€ä¹‹é—´æ˜¯å®Œå…¨æ²¡æœ‰è”ç³»çš„ï¼</p><p>ä¾‹å¦‚ï¼šPython æ˜¯åŠ¨æ€è¯­è¨€ï¼Œæ˜¯å¼ºç±»å‹å®šä¹‰è¯­è¨€ï¼ˆç±»å‹å®‰å…¨çš„è¯­è¨€ï¼‰; VBScript æ˜¯åŠ¨æ€è¯­è¨€ï¼Œæ˜¯å¼±ç±»å‹å®šä¹‰è¯­è¨€ï¼ˆç±»å‹ä¸å®‰å…¨çš„è¯­è¨€ï¼‰;JAVA æ˜¯é™æ€è¯­è¨€ï¼Œæ˜¯å¼ºç±»å‹å®šä¹‰è¯­è¨€ï¼ˆç±»å‹å®‰å…¨çš„è¯­è¨€ï¼‰ã€‚</p><h2 id="è§£é‡Šæ€§è¯­è¨€å’Œç¼–è¯‘å‹è¯­è¨€çš„åŒºåˆ«"><a href="#è§£é‡Šæ€§è¯­è¨€å’Œç¼–è¯‘å‹è¯­è¨€çš„åŒºåˆ«" class="headerlink" title="è§£é‡Šæ€§è¯­è¨€å’Œç¼–è¯‘å‹è¯­è¨€çš„åŒºåˆ«"></a>è§£é‡Šæ€§è¯­è¨€å’Œç¼–è¯‘å‹è¯­è¨€çš„åŒºåˆ«</h2><p>ç¼–è¯‘å‹è¯­è¨€ï¼šç¼–è¯‘å‹è¯­è¨€åœ¨æ‰§è¡Œä¹‹å‰è¦å…ˆç»è¿‡ç¼–è¯‘è¿‡ç¨‹ï¼Œç¼–è¯‘æˆä¸ºä¸€ä¸ªå¯æ‰§è¡Œçš„æœºå™¨è¯­è¨€çš„æ–‡ä»¶ï¼Œæ¯”å¦‚ exeã€‚å› ä¸ºç¿»è¯‘åªåšä¸€éï¼Œä»¥åéƒ½ä¸éœ€è¦ç¿»è¯‘ï¼Œæ‰€ä»¥æ‰§è¡Œæ•ˆç‡é«˜ã€‚</p><p>è§£é‡Šå‹è¯­è¨€ï¼šè§£é‡Šæ€§è¯­è¨€ç¼–å†™çš„ç¨‹åºä¸è¿›è¡Œé¢„å…ˆç¼–è¯‘ï¼Œä»¥æ–‡æœ¬æ–¹å¼å­˜å‚¨ç¨‹åºä»£ç ã€‚æ‰§è¡Œæ—¶æ‰ç¿»è¯‘æ‰§è¡Œã€‚ç¨‹åºæ¯æ‰§è¡Œä¸€æ¬¡å°±è¦ç¿»è¯‘ä¸€éã€‚</p><h2 id="fetchï¼Œå®ç°ä¸€ä¸ª-fetch"><a href="#fetchï¼Œå®ç°ä¸€ä¸ª-fetch" class="headerlink" title="fetchï¼Œå®ç°ä¸€ä¸ª fetch"></a>fetchï¼Œå®ç°ä¸€ä¸ª fetch</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">fetch(<span class="string">&#x27;/some/url&#x27;</span>, &#123; <span class="attr">method</span>: <span class="string">&#x27;get&#x27;</span>, &#125;)</span><br><span class="line">    <span class="comment">// ç¬¬ä¸€ä¸ªthen  è®¾ç½®è¯·æ±‚çš„æ ¼å¼</span></span><br><span class="line">        .then(<span class="function"><span class="params">e</span> =&gt;</span> e.json())</span><br><span class="line">        <span class="comment">// ç¬¬äºŒä¸ªthen å¤„ç†å›è°ƒ</span></span><br><span class="line">        .then(<span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">         &lt;!-- dataä¸ºçœŸæ­£æ•°æ® --&gt;</span><br><span class="line">    &#125;).catch(<span class="function"><span class="params">e</span> =&gt;</span> <span class="built_in">console</span>.log(<span class="string">&quot;Oops, error&quot;</span>, e))</span><br></pre></td></tr></table></figure><h2 id="fetch-å‘é€-2-æ¬¡è¯·æ±‚çš„åŸå› "><a href="#fetch-å‘é€-2-æ¬¡è¯·æ±‚çš„åŸå› " class="headerlink" title="fetch å‘é€ 2 æ¬¡è¯·æ±‚çš„åŸå› "></a>fetch å‘é€ 2 æ¬¡è¯·æ±‚çš„åŸå› </h2><p>fetch å‘é€ post è¯·æ±‚çš„æ—¶å€™ï¼Œæ€»æ˜¯å‘é€ 2 æ¬¡ï¼Œç¬¬ä¸€æ¬¡çŠ¶æ€ç æ˜¯ 204ï¼Œç¬¬äºŒæ¬¡æ‰æˆåŠŸ? åŸå› å¾ˆç®€å•ï¼Œå› ä¸ºä½ ç”¨ fetch çš„ post è¯·æ±‚çš„æ—¶å€™ï¼Œå¯¼è‡´ fetch ç¬¬ä¸€æ¬¡å‘é€äº†ä¸€ä¸ª Options è¯·æ±‚ï¼Œè¯¢é—®æœåŠ¡å™¨æ˜¯å¦æ”¯æŒä¿®æ”¹çš„è¯·æ±‚å¤´ï¼Œå¦‚æœæœåŠ¡å™¨æ”¯æŒï¼Œåˆ™åœ¨ç¬¬äºŒæ¬¡ä¸­å‘é€çœŸæ­£çš„ è¯·æ±‚ã€‚</p><h2 id="escapeï¼ŒencodeURLï¼ŒencodeURIComponent-çš„åŒºåˆ«"><a href="#escapeï¼ŒencodeURLï¼ŒencodeURIComponent-çš„åŒºåˆ«" class="headerlink" title="escapeï¼ŒencodeURLï¼ŒencodeURIComponent çš„åŒºåˆ«"></a>escapeï¼ŒencodeURLï¼ŒencodeURIComponent çš„åŒºåˆ«</h2><h2 id="ä»€ä¹ˆæ˜¯åŒæº-åŒåŸŸ"><a href="#ä»€ä¹ˆæ˜¯åŒæº-åŒåŸŸ" class="headerlink" title="ä»€ä¹ˆæ˜¯åŒæº/åŒåŸŸ"></a>ä»€ä¹ˆæ˜¯åŒæº/åŒåŸŸ</h2><p>åè®® åŸŸå ç«¯å£ ä¸‰è€…ç›¸åŒæ‰ç®—åŒæº<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220904085319.png" alt=""></p><h2 id="å¦‚ä½•è§£å†³è·¨åŸŸ"><a href="#å¦‚ä½•è§£å†³è·¨åŸŸ" class="headerlink" title="å¦‚ä½•è§£å†³è·¨åŸŸ"></a>å¦‚ä½•è§£å†³è·¨åŸŸ</h2><p>cors jsonp<br>æœåŠ¡ç«¯é±¼æœåŠ¡ç«¯ä¹‹é—´ä¸å­˜åœ¨è·¨åŸŸ</p><h2 id="cookieè·¨åŸŸ"><a href="#cookieè·¨åŸŸ" class="headerlink" title="cookieè·¨åŸŸ"></a>cookieè·¨åŸŸ</h2><p>æˆ‘ä»¬è¯·æ±‚<a href="https://www.google.com/">https://www.google.com/</a>æ—¶ï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨æŠŠgoogle.comçš„Cookieå¸¦è¿‡å»ç»™googleçš„æœåŠ¡å™¨ï¼Œè€Œä¸ä¼šæŠŠ<a href="https://www.baidu.com/">https://www.baidu.com/</a>çš„Cookieå¸¦è¿‡å»ç»™googleçš„æœåŠ¡å™¨ã€‚</p><p>è¿™å°±æ„å‘³ç€ï¼Œç”±äºåŸŸåä¸åŒï¼Œç”¨æˆ·å‘ç³»ç»ŸAç™»å½•åï¼Œç³»ç»ŸAè¿”å›ç»™æµè§ˆå™¨çš„Cookieï¼Œç”¨æˆ·å†è¯·æ±‚ç³»ç»ŸBçš„æ—¶å€™ä¸ä¼šå°†ç³»ç»ŸAçš„Cookieå¸¦è¿‡å»ã€‚</p><p>é’ˆå¯¹Cookieå­˜åœ¨è·¨åŸŸé—®é¢˜ï¼Œæœ‰å‡ ç§è§£å†³æ–¹æ¡ˆï¼š</p><ul><li>æœåŠ¡ç«¯å°†Cookieå†™åˆ°å®¢æˆ·ç«¯åï¼Œå®¢æˆ·ç«¯å¯¹Cookieè¿›è¡Œè§£æï¼Œå°†Tokenè§£æå‡ºæ¥ï¼Œæ­¤åè¯·æ±‚éƒ½æŠŠè¿™ä¸ªTokenå¸¦ä¸Šå°±è¡Œäº†</li><li>å¤šä¸ªåŸŸåå…±äº«Cookieï¼Œåœ¨å†™åˆ°å®¢æˆ·ç«¯çš„æ—¶å€™è®¾ç½®Cookieçš„domainã€‚</li><li>å°†Tokenä¿å­˜åœ¨SessionStroageä¸­ï¼ˆä¸ä¾èµ–Cookieå°±æ²¡æœ‰è·¨åŸŸçš„é—®é¢˜äº†ï¼‰</li></ul><h2 id="å®ç°æ•°ç»„å»é‡"><a href="#å®ç°æ•°ç»„å»é‡" class="headerlink" title="å®ç°æ•°ç»„å»é‡"></a>å®ç°æ•°ç»„å»é‡</h2><p>è§æ•°ç»„å»é‡ç¯‡ ä¸€èˆ¬æ˜¯ reduce+includesï¼Œset</p><h1 id="HTTP"><a href="#HTTP" class="headerlink" title="HTTP"></a>HTTP</h1><h2 id="ä»‹ç»ä¸€ä¸‹-http1-3"><a href="#ä»‹ç»ä¸€ä¸‹-http1-3" class="headerlink" title="ä»‹ç»ä¸€ä¸‹ http1-3"></a>ä»‹ç»ä¸€ä¸‹ http1-3</h2><p>http1 æ˜¯ 0.9 çš„ä¸‹ä¸€ä¸ªç‰ˆæœ¬ï¼Œè¿™ä¸ªç‰ˆæœ¬ä¸­ä»–å¯ä»¥ä¼ è¾“ä»»ä½•å½¢å¼çš„å†…å®¹ä¸é™äºæ–‡æœ¬ï¼Œè¿˜åŠ å…¥äº† post å’Œ head è¯·æ±‚ï¼Œä¸”åŠ å…¥äº†æ›´å¤šæ ‡è¯†ä¿¡æ¯çš„æ‰‹æ®µï¼Œæ¯”å¦‚ header å¤´éƒ¨å’Œå“åº”ç ï¼Œä»¥åŠå¯¹äºèµ„æºæä¾›äº†ç¼“å­˜ã€‚ç®—æ˜¯ä¸€ä¸ªå¤§æ›´æ–°ï¼Œä¸è¿‡ç¼ºç‚¹ä¹Ÿå­˜åœ¨ï¼Œä¹Ÿå°±æ˜¯è¿™ä¸ªç‰ˆæœ¬ä¸æ”¯æŒæ–­ç‚¹ç»­ä¼ ï¼Œä¸”æ²¡æœ‰ä¼ é€’ä¸»æœºå hostname(å¤§æ¦‚æ˜¯èº«ä»½è¯†åˆ«çš„ä¸€ä¸ªå½±å“)ï¼Œæœ€é‡è¦çš„æ˜¯æœåŠ¡å™¨å‘é€å®Œå“åº”å°±å…³é—­äº† TCP è¿æ¥ï¼Œå¯¼è‡´æ¯æ¬¡è¯·æ±‚éƒ½è¦é‡æ–°å»ºç«‹è¿æ¥,æˆ‘ä»¬çŸ¥é“ TCP ä¸‰æ¬¡æ¡æ‰‹çš„æˆæœ¬æ˜¯æ¯”è¾ƒé«˜çš„ï¼Œä¸è¿‡ä»–æœ‰ä¸€ä¸ªç¼“è§£çš„æ–¹æ³•ï¼Œå°±æ˜¯è®¾ç½®<code>Connection:keep-alive</code>è®©æœåŠ¡ç«¯å…ˆä¸è¦å…³é—­ TCP è¿æ¥ã€‚ä»è€Œè¾¾åˆ°äº†ç±»ä¼¼ TCP å¤ç”¨çš„ç›®çš„(è¿™é‡Œç»å¸¸å¿˜è®°æ–­ç‚¹ç»­ä¼ ï¼Œå› ä¸ºè¿™ä¸ªå†…å®¹ç¡®å®ä¸ç†Ÿæ‚‰)</p><p>åœ¨ 1.1 çš„æ—¶å€™ï¼Œå¼•å…¥äº†é•¿è¿æ¥ï¼Œé»˜è®¤ TCP ä¸å»å…³é—­ï¼Œå¯ä»¥è¢«å¤šä¸ªè¯·æ±‚å¤ç”¨ã€‚ä¸”æ”¯æŒæ–­ç‚¹ç»­ä¼ ã€‚è¿™ä¸ªç‰ˆæœ¬è¿˜æ–°å¢äº†å¹¶å‘è¿æ¥ï¼Œç®¡é“æœºåˆ¶ï¼Œå¢åŠ äº† PUTDELETEOPTIONSPATCH ç­‰æ–¹æ³•ï¼Œå…è®¸å“åº”æ•°æ®åˆ†å—ï¼Œæœ‰åˆ©äºä¼ è¾“å¤§æ–‡ä»¶ï¼Œå¼ºåˆ¶è¦æ±‚ host å¤´ï¼Œè®©ä¸»æœºæ‰˜ç®¡æˆä¸ºå¯èƒ½ã€‚ä¸è¿‡ä¹Ÿå› ä¸ºå¼•å…¥äº†é•¿è¿æ¥ï¼Œå¸¦æ¥äº†è·¨è¶Šä¸¤ä¸ªç‰ˆæœ¬çš„é—®é¢˜ï¼Œé˜Ÿå¤´é˜»å¡ï¼Œè€Œä¸” 1.1 ç‰ˆæœ¬ä¸­è¶Šæ¥è¶Šå¤šçš„å¤´å­—æ®µä¹Ÿæš´éœ²äº†å¼•å…¥ header çš„é—®é¢˜ï¼Œæ— çŠ¶æ€ã€‚ä»¥åŠæ˜æ–‡ä¼ è¾“å¯¼è‡´çš„æ•°æ®å®‰å…¨æ€§é—®é¢˜ã€‚</p><p>åœ¨ 2.0 ä¹‹å‰æœ‰ä¸ªå« spdy çš„åè®®ï¼Œæ˜¯æ”¹è¿›ç‰ˆæœ¬çš„ 1.1,æå‡ºäº†å¤šè·¯å¤ç”¨çš„æ–¹æ¡ˆï¼Œé€šè¿‡å¤šä¸ªè¯·æ±‚ stream å…±äº«ä¸€ä¸ª TCP è¿æ¥çš„æ–¹å¼ï¼Œè§£å†³äº† http é˜Ÿå¤´é˜»å¡çš„é—®é¢˜ã€‚è¿˜è®¾ç½®äº†è¯·æ±‚ä¼˜å…ˆçº§ï¼Œé‡è¦çš„è¯·æ±‚ä¼˜å…ˆå“åº”() å‹ç¼©äº† header å¹¶ä¸”åŠ å¯†ä¼ è¾“å’ŒæœåŠ¡ç«¯æ¨é€</p><p>2.0 å°±æ˜¯åŸºäº spdy åè®®çš„ï¼Œé€šè¿‡å¤šè·¯å¤ç”¨å’Œæµè§£å†³äº†é˜Ÿå¤´é˜»å¡çš„é—®é¢˜ï¼Œä½¿ç”¨äº† hpack ç®—æ³•è§£å†³äº†å¤´éƒ¨è¿‡å¤§çš„é—®é¢˜ã€‚2.0 åè®®çš„ç‰¹ç‚¹æ˜¯äºŒè¿›åˆ¶åˆ†é’ˆï¼Œå¤´éƒ¨å‹ç¼©ï¼Œå¤šè·¯å¤ç”¨å’ŒæœåŠ¡ç«¯æ¨é€ï¼Œæµã€‚</p><p>ä¸è¿‡ 2.0 å°šæœªè§£å†³ TCP é˜»å¡çš„é—®é¢˜ï¼Œè¿™ä¸ªé—®é¢˜æ ¹æœ¬ä¸Šæ˜¯ä¼ è¾“å±‚çš„é—®é¢˜ï¼Œè¦æƒ³æ”¹å˜è¿™ä¸ªå†å²å·²ä¹…çš„åè®®è¦åŒæ—¶æ”¹å˜å…¶ä»–ç¡¬ä»¶å‚å•†å’Œç½‘ç»œå‚å•†çš„è®¾å¤‡ï¼Œæ˜¯ä¸å¤ªå¯èƒ½çš„ã€‚äºæ˜¯ 3.0 é¢å‘ UDP åè®®åšäº†æ–°çš„è°ƒæ•´ã€‚ä¹Ÿå°±æ˜¯ QUIC åè®®</p><p>3.0 çš„ QUIC åè®®è¦æ±‚ä¸¥æ ¼åŠ å¯†</p><h2 id="TCP-ä¸‰æ¬¡æ¡æ‰‹"><a href="#TCP-ä¸‰æ¬¡æ¡æ‰‹" class="headerlink" title="TCP ä¸‰æ¬¡æ¡æ‰‹"></a>TCP ä¸‰æ¬¡æ¡æ‰‹</h2><p>ä¸‰æ¬¡æ¡æ‰‹ï¼ˆThree-way Handshakeï¼‰å…¶å®å°±æ˜¯æŒ‡å»ºç«‹ä¸€ä¸ªTCPè¿æ¥æ—¶ï¼Œéœ€è¦å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨æ€»å…±å‘é€3ä¸ªåŒ…ã€‚è¿›è¡Œä¸‰æ¬¡æ¡æ‰‹çš„ä¸»è¦ä½œç”¨å°±æ˜¯ä¸ºäº†ç¡®è®¤åŒæ–¹çš„æ¥æ”¶èƒ½åŠ›å’Œå‘é€èƒ½åŠ›æ˜¯å¦æ­£å¸¸ã€æŒ‡å®šè‡ªå·±çš„åˆå§‹åŒ–åºåˆ—å·ä¸ºåé¢çš„å¯é æ€§ä¼ é€åšå‡†å¤‡ã€‚å®è´¨ä¸Šå…¶å®å°±æ˜¯è¿æ¥æœåŠ¡å™¨æŒ‡å®šç«¯å£ï¼Œå»ºç«‹TCPè¿æ¥ï¼Œå¹¶åŒæ­¥è¿æ¥åŒæ–¹çš„åºåˆ—å·å’Œç¡®è®¤å·ï¼Œäº¤æ¢TCPçª—å£å¤§å°ä¿¡æ¯ã€‚</p><p>åˆšå¼€å§‹å®¢æˆ·ç«¯å¤„äº Closed çš„çŠ¶æ€ï¼ŒæœåŠ¡ç«¯å¤„äº Listen çŠ¶æ€ã€‚<br>è¿›è¡Œä¸‰æ¬¡æ¡æ‰‹ï¼š</p><p>ç¬¬ä¸€æ¬¡æ¡æ‰‹ï¼šå®¢æˆ·ç«¯ç»™æœåŠ¡ç«¯å‘ä¸€ä¸ª SYN æŠ¥æ–‡ï¼Œå¹¶æŒ‡æ˜å®¢æˆ·ç«¯çš„åˆå§‹åŒ–åºåˆ—å· ISNã€‚æ­¤æ—¶å®¢æˆ·ç«¯å¤„äº SYN_SENT çŠ¶æ€ã€‚</p><p>é¦–éƒ¨çš„åŒæ­¥ä½SYN=1ï¼Œåˆå§‹åºå·seq=xï¼ŒSYN=1çš„æŠ¥æ–‡æ®µä¸èƒ½æºå¸¦æ•°æ®ï¼Œä½†è¦æ¶ˆè€—æ‰ä¸€ä¸ªåºå·ã€‚</p><p>ç¬¬äºŒæ¬¡æ¡æ‰‹ï¼šæœåŠ¡å™¨æ”¶åˆ°å®¢æˆ·ç«¯çš„ SYN æŠ¥æ–‡ä¹‹åï¼Œä¼šä»¥è‡ªå·±çš„ SYN æŠ¥æ–‡ä½œä¸ºåº”ç­”ï¼Œå¹¶ä¸”ä¹Ÿæ˜¯æŒ‡å®šäº†è‡ªå·±çš„åˆå§‹åŒ–åºåˆ—å· ISN(s)ã€‚åŒæ—¶ä¼šæŠŠå®¢æˆ·ç«¯çš„ ISN + 1 ä½œä¸ºACK çš„å€¼ï¼Œè¡¨ç¤ºè‡ªå·±å·²ç»æ”¶åˆ°äº†å®¢æˆ·ç«¯çš„ SYNï¼Œæ­¤æ—¶æœåŠ¡å™¨å¤„äº SYN_RCVD çš„çŠ¶æ€ã€‚</p><p>åœ¨ç¡®è®¤æŠ¥æ–‡æ®µä¸­SYN=1ï¼ŒACK=1ï¼Œç¡®è®¤å·ack=x+1ï¼Œåˆå§‹åºå·seq=yã€‚</p><p>ç¬¬ä¸‰æ¬¡æ¡æ‰‹ï¼šå®¢æˆ·ç«¯æ”¶åˆ° SYN æŠ¥æ–‡ä¹‹åï¼Œä¼šå‘é€ä¸€ä¸ª ACK æŠ¥æ–‡ï¼Œå½“ç„¶ï¼Œä¹Ÿæ˜¯ä¸€æ ·æŠŠæœåŠ¡å™¨çš„ ISN + 1 ä½œä¸º ACK çš„å€¼ï¼Œè¡¨ç¤ºå·²ç»æ”¶åˆ°äº†æœåŠ¡ç«¯çš„ SYN æŠ¥æ–‡ï¼Œæ­¤æ—¶å®¢æˆ·ç«¯å¤„äº ESTABLISHED çŠ¶æ€ã€‚æœåŠ¡å™¨æ”¶åˆ° ACK æŠ¥æ–‡ä¹‹åï¼Œä¹Ÿå¤„äº ESTABLISHED çŠ¶æ€ï¼Œæ­¤æ—¶ï¼ŒåŒæ–¹å·²å»ºç«‹èµ·äº†è¿æ¥ã€‚</p><p>ç¡®è®¤æŠ¥æ–‡æ®µACK=1ï¼Œç¡®è®¤å·ack=y+1ï¼Œåºå·seq=x+1ï¼ˆåˆå§‹ä¸ºseq=xï¼Œç¬¬äºŒä¸ªæŠ¥æ–‡æ®µæ‰€ä»¥è¦+1ï¼‰ï¼ŒACKæŠ¥æ–‡æ®µå¯ä»¥æºå¸¦æ•°æ®ï¼Œä¸æºå¸¦æ•°æ®åˆ™ä¸æ¶ˆè€—åºå·ã€‚</p><p>å‘é€ç¬¬ä¸€ä¸ªSYNçš„ä¸€ç«¯å°†æ‰§è¡Œä¸»åŠ¨æ‰“å¼€ï¼ˆactive openï¼‰ï¼Œæ¥æ”¶è¿™ä¸ªSYNå¹¶å‘å›ä¸‹ä¸€ä¸ªSYNçš„å¦ä¸€ç«¯æ‰§è¡Œè¢«åŠ¨æ‰“å¼€ï¼ˆpassive openï¼‰ã€‚</p><p>åœ¨socketç¼–ç¨‹ä¸­ï¼Œå®¢æˆ·ç«¯æ‰§è¡Œconnect()æ—¶ï¼Œå°†è§¦å‘ä¸‰æ¬¡æ¡æ‰‹ã€‚</p><h2 id="ä¸ºä»€ä¹ˆ-ConnectionKeepalive-ä¸èƒ½æ ¹æœ¬è§£å†³é—®é¢˜"><a href="#ä¸ºä»€ä¹ˆ-ConnectionKeepalive-ä¸èƒ½æ ¹æœ¬è§£å†³é—®é¢˜" class="headerlink" title="ä¸ºä»€ä¹ˆ ConnectionKeepalive ä¸èƒ½æ ¹æœ¬è§£å†³é—®é¢˜"></a>ä¸ºä»€ä¹ˆ ConnectionKeepalive ä¸èƒ½æ ¹æœ¬è§£å†³é—®é¢˜</h2><p>å¤´éƒ¨å­—æ®µä¸æ˜¯æ ‡å‡†çš„ï¼Œä¸åŒæµè§ˆå™¨å®ç°èµ·æ¥å¯èƒ½ä¸ä¸€æ ·ï¼Œæ‰€ä»¥ä¸èƒ½ä»æ ¹æœ¬ä¸Šè§£å†³é—®é¢˜</p><h2 id="å¹¶å‘å¹¶è¡Œ"><a href="#å¹¶å‘å¹¶è¡Œ" class="headerlink" title="å¹¶å‘å¹¶è¡Œ"></a>å¹¶å‘å¹¶è¡Œ</h2><p>å¹¶å‘æŒ‡çš„æ˜¯å¤šä¸ªäº‹ä»¶åœ¨åŒä¸€æ—¶é—´æ®µæ‰§è¡Œ<br>å¹¶è¡Œæ˜¯æŒ‡å¤šä¸ªäº‹ä»¶åœ¨åŒä¸€æ—¶é—´ç‚¹æ‰§è¡Œ</p><h2 id="ä»€ä¹ˆæ˜¯ä¸»æœºæ‰˜ç®¡"><a href="#ä»€ä¹ˆæ˜¯ä¸»æœºæ‰˜ç®¡" class="headerlink" title="ä»€ä¹ˆæ˜¯ä¸»æœºæ‰˜ç®¡"></a>ä»€ä¹ˆæ˜¯ä¸»æœºæ‰˜ç®¡</h2><h2 id="ä»€ä¹ˆæ˜¯æ— çŠ¶æ€"><a href="#ä»€ä¹ˆæ˜¯æ— çŠ¶æ€" class="headerlink" title="ä»€ä¹ˆæ˜¯æ— çŠ¶æ€"></a>ä»€ä¹ˆæ˜¯æ— çŠ¶æ€</h2><p>æ— çŠ¶æ€æŒ‡çš„æ˜¯å¯¹äºè¯·æ±‚å¤´æ²¡æœ‰è®°å¿†èƒ½åŠ›ã€‚äºæ˜¯ 2.0 æå‡ºçš„ hpack è§£å†³äº†è¿™ä¸ªé—®é¢˜</p><h2 id="http1-ä¹‹å‰è¿˜æœ‰åˆ«çš„ç‰ˆæœ¬å—"><a href="#http1-ä¹‹å‰è¿˜æœ‰åˆ«çš„ç‰ˆæœ¬å—" class="headerlink" title="http1 ä¹‹å‰è¿˜æœ‰åˆ«çš„ç‰ˆæœ¬å—"></a>http1 ä¹‹å‰è¿˜æœ‰åˆ«çš„ç‰ˆæœ¬å—</h2><p>0.9 ä¸ºäº†ä¼ è¾“ HTML(æ–‡æœ¬)è¯ç”Ÿï¼Œè€Œä¸”åªèƒ½å‘ GET è¯·æ±‚ï¼Œè¯·æ±‚æŠ¥æ–‡åªæœ‰ä¸€è¡Œï¼Œæ²¡æœ‰æ ‡è¯†ä¿¡æ¯ï¼ŒæœåŠ¡å™¨å‘å®Œå°±å…³é—­äº† TCP</p><h2 id="è®²ä¸€ä¸‹-HTTP-çš„è¯·æ±‚æŠ¥æ–‡"><a href="#è®²ä¸€ä¸‹-HTTP-çš„è¯·æ±‚æŠ¥æ–‡" class="headerlink" title="è®²ä¸€ä¸‹ HTTP çš„è¯·æ±‚æŠ¥æ–‡"></a>è®²ä¸€ä¸‹ HTTP çš„è¯·æ±‚æŠ¥æ–‡</h2><p>ç”±ä¸‰éƒ¨åˆ†ç»„æˆ<br>è¯·æ±‚è¡Œ è¯·æ±‚å¤´ è¯·æ±‚ä½“<br>è¯·æ±‚è¡Œç”±è¯·æ±‚æ–¹æ³• URL åè®®ç‰ˆæœ¬ç»„æˆ<br>è¯·æ±‚å¤´<br>ç©ºè¡Œ(æ³¨æ„)<br>è¯·æ±‚ä½“</p><h2 id="è¯·æ±‚æ–¹æ³•-ä»€ä¹ˆæ˜¯å¹‚ç­‰-ä»€ä¹ˆæ˜¯ä¸å¹‚ç­‰"><a href="#è¯·æ±‚æ–¹æ³•-ä»€ä¹ˆæ˜¯å¹‚ç­‰-ä»€ä¹ˆæ˜¯ä¸å¹‚ç­‰" class="headerlink" title="è¯·æ±‚æ–¹æ³• ä»€ä¹ˆæ˜¯å¹‚ç­‰ ä»€ä¹ˆæ˜¯ä¸å¹‚ç­‰"></a>è¯·æ±‚æ–¹æ³• ä»€ä¹ˆæ˜¯å¹‚ç­‰ ä»€ä¹ˆæ˜¯ä¸å¹‚ç­‰</h2><p>GET POST HEAD DELETE PATCH OPTION PUT</p><h2 id="å¸¸è§çš„è¯·æ±‚å¤´ï¼Ÿ"><a href="#å¸¸è§çš„è¯·æ±‚å¤´ï¼Ÿ" class="headerlink" title="å¸¸è§çš„è¯·æ±‚å¤´ï¼Ÿ"></a>å¸¸è§çš„è¯·æ±‚å¤´ï¼Ÿ</h2><p>Referer<br>Cookie<br>Connection<br>Content-Length<br>Accept-language<br>â€¦</p><h2 id="æ€ä¹ˆè¿›è¡Œæ–­ç‚¹ç»­ä¼ "><a href="#æ€ä¹ˆè¿›è¡Œæ–­ç‚¹ç»­ä¼ " class="headerlink" title="æ€ä¹ˆè¿›è¡Œæ–­ç‚¹ç»­ä¼ "></a>æ€ä¹ˆè¿›è¡Œæ–­ç‚¹ç»­ä¼ </h2><h2 id="å‰ç«¯å¦‚ä½•è®¾ç½®ç¼“å­˜"><a href="#å‰ç«¯å¦‚ä½•è®¾ç½®ç¼“å­˜" class="headerlink" title="å‰ç«¯å¦‚ä½•è®¾ç½®ç¼“å­˜"></a>å‰ç«¯å¦‚ä½•è®¾ç½®ç¼“å­˜</h2><h2 id="ç¼“å­˜ä¸­çš„-Etag-å’Œ-Expires-æ˜¯ä»€ä¹ˆåŒºåˆ«"><a href="#ç¼“å­˜ä¸­çš„-Etag-å’Œ-Expires-æ˜¯ä»€ä¹ˆåŒºåˆ«" class="headerlink" title="ç¼“å­˜ä¸­çš„ Etag å’Œ Expires æ˜¯ä»€ä¹ˆåŒºåˆ«"></a>ç¼“å­˜ä¸­çš„ Etag å’Œ Expires æ˜¯ä»€ä¹ˆåŒºåˆ«</h2><h2 id="ç¼“å­˜æ–°é²œåº¦æ˜¯æ€ä¹ˆè®¡ç®—çš„"><a href="#ç¼“å­˜æ–°é²œåº¦æ˜¯æ€ä¹ˆè®¡ç®—çš„" class="headerlink" title="ç¼“å­˜æ–°é²œåº¦æ˜¯æ€ä¹ˆè®¡ç®—çš„"></a>ç¼“å­˜æ–°é²œåº¦æ˜¯æ€ä¹ˆè®¡ç®—çš„</h2><h2 id="æœ‰ä»€ä¹ˆå“åº”ç "><a href="#æœ‰ä»€ä¹ˆå“åº”ç " class="headerlink" title="æœ‰ä»€ä¹ˆå“åº”ç "></a>æœ‰ä»€ä¹ˆå“åº”ç </h2><p>100<br>101<br>200<br>201<br>202<br>203<br>300<br>301<br>302<br>304<br>400<br>404<br>500<br>504</p><h2 id="TCP-å’Œ-UDP-ä»€ä¹ˆåŒºåˆ«"><a href="#TCP-å’Œ-UDP-ä»€ä¹ˆåŒºåˆ«" class="headerlink" title="TCP å’Œ UDP ä»€ä¹ˆåŒºåˆ«"></a>TCP å’Œ UDP ä»€ä¹ˆåŒºåˆ«</h2><h2 id="TCP-è¿æ¥çš„è¿‡ç¨‹"><a href="#TCP-è¿æ¥çš„è¿‡ç¨‹" class="headerlink" title="TCP è¿æ¥çš„è¿‡ç¨‹"></a>TCP è¿æ¥çš„è¿‡ç¨‹</h2><h2 id="è¯´ä¸€ä¸‹-1-1-çš„ç®¡é“æœºåˆ¶"><a href="#è¯´ä¸€ä¸‹-1-1-çš„ç®¡é“æœºåˆ¶" class="headerlink" title="è¯´ä¸€ä¸‹ 1.1 çš„ç®¡é“æœºåˆ¶"></a>è¯´ä¸€ä¸‹ 1.1 çš„ç®¡é“æœºåˆ¶</h2><h2 id="å¦‚ä½•è¿›è¡Œå¤§æ–‡ä»¶ä¼ è¾“"><a href="#å¦‚ä½•è¿›è¡Œå¤§æ–‡ä»¶ä¼ è¾“" class="headerlink" title="å¦‚ä½•è¿›è¡Œå¤§æ–‡ä»¶ä¼ è¾“"></a>å¦‚ä½•è¿›è¡Œå¤§æ–‡ä»¶ä¼ è¾“</h2><p>å‰ç«¯ï¼šæ–‡ä»¶åè½¬ md5ï¼Œæ–‡ä»¶åˆ‡ç‰‡ï¼Œä¸Šä¼ å®Œååˆå¹¶</p><h2 id="ä¸ºä»€ä¹ˆ-1ï¼Œ1-å¼ºåˆ¶è¦æ±‚-host-å¤´"><a href="#ä¸ºä»€ä¹ˆ-1ï¼Œ1-å¼ºåˆ¶è¦æ±‚-host-å¤´" class="headerlink" title="ä¸ºä»€ä¹ˆ 1ï¼Œ1 å¼ºåˆ¶è¦æ±‚ host å¤´"></a>ä¸ºä»€ä¹ˆ 1ï¼Œ1 å¼ºåˆ¶è¦æ±‚ host å¤´</h2><h2 id="ä»€ä¹ˆæ˜¯-TCP-é˜»å¡-ä»€ä¹ˆæ˜¯-HTTP-é˜»å¡-æ€ä¹ˆè§£å†³"><a href="#ä»€ä¹ˆæ˜¯-TCP-é˜»å¡-ä»€ä¹ˆæ˜¯-HTTP-é˜»å¡-æ€ä¹ˆè§£å†³" class="headerlink" title="ä»€ä¹ˆæ˜¯ TCP é˜»å¡ ä»€ä¹ˆæ˜¯ HTTP é˜»å¡ æ€ä¹ˆè§£å†³"></a>ä»€ä¹ˆæ˜¯ TCP é˜»å¡ ä»€ä¹ˆæ˜¯ HTTP é˜»å¡ æ€ä¹ˆè§£å†³</h2><p>TCP é˜»å¡æ˜¯æŒ‡å½“ä¸€ä¸ª TCP çš„åˆ†èŠ‚ä¸¢å¤±çš„æ—¶å€™ï¼Œå› ä¸º TCP æœ¬èº«æ˜¯å¯é ä¼ è¾“ï¼Œæ‰€ä»¥ä»–çš„åç»­åˆ†èŠ‚ä¼šä¸€ç›´è¢«æ¥æ”¶ç«¯ä¿å­˜ï¼Œç›´åˆ°ä¸¢å¤±çš„è¿™ä¸€ä¸ªåˆ†èŠ‚ä¼ è¾“åˆ°æ¥æ”¶ç«¯ä¸ºæ­¢ã€‚</p><p>è¿™æ ·çš„å¯é ä¼ è¾“èƒ½ä¿è¯æ•°æ®çš„å®Œæ•´æ€§ï¼Œä½†æ˜¯å´å½±å“äº†åç»­åˆ†èŠ‚çš„ä¼ è¾“ã€‚æ¯”å¦‚å‘ä¸‰ä¸ªå›¾ç‰‡ç¬¬ä¸€ä¸ªå›¾ç‰‡çš„åˆ†èŠ‚ä¸¢å¤±ï¼Œä¹Ÿå½±å“åˆ°åé¢çš„ä¸¤ä¸ªå›¾ç‰‡æ•°æ®ä¼ è¾“ã€‚</p><p>HTTP é˜Ÿå¤´é˜»å¡æ˜¯æŒ‡ 1.1 åè®®ä¸­çš„ç®¡é“ä¼ è¾“ï¼Œç”±äºç®¡é“ä¼ è¾“çš„æ€§è´¨æ˜¯å¯ä»¥å¤šä¸ªè¯·æ±‚åŒæ—¶å‘é€ä½†æ˜¯è¦æ±‚å“åº”é¡ºåºä¸€è‡´ï¼Œæ‰€ä»¥å¯¼è‡´äº† http é˜»å¡ã€‚</p><p>è§£å†³ HTTP é˜»å¡é çš„æ˜¯ 2.0 ä¸­å¤šè·¯å¤ç”¨å’Œæµçš„æ¦‚å¿µï¼Œå¤šè·¯å¤ç”¨æœ‰ç‚¹ç±»ä¼¼äºç®¡é“ï¼Œä¸è¿‡ä»–ä½¿å¾—åŒå¤šä¸ªè¯·æ±‚å…±äº«åŒä¸€ä¸ª TCP è¿æ¥ï¼Œåœ¨è¿™ä¸ªè¿æ¥ä¸­ä»–ä¼šå°†æŠ¥æ–‡æ‹†åˆ†æˆäºŒè¿›åˆ¶å¸§å‘é€ï¼ŒæœåŠ¡å™¨æ¥æ”¶åˆ°ä¹±åºçš„å¸§é‡æ–°ç»„åˆæˆä¸ºå¯¹åº”çš„æŠ¥æ–‡ï¼Œæ‰€ä»¥å°±ä¸å­˜åœ¨å…ˆåçš„é—®é¢˜ï¼Œä¹Ÿå°±è§£å†³äº† HTTP çš„é˜Ÿå¤´é˜»å¡</p><p>è§£å†³ TCP é˜»å¡é çš„æ˜¯ QUIC åè®®ï¼Œå› ä¸º TCP é˜»å¡æœ¬è´¨ä¸Šæ˜¯ä¼ è¾“å±‚çš„é—®é¢˜ï¼Œåœ¨æ”¹å˜åè®®å›°éš¾çš„æƒ…å†µä¸‹(ç°åœ¨ç»å¤§éƒ¨åˆ†ç¡¬ä»¶å‚å•†ç½‘ç»œè¿è¥å•†éƒ½æ˜¯è¿™æ ·çš„åè®®)ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä»å¦å¤–ä¸€ä¸ªåè®®ä¸‹æ‰‹ï¼Œä¹Ÿå°±æ˜¯ UDPã€‚UDP ä¸ç®¡é¡ºåºï¼Œä¸¢åŒ…æ–¹é¢ä¹Ÿæœ‰ QUIC å¯¹åº”çš„æ–¹æ³•å»å¤„ç†(å¤šè·¯å¤ç”¨ï¼Œæœ‰å¤šä¸ªç‹¬ç«‹çš„é€»è¾‘æ•°æ®æµ)ä»è€Œè§£å†³ TCP é˜»å¡çš„é—®é¢˜</p><h2 id="http1-1-æ˜¯æ€ä¹ˆè§£å†³é˜Ÿå¤´é˜»å¡-å®é™…ä¸Šæ˜¯ç¼“è§£"><a href="#http1-1-æ˜¯æ€ä¹ˆè§£å†³é˜Ÿå¤´é˜»å¡-å®é™…ä¸Šæ˜¯ç¼“è§£" class="headerlink" title="http1.1 æ˜¯æ€ä¹ˆè§£å†³é˜Ÿå¤´é˜»å¡(å®é™…ä¸Šæ˜¯ç¼“è§£)"></a>http1.1 æ˜¯æ€ä¹ˆè§£å†³é˜Ÿå¤´é˜»å¡(å®é™…ä¸Šæ˜¯ç¼“è§£)</h2><p>ä½¿ç”¨äº†åŸŸååˆ†ç‰‡çš„æŠ€æœ¯<br>ä¸€ä¸ªåŸŸåæ‹¥æœ‰ 6 ä¸ª TCP è¿æ¥ï¼Œæœ‰å¤šçº§åŸŸåçš„æ—¶å€™èƒ½å§æ›´å¤šçš„èµ„æºåˆ†é…å‡ºæ¥ã€‚<br>å¼•èµ·åˆ«çš„é—®é¢˜ï¼šå› ä¸º TCP è¿æ¥è¦ç»è¿‡ dnsï¼Œä¸‰æ¬¡æ¡æ‰‹ï¼Œæ…¢å¯åŠ¨ç­‰æ“ä½œã€‚æ‰€ä»¥å¯¹äºæœåŠ¡å™¨æ¥è¯´è¿æ¥å¤ªå¤šå®¹æ˜“é€ æˆç½‘ç»œæ‹¥æŒ¤</p><h2 id="http2-0-æœ‰ä»€ä¹ˆæ–°ç‰¹æ€§"><a href="#http2-0-æœ‰ä»€ä¹ˆæ–°ç‰¹æ€§" class="headerlink" title="http2.0 æœ‰ä»€ä¹ˆæ–°ç‰¹æ€§"></a>http2.0 æœ‰ä»€ä¹ˆæ–°ç‰¹æ€§</h2><p>äºŒè¿›åˆ¶åˆ†å¸§ï¼Œå¤šè·¯å¤ç”¨ï¼Œå¤´éƒ¨å‹ç¼©ï¼ŒæœåŠ¡ç«¯æ¨é€ï¼Œæµ</p><h2 id="Hpack-ç®—æ³•åŸç†"><a href="#Hpack-ç®—æ³•åŸç†" class="headerlink" title="Hpack ç®—æ³•åŸç†"></a>Hpack ç®—æ³•åŸç†</h2><p>å“ˆå¸Œè¡¨ ä¼ ç´¢å¼• å“ˆå¤«æ›¼æ”¶é›†æ•´æ•°å’Œ</p><h2 id="2-0-ä¹‹å‰æ˜¯æ€ä¹ˆåˆ†å¸§çš„"><a href="#2-0-ä¹‹å‰æ˜¯æ€ä¹ˆåˆ†å¸§çš„" class="headerlink" title="2.0 ä¹‹å‰æ˜¯æ€ä¹ˆåˆ†å¸§çš„"></a>2.0 ä¹‹å‰æ˜¯æ€ä¹ˆåˆ†å¸§çš„</h2><h2 id="äºŒè¿›åˆ¶åˆ†å¸§æ˜¯æ€ä¹ˆå®ç°ä¼˜å…ˆçº§å’Œæµé‡æ§åˆ¶çš„"><a href="#äºŒè¿›åˆ¶åˆ†å¸§æ˜¯æ€ä¹ˆå®ç°ä¼˜å…ˆçº§å’Œæµé‡æ§åˆ¶çš„" class="headerlink" title="äºŒè¿›åˆ¶åˆ†å¸§æ˜¯æ€ä¹ˆå®ç°ä¼˜å…ˆçº§å’Œæµé‡æ§åˆ¶çš„"></a>äºŒè¿›åˆ¶åˆ†å¸§æ˜¯æ€ä¹ˆå®ç°ä¼˜å…ˆçº§å’Œæµé‡æ§åˆ¶çš„</h2><h2 id="ä»€ä¹ˆæ˜¯å¤šè·¯å¤ç”¨"><a href="#ä»€ä¹ˆæ˜¯å¤šè·¯å¤ç”¨" class="headerlink" title="ä»€ä¹ˆæ˜¯å¤šè·¯å¤ç”¨"></a>ä»€ä¹ˆæ˜¯å¤šè·¯å¤ç”¨</h2><h2 id="æ€ä¹ˆè¿›è¡ŒæœåŠ¡ç«¯æ¨é€"><a href="#æ€ä¹ˆè¿›è¡ŒæœåŠ¡ç«¯æ¨é€" class="headerlink" title="æ€ä¹ˆè¿›è¡ŒæœåŠ¡ç«¯æ¨é€"></a>æ€ä¹ˆè¿›è¡ŒæœåŠ¡ç«¯æ¨é€</h2><h2 id="2-0-æœ‰ä»€ä¹ˆé—®é¢˜"><a href="#2-0-æœ‰ä»€ä¹ˆé—®é¢˜" class="headerlink" title="2.0 æœ‰ä»€ä¹ˆé—®é¢˜"></a>2.0 æœ‰ä»€ä¹ˆé—®é¢˜</h2><h2 id="http3-0-æœ‰ä»€ä¹ˆæ–°ç‰¹æ€§"><a href="#http3-0-æœ‰ä»€ä¹ˆæ–°ç‰¹æ€§" class="headerlink" title="http3.0 æœ‰ä»€ä¹ˆæ–°ç‰¹æ€§"></a>http3.0 æœ‰ä»€ä¹ˆæ–°ç‰¹æ€§</h2><h2 id="QUIC-æœ‰å®‰å…¨é—®é¢˜å—"><a href="#QUIC-æœ‰å®‰å…¨é—®é¢˜å—" class="headerlink" title="QUIC æœ‰å®‰å…¨é—®é¢˜å—"></a>QUIC æœ‰å®‰å…¨é—®é¢˜å—</h2><h2 id="UDP-ä¸¢å¤±æ•°æ®åŒ…çš„é—®é¢˜åœ¨-QUIC-ä¸­æ˜¯æ€ä¹ˆè§£å†³çš„"><a href="#UDP-ä¸¢å¤±æ•°æ®åŒ…çš„é—®é¢˜åœ¨-QUIC-ä¸­æ˜¯æ€ä¹ˆè§£å†³çš„" class="headerlink" title="UDP ä¸¢å¤±æ•°æ®åŒ…çš„é—®é¢˜åœ¨ QUIC ä¸­æ˜¯æ€ä¹ˆè§£å†³çš„"></a>UDP ä¸¢å¤±æ•°æ®åŒ…çš„é—®é¢˜åœ¨ QUIC ä¸­æ˜¯æ€ä¹ˆè§£å†³çš„</h2><h2 id="è¯´ä¸€ä¸‹-TLS"><a href="#è¯´ä¸€ä¸‹-TLS" class="headerlink" title="è¯´ä¸€ä¸‹ TLS"></a>è¯´ä¸€ä¸‹ TLS</h2><h2 id="RTT-æ˜¯ä»€ä¹ˆæ„æ€"><a href="#RTT-æ˜¯ä»€ä¹ˆæ„æ€" class="headerlink" title="RTT æ˜¯ä»€ä¹ˆæ„æ€"></a>RTT æ˜¯ä»€ä¹ˆæ„æ€</h2><h2 id="TLS1-3-æœ‰ä»€ä¹ˆé—®é¢˜å—"><a href="#TLS1-3-æœ‰ä»€ä¹ˆé—®é¢˜å—" class="headerlink" title="TLS1.3 æœ‰ä»€ä¹ˆé—®é¢˜å—"></a>TLS1.3 æœ‰ä»€ä¹ˆé—®é¢˜å—</h2><h2 id="QUIC-æ˜¯å¦‚ä½•ç¡®ç«‹ä¸€ä¸ªè¿æ¥çš„"><a href="#QUIC-æ˜¯å¦‚ä½•ç¡®ç«‹ä¸€ä¸ªè¿æ¥çš„" class="headerlink" title="QUIC æ˜¯å¦‚ä½•ç¡®ç«‹ä¸€ä¸ªè¿æ¥çš„"></a>QUIC æ˜¯å¦‚ä½•ç¡®ç«‹ä¸€ä¸ªè¿æ¥çš„</h2><h2 id="è¯´ä¸€ä¸‹-HTTP1-3-åˆ†åˆ«ä½¿ç”¨äº†å¤šå°‘ä¸ª-RTT"><a href="#è¯´ä¸€ä¸‹-HTTP1-3-åˆ†åˆ«ä½¿ç”¨äº†å¤šå°‘ä¸ª-RTT" class="headerlink" title="è¯´ä¸€ä¸‹ HTTP1-3 åˆ†åˆ«ä½¿ç”¨äº†å¤šå°‘ä¸ª RTT"></a>è¯´ä¸€ä¸‹ HTTP1-3 åˆ†åˆ«ä½¿ç”¨äº†å¤šå°‘ä¸ª RTT</h2><h1 id="Vue"><a href="#Vue" class="headerlink" title="Vue"></a>Vue</h1><h2 id="v-if-v-show"><a href="#v-if-v-show" class="headerlink" title="v-if v-show"></a>v-if v-show</h2><h2 id="vue2-ä¸ºä»€ä¹ˆä¸èƒ½ç›‘å¬æ•°ç»„"><a href="#vue2-ä¸ºä»€ä¹ˆä¸èƒ½ç›‘å¬æ•°ç»„" class="headerlink" title="vue2 ä¸ºä»€ä¹ˆä¸èƒ½ç›‘å¬æ•°ç»„"></a>vue2 ä¸ºä»€ä¹ˆä¸èƒ½ç›‘å¬æ•°ç»„</h2><p>å…¶å®æ˜¯å¯ä»¥ç›‘å¬çš„ï¼ŒåŸå› åœ¨äº<code>Object.defineProperty</code>è¿™ä¸ª api ä¸Šï¼Œä»–æ˜¯å¯ä»¥æš´åŠ›ç›‘å¬æ•°ç»„ä¸­çš„æ‰€æœ‰å…ƒç´ çš„ï¼Œä»¥ index çš„å½¢å¼ã€‚ä½†æ˜¯å¦‚æœæ•°ç»„å†…éƒ¨æœ‰ç™¾ä¸‡ä¸ªå…ƒç´ ï¼Œæ¯æ¬¡ç›‘å¬éƒ½è¦å‘ç”Ÿæ”¹å˜ï¼Œè¿™æ ·å°±ä¼šé€ æˆå¾ˆå¤§çš„æ€§èƒ½é—®é¢˜äº†ã€‚æ‰€ä»¥é€‰æ‹©ä¸å»ç›‘å¬ã€‚Vue3 ä¸­ä½¿ç”¨äº† Proxyï¼Œç›´æ¥åŠ«æŒæ•´ä¸ªæ•°ç»„å¯¹è±¡ï¼Œå°±æ²¡è¿™ä¸ªé—®é¢˜äº†ã€‚</p><h2 id="ä½¿ç”¨è¿‡-Object-defineProperty-å—"><a href="#ä½¿ç”¨è¿‡-Object-defineProperty-å—" class="headerlink" title="ä½¿ç”¨è¿‡ Object.defineProperty å—"></a>ä½¿ç”¨è¿‡ Object.defineProperty å—</h2><p>å‚åŠ æ‰‹å†™ç¯‡</p><p>å¯ä»¥åŠ«æŒå¯¹è±¡çš„å±æ€§å®ç°å“åº”å¼ ç¼ºç‚¹æ˜¯ä¸æ”¯æŒå¢åŠ å’Œåˆ é™¤<br>ä¸”å¯¹äºæ•°ç»„æ¥è¯´ æ€§èƒ½é—®é¢˜ å¯¼è‡´ä¸é‡‡ç”¨åŠ«æŒ<br>å¦å¤–è¦å®ç°åŠ«æŒ å¯ä»¥æŠŠvalueä½œä¸ºå½¢å‚ä¼ é€’ é¿å…returnçš„æ—¶å€™æ— é™é€’å½’<br>ä¸”æ³¨æ„æ˜¯åŠ«æŒæ–°å¯¹è±¡çš„å±æ€§çš„æ—¶å€™æ‰æ˜¯é»˜è®¤ä¸å¯æšä¸¾ä¸å¯ä¿®æ”¹ä¸å¯åˆ é™¤ï¼Œå·²æœ‰çš„å¯¹è±¡ä¸ä¼šæœ‰è¿™ä¸ªæ“ä½œ</p><h2 id="nextTick-çš„åŸç†"><a href="#nextTick-çš„åŸç†" class="headerlink" title="nextTick çš„åŸç†"></a>nextTick çš„åŸç†</h2><h2 id="vue3-åœ¨å“åº”å¼ä¸Šåšäº†ä»€ä¹ˆä¼˜åŒ–"><a href="#vue3-åœ¨å“åº”å¼ä¸Šåšäº†ä»€ä¹ˆä¼˜åŒ–" class="headerlink" title="vue3 åœ¨å“åº”å¼ä¸Šåšäº†ä»€ä¹ˆä¼˜åŒ–"></a>vue3 åœ¨å“åº”å¼ä¸Šåšäº†ä»€ä¹ˆä¼˜åŒ–</h2><p>ä½¿ç”¨äº†proxyè¿›è¡Œä¸€ä¸ªæ‡’å¤„ç†ï¼Œæ ‡è¯†äº†ä¾èµ–çš„çŠ¶æ€æ˜¯å¦é‡å¤æ”¶é›†ï¼Œå¤„ç†äº†å¾ˆå¤šç‰¹æ®Šæ¡ˆä¾‹æ¯”å¦‚åµŒå¥—effectï¼Œå¤šæ¬¡reactiveåŒä¸ªå¯¹è±¡ï¼Œä»¥åŠåŒä¸ªå“åº”å¼å¯¹è±¡è¢«å¤šæ¬¡åˆ†é…ï¼Œæ•°ç»„ç­‰</p><h2 id="ä¸ºä»€ä¹ˆ-Proxy-ä¸­éœ€è¦-Reflect"><a href="#ä¸ºä»€ä¹ˆ-Proxy-ä¸­éœ€è¦-Reflect" class="headerlink" title="ä¸ºä»€ä¹ˆ Proxy ä¸­éœ€è¦ Reflect"></a>ä¸ºä»€ä¹ˆ Proxy ä¸­éœ€è¦ Reflect</h2><p>Reflectçš„ä½œç”¨æ˜¯ä¸ºäº†ä¿®æ”¹å¯¹è±¡çš„æŒ‡å‘ï¼Œæ¯”å¦‚è¯´æœ‰ä¸ªå¯¹è±¡ç»§æ‰¿äº†å¦å¤–ä¸€ä¸ªå“åº”å¼å¯¹è±¡ï¼Œè®¿é—®å¯¹è±¡æœ¬èº«çš„å±æ€§çš„æ—¶å€™ï¼Œä¼šè¢«proxyåŠ«æŒåˆ°è¿”å›ç»§æ‰¿å¯¹è±¡çš„å±æ€§ï¼Œå¦‚æœæ­¤æ—¶getä¸­ä¼ é€’äº†receiverï¼ŒReflectæ¥æ”¶äº†receiverï¼Œé‚£ä¹ˆä»–å°±èƒ½å°†å…¶ä¿®æ”¹ä¸ºæ­£ç¡®çš„æŒ‡å‘ï¼Œè®¿é—®å¯¹è±¡æœ¬èº«çš„å±æ€§</p><h2 id="Proxy-çš„-get-çš„ä¸‰ä¸ªå‚æ•°çš„æ„ä¹‰-ä¸ºä»€ä¹ˆéœ€è¦-receiver"><a href="#Proxy-çš„-get-çš„ä¸‰ä¸ªå‚æ•°çš„æ„ä¹‰-ä¸ºä»€ä¹ˆéœ€è¦-receiver" class="headerlink" title="Proxy çš„ get çš„ä¸‰ä¸ªå‚æ•°çš„æ„ä¹‰/ä¸ºä»€ä¹ˆéœ€è¦ receiver"></a>Proxy çš„ get çš„ä¸‰ä¸ªå‚æ•°çš„æ„ä¹‰/ä¸ºä»€ä¹ˆéœ€è¦ receiver</h2><p>get ä¸‰ä¸ªå‚æ•°æ˜¯target key receiver<br>targetæ˜¯æŒ‡è¢«åŠ«æŒçš„å¯¹è±¡ keyæ˜¯åŠ«æŒå¯¹è±¡çš„å±æ€§ receiveræ˜¯ä»£ç†å¯¹è±¡</p><p>å‰ä¸¤ä¸ªæ²¡å•¥å¥½è¯´çš„ ä¸»è¦æ˜¯receiverè¿™ä¸ª ä»–æ˜¯ä¸ºäº†ä¼ é€’æ­£ç¡®çš„æŒ‡å‘è€Œäº§ç”Ÿçš„ï¼Œè§ä¸Šé¢çš„ä¾‹å­</p><p>receiverä¸ä»…è¡¨ç¤ºä»£ç†å¯¹è±¡æœ¬èº«ï¼Œè¿˜æœ‰å¯èƒ½è¡¨ç¤ºç»§æ‰¿äºä»£ç†å¯¹è±¡çš„å¯¹è±¡</p><h2 id="MVC-å’Œ-MVVM-çš„åŒºåˆ«"><a href="#MVC-å’Œ-MVVM-çš„åŒºåˆ«" class="headerlink" title="MVC å’Œ MVVM çš„åŒºåˆ«"></a>MVC å’Œ MVVM çš„åŒºåˆ«</h2><h2 id="ä¸ºä»€ä¹ˆ-data-æ˜¯ä¸€ä¸ªå‡½æ•°"><a href="#ä¸ºä»€ä¹ˆ-data-æ˜¯ä¸€ä¸ªå‡½æ•°" class="headerlink" title="ä¸ºä»€ä¹ˆ data æ˜¯ä¸€ä¸ªå‡½æ•°"></a>ä¸ºä»€ä¹ˆ data æ˜¯ä¸€ä¸ªå‡½æ•°</h2><h2 id="Vue-ç»„ä»¶é€šè®¯æœ‰é‚£äº›æ–¹å¼ï¼Ÿ"><a href="#Vue-ç»„ä»¶é€šè®¯æœ‰é‚£äº›æ–¹å¼ï¼Ÿ" class="headerlink" title="Vue ç»„ä»¶é€šè®¯æœ‰é‚£äº›æ–¹å¼ï¼Ÿ"></a>Vue ç»„ä»¶é€šè®¯æœ‰é‚£äº›æ–¹å¼ï¼Ÿ</h2><h2 id="Vue-çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•æœ‰é‚£äº›ï¼Ÿåœ¨å“ªä¸€æ­¥å‘é€è¯·æ±‚"><a href="#Vue-çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•æœ‰é‚£äº›ï¼Ÿåœ¨å“ªä¸€æ­¥å‘é€è¯·æ±‚" class="headerlink" title="Vue çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•æœ‰é‚£äº›ï¼Ÿåœ¨å“ªä¸€æ­¥å‘é€è¯·æ±‚"></a>Vue çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•æœ‰é‚£äº›ï¼Ÿåœ¨å“ªä¸€æ­¥å‘é€è¯·æ±‚</h2><h2 id="è¯´è¯´-Vue-çš„å†…ç½®æŒ‡ä»¤ã€‚"><a href="#è¯´è¯´-Vue-çš„å†…ç½®æŒ‡ä»¤ã€‚" class="headerlink" title="è¯´è¯´ Vue çš„å†…ç½®æŒ‡ä»¤ã€‚"></a>è¯´è¯´ Vue çš„å†…ç½®æŒ‡ä»¤ã€‚</h2><h2 id="æ€ä¹ˆç†è§£-Vue-çš„å•å‘æ•°æ®æµ"><a href="#æ€ä¹ˆç†è§£-Vue-çš„å•å‘æ•°æ®æµ" class="headerlink" title="æ€ä¹ˆç†è§£ Vue çš„å•å‘æ•°æ®æµ"></a>æ€ä¹ˆç†è§£ Vue çš„å•å‘æ•°æ®æµ</h2><h2 id="computed-å’Œ-watch-çš„åŒºåˆ«å’Œè¿ç”¨çš„åœºæ™¯"><a href="#computed-å’Œ-watch-çš„åŒºåˆ«å’Œè¿ç”¨çš„åœºæ™¯" class="headerlink" title="computed å’Œ watch çš„åŒºåˆ«å’Œè¿ç”¨çš„åœºæ™¯"></a>computed å’Œ watch çš„åŒºåˆ«å’Œè¿ç”¨çš„åœºæ™¯</h2><h2 id="æœªè¢«-template-ä½¿ç”¨çš„å…ƒç´ ï¼Œcomputed-ä¸­çš„å±æ€§ä¾èµ–çš„-data-å‘ç”Ÿæ”¹å˜äº†ï¼Œcomputed-ä¼šé‡æ–°è®¡ç®—å—"><a href="#æœªè¢«-template-ä½¿ç”¨çš„å…ƒç´ ï¼Œcomputed-ä¸­çš„å±æ€§ä¾èµ–çš„-data-å‘ç”Ÿæ”¹å˜äº†ï¼Œcomputed-ä¼šé‡æ–°è®¡ç®—å—" class="headerlink" title="æœªè¢« template ä½¿ç”¨çš„å…ƒç´ ï¼Œcomputed ä¸­çš„å±æ€§ä¾èµ–çš„ data å‘ç”Ÿæ”¹å˜äº†ï¼Œcomputed ä¼šé‡æ–°è®¡ç®—å—"></a>æœªè¢« template ä½¿ç”¨çš„å…ƒç´ ï¼Œcomputed ä¸­çš„å±æ€§ä¾èµ–çš„ data å‘ç”Ÿæ”¹å˜äº†ï¼Œcomputed ä¼šé‡æ–°è®¡ç®—å—</h2><h2 id="v-if-å’Œ-v-for-ä¸ºä»€ä¹ˆä¸å»ºè®®ä¸€èµ·ä½¿ç”¨ã€‚"><a href="#v-if-å’Œ-v-for-ä¸ºä»€ä¹ˆä¸å»ºè®®ä¸€èµ·ä½¿ç”¨ã€‚" class="headerlink" title="v-if å’Œ v-for ä¸ºä»€ä¹ˆä¸å»ºè®®ä¸€èµ·ä½¿ç”¨ã€‚"></a>v-if å’Œ v-for ä¸ºä»€ä¹ˆä¸å»ºè®®ä¸€èµ·ä½¿ç”¨ã€‚</h2><h2 id="Vue-å“åº”å¼æ•°æ®çš„åŸç†"><a href="#Vue-å“åº”å¼æ•°æ®çš„åŸç†" class="headerlink" title="Vue å“åº”å¼æ•°æ®çš„åŸç†"></a>Vue å“åº”å¼æ•°æ®çš„åŸç†</h2><h2 id="vue3-0-ç”¨è¿‡å—-äº†è§£å¤šå°‘"><a href="#vue3-0-ç”¨è¿‡å—-äº†è§£å¤šå°‘" class="headerlink" title="vue3.0 ç”¨è¿‡å— äº†è§£å¤šå°‘"></a>vue3.0 ç”¨è¿‡å— äº†è§£å¤šå°‘</h2><h2 id="Vue-çš„çˆ¶å­ç»„ä»¶ç”Ÿå‘½å‘¨æœŸé’©å­æ‰§è¡Œé¡ºåº"><a href="#Vue-çš„çˆ¶å­ç»„ä»¶ç”Ÿå‘½å‘¨æœŸé’©å­æ‰§è¡Œé¡ºåº" class="headerlink" title="Vue çš„çˆ¶å­ç»„ä»¶ç”Ÿå‘½å‘¨æœŸé’©å­æ‰§è¡Œé¡ºåº"></a>Vue çš„çˆ¶å­ç»„ä»¶ç”Ÿå‘½å‘¨æœŸé’©å­æ‰§è¡Œé¡ºåº</h2><h2 id="è™šæ‹Ÿ-DOM-æ˜¯ä»€ä¹ˆ-æœ‰ä»€ä¹ˆä¼˜ç¼ºç‚¹"><a href="#è™šæ‹Ÿ-DOM-æ˜¯ä»€ä¹ˆ-æœ‰ä»€ä¹ˆä¼˜ç¼ºç‚¹" class="headerlink" title="è™šæ‹Ÿ DOM æ˜¯ä»€ä¹ˆ æœ‰ä»€ä¹ˆä¼˜ç¼ºç‚¹"></a>è™šæ‹Ÿ DOM æ˜¯ä»€ä¹ˆ æœ‰ä»€ä¹ˆä¼˜ç¼ºç‚¹</h2><h2 id="è™šæ‹Ÿ-DOM-åŸç†"><a href="#è™šæ‹Ÿ-DOM-åŸç†" class="headerlink" title="è™šæ‹Ÿ DOM åŸç†"></a>è™šæ‹Ÿ DOM åŸç†</h2><h2 id="v-model-çš„åŸç†"><a href="#v-model-çš„åŸç†" class="headerlink" title="v-model çš„åŸç†"></a>v-model çš„åŸç†</h2><h2 id="vue-äº‹ä»¶ç»‘å®šåŸç†"><a href="#vue-äº‹ä»¶ç»‘å®šåŸç†" class="headerlink" title="vue äº‹ä»¶ç»‘å®šåŸç†"></a>vue äº‹ä»¶ç»‘å®šåŸç†</h2><h2 id="v-for-ä¸ºä»€ä¹ˆè¦åŠ -key"><a href="#v-for-ä¸ºä»€ä¹ˆè¦åŠ -key" class="headerlink" title="v-for ä¸ºä»€ä¹ˆè¦åŠ  key"></a>v-for ä¸ºä»€ä¹ˆè¦åŠ  key</h2><h2 id="æ‰‹å†™å‘å¸ƒè®¢é˜…"><a href="#æ‰‹å†™å‘å¸ƒè®¢é˜…" class="headerlink" title="æ‰‹å†™å‘å¸ƒè®¢é˜…"></a>æ‰‹å†™å‘å¸ƒè®¢é˜…</h2><h2 id="vue-router-è·¯ç”±é’©å­å‡½æ•°æ˜¯ä»€ä¹ˆ-æ‰§è¡Œé¡ºåºæ˜¯ä»€ä¹ˆ"><a href="#vue-router-è·¯ç”±é’©å­å‡½æ•°æ˜¯ä»€ä¹ˆ-æ‰§è¡Œé¡ºåºæ˜¯ä»€ä¹ˆ" class="headerlink" title="vue-router è·¯ç”±é’©å­å‡½æ•°æ˜¯ä»€ä¹ˆ æ‰§è¡Œé¡ºåºæ˜¯ä»€ä¹ˆ"></a>vue-router è·¯ç”±é’©å­å‡½æ•°æ˜¯ä»€ä¹ˆ æ‰§è¡Œé¡ºåºæ˜¯ä»€ä¹ˆ</h2><h2 id="vue-router-åŸç†"><a href="#vue-router-åŸç†" class="headerlink" title="vue-router åŸç†"></a>vue-router åŸç†</h2><h2 id="vue-router-åŠ¨æ€è·¯ç”±æ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆé—®é¢˜"><a href="#vue-router-åŠ¨æ€è·¯ç”±æ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆé—®é¢˜" class="headerlink" title="vue-router åŠ¨æ€è·¯ç”±æ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆé—®é¢˜"></a>vue-router åŠ¨æ€è·¯ç”±æ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆé—®é¢˜</h2><h2 id="Vuex-çš„ç†è§£"><a href="#Vuex-çš„ç†è§£" class="headerlink" title="Vuex çš„ç†è§£"></a>Vuex çš„ç†è§£</h2><h2 id="Vuex-é¡µé¢åˆ·æ–°æ•°æ®ä¸¢å¤±æ€ä¹ˆè§£å†³"><a href="#Vuex-é¡µé¢åˆ·æ–°æ•°æ®ä¸¢å¤±æ€ä¹ˆè§£å†³" class="headerlink" title="Vuex é¡µé¢åˆ·æ–°æ•°æ®ä¸¢å¤±æ€ä¹ˆè§£å†³"></a>Vuex é¡µé¢åˆ·æ–°æ•°æ®ä¸¢å¤±æ€ä¹ˆè§£å†³</h2><h2 id="Vuex-ä¸ºä»€ä¹ˆè¦åˆ†æ¨¡å—è€Œä¸”åŠ å‘½åç©ºé—´"><a href="#Vuex-ä¸ºä»€ä¹ˆè¦åˆ†æ¨¡å—è€Œä¸”åŠ å‘½åç©ºé—´" class="headerlink" title="Vuex ä¸ºä»€ä¹ˆè¦åˆ†æ¨¡å—è€Œä¸”åŠ å‘½åç©ºé—´"></a>Vuex ä¸ºä»€ä¹ˆè¦åˆ†æ¨¡å—è€Œä¸”åŠ å‘½åç©ºé—´</h2><h2 id="ä½¿ç”¨è¿‡-Vue-SSR-å—ï¼Ÿè¯´ä¸€è¯´-SSR"><a href="#ä½¿ç”¨è¿‡-Vue-SSR-å—ï¼Ÿè¯´ä¸€è¯´-SSR" class="headerlink" title="ä½¿ç”¨è¿‡ Vue SSR å—ï¼Ÿè¯´ä¸€è¯´ SSR"></a>ä½¿ç”¨è¿‡ Vue SSR å—ï¼Ÿè¯´ä¸€è¯´ SSR</h2><h2 id="Vue-ä½¿ç”¨äº†å“ªäº›è®¾è®¡è€…æ¨¡å¼"><a href="#Vue-ä½¿ç”¨äº†å“ªäº›è®¾è®¡è€…æ¨¡å¼" class="headerlink" title="Vue ä½¿ç”¨äº†å“ªäº›è®¾è®¡è€…æ¨¡å¼"></a>Vue ä½¿ç”¨äº†å“ªäº›è®¾è®¡è€…æ¨¡å¼</h2><h2 id="ä½ åšè¿‡å“ªäº›-vue-çš„æ€§èƒ½ä¼˜åŒ–"><a href="#ä½ åšè¿‡å“ªäº›-vue-çš„æ€§èƒ½ä¼˜åŒ–" class="headerlink" title="ä½ åšè¿‡å“ªäº› vue çš„æ€§èƒ½ä¼˜åŒ–"></a>ä½ åšè¿‡å“ªäº› vue çš„æ€§èƒ½ä¼˜åŒ–</h2><h2 id="Vue-mixin-çš„ä½¿ç”¨åœºæ™¯å’ŒåŸç†"><a href="#Vue-mixin-çš„ä½¿ç”¨åœºæ™¯å’ŒåŸç†" class="headerlink" title="Vue.mixin çš„ä½¿ç”¨åœºæ™¯å’ŒåŸç†"></a>Vue.mixin çš„ä½¿ç”¨åœºæ™¯å’ŒåŸç†</h2><h2 id="keep-alive-ä½¿ç”¨åœºæ™¯"><a href="#keep-alive-ä½¿ç”¨åœºæ™¯" class="headerlink" title="keep-alive ä½¿ç”¨åœºæ™¯"></a>keep-alive ä½¿ç”¨åœºæ™¯</h2><h2 id="LRU"><a href="#LRU" class="headerlink" title="LRU"></a>LRU</h2><h2 id="æ‰‹æ’•-keep-alive"><a href="#æ‰‹æ’•-keep-alive" class="headerlink" title="æ‰‹æ’• keep-alive"></a>æ‰‹æ’• keep-alive</h2><h2 id="Vue-set-æ–¹æ³•åŸç†"><a href="#Vue-set-æ–¹æ³•åŸç†" class="headerlink" title="Vue.set æ–¹æ³•åŸç†"></a>Vue.set æ–¹æ³•åŸç†</h2><h2 id="Vue-extend-åŸç†"><a href="#Vue-extend-åŸç†" class="headerlink" title="Vue.extend åŸç†"></a>Vue.extend åŸç†</h2><h2 id="å†™è¿‡è‡ªå®šä¹‰æŒ‡ä»¤å—-åŸç†æ˜¯å•¥"><a href="#å†™è¿‡è‡ªå®šä¹‰æŒ‡ä»¤å—-åŸç†æ˜¯å•¥" class="headerlink" title="å†™è¿‡è‡ªå®šä¹‰æŒ‡ä»¤å— åŸç†æ˜¯å•¥"></a>å†™è¿‡è‡ªå®šä¹‰æŒ‡ä»¤å— åŸç†æ˜¯å•¥</h2><h2 id="ä»€ä¹ˆæ˜¯-AST-è¯­æ³•æ ‘"><a href="#ä»€ä¹ˆæ˜¯-AST-è¯­æ³•æ ‘" class="headerlink" title="ä»€ä¹ˆæ˜¯ AST è¯­æ³•æ ‘"></a>ä»€ä¹ˆæ˜¯ AST è¯­æ³•æ ‘</h2><h2 id="Vue-ä¿®é¥°ç¬¦æœ‰å“ªäº›"><a href="#Vue-ä¿®é¥°ç¬¦æœ‰å“ªäº›" class="headerlink" title="Vue ä¿®é¥°ç¬¦æœ‰å“ªäº›"></a>Vue ä¿®é¥°ç¬¦æœ‰å“ªäº›</h2><h2 id="Vue-æ¨¡æ¿ç¼–è¯‘åŸç†"><a href="#Vue-æ¨¡æ¿ç¼–è¯‘åŸç†" class="headerlink" title="Vue æ¨¡æ¿ç¼–è¯‘åŸç†"></a>Vue æ¨¡æ¿ç¼–è¯‘åŸç†</h2><h2 id="ç”Ÿå‘½å‘¨æœŸé’©å­æ˜¯å¦‚ä½•å®ç°çš„"><a href="#ç”Ÿå‘½å‘¨æœŸé’©å­æ˜¯å¦‚ä½•å®ç°çš„" class="headerlink" title="ç”Ÿå‘½å‘¨æœŸé’©å­æ˜¯å¦‚ä½•å®ç°çš„"></a>ç”Ÿå‘½å‘¨æœŸé’©å­æ˜¯å¦‚ä½•å®ç°çš„</h2><h2 id="å‡½æ•°å¼ç»„ä»¶ä½¿ç”¨åœºæ™¯å’ŒåŸç†"><a href="#å‡½æ•°å¼ç»„ä»¶ä½¿ç”¨åœºæ™¯å’ŒåŸç†" class="headerlink" title="å‡½æ•°å¼ç»„ä»¶ä½¿ç”¨åœºæ™¯å’ŒåŸç†"></a>å‡½æ•°å¼ç»„ä»¶ä½¿ç”¨åœºæ™¯å’ŒåŸç†</h2><h2 id="diff-ç®—æ³•äº†è§£å—"><a href="#diff-ç®—æ³•äº†è§£å—" class="headerlink" title="diff ç®—æ³•äº†è§£å—"></a>diff ç®—æ³•äº†è§£å—</h2><h1 id="react"><a href="#react" class="headerlink" title="react"></a>react</h1><h1 id="webpack"><a href="#webpack" class="headerlink" title="webpack"></a>webpack</h1><h1 id=""><a href="#" class="headerlink" title="#"></a>#</h1><h1 id="è®¡ç½‘"><a href="#è®¡ç½‘" class="headerlink" title="è®¡ç½‘"></a>è®¡ç½‘</h1><h2 id="OSI-ä¸ƒå±‚"><a href="#OSI-ä¸ƒå±‚" class="headerlink" title="OSI ä¸ƒå±‚"></a>OSI ä¸ƒå±‚</h2><h1 id="æ“ä½œç³»ç»Ÿ"><a href="#æ“ä½œç³»ç»Ÿ" class="headerlink" title="æ“ä½œç³»ç»Ÿ"></a>æ“ä½œç³»ç»Ÿ</h1><h1 id="Node"><a href="#Node" class="headerlink" title="Node"></a>Node</h1><h1 id="HTML"><a href="#HTML" class="headerlink" title="HTML"></a>HTML</h1><h2 id="å¦‚ä½•å®ç°å›¾ç‰‡çš„æ‡’åŠ è½½"><a href="#å¦‚ä½•å®ç°å›¾ç‰‡çš„æ‡’åŠ è½½" class="headerlink" title="å¦‚ä½•å®ç°å›¾ç‰‡çš„æ‡’åŠ è½½"></a>å¦‚ä½•å®ç°å›¾ç‰‡çš„æ‡’åŠ è½½</h2><h2 id="è¡Œå†…-å—-ç©ºå…ƒç´ "><a href="#è¡Œå†…-å—-ç©ºå…ƒç´ " class="headerlink" title="è¡Œå†… å— ç©ºå…ƒç´ "></a>è¡Œå†… å— ç©ºå…ƒç´ </h2><p>è¡Œå†…å…ƒç´ æœ‰ï¼š<code>a</code> <code>b</code> <code>span</code> <code>img</code> <code>input</code> <code>select</code> <code>strong</code> <code>button</code> ï¼›<br>å—çº§å…ƒç´ æœ‰ï¼š<code>div</code> <code>ul</code> <code>ol</code> <code>li</code> <code>dl</code> <code>dt</code> <code>dd</code> <code>h1</code> <code>h2</code> <code>h3</code> <code>h4</code> <code>h5</code> <code>h6</code> <code>p</code><br>ç©ºå…ƒç´ ï¼Œå³æ²¡æœ‰å†…å®¹çš„ HTML å…ƒç´ ã€‚ç©ºå…ƒç´ æ˜¯åœ¨å¼€å§‹æ ‡ç­¾ä¸­å…³é—­çš„ï¼Œä¹Ÿå°±æ˜¯ç©ºå…ƒç´ æ²¡æœ‰é—­åˆæ ‡ç­¾ï¼š<br>å¸¸è§çš„æœ‰ï¼š<code>&lt;br&gt;</code>ã€<code>&lt;hr&gt;</code>ã€<code>&lt;img&gt;</code>ã€<code>&lt;input&gt;</code>ã€<code>&lt;link&gt;</code>ã€<code>&lt;meta&gt;</code></p><h2 id="linkå’Œimport-çš„åŒºåˆ«"><a href="#linkå’Œimport-çš„åŒºåˆ«" class="headerlink" title="linkå’Œimport çš„åŒºåˆ«"></a><code>link</code>å’Œ<code>import</code> çš„åŒºåˆ«</h2><p>link é™¤äº†å¼•ç”¨æ ·å¼æ–‡ä»¶ï¼Œè¿˜å¯ä»¥å¼•ç”¨å›¾ç‰‡ç­‰èµ„æºæ–‡ä»¶ï¼Œè€Œ import åªå¼•ç”¨æ ·å¼æ–‡ä»¶<br>link å±äº html èŒƒç•´ import å±äº css èŒƒç•´</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;icon&quot;</span> <span class="attr">sizes</span>=<span class="string">&quot;any&quot;</span> <span class="attr">mask</span> <span class="attr">href</span>=<span class="string">&quot;//www.baidu.com/img/baidu.svg&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure><p>å…¼å®¹æ€§ä¸åŒï¼Œlink ä¸å­˜åœ¨å…¼å®¹æ€§çš„é—®é¢˜ï¼Œimport åœ¨ IE5 ä»¥ä¸Šæ”¯æŒï¼Œæ˜¯ css2.1 æ–°å¢çš„<br>åœ¨æ ·å¼è¡¨æ–‡ä»¶å¯ä»¥ä½¿ç”¨ import å¯¼å…¥å…¶å®ƒçš„æ ·å¼è¡¨æ–‡ä»¶ï¼Œè€Œ link ä¸å¯ä»¥<br>link å¼•ç”¨ CSS æ—¶ï¼Œåœ¨é¡µé¢è½½å…¥æ—¶åŒæ—¶åŠ è½½ï¼›@import éœ€è¦é¡µé¢ç½‘é¡µå®Œå…¨è½½å…¥ä»¥ååŠ è½½ã€‚<br>link æ”¯æŒä½¿ç”¨ Javascript æ§åˆ¶ DOM å»æ”¹å˜æ ·å¼ï¼›è€Œ@import ä¸æ”¯æŒã€‚</p><h2 id="ä½ äº†è§£çš„-video-æ ‡ç­¾"><a href="#ä½ äº†è§£çš„-video-æ ‡ç­¾" class="headerlink" title="ä½ äº†è§£çš„ video æ ‡ç­¾"></a>ä½ äº†è§£çš„ video æ ‡ç­¾</h2><h2 id="h5-æ–°ç‰¹æ€§æœ‰å“ªäº›"><a href="#h5-æ–°ç‰¹æ€§æœ‰å“ªäº›" class="headerlink" title="h5 æ–°ç‰¹æ€§æœ‰å“ªäº›"></a>h5 æ–°ç‰¹æ€§æœ‰å“ªäº›</h2><h2 id="H5-ç¦»çº¿å­˜å‚¨"><a href="#H5-ç¦»çº¿å­˜å‚¨" class="headerlink" title="H5 ç¦»çº¿å­˜å‚¨"></a>H5 ç¦»çº¿å­˜å‚¨</h2><p>ç¦»çº¿å­˜å‚¨æŒ‡çš„æ˜¯ï¼šåœ¨ç”¨æˆ·æ²¡æœ‰ä¸å› ç‰¹ç½‘è¿æ¥æ—¶ï¼Œå¯ä»¥æ­£å¸¸è®¿é—®ç«™ç‚¹æˆ–åº”ç”¨ï¼Œåœ¨ç”¨æˆ·ä¸å› ç‰¹ç½‘è¿æ¥æ—¶ï¼Œæ›´æ–°ç”¨æˆ·æœºå™¨ä¸Šçš„ç¼“å­˜æ–‡ä»¶ã€‚</p><p>åŸç†ï¼šHTML5 çš„ç¦»çº¿å­˜å‚¨æ˜¯åŸºäºä¸€ä¸ªæ–°å»ºçš„ .appcache æ–‡ä»¶çš„ç¼“å­˜æœºåˆ¶(ä¸æ˜¯å­˜å‚¨æŠ€æœ¯)ï¼Œé€šè¿‡è¿™ä¸ªæ–‡ä»¶ä¸Šçš„è§£ææ¸…å•ç¦»çº¿å­˜å‚¨èµ„æºï¼Œè¿™äº›èµ„æºå°±ä¼šåƒ cookie ä¸€æ ·è¢«å­˜å‚¨äº†ä¸‹æ¥ã€‚ä¹‹åå½“ç½‘ç»œåœ¨å¤„äºç¦»çº¿çŠ¶æ€ä¸‹æ—¶ï¼Œæµè§ˆå™¨ä¼šé€šè¿‡è¢«ç¦»çº¿å­˜å‚¨çš„æ•°æ®è¿›è¡Œé¡µé¢å±•ç¤º</p><p>ä½¿ç”¨æ–¹æ³•ï¼š ï¼ˆ1ï¼‰åˆ›å»ºä¸€ä¸ªå’Œ html åŒåçš„ manifest æ–‡ä»¶ï¼Œç„¶ååœ¨é¡µé¢å¤´éƒ¨åŠ å…¥ manifest å±æ€§ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span> <span class="attr">manifest</span>=<span class="string">&quot;index.manifest&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>CopyErrorCopied<br>ï¼ˆ2ï¼‰åœ¨ cache.manifest æ–‡ä»¶ä¸­ç¼–å†™éœ€è¦ç¦»çº¿å­˜å‚¨çš„èµ„æºï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">CACHE MANIFEST #v0.11 CACHE: js/app.js css/style.css NETWORK: resourse/logo.png</span><br><span class="line">FALLBACK: / /offline.html CopyErrorCopied</span><br></pre></td></tr></table></figure><p>CACHE: è¡¨ç¤ºéœ€è¦ç¦»çº¿å­˜å‚¨çš„èµ„æºåˆ—è¡¨ï¼Œç”±äºåŒ…å« manifest æ–‡ä»¶çš„é¡µé¢å°†è¢«è‡ªåŠ¨ç¦»çº¿å­˜å‚¨ï¼Œæ‰€ä»¥ä¸éœ€è¦æŠŠé¡µé¢è‡ªèº«ä¹Ÿåˆ—å‡ºæ¥ã€‚<br>NETWORK: è¡¨ç¤ºåœ¨å®ƒä¸‹é¢åˆ—å‡ºæ¥çš„èµ„æºåªæœ‰åœ¨åœ¨çº¿çš„æƒ…å†µä¸‹æ‰èƒ½è®¿é—®ï¼Œä»–ä»¬ä¸ä¼šè¢«ç¦»çº¿å­˜å‚¨ï¼Œæ‰€ä»¥åœ¨ç¦»çº¿æƒ…å†µä¸‹æ— æ³•ä½¿ç”¨è¿™äº›èµ„æºã€‚ä¸è¿‡ï¼Œå¦‚æœåœ¨ CACHE å’Œ NETWORK ä¸­æœ‰ä¸€ä¸ªç›¸åŒçš„èµ„æºï¼Œé‚£ä¹ˆè¿™ä¸ªèµ„æºè¿˜æ˜¯ä¼šè¢«ç¦»çº¿å­˜å‚¨ï¼Œä¹Ÿå°±æ˜¯è¯´ CACHE çš„ä¼˜å…ˆçº§æ›´é«˜ã€‚<br>FALLBACK: è¡¨ç¤ºå¦‚æœè®¿é—®ç¬¬ä¸€ä¸ªèµ„æºå¤±è´¥ï¼Œé‚£ä¹ˆå°±ä½¿ç”¨ç¬¬äºŒä¸ªèµ„æºæ¥æ›¿æ¢ä»–ï¼Œæ¯”å¦‚ä¸Šé¢è¿™ä¸ªæ–‡ä»¶è¡¨ç¤ºçš„å°±æ˜¯å¦‚æœè®¿é—®æ ¹ç›®å½•ä¸‹ä»»ä½•ä¸€ä¸ªèµ„æºå¤±è´¥äº†ï¼Œé‚£ä¹ˆå°±å»è®¿é—® offline.html ã€‚<br>ï¼ˆ3ï¼‰åœ¨ç¦»çº¿çŠ¶æ€æ—¶ï¼Œæ“ä½œ window.applicationCache è¿›è¡Œç¦»çº¿ç¼“å­˜çš„æ“ä½œã€‚</p><p>å¦‚ä½•æ›´æ–°ç¼“å­˜ï¼š</p><p>ï¼ˆ1ï¼‰æ›´æ–° manifest æ–‡ä»¶</p><p>ï¼ˆ2ï¼‰é€šè¿‡ javascript æ“ä½œ</p><p>ï¼ˆ3ï¼‰æ¸…é™¤æµè§ˆå™¨ç¼“å­˜</p><h2 id="dragAPI"><a href="#dragAPI" class="headerlink" title="dragAPI"></a>dragAPI</h2><p>ä¸€ä¸ªå…¸å‹çš„æ‹–æ”¾æ“ä½œæ˜¯è¿™æ ·çš„ï¼šç”¨æˆ·é€‰ä¸­ä¸€ä¸ªå¯æ‹–æ‹½çš„(draggable) å…ƒç´ ï¼Œå¹¶å°†å…¶æ‹–æ‹½ï¼ˆé¼ æ ‡ä¸æ”¾å¼€ï¼‰åˆ°ä¸€ä¸ªå¯æ”¾ç½®çš„(droppable) å…ƒç´ ï¼Œç„¶åé‡Šæ”¾é¼ æ ‡ã€‚</p><p>åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæœ€é‡è¦çš„ä¸‰ä¸ªç‚¹æ˜¯ï¼š</p><p>è®©å…ƒç´ å¯æ‹–æ‹½<br>è®©å¦ä¸€ä¸ªå…ƒç´ æ”¯æŒå¯æ”¾ç½®<br>å¯æ‹–æ‹½å’Œå¯æ”¾ç½®å…ƒç´ ä¹‹é—´çš„æ•°æ®ä¼ é€’<br>dragstartï¼šäº‹ä»¶ä¸»ä½“æ˜¯è¢«æ‹–æ”¾å…ƒç´ ï¼Œåœ¨å¼€å§‹æ‹–æ”¾è¢«æ‹–æ”¾å…ƒç´ æ—¶è§¦å‘ã€‚<br>dargï¼šäº‹ä»¶ä¸»ä½“æ˜¯è¢«æ‹–æ”¾å…ƒç´ ï¼Œåœ¨æ­£åœ¨æ‹–æ”¾è¢«æ‹–æ”¾å…ƒç´ æ—¶è§¦å‘ã€‚<br>dragenterï¼šäº‹ä»¶ä¸»ä½“æ˜¯ç›®æ ‡å…ƒç´ ï¼Œåœ¨è¢«æ‹–æ”¾å…ƒç´ è¿›å…¥æŸå…ƒç´ æ—¶è§¦å‘ã€‚<br>dragoverï¼šäº‹ä»¶ä¸»ä½“æ˜¯ç›®æ ‡å…ƒç´ ï¼Œåœ¨è¢«æ‹–æ”¾åœ¨æŸå…ƒç´ å†…ç§»åŠ¨æ—¶è§¦å‘ã€‚<br>dragleaveï¼šäº‹ä»¶ä¸»ä½“æ˜¯ç›®æ ‡å…ƒç´ ï¼Œåœ¨è¢«æ‹–æ”¾å…ƒç´ ç§»å‡ºç›®æ ‡å…ƒç´ æ˜¯è§¦å‘ã€‚<br>dropï¼šäº‹ä»¶ä¸»ä½“æ˜¯ç›®æ ‡å…ƒç´ ï¼Œåœ¨ç›®æ ‡å…ƒç´ å®Œå…¨æ¥å—è¢«æ‹–æ”¾å…ƒç´ æ—¶è§¦å‘ã€‚<br>dragendï¼šäº‹ä»¶ä¸»ä½“æ˜¯è¢«æ‹–æ”¾å…ƒç´ ï¼Œåœ¨æ•´ä¸ªæ‹–æ”¾æ“ä½œç»“æŸæ—¶è§¦å‘ã€‚</p><div class="note primary flat"><p>é€‰ä¸­ â€”-&gt; æ‹–åŠ¨ â€”-&gt; é‡Šæ”¾</p></div><p>æ‹–åŠ¨äº‹ä»¶ï¼šdragstartã€dragã€dragend</p><p>æ”¾ç½®äº‹ä»¶ï¼šdragenterã€dragoverã€drop</p><p>æ‹–æ‹½äº‹ä»¶æµï¼šå½“æ‹–åŠ¨ä¸€ä¸ªå…ƒç´ æ”¾ç½®åˆ°ç›®æ ‡å…ƒç´ ä¸Šçš„æ—¶å€™å°†ä¼šæŒ‰ç…§å¦‚ä¸‹é¡ºåºä¾æ¬¡è§¦å‘ dragstart-&gt;drag-&gt;dragenter-&gt;dragover-&gt;drop-&gt;dragend</p><h2 id="meta-æ ‡ç­¾æœ‰å“ªäº›-æœ‰ä»€ä¹ˆä½œç”¨"><a href="#meta-æ ‡ç­¾æœ‰å“ªäº›-æœ‰ä»€ä¹ˆä½œç”¨" class="headerlink" title="meta æ ‡ç­¾æœ‰å“ªäº› æœ‰ä»€ä¹ˆä½œç”¨"></a>meta æ ‡ç­¾æœ‰å“ªäº› æœ‰ä»€ä¹ˆä½œç”¨</h2><p>meta æ ‡ç­¾ç”± name å’Œ content å±æ€§å®šä¹‰</p><p>ç”¨äºæè¿°ç½‘é¡µæ–‡æ¡£çš„å±æ€§ æ¯”å¦‚ ç½‘é¡µçš„ä½œè€… å…³é”®è¯ ç½‘ç«™æè¿°ç­‰ã€‚</p><p>ä»¥ä¸‹æ˜¯ä¸€äº›å›ºå®šçš„ name ä½œä¸ºå¤§å®¶çš„å…±è¯†</p><p>å¸¸ç”¨ meta æ ‡ç­¾ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å­—ç¬¦é›† --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- é¡µé¢å…³é”®è¯ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;keywords&quot;</span> <span class="attr">content</span>=<span class="string">&quot;å…³é”®è¯&quot;</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- é¡µé¢æè¿° --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;description&quot;</span> <span class="attr">content</span>=<span class="string">&quot;é¡µé¢æè¿°å†…å®¹&quot;</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- é¡µé¢é‡å®šå‘å’Œåˆ·æ–° --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;refresh&quot;</span> <span class="attr">content</span>=<span class="string">&quot;0;url=&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure><p>é€‚é…ç§»åŠ¨ç«¯</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span></span></span><br><span class="line"><span class="tag">  <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1, maximum-scale=1&quot;</span></span></span><br><span class="line"><span class="tag">/&gt;</span></span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œcontent å‚æ•°æœ‰ä»¥ä¸‹å‡ ç§ï¼š<br>width viewport ï¼šå®½åº¦(æ•°å€¼/device-width)<br>height viewport ï¼šé«˜åº¦(æ•°å€¼/device-height)<br>initial-scale ï¼šåˆå§‹ç¼©æ”¾æ¯”ä¾‹<br>maximum-scale ï¼šæœ€å¤§ç¼©æ”¾æ¯”ä¾‹<br>minimum-scale ï¼šæœ€å°ç¼©æ”¾æ¯”ä¾‹<br>user-scalable ï¼šæ˜¯å¦å…è®¸ç”¨æˆ·ç¼©æ”¾(yes/noï¼‰</p><p>æœç´¢å¼•æ“ç´¢å¼•æ–¹å¼ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;robots&quot;</span> <span class="attr">content</span>=<span class="string">&quot;index,follow&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œcontent å‚æ•°æœ‰ä»¥ä¸‹å‡ ç§ï¼š</p><p>allï¼šæ–‡ä»¶å°†è¢«æ£€ç´¢ï¼Œä¸”é¡µé¢ä¸Šçš„é“¾æ¥å¯ä»¥è¢«æŸ¥è¯¢ï¼›<br>noneï¼šæ–‡ä»¶å°†ä¸è¢«æ£€ç´¢ï¼Œä¸”é¡µé¢ä¸Šçš„é“¾æ¥ä¸å¯ä»¥è¢«æŸ¥è¯¢ï¼›<br>indexï¼šæ–‡ä»¶å°†è¢«æ£€ç´¢ï¼›<br>followï¼šé¡µé¢ä¸Šçš„é“¾æ¥å¯ä»¥è¢«æŸ¥è¯¢ï¼›<br>noindexï¼šæ–‡ä»¶å°†ä¸è¢«æ£€ç´¢ï¼›<br>nofollowï¼šé¡µé¢ä¸Šçš„é“¾æ¥ä¸å¯ä»¥è¢«æŸ¥è¯¢ã€‚</p><h2 id="script-æ ‡ç­¾ä¸­-defer-å’Œ-async-çš„åŒºåˆ«"><a href="#script-æ ‡ç­¾ä¸­-defer-å’Œ-async-çš„åŒºåˆ«" class="headerlink" title="script æ ‡ç­¾ä¸­ defer å’Œ async çš„åŒºåˆ«"></a>script æ ‡ç­¾ä¸­ defer å’Œ async çš„åŒºåˆ«</h2><p>å¦‚æœæ²¡æœ‰ defer å’Œ async æ ‡ç­¾,æµè§ˆå™¨å°±ä¼šç«‹åˆ»åŠ è½½å¹¶æ‰§è¡Œå¯¹åº”çš„è„šæœ¬ ä¸ä¼šç­‰å¾…åç»­åŠ è½½çš„æ–‡æ¡£å…ƒç´ ,è¯»åˆ°å°±å¼€å§‹åŠ è½½<br>ä¸‰è€…åŒºåˆ«å¦‚ä¸‹<br><a href="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220905102104.png">https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220905102104.png</a></p><p>è“è‰²è¡¨ç¤º js ç½‘ç»œåŠ è½½æ—¶é—´,çº¢è‰²è¡¨ç¤º js è„šæœ¬æ‰§è¡Œæ—¶é—´,ç»¿è‰²è¡¨ç¤º html è§£æ</p><p>defer å’Œ async å±æ€§éƒ½æ˜¯å»å¼‚æ­¥çš„åŠ è½½ js è„šæœ¬ æ‰€ä»¥ä¸ä¼šé˜»å¡é¡µé¢çš„è§£æ</p><p>åŒºåˆ«åœ¨äº:</p><ul><li>æ‰§è¡Œé¡ºåº: å¤šä¸ªå¸¦ async çš„æ ‡ç­¾ ä¸èƒ½ä¿è¯æ‰§è¡Œé¡ºåº å¤šä¸ªå¸¦ defer çš„æ ‡ç­¾ æŒ‰åºæ‰§è¡Œ</li><li>è„šæœ¬æ˜¯å¦å¹¶è¡Œæ‰§è¡Œ:<br>å¯¹äº async æ¥è¯´,åç»­çš„æ–‡æ¡£åŠ è½½ä¸æ‰§è¡Œå’Œ js è„šæœ¬åŠ è½½ä¸æ‰§è¡Œæ˜¯å¹¶è¡Œçš„<br>å¯¹äº defer æ¥è¯´,åç»­æ–‡æ¡£çš„åŠ è½½å’Œ js è„šæœ¬åŠ è½½æ˜¯å¹¶è¡Œçš„,ä½†æ˜¯æ‰§è¡Œéœ€è¦ç­‰å¾…æ–‡æ¡£å…ƒç´ è§£æå®Œä¹‹å,åœ¨<code>DOMContentLoaded</code>äº‹ä»¶ä¹‹å‰æ‰§è¡Œ.</li></ul><p>è¡¥å……ï¼ŒDOMContentLoaded äº‹ä»¶</p><ul><li>æ˜¯ç­‰ HTML æ–‡æ¡£å®Œå…¨åŠ è½½å®Œå’Œè§£æå®Œä¹‹åè¿è¡Œçš„äº‹ä»¶</li><li>åœ¨ load äº‹ä»¶ä¹‹å‰ã€‚</li><li>ä¸ç”¨ç­‰æ ·å¼è¡¨ã€å›¾åƒç­‰å®ŒæˆåŠ è½½</li></ul><h2 id="Doctype-ä½œç”¨"><a href="#Doctype-ä½œç”¨" class="headerlink" title="Doctype ä½œç”¨"></a>Doctype ä½œç”¨</h2><p>Doctype æ˜¯ html çš„æ–‡æ¡£ç±»å‹å£°æ˜,å‘Šè¯‰æµè§ˆå™¨è¦ä»¥ä»€ä¹ˆæ ·çš„æ–‡æ¡£å®šä¹‰ç±»å‹æ¥è§£ææ–‡æ¡£,é‚£ä¹ˆæ­¤æ—¶ä¸åŒçš„æ¸²æŸ“æ¨¡å¼ä¼šå½±å“ js å’Œ css çš„è§£æ</p><p>è€Œä¸”ä»–å¿…é¡»å£°æ˜åœ¨ç¬¬ä¸€è¡Œ,(ä¸å£°æ˜çš„è¯ å°±æ˜¯ æ€ªå¼‚æ¨¡å¼)</p><p>ç›®å‰æœ‰ä¸¤ç§æ¨¡å¼:</p><ol><li>æ ‡å‡†æ¨¡å¼: å‘Šè¯‰æµè§ˆå™¨ä½¿ç”¨ W3C çš„æ ‡å‡†å»è§£ææ¸²æŸ“é¡µé¢.</li><li>æ€ªå¼‚æ¨¡å¼: å‘Šè¯‰æµè§ˆå™¨ä½¿ç”¨è‡ªå·±çš„æ€ªå¼‚æ¨¡å¼å»è§£ææ¸²æŸ“é¡µé¢,åœ¨æ­¤æ¨¡å¼ä¸­ä»¥ä¸€ç§å‘åå…¼å®¹çš„æ–¹å¼è¿›è¡Œ</li></ol><p>è·å–æ¨¡å¼:<code>document.compatMode</code></p><h2 id="src-å’Œ-href-çš„åŒºåˆ«"><a href="#src-å’Œ-href-çš„åŒºåˆ«" class="headerlink" title="src å’Œ href çš„åŒºåˆ«"></a>src å’Œ href çš„åŒºåˆ«</h2><p>éƒ½æ˜¯ç”¨äºè¯·æ±‚ç›¸åº”çš„ç½‘ç»œèµ„æº,ä½†ä¸»è¦ä¸åŒç‚¹åœ¨äº</p><p>å½“æµè§ˆå™¨è§£æåˆ° src æ‰€å¯¹åº”çš„èµ„æºçš„æ—¶å€™,ä¼šæš‚åœå…¶ä»–èµ„æºçš„ä¸‹è½½å’Œå¤„ç†,ç›´åˆ°å°†è¯¥èµ„æºè§£æå®Œæ¯•,ä¸€èˆ¬æ˜¯ç”¨äºæ ‡ç­¾å†…å®¹çš„æ›¿æ¢,æ¯”å¦‚ img</p><p>å½“æµè§ˆå™¨è§£æåˆ° href çš„æ—¶å€™,ä¼šå¹¶è¡Œä¸‹è½½å¯¹åº”çš„èµ„æº,ä¸ä¼šé€ æˆé˜»å¡</p><h1 id="CSS"><a href="#CSS" class="headerlink" title="CSS"></a>CSS</h1><h2 id="BFC-çš„ç†è§£"><a href="#BFC-çš„ç†è§£" class="headerlink" title="BFC çš„ç†è§£"></a>BFC çš„ç†è§£</h2><p>BFC(Block formatting context)ç›´è¯‘ä¸ºâ€å—çº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡â€ã€‚å®ƒæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„æ¸²æŸ“åŒºåŸŸï¼Œåªæœ‰ Block-level box å‚ä¸,<br>å“ªäº›æƒ…å†µä¼šäº§ç”Ÿ BFC:<br>æ ¹å…ƒç´ <br>float å±æ€§ä¸ä¸º none<br>position ä¸º absolute æˆ– fixed<br>display ä¸º inline-block, table-cell, table-caption, flex, inline-flex<br>overflow ä¸ä¸º visible</p><h2 id="ç›’æ¨¡å‹çš„ç†è§£"><a href="#ç›’æ¨¡å‹çš„ç†è§£" class="headerlink" title="ç›’æ¨¡å‹çš„ç†è§£"></a>ç›’æ¨¡å‹çš„ç†è§£</h2><p>ç›’æ¨¡å‹éƒ½æ˜¯ç”±å››ä¸ªéƒ¨åˆ†ç»„æˆçš„ï¼Œåˆ†åˆ«æ˜¯ marginï¼Œborderï¼Œpadding å’Œ content</p><p>æ ‡å‡†ç›’æ¨¡å‹å’Œ IE ç›’æ¨¡å‹çš„åŒºåˆ«åœ¨äºè®¾ç½® width å’Œ height æ—¶ï¼Œæ‰€å¯¹åº”çš„èŒƒå›´ä¸åŒ</p><p>æ ‡å‡†ç›’æ¨¡å‹çš„ width å’Œ height å±æ€§åªåŒ…æ‹¬ content<br>ie ç›’æ¨¡å‹çš„ width å’Œ height åŒ…æ‹¬ border padding content</p><p>å¯ä»¥é€šè¿‡ box-sizing æ¥æ”¹å˜å…ƒç´ çš„ç›’æ¨¡å‹<br>æ ‡å‡†ç›’æ¨¡å‹:content-box;<br>æ€ªå¼‚ç›’æ¨¡å‹:border-box;</p><h2 id="animation-å±æ€§"><a href="#animation-å±æ€§" class="headerlink" title="animation å±æ€§"></a>animation å±æ€§</h2><h2 id="img-å’Œ-backgroundimg-çš„åŒºåˆ«"><a href="#img-å’Œ-backgroundimg-çš„åŒºåˆ«" class="headerlink" title="img å’Œ backgroundimg çš„åŒºåˆ«"></a>img å’Œ backgroundimg çš„åŒºåˆ«</h2><h2 id="æ°´å¹³å‚ç›´å±…ä¸­"><a href="#æ°´å¹³å‚ç›´å±…ä¸­" class="headerlink" title="æ°´å¹³å‚ç›´å±…ä¸­"></a>æ°´å¹³å‚ç›´å±…ä¸­</h2><h2 id="margin-left-å’Œ-margin-top-è‡ªèº«å®½åº¦çš„ä¸€åŠå’Œ-transform-translate-50-50-ï¼Œæœ‰ä»€ä¹ˆåŒºåˆ«"><a href="#margin-left-å’Œ-margin-top-è‡ªèº«å®½åº¦çš„ä¸€åŠå’Œ-transform-translate-50-50-ï¼Œæœ‰ä»€ä¹ˆåŒºåˆ«" class="headerlink" title="margin-left å’Œ margin-top è‡ªèº«å®½åº¦çš„ä¸€åŠå’Œ transform:translate(-50%,-50%)ï¼Œæœ‰ä»€ä¹ˆåŒºåˆ«"></a>margin-left å’Œ margin-top è‡ªèº«å®½åº¦çš„ä¸€åŠå’Œ transform:translate(-50%,-50%)ï¼Œæœ‰ä»€ä¹ˆåŒºåˆ«</h2><h2 id="åœ¨å¯¹äºæ²¡æœ‰è®¾ç½®é«˜åº¦ï¼Œé«˜åº¦ç”±å†…å®¹æ’‘èµ·æ¥çš„ç›’å­ä¸Šæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œè¿™ç§ç›’å­å¯ä»¥ä½¿ç”¨ä»€ä¹ˆæ–¹å¼å‚ç›´æ°´å¹³å±…ä¸­"><a href="#åœ¨å¯¹äºæ²¡æœ‰è®¾ç½®é«˜åº¦ï¼Œé«˜åº¦ç”±å†…å®¹æ’‘èµ·æ¥çš„ç›’å­ä¸Šæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œè¿™ç§ç›’å­å¯ä»¥ä½¿ç”¨ä»€ä¹ˆæ–¹å¼å‚ç›´æ°´å¹³å±…ä¸­" class="headerlink" title="åœ¨å¯¹äºæ²¡æœ‰è®¾ç½®é«˜åº¦ï¼Œé«˜åº¦ç”±å†…å®¹æ’‘èµ·æ¥çš„ç›’å­ä¸Šæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œè¿™ç§ç›’å­å¯ä»¥ä½¿ç”¨ä»€ä¹ˆæ–¹å¼å‚ç›´æ°´å¹³å±…ä¸­"></a>åœ¨å¯¹äºæ²¡æœ‰è®¾ç½®é«˜åº¦ï¼Œé«˜åº¦ç”±å†…å®¹æ’‘èµ·æ¥çš„ç›’å­ä¸Šæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œè¿™ç§ç›’å­å¯ä»¥ä½¿ç”¨ä»€ä¹ˆæ–¹å¼å‚ç›´æ°´å¹³å±…ä¸­</h2><h2 id="é€‰æ‹©å™¨ä¼˜å…ˆçº§"><a href="#é€‰æ‹©å™¨ä¼˜å…ˆçº§" class="headerlink" title="é€‰æ‹©å™¨ä¼˜å…ˆçº§"></a>é€‰æ‹©å™¨ä¼˜å…ˆçº§</h2><p>1.é€šé…ç¬¦é€‰æ‹©å™¨å’Œç»§æ‰¿:æƒé‡ä¸º 0ï¼Œ 2.æ ‡ç­¾é€‰æ‹©å™¨:æƒé‡ä¸º 0001 3.ç±»é€‰æ‹©å™¨:æƒé‡ä¸º 0010<br>4.id é€‰æ‹©å™¨:æƒé‡ä¸º 0100 5.è¡Œå†…æ ·å¼:æƒé‡ä¸º 1000<br>6.!important:æƒé‡ä¸ºæ— ç©·å¤§</p><h2 id="é‡ç»˜å’Œå›æµ-ä¸ºä»€ä¹ˆè¦å‡å°‘å›æµ-ä»€ä¹ˆæƒ…å†µå¼•èµ·å›æµ"><a href="#é‡ç»˜å’Œå›æµ-ä¸ºä»€ä¹ˆè¦å‡å°‘å›æµ-ä»€ä¹ˆæƒ…å†µå¼•èµ·å›æµ" class="headerlink" title="é‡ç»˜å’Œå›æµ ä¸ºä»€ä¹ˆè¦å‡å°‘å›æµ ä»€ä¹ˆæƒ…å†µå¼•èµ·å›æµ"></a>é‡ç»˜å’Œå›æµ ä¸ºä»€ä¹ˆè¦å‡å°‘å›æµ ä»€ä¹ˆæƒ…å†µå¼•èµ·å›æµ</h2><p>é‡ç»˜ç®€å•æ¥è¯´å°±æ˜¯é‡æ–°ç»˜ç”»ï¼Œå½“ä¸€ä¸ªå…ƒç´ æ›´æ¢èƒŒæ™¯ï¼Œæ›´æ¢é¢œè‰²ï¼Œè™½ç„¶ä¸ä¼šå½±å“é¡µé¢å¸ƒå±€ï¼Œä½†æ˜¯é¢œè‰²æˆ–è€…èƒŒæ™¯å˜äº†ï¼Œå°±ä¼šé‡æ–°æ¸²æŸ“é¡µé¢ï¼Œè¿™å°±æ˜¯é‡ç»˜</p><h2 id="flex1-ä»£è¡¨ä»€ä¹ˆ"><a href="#flex1-ä»£è¡¨ä»€ä¹ˆ" class="headerlink" title="flex1 ä»£è¡¨ä»€ä¹ˆ"></a>flex1 ä»£è¡¨ä»€ä¹ˆ</h2><h2 id="é»˜è®¤-1rem-æ˜¯å¤šå°‘-px"><a href="#é»˜è®¤-1rem-æ˜¯å¤šå°‘-px" class="headerlink" title="é»˜è®¤ 1rem æ˜¯å¤šå°‘ px"></a>é»˜è®¤ 1rem æ˜¯å¤šå°‘ px</h2><p>16</p><h2 id="chrome-æœ€å°å­—ä½“æ˜¯å¤šå°‘-px-æ€ä¹ˆå®ç°æ›´å°çš„å­—ä½“"><a href="#chrome-æœ€å°å­—ä½“æ˜¯å¤šå°‘-px-æ€ä¹ˆå®ç°æ›´å°çš„å­—ä½“" class="headerlink" title="chrome æœ€å°å­—ä½“æ˜¯å¤šå°‘ px æ€ä¹ˆå®ç°æ›´å°çš„å­—ä½“"></a>chrome æœ€å°å­—ä½“æ˜¯å¤šå°‘ px æ€ä¹ˆå®ç°æ›´å°çš„å­—ä½“</h2><p>æœ€å° 12px</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-webkit-<span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">0.5</span>);</span><br></pre></td></tr></table></figure><h2 id="SVG-å’Œ-Canvas-åŒºåˆ«"><a href="#SVG-å’Œ-Canvas-åŒºåˆ«" class="headerlink" title="SVG å’Œ Canvas åŒºåˆ«"></a>SVG å’Œ Canvas åŒºåˆ«</h2><h2 id="å¤–è¾¹è·å¡Œé™·é—®é¢˜"><a href="#å¤–è¾¹è·å¡Œé™·é—®é¢˜" class="headerlink" title="å¤–è¾¹è·å¡Œé™·é—®é¢˜"></a>å¤–è¾¹è·å¡Œé™·é—®é¢˜</h2><p>å½“ä¸¤ä¸ªåœ¨æ ‡å‡†æµä¸­ç›¸é‚»ï¼ˆå…„å¼Ÿæˆ–çˆ¶å­å…³ç³»ï¼‰çš„å—çº§å…ƒç´ çš„å¤–è¾¹è·ç»„åˆåœ¨ä¸€èµ·çš„æ—¶å€™ï¼Œå‚ç›´æ–¹å‘ä¸Šä¼šå‘ç”Ÿå¤–è¾¹è·å¡Œé™·çš„é—®é¢˜ï¼Œè®¡ç®—æ–¹å¼ï¼š</p><ol><li>ä¸¤ä¸ªéƒ½ä¸ºæ­£ï¼Œå–æœ€å¤§</li><li>ä¸€æ­£ä¸€è´ŸåŠ èµ·æ¥</li><li>ä¸¤ä¸ªè´Ÿ å–ç»å¯¹å€¼æœ€å¤§</li></ol><h2 id="çˆ¶ç±»é«˜åº¦å¡Œé™·é—®é¢˜"><a href="#çˆ¶ç±»é«˜åº¦å¡Œé™·é—®é¢˜" class="headerlink" title="çˆ¶ç±»é«˜åº¦å¡Œé™·é—®é¢˜"></a>çˆ¶ç±»é«˜åº¦å¡Œé™·é—®é¢˜</h2><p>å¦‚æœå­å…ƒç´ éƒ½æ˜¯æµ®åŠ¨</p><ol><li>ç›´æ¥ç»™çˆ¶å…ƒç´ è®¾ç½®é«˜åº¦ï¼Œåœ¨å­å…ƒç´ æ”¹å˜çš„æƒ…å†µä¸‹ï¼Œæ­¤æ–¹æ³•ä½¿ç”¨èµ·æ¥æ¯”è¾ƒç¹æ‚ã€‚</li><li>ç»™çˆ¶å…ƒç´ ç›´æ¥è®¾ç½® overflow:hidden;æ ·å¼</li><li>çˆ¶å…ƒç»“æŸæ ‡ç­¾ä¹‹å‰åŠ ç©º divï¼Œæ ·å¼ä¸º clearï¼šbothï¼›</li><li>ä¼ªå…ƒç´ é€‰æ‹©å™¨,çˆ¶å…ƒç´ åŠ ä¸Š clearfix</li></ol><h2 id="ä¼ªç±»å’Œä¼ªå…ƒç´ çš„åŒºåˆ«"><a href="#ä¼ªç±»å’Œä¼ªå…ƒç´ çš„åŒºåˆ«" class="headerlink" title="ä¼ªç±»å’Œä¼ªå…ƒç´ çš„åŒºåˆ«"></a>ä¼ªç±»å’Œä¼ªå…ƒç´ çš„åŒºåˆ«</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ä¼ªç±»  :link  :hover         ä¼ªå…ƒç´   ::before    ::after</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ä¼ªç±»å’Œä¼ªå…ƒç´ çš„æ ¹æœ¬åŒºåˆ«åœ¨äºï¼šå®ƒä»¬æ˜¯å¦åˆ›é€ äº†æ–°çš„å…ƒç´ ,, è¿™ä¸ªæ–°åˆ›é€ çš„å…ƒç´ å°±å« â€œä¼ªæ— ç´ â€ ã€‚<br>ä¼ªå…ƒç´ /ä¼ªå¯¹è±¡ï¼šä¸å­˜åœ¨åœ¨ DOM æ–‡æ¡£ä¸­ï¼Œæ˜¯è™šæ‹Ÿçš„å…ƒç´ ï¼Œæ˜¯åˆ›å»ºæ–°å…ƒç´ ã€‚ è¿™ä¸ªæ–°å…ƒç´ (ä¼ªå…ƒç´ ) æ˜¯æŸä¸ªå…ƒç´ çš„å­å…ƒç´ ï¼Œè¿™ä¸ªå­å…ƒç´ è™½ç„¶åœ¨é€»è¾‘ä¸Šå­˜åœ¨ï¼Œä½†å´å¹¶ä¸å®é™…å­˜åœ¨äºæ–‡æ¡£æ ‘ä¸­.<br>ä¼ªç±»ï¼šå­˜åœ¨ DOM æ–‡æ¡£ä¸­ï¼Œ(æ— æ ‡ç­¾,æ‰¾ä¸åˆ°, åªæœ‰ç¬¦åˆè§¦å‘æ¡ä»¶æ—¶æ‰èƒ½çœ‹åˆ° ), é€»è¾‘ä¸Šå­˜åœ¨ä½†åœ¨æ–‡æ¡£æ ‘ä¸­å´æ— é¡»æ ‡è¯†çš„â€œå¹½çµâ€åˆ†ç±»ã€‚</p><h2 id="css-ç»§æ‰¿"><a href="#css-ç»§æ‰¿" class="headerlink" title="css ç»§æ‰¿"></a>css ç»§æ‰¿</h2><p>åªæœ‰é¢œè‰²ï¼Œæ–‡å­—ï¼Œå­—ä½“é—´è·è¡Œé«˜å¯¹é½æ–¹å¼ï¼Œå’Œåˆ—è¡¨çš„æ ·å¼å¯ä»¥ç»§æ‰¿<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220225154948.png" alt=""></p><h2 id="cssinjs"><a href="#cssinjs" class="headerlink" title="cssinjs"></a>cssinjs</h2><h2 id="cssmodule"><a href="#cssmodule" class="headerlink" title="cssmodule"></a>cssmodule</h2><h2 id="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨-tailwind"><a href="#ä¸ºä»€ä¹ˆè¦ä½¿ç”¨-tailwind" class="headerlink" title="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ tailwind"></a>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ tailwind</h2><h1 id="-1"><a href="#-1" class="headerlink" title="#"></a>#</h1><h1 id="æµè§ˆå™¨"><a href="#æµè§ˆå™¨" class="headerlink" title="æµè§ˆå™¨"></a>æµè§ˆå™¨</h1><h2 id="æµè§ˆå™¨å†…æ ¸"><a href="#æµè§ˆå™¨å†…æ ¸" class="headerlink" title="æµè§ˆå™¨å†…æ ¸"></a>æµè§ˆå™¨å†…æ ¸</h2><h2 id="GUI-çº¿ç¨‹å’Œ-JS-çº¿ç¨‹"><a href="#GUI-çº¿ç¨‹å’Œ-JS-çº¿ç¨‹" class="headerlink" title="GUI çº¿ç¨‹å’Œ JS çº¿ç¨‹"></a>GUI çº¿ç¨‹å’Œ JS çº¿ç¨‹</h2><h2 id="æµè§ˆå™¨çš„æ¸²æŸ“è¿‡ç¨‹"><a href="#æµè§ˆå™¨çš„æ¸²æŸ“è¿‡ç¨‹" class="headerlink" title="æµè§ˆå™¨çš„æ¸²æŸ“è¿‡ç¨‹"></a>æµè§ˆå™¨çš„æ¸²æŸ“è¿‡ç¨‹</h2><h2 id="æ€§èƒ½æŒ‡æ ‡ï¼Œæ€ä¹ˆçœ‹"><a href="#æ€§èƒ½æŒ‡æ ‡ï¼Œæ€ä¹ˆçœ‹" class="headerlink" title="æ€§èƒ½æŒ‡æ ‡ï¼Œæ€ä¹ˆçœ‹"></a>æ€§èƒ½æŒ‡æ ‡ï¼Œæ€ä¹ˆçœ‹</h2><h1 id="è®¾è®¡æ¨¡å¼"><a href="#è®¾è®¡æ¨¡å¼" class="headerlink" title="è®¾è®¡æ¨¡å¼"></a>è®¾è®¡æ¨¡å¼</h1><h2 id="å•ä¾‹æ¨¡å¼"><a href="#å•ä¾‹æ¨¡å¼" class="headerlink" title="å•ä¾‹æ¨¡å¼"></a>å•ä¾‹æ¨¡å¼</h2><h2 id="è£…é¥°å™¨æ¨¡å¼"><a href="#è£…é¥°å™¨æ¨¡å¼" class="headerlink" title="è£…é¥°å™¨æ¨¡å¼"></a>è£…é¥°å™¨æ¨¡å¼</h2><h2 id="ç­–ç•¥æ¨¡å¼"><a href="#ç­–ç•¥æ¨¡å¼" class="headerlink" title="ç­–ç•¥æ¨¡å¼"></a>ç­–ç•¥æ¨¡å¼</h2><h2 id="è®¾è®¡æ¨¡å¼çš„åŸåˆ™æ˜¯ä»€ä¹ˆ"><a href="#è®¾è®¡æ¨¡å¼çš„åŸåˆ™æ˜¯ä»€ä¹ˆ" class="headerlink" title="è®¾è®¡æ¨¡å¼çš„åŸåˆ™æ˜¯ä»€ä¹ˆ"></a>è®¾è®¡æ¨¡å¼çš„åŸåˆ™æ˜¯ä»€ä¹ˆ</h2><ol><li>å¼€æ”¾å°é—­åŸåˆ™ å¯¹æ‹“å±•å¼€æ”¾ å¯¹ä¿®æ”¹å…³é—­</li><li>å•ä¸€èŒè´£åŸåˆ™ å®ç°ç±»è¦èŒè´£å•ä¸€ </li><li>ä¾èµ–å€’è½¬åŸåˆ™ é¢å‘æ¥å£ç¼–ç¨‹</li><li>è¿ªç±³ç‰¹æ³•åˆ™ é™ä½è€¦åˆ</li><li>æ¥å£éš”ç¦»åŸåˆ™ è®¾è®¡æ¥å£çš„æ—¶å€™è¦ç²¾ç®€å•ä¸€ </li><li>åˆæˆ/èšåˆå¤ç”¨åŸåˆ™</li><li>é‡Œæ°ä»£æ¢åŸåˆ™ ä¸è¦ç ´åç»§æ‰¿ä½“ç³»</li></ol><h1 id="nodejs"><a href="#nodejs" class="headerlink" title="nodejs"></a>nodejs</h1><h2 id="node-å’Œ-java-æœ‰ä»€ä¹ˆåŒºåˆ«"><a href="#node-å’Œ-java-æœ‰ä»€ä¹ˆåŒºåˆ«" class="headerlink" title="node å’Œ java æœ‰ä»€ä¹ˆåŒºåˆ«"></a>node å’Œ java æœ‰ä»€ä¹ˆåŒºåˆ«</h2><h2 id="node-å•çº¿ç¨‹ç›¸æ¯”-java-çš„ä¼˜ç‚¹"><a href="#node-å•çº¿ç¨‹ç›¸æ¯”-java-çš„ä¼˜ç‚¹" class="headerlink" title="node å•çº¿ç¨‹ç›¸æ¯” java çš„ä¼˜ç‚¹"></a>node å•çº¿ç¨‹ç›¸æ¯” java çš„ä¼˜ç‚¹</h2><h2 id="node-æ€ä¹ˆå¼€å¯å¤šçº¿ç¨‹"><a href="#node-æ€ä¹ˆå¼€å¯å¤šçº¿ç¨‹" class="headerlink" title="node æ€ä¹ˆå¼€å¯å¤šçº¿ç¨‹"></a>node æ€ä¹ˆå¼€å¯å¤šçº¿ç¨‹</h2><h2 id="node-æ´‹è‘±æ¨¡å‹"><a href="#node-æ´‹è‘±æ¨¡å‹" class="headerlink" title="node æ´‹è‘±æ¨¡å‹"></a>node æ´‹è‘±æ¨¡å‹</h2><h2 id="BFF-çš„ç†è§£"><a href="#BFF-çš„ç†è§£" class="headerlink" title="BFF çš„ç†è§£"></a>BFF çš„ç†è§£</h2><h1 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h1><h2 id="äºŒç»´ç æ‰«æå¤šç«¯ç™»å½•è®¾è®¡æ€è·¯"><a href="#äºŒç»´ç æ‰«æå¤šç«¯ç™»å½•è®¾è®¡æ€è·¯" class="headerlink" title="äºŒç»´ç æ‰«æå¤šç«¯ç™»å½•è®¾è®¡æ€è·¯"></a>äºŒç»´ç æ‰«æå¤šç«¯ç™»å½•è®¾è®¡æ€è·¯</h2><h2 id="é¡¹ç›®æ•°æ®åº“è®¾è®¡"><a href="#é¡¹ç›®æ•°æ®åº“è®¾è®¡" class="headerlink" title="é¡¹ç›®æ•°æ®åº“è®¾è®¡"></a>é¡¹ç›®æ•°æ®åº“è®¾è®¡</h2><h2 id="åŸç”Ÿè®¾è®¡ä¸€ä¸ª-dialogï¼Œéœ€è¦è®¾è®¡å“ªäº›éƒ¨åˆ†"><a href="#åŸç”Ÿè®¾è®¡ä¸€ä¸ª-dialogï¼Œéœ€è¦è®¾è®¡å“ªäº›éƒ¨åˆ†" class="headerlink" title="åŸç”Ÿè®¾è®¡ä¸€ä¸ª dialogï¼Œéœ€è¦è®¾è®¡å“ªäº›éƒ¨åˆ†"></a>åŸç”Ÿè®¾è®¡ä¸€ä¸ª dialogï¼Œéœ€è¦è®¾è®¡å“ªäº›éƒ¨åˆ†</h2><h2 id="è®¾è®¡ä¸€ä¸ªä¸­é—´ä»¶"><a href="#è®¾è®¡ä¸€ä¸ªä¸­é—´ä»¶" class="headerlink" title="è®¾è®¡ä¸€ä¸ªä¸­é—´ä»¶"></a>è®¾è®¡ä¸€ä¸ªä¸­é—´ä»¶</h2><h2 id="pnpm-çš„ä¼˜åŠ¿"><a href="#pnpm-çš„ä¼˜åŠ¿" class="headerlink" title="pnpm çš„ä¼˜åŠ¿"></a>pnpm çš„ä¼˜åŠ¿</h2><h1 id="CICD"><a href="#CICD" class="headerlink" title="CICD"></a>CICD</h1><h1 id="nginx"><a href="#nginx" class="headerlink" title="nginx"></a>nginx</h1><h2 id="nginx-ä¸»è¦æ˜¯åšä»€ä¹ˆçš„"><a href="#nginx-ä¸»è¦æ˜¯åšä»€ä¹ˆçš„" class="headerlink" title="nginx ä¸»è¦æ˜¯åšä»€ä¹ˆçš„"></a>nginx ä¸»è¦æ˜¯åšä»€ä¹ˆçš„</h2><p>é™æ€èµ„æºç¼“å­˜ hashï¼Œgzipï¼Œè´Ÿè½½å‡è¡¡ï¼Œè¶…æ—¶è¿æ¥</p><h2 id="nginx-æ€ä¹ˆä»£ç†-websocketï¼Œæœ‰ä»€ä¹ˆé—®é¢˜"><a href="#nginx-æ€ä¹ˆä»£ç†-websocketï¼Œæœ‰ä»€ä¹ˆé—®é¢˜" class="headerlink" title="nginx æ€ä¹ˆä»£ç† websocketï¼Œæœ‰ä»€ä¹ˆé—®é¢˜"></a>nginx æ€ä¹ˆä»£ç† websocketï¼Œæœ‰ä»€ä¹ˆé—®é¢˜</h2><h2 id="nginx-æ€ä¹ˆå¼€å¯-gzip"><a href="#nginx-æ€ä¹ˆå¼€å¯-gzip" class="headerlink" title="nginx æ€ä¹ˆå¼€å¯ gzip"></a>nginx æ€ä¹ˆå¼€å¯ gzip</h2><h2 id="nginx-çœŸçš„è§£å†³äº†è·¨åŸŸå—"><a href="#nginx-çœŸçš„è§£å†³äº†è·¨åŸŸå—" class="headerlink" title="nginx çœŸçš„è§£å†³äº†è·¨åŸŸå—"></a>nginx çœŸçš„è§£å†³äº†è·¨åŸŸå—</h2><p>æœåŠ¡ç«¯å’ŒæœåŠ¡ç«¯ä¹‹é—´ä¸å­˜åœ¨è·¨åŸŸ</p><h1 id="typescript"><a href="#typescript" class="headerlink" title="typescript"></a>typescript</h1><h1 id="æ•°æ®ç»“æ„"><a href="#æ•°æ®ç»“æ„" class="headerlink" title="æ•°æ®ç»“æ„"></a>æ•°æ®ç»“æ„</h1><h2 id="æ ‘çš„ç§ç±»ä»¥åŠç‰¹æ€§"><a href="#æ ‘çš„ç§ç±»ä»¥åŠç‰¹æ€§" class="headerlink" title="æ ‘çš„ç§ç±»ä»¥åŠç‰¹æ€§"></a>æ ‘çš„ç§ç±»ä»¥åŠç‰¹æ€§</h2><h2 id="å¸¸è§çš„æ•°æ®ç»“æ„"><a href="#å¸¸è§çš„æ•°æ®ç»“æ„" class="headerlink" title="å¸¸è§çš„æ•°æ®ç»“æ„"></a>å¸¸è§çš„æ•°æ®ç»“æ„</h2><h2 id="-2"><a href="#-2" class="headerlink" title=" "></a> </h2>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="é¢è¯•æŒ‡å—" scheme="https://zlinni.github.io/categories/%E9%9D%A2%E8%AF%95%E6%8C%87%E5%8D%97/"/>
    
    
    <category term="å‰ç«¯" scheme="https://zlinni.github.io/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="é¢è¯•" scheme="https://zlinni.github.io/tags/%E9%9D%A2%E8%AF%95/"/>
    
  </entry>
  
  <entry>
    <title>Javascriptâ€”â€”è‡ªæ£€ç¯‡</title>
    <link href="https://zlinni.github.io/posts/2576354353/"/>
    <id>https://zlinni.github.io/posts/2576354353/</id>
    <published>2022-08-07T02:23:45.000Z</published>
    <updated>2022-09-10T02:22:04.557Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><div class="note primary flat"><p>è®°å½• js è¾“å‡ºé—®é¢˜è¿‡ç¨‹å’ŒçŸ¥è¯†ç‚¹è§£ç­”</p></div><h1 id="1-æš‚æ—¶æ€§æ­»åŒºå’Œå˜é‡æå‡"><a href="#1-æš‚æ—¶æ€§æ­»åŒºå’Œå˜é‡æå‡" class="headerlink" title="1 æš‚æ—¶æ€§æ­»åŒºå’Œå˜é‡æå‡"></a>1 æš‚æ—¶æ€§æ­»åŒºå’Œå˜é‡æå‡</h1><p>è¾“å‡ºæ˜¯ä»€ä¹ˆï¼Ÿ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sayHi</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(name);</span><br><span class="line">  <span class="built_in">console</span>.log(age);</span><br><span class="line">  <span class="keyword">var</span> name = <span class="string">&quot;Lydia&quot;</span>;</span><br><span class="line">  <span class="keyword">let</span> age = <span class="number">21</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">sayHi();</span><br></pre></td></tr></table></figure><ul><li>A: Lydia å’Œ undefined</li><li>B: Lydia å’Œ ReferenceError</li><li>C: ReferenceError å’Œ 21</li><li>D: undefined å’Œ ReferenceError</li></ul><details><summary>ç­”æ¡ˆ</summary>D letï¼Œconst å£°æ˜å‰è¯»å–æœ‰æš‚æ—¶æ€§æ­»åŒºï¼Œjs æŠ›å‡º`ReferenceError` å˜é‡æå‡ `undefined`ç½®é¡¶</details><h1 id="2-ä½œç”¨åŸŸä»¥åŠäº‹ä»¶å¾ªç¯"><a href="#2-ä½œç”¨åŸŸä»¥åŠäº‹ä»¶å¾ªç¯" class="headerlink" title="2 ä½œç”¨åŸŸä»¥åŠäº‹ä»¶å¾ªç¯"></a>2 ä½œç”¨åŸŸä»¥åŠäº‹ä»¶å¾ªç¯</h1><p>è¾“å‡ºæ˜¯ä»€ä¹ˆï¼Ÿ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++) &#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> <span class="built_in">console</span>.log(i), <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++) &#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> <span class="built_in">console</span>.log(i), <span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>A: 0 1 2 å’Œ 0 1 2</li><li>B: 0 1 2 å’Œ 3 3 3</li><li>C: 3 3 3 å’Œ 0 1 2</li></ul><details><summary>ç­”æ¡ˆ</summary>ç”±äº js çš„äº‹ä»¶å¾ªç¯æœºåˆ¶ï¼Œsettimeout çš„å†…å®¹æ˜¯åœ¨å¾ªç¯ç»“æŸæ‰è¾“å‡ºçš„ï¼Œç¬¬ä¸€ä¸ª i å£°æ˜ç”¨çš„æ˜¯ var æ­¤æ—¶ i æ˜¯åœ¨å…¨å±€ä½œç”¨åŸŸï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ä¸€ç›´é€’å¢åˆ° 3 ç»“æŸå¾ªç¯æ‰è¾“å‡º settimeout çš„å†…å®¹ï¼Œä¹Ÿå°±æ˜¯ 333ç¬¬äºŒç‚¹ç”±äºä¸‹é¢æ˜¯ let å£°æ˜çš„å—çº§ä½œç”¨åŸŸï¼Œæ¯æ¬¡å¾ªç¯éƒ½ä¼šäº§ç”Ÿæ–°å€¼ï¼Œæ‰€ä»¥ setimeout çš„æ—¶å€™ï¼Œi æ‹¿åˆ°çš„æ˜¯å½“å‰ä½œç”¨åŸŸé‡Œé¢çš„å€¼ï¼Œä¹Ÿå°±æ˜¯ 012</details><h1 id="3-ç®­å¤´å‡½æ•°å’Œå¸¸è§„å‡½æ•°çš„-this"><a href="#3-ç®­å¤´å‡½æ•°å’Œå¸¸è§„å‡½æ•°çš„-this" class="headerlink" title="3 ç®­å¤´å‡½æ•°å’Œå¸¸è§„å‡½æ•°çš„ this"></a>3 ç®­å¤´å‡½æ•°å’Œå¸¸è§„å‡½æ•°çš„ this</h1><p>è¾“å‡ºæ˜¯ä»€ä¹ˆï¼Ÿ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> shape = &#123;</span><br><span class="line">  <span class="attr">radius</span>: <span class="number">10</span>,</span><br><span class="line">  <span class="function"><span class="title">diameter</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.radius * <span class="number">2</span>;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">perimeter</span>: <span class="function">() =&gt;</span> <span class="number">2</span> * <span class="built_in">Math</span>.PI * <span class="built_in">this</span>.radius,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">shape.diameter();</span><br><span class="line">shape.perimeter();</span><br></pre></td></tr></table></figure><ul><li>A: 20 and 62.83185307179586</li><li>B: 20 and NaN</li><li>C: 20 and 63</li><li>D: NaN and 63</li></ul><details><summary>ç­”æ¡ˆ</summary>shape è°ƒç”¨äº† diameter å¸¸è§„å‡½æ•°ï¼Œæ‰€ä»¥ this æŒ‡å‘ shapeï¼Œè¯»çš„åˆ° radiusperimeter æ˜¯ä¸€ä¸ªç®­å¤´å‡½æ•°ï¼Œå¯¹äºè¯¥å‡½æ•°çš„ this æŒ‡å‘çš„æ˜¯å®ƒçš„å‘¨å›´ä½œç”¨åŸŸï¼Œä¹Ÿå°±æ˜¯åŒ…å«ç®­å¤´å‡½æ•°çš„å¸¸è§„å‡½æ•°ï¼Œå¦‚æœæ²¡æœ‰ï¼Œå°±æ˜¯ windowå¾ˆæ˜æ˜¾æ­¤å¤„æ²¡æœ‰å¸¸è§„å‡½æ•°åŒ…è£…å®ƒï¼Œäºæ˜¯æŒ‡å‘ windowï¼Œwindow ä¸Šæ²¡æœ‰è¿™ä¸ªå±æ€§ï¼Œå¯¹äº undefined+æ•°å­—è¾“å‡ºçš„æ˜¯ NaN</details><h1 id="4-å€¼è½¬æ¢"><a href="#4-å€¼è½¬æ¢" class="headerlink" title="4 å€¼è½¬æ¢"></a>4 å€¼è½¬æ¢</h1><p>è¾“å‡ºæ˜¯ä»€ä¹ˆï¼Ÿ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">+<span class="literal">true</span>;</span><br><span class="line">!<span class="string">&quot;Lydia&quot;</span>;</span><br></pre></td></tr></table></figure><ul><li>A: 1 and false</li><li>B: false and NaN</li><li>C: false and false</li></ul><details><summary>ç­”æ¡ˆ</summary>A æ³¨æ„+è¿˜å¯ä»¥è½¬æ¢ stringï¼Œç›¸å½“äº`Number()`çš„æ•ˆæœ</details><h1 id="5-å¯¹è±¡è¿ç®—ä¼˜å…ˆçº§"><a href="#5-å¯¹è±¡è¿ç®—ä¼˜å…ˆçº§" class="headerlink" title="5 å¯¹è±¡è¿ç®—ä¼˜å…ˆçº§"></a>5 å¯¹è±¡è¿ç®—ä¼˜å…ˆçº§</h1><p>å“ªä¸€ä¸ªæ˜¯æ— æ•ˆçš„ï¼Ÿ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> bird = &#123;</span><br><span class="line">  <span class="attr">size</span>: <span class="string">&quot;small&quot;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> mouse = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;Mickey&quot;</span>,</span><br><span class="line">  <span class="attr">small</span>: <span class="literal">true</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ul><li>A: mouse.bird.size</li><li>B: mouse[bird.size]</li><li>C: mouse[bird[â€œsizeâ€]]</li><li>D: All of them are valid</li></ul><details><summary>ç­”æ¡ˆ</summary>A å…ˆè®¡ç®—æ‹¬å·é‡Œé¢çš„ï¼Œå¦‚æœæ²¡æœ‰æ‹¬å·é“¾å¼è®¡ç®—ï¼Œæ˜¾ç„¶ A æ˜¯æ²¡æœ‰ bird çš„</details><h1 id="6-å¯¹è±¡ç›¸ç­‰æ—¶åœ°å€ç›¸åŒ"><a href="#6-å¯¹è±¡ç›¸ç­‰æ—¶åœ°å€ç›¸åŒ" class="headerlink" title="6 å¯¹è±¡ç›¸ç­‰æ—¶åœ°å€ç›¸åŒ"></a>6 å¯¹è±¡ç›¸ç­‰æ—¶åœ°å€ç›¸åŒ</h1><p>è¾“å‡ºæ˜¯ä»€ä¹ˆ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> c = &#123; <span class="attr">greeting</span>: <span class="string">&quot;Hey!&quot;</span> &#125;;</span><br><span class="line"><span class="keyword">let</span> d;</span><br><span class="line"></span><br><span class="line">d = c;</span><br><span class="line">c.greeting = <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line"><span class="built_in">console</span>.log(d.greeting);</span><br></pre></td></tr></table></figure><ul><li>A: Hello</li><li>B: undefined</li><li>C: ReferenceError</li><li>D: TypeError</li></ul><details><summary>ç­”æ¡ˆ</summary>A æ­¤æ—¶å†…å­˜ä¸­çš„åœ°å€ç›¸åŒ</details><h1 id="7-å’Œ-ä»¥åŠ-new-å¯¹è±¡"><a href="#7-å’Œ-ä»¥åŠ-new-å¯¹è±¡" class="headerlink" title="7 ==å’Œ===ä»¥åŠ new å¯¹è±¡"></a>7 <code>==</code>å’Œ<code>===</code>ä»¥åŠ new å¯¹è±¡</h1><p>è¾“å‡ºæ˜¯ä»€ä¹ˆï¼Ÿ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="number">3</span>;</span><br><span class="line"><span class="keyword">let</span> b = <span class="keyword">new</span> <span class="built_in">Number</span>(<span class="number">3</span>);</span><br><span class="line"><span class="keyword">let</span> c = <span class="number">3</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(a == b);</span><br><span class="line"><span class="built_in">console</span>.log(a === b);</span><br><span class="line"><span class="built_in">console</span>.log(b === c);</span><br></pre></td></tr></table></figure><ul><li>A: true false true</li><li>B: false false true</li><li>C: true false false</li><li>D: false true true</li></ul><details><summary>ç­”æ¡ˆ</summary>C new Number()æ˜¯æ–°å»ºäº†ä¸€ä¸ªå¯¹è±¡==çš„æ—¶å€™æ¯”è¾ƒå€¼ æ‰€ä»¥ç›¸åŒ===çš„æ—¶å€™æ¯”è¾ƒå€¼å’Œç±»å‹ï¼Œæ‰€ä»¥å¯¹è±¡ä¸åŒäº number</details><h1 id="8-é™æ€æ–¹æ³•çš„è°ƒç”¨"><a href="#8-é™æ€æ–¹æ³•çš„è°ƒç”¨" class="headerlink" title="8 é™æ€æ–¹æ³•çš„è°ƒç”¨"></a>8 é™æ€æ–¹æ³•çš„è°ƒç”¨</h1><p>è¾“å‡ºæ˜¯ä»€ä¹ˆï¼Ÿ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Chameleon</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> <span class="function"><span class="title">colorChange</span>(<span class="params">newColor</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.newColor = newColor;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.newColor;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">&#123; newColor = <span class="string">&quot;green&quot;</span> &#125; = &#123;&#125;</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.newColor = newColor;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> freddie = <span class="keyword">new</span> Chameleon(&#123; <span class="attr">newColor</span>: <span class="string">&quot;purple&quot;</span> &#125;);</span><br><span class="line">freddie.colorChange(<span class="string">&quot;orange&quot;</span>);</span><br></pre></td></tr></table></figure><ul><li>A: orange</li><li>B: purple</li><li>C: green</li><li>D: TypeError</li></ul><details><summary>ç­”æ¡ˆ</summary>é™æ€æ–¹æ³•åªèƒ½è¢«ç±»è°ƒç”¨ï¼Œä¸èƒ½è¢«å®ä¾‹è°ƒç”¨</details><h1 id="9-ä¸å£°æ˜å˜é‡ç›´æ¥èµ‹å€¼"><a href="#9-ä¸å£°æ˜å˜é‡ç›´æ¥èµ‹å€¼" class="headerlink" title="9 ä¸å£°æ˜å˜é‡ç›´æ¥èµ‹å€¼"></a>9 ä¸å£°æ˜å˜é‡ç›´æ¥èµ‹å€¼</h1><p>è¾“å‡ºæ˜¯ä»€ä¹ˆï¼Ÿ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> greeting;</span><br><span class="line">greetign = &#123;&#125;; <span class="comment">// Typo!</span></span><br><span class="line"><span class="built_in">console</span>.log(greetign);</span><br></pre></td></tr></table></figure><ul><li>A: {}</li><li>B: ReferenceError: greetign is not defined</li><li>C: undefined</li></ul><details><summary>ç­”æ¡ˆ</summary>A å¯ä»¥ä½¿ç”¨`use Strict`ç¡®ä¿å£°æ˜å˜é‡çš„æ—¶å€™å¿…é¡»èµ‹å€¼</details><h1 id="10-ç»™å‡½æ•°æ·»åŠ å±æ€§"><a href="#10-ç»™å‡½æ•°æ·»åŠ å±æ€§" class="headerlink" title="10 ç»™å‡½æ•°æ·»åŠ å±æ€§"></a>10 ç»™å‡½æ•°æ·»åŠ å±æ€§</h1><p>å½“æˆ‘ä»¬è¿™ä¹ˆåšæ—¶ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bark</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;Woof!&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">bark.animal = <span class="string">&quot;dog&quot;</span>;</span><br></pre></td></tr></table></figure><ul><li>A: æ­£å¸¸è¿è¡Œ!</li><li>B: SyntaxError. ä½ ä¸èƒ½é€šè¿‡è¿™ç§æ–¹å¼ç»™å‡½æ•°å¢åŠ å±æ€§ã€‚</li><li>C: undefined</li><li>D: ReferenceError</li></ul><details> <summary>ç­”æ¡ˆ</summary>A js ä¸€åˆ‡çš†å¯¹è±¡</details><h1 id="11-æ„é€ å‡½æ•°æ·»åŠ æ–¹æ³•"><a href="#11-æ„é€ å‡½æ•°æ·»åŠ æ–¹æ³•" class="headerlink" title="11 æ„é€ å‡½æ•°æ·»åŠ æ–¹æ³•"></a>11 æ„é€ å‡½æ•°æ·»åŠ æ–¹æ³•</h1><p>è¾“å‡ºæ˜¯ä»€ä¹ˆ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">firstName, lastName</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.firstName = firstName;</span><br><span class="line">  <span class="built_in">this</span>.lastName = lastName;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> member = <span class="keyword">new</span> Person(<span class="string">&quot;Lydia&quot;</span>, <span class="string">&quot;Hallie&quot;</span>);</span><br><span class="line">Person.getFullName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;<span class="built_in">this</span>.firstName&#125;</span> <span class="subst">$&#123;<span class="built_in">this</span>.lastName&#125;</span>`</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(member.getFullName());</span><br></pre></td></tr></table></figure><ul><li>A: TypeError</li><li>B: SyntaxError</li><li>C: Lydia Hallie</li><li>D: undefined undefined</li></ul><details><summary>ç­”æ¡ˆ</summary>A ä¸èƒ½åƒå¸¸è§„å¯¹è±¡ä¸€æ ·ç»™æ„é€ å‡½æ•°æ·»åŠ å±æ€§ï¼Œè¦æƒ³æ·»åŠ å±æ€§å¿…é¡»è¿™æ ·å†™<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Person.prototype.getFullName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;<span class="built_in">this</span>.firstName&#125;</span> <span class="subst">$&#123;<span class="built_in">this</span>.lastName&#125;</span>`</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>è¿™æ ·æ‰èƒ½ç»™æ‰€æœ‰çš„å®ä¾‹æ·»åŠ å¯¹åº”çš„å±æ€§ã€‚åŸå› æ˜¯ï¼šå¦‚æœæˆ‘ä»¬å¯ä»¥ç›´æ¥æ·»åŠ æ–¹æ³•åˆ°æ„é€ å‡½æ•°ä¸­ï¼Œé‚£ä¹ˆæ‰€æœ‰çš„ Person å®ä¾‹ä¸Šéƒ½æ‹¥æœ‰è¿™ä¸ªæ–¹æ³•ï¼Œå¯¹äºä¸éœ€è¦è¿™ä¸ªæ–¹æ³•çš„å®ä¾‹ï¼Œä¼šæµªè´¹å¤§é‡çš„ç©ºé—´å†…å­˜ã€‚å¦‚æœæ·»åŠ åˆ°åŸå‹ä¸Šé¢ï¼Œå®ä¾‹åªæœ‰åœ¨éœ€è¦è¿™ä¸ªæ–¹æ³•çš„æ—¶å€™ï¼Œæ‰ä¼šå»åŸå‹ä¸Šé¢æ‰¾ï¼Œä¸å æ®è‡ªèº«çš„ç©ºé—´ã€‚åªåœ¨åŸå‹ä¸­å ä¸€ä¸ªä½ç½®ï¼Œä½†æ‰€æœ‰å®ä¾‹éƒ½å¯ä»¥è®¿é—®ã€‚</details><h1 id="12-new-å’Œä¸-new"><a href="#12-new-å’Œä¸-new" class="headerlink" title="12 new å’Œä¸ new"></a>12 new å’Œä¸ new</h1><p>è¾“å‡ºæ˜¯ä»€ä¹ˆ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">firstName, lastName</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.firstName = firstName;</span><br><span class="line">  <span class="built_in">this</span>.lastName = lastName;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> lydia = <span class="keyword">new</span> Person(<span class="string">&quot;Lydia&quot;</span>, <span class="string">&quot;Hallie&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> sarah = Person(<span class="string">&quot;Sarah&quot;</span>, <span class="string">&quot;Smith&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(lydia);</span><br><span class="line"><span class="built_in">console</span>.log(sarah);</span><br></pre></td></tr></table></figure><ul><li>A: Person {firstName: â€œLydiaâ€, lastName: â€œHallieâ€} and undefined</li><li>B: Person {firstName: â€œLydiaâ€, lastName: â€œHallieâ€} and Person {firstName: â€œSarahâ€, lastName: â€œSmithâ€}</li><li>C: Person {firstName: â€œLydiaâ€, lastName: â€œHallieâ€} and {}</li><li>D: Person {firstName: â€œLydiaâ€, lastName: â€œHallieâ€} and ReferenceError</li></ul><details><summary>ç­”æ¡ˆ</summary>new çš„æ—¶å€™ this é»˜è®¤å¼•ç”¨æˆ‘ä»¬åˆ›å»ºçš„ç©ºå¯¹è±¡ä¸ new çš„æ—¶å€™ this é»˜è®¤å¼•ç”¨ windowï¼Œä¹Ÿå°±æ˜¯å®é™…ä¸Š`window.firstName = Sarah`ï¼Œä½† sarah è¿˜æ˜¯ undefined</details><h1 id="13-äº‹ä»¶ä¼ æ’­çš„ä¸‰ä¸ªé˜¶æ®µæ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#13-äº‹ä»¶ä¼ æ’­çš„ä¸‰ä¸ªé˜¶æ®µæ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="13 äº‹ä»¶ä¼ æ’­çš„ä¸‰ä¸ªé˜¶æ®µæ˜¯ä»€ä¹ˆï¼Ÿ"></a>13 äº‹ä»¶ä¼ æ’­çš„ä¸‰ä¸ªé˜¶æ®µæ˜¯ä»€ä¹ˆï¼Ÿ</h1><ul><li>A: Target &gt; Capturing &gt; Bubbling</li><li>B: Bubbling &gt; Target &gt; Capturing</li><li>C: Target &gt; Bubbling &gt; Capturing</li><li>D: Capturing &gt; Target &gt; Bubbling</li></ul><details><summary>ç­”æ¡ˆ</summary>D åœ¨æ•è·é˜¶æ®µä¸­ï¼Œäº‹ä»¶ä»ç¥–å…ˆå…ƒç´ å‘ä¸‹ä¼ æ’­åˆ°ç›®æ ‡å…ƒç´ ã€‚å½“äº‹ä»¶åˆ°è¾¾ç›®æ ‡åï¼Œå†’æ³¡æ‰å¼€å§‹</details><h1 id="14-æ‰€æœ‰å¯¹è±¡éƒ½æœ‰åŸå‹ï¼Ÿ"><a href="#14-æ‰€æœ‰å¯¹è±¡éƒ½æœ‰åŸå‹ï¼Ÿ" class="headerlink" title="14 æ‰€æœ‰å¯¹è±¡éƒ½æœ‰åŸå‹ï¼Ÿ"></a>14 æ‰€æœ‰å¯¹è±¡éƒ½æœ‰åŸå‹ï¼Ÿ</h1><ul><li>A: true</li><li>B: false</li></ul><details><summary>ç­”æ¡ˆ</summary>B é™¤äº†åŸºæœ¬å¯¹è±¡ï¼ˆbase objectï¼‰ï¼Œæ‰€æœ‰å¯¹è±¡éƒ½æœ‰åŸå‹ã€‚åŸºæœ¬å¯¹è±¡å¯ä»¥è®¿é—®ä¸€äº›æ–¹æ³•å’Œå±æ€§ï¼Œæ¯”å¦‚ .toStringã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆä½ å¯ä»¥ä½¿ç”¨å†…ç½®çš„ JavaScript æ–¹æ³•ï¼æ‰€æœ‰è¿™äº›æ–¹æ³•åœ¨åŸå‹ä¸Šéƒ½æ˜¯å¯ç”¨çš„ã€‚è™½ç„¶ JavaScript ä¸èƒ½ç›´æ¥åœ¨å¯¹è±¡ä¸Šæ‰¾åˆ°è¿™äº›æ–¹æ³•ï¼Œä½† JavaScript ä¼šæ²¿ç€åŸå‹é“¾æ‰¾åˆ°å®ƒä»¬ï¼Œä»¥ä¾¿äºä½ ä½¿ç”¨ã€‚</details><h1 id="15-éšå¼ç±»å‹è½¬æ¢"><a href="#15-éšå¼ç±»å‹è½¬æ¢" class="headerlink" title="15 éšå¼ç±»å‹è½¬æ¢"></a>15 éšå¼ç±»å‹è½¬æ¢</h1><p>è¾“å‡ºæ˜¯ä»€ä¹ˆ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">sum(<span class="number">1</span>, <span class="string">&quot;2&quot;</span>);</span><br></pre></td></tr></table></figure><ul><li>A: NaN</li><li>B: TypeError</li><li>C: â€œ12â€</li><li>D: 3</li></ul><details><summary>ç­”æ¡ˆ</summary>C éšå¼ç±»å‹è½¬æ¢"12"</details><h1 id="16-è¿ç®—ç¬¦"><a href="#16-è¿ç®—ç¬¦" class="headerlink" title="16 è¿ç®—ç¬¦"></a>16 è¿ç®—ç¬¦</h1><p>è¾“å‡ºæ˜¯ä»€ä¹ˆï¼Ÿ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> number = <span class="number">0</span>;</span><br><span class="line"><span class="built_in">console</span>.log(number++);</span><br><span class="line"><span class="built_in">console</span>.log(++number);</span><br><span class="line"><span class="built_in">console</span>.log(number);</span><br></pre></td></tr></table></figure><ul><li>A: 1 1 2</li><li>B: 1 2 2</li><li>C: 0 2 2</li><li>D: 0 1 2<br><details><summary>ç­”æ¡ˆ</summary></li></ul><p>C</p><p>&lt;/details&gt;</p><h1 id="17-æ ‡è®°æ¨¡æ¿å­—é¢é‡"><a href="#17-æ ‡è®°æ¨¡æ¿å­—é¢é‡" class="headerlink" title="17 æ ‡è®°æ¨¡æ¿å­—é¢é‡"></a>17 æ ‡è®°æ¨¡æ¿å­—é¢é‡</h1><p>è¾“å‡ºæ˜¯ä»€ä¹ˆï¼Ÿ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getPersonInfo</span>(<span class="params">one, two, three</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(one);</span><br><span class="line">  <span class="built_in">console</span>.log(two);</span><br><span class="line">  <span class="built_in">console</span>.log(three);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> person = <span class="string">&quot;Lydia&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> age = <span class="number">21</span>;</span><br><span class="line"></span><br><span class="line">getPersonInfo<span class="string">`<span class="subst">$&#123;person&#125;</span> is <span class="subst">$&#123;age&#125;</span> years old`</span>;</span><br></pre></td></tr></table></figure><ul><li>A: â€œLydiaâ€ 21 [â€œâ€, â€œ is â€œ, â€œ years oldâ€]</li><li>B: [â€œâ€, â€œ is â€œ, â€œ years oldâ€] â€œLydiaâ€ 21</li><li>C: â€œLydiaâ€ [â€œâ€, â€œ is â€œ, â€œ years oldâ€] 21</li></ul><details><summary>ç­”æ¡ˆ</summary>B å½“å‡½æ•°è°ƒç”¨çš„æ—¶å€™æä¾›æ ‡è®°æ¨¡æ¿å­—é¢é‡ï¼Œé‚£ä¹ˆä¼˜å…ˆå°†æ¨¡æ¿çš„æ•°ç»„ä¼ å…¥ï¼Œéšä¹‹ä¼ å…¥çš„æ˜¯å…¶ä¸­çš„å˜é‡</details><h1 id="18-æ¯”è¾ƒå¯¹è±¡"><a href="#18-æ¯”è¾ƒå¯¹è±¡" class="headerlink" title="18 æ¯”è¾ƒå¯¹è±¡"></a>18 æ¯”è¾ƒå¯¹è±¡</h1><p>è¾“å‡ºæ˜¯ä»€ä¹ˆï¼Ÿ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">checkAge</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (data === &#123; <span class="attr">age</span>: <span class="number">18</span> &#125;) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;You are an adult!&quot;</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (data == &#123; <span class="attr">age</span>: <span class="number">18</span> &#125;) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;You are still an adult.&quot;</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`Hmm.. You don&#x27;t have an age I guess`</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">checkAge(&#123; <span class="attr">age</span>: <span class="number">18</span> &#125;);</span><br></pre></td></tr></table></figure><ul><li>A: You are an adult!</li><li>B: You are still an adult.</li><li>C: Hmm.. You donâ€™t have an age I guess</li></ul><details><summary>ç­”æ¡ˆ</summary>C å¯¹è±¡ä¸èƒ½ç›´æ¥æ¯”è¾ƒç›¸ç­‰æ€§ï¼Œéœ€è¦å¯¹æ¯å±‚å¯¹è±¡é€’å½’æ¯”è¾ƒæ‰è¡Œ</details><h1 id="19-æ‹“å±•è¿ç®—ç¬¦"><a href="#19-æ‹“å±•è¿ç®—ç¬¦" class="headerlink" title="19 æ‹“å±•è¿ç®—ç¬¦"></a>19 æ‹“å±•è¿ç®—ç¬¦</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getAge</span>(<span class="params">...args</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">typeof</span> args);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">getAge(<span class="number">21</span>);</span><br></pre></td></tr></table></figure><ul><li>A: â€œnumberâ€</li><li>B: â€œarrayâ€</li><li>C: â€œobjectâ€</li><li>D: â€œNaNâ€</li></ul><details><summary>ç­”æ¡ˆ</summary>C æ‹“å±•è¿ç®—ç¬¦è¿”å›çš„æ˜¯å®å‚ç»„æˆçš„æ•°ç»„ï¼Œå› æ­¤ç»“æœæ˜¯object</details><h1 id="20-use-strict"><a href="#20-use-strict" class="headerlink" title="20 use strict"></a>20 use strict</h1><p>è¾“å‡ºæ˜¯ä»€ä¹ˆï¼Ÿ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getAge</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="meta">  &quot;use strict&quot;</span>;</span><br><span class="line">  age = <span class="number">21</span>;</span><br><span class="line">  <span class="built_in">console</span>.log(age);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">getAge();</span><br></pre></td></tr></table></figure><p>A: 21<br>B: undefined<br>C: ReferenceError<br>D: TypeError</p><details><summary>ç­”æ¡ˆ</summary>C use strictè¡¨æ˜ä¸‹é¢çš„å˜é‡å¿…é¡»åœ¨å£°æ˜ä¹‹åèµ‹å€¼ï¼Œå¦åˆ™æŠ›å‡ºæŒ‡å‘å¼‚å¸¸</details><h1 id="21-eval"><a href="#21-eval" class="headerlink" title="21 eval"></a>21 eval</h1><p>è¾“å‡ºæ˜¯ä»€ä¹ˆ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> sum = <span class="built_in">eval</span>(<span class="string">&quot;10*10+5&quot;</span>);</span><br></pre></td></tr></table></figure><p>A: 105<br>B: â€œ105â€<br>C: TypeError<br>D: â€œ10*10+5â€</p><details><summary>ç­”æ¡ˆ</summary>A ä»£ç ä»¥å­—ç¬¦ä¸²çš„å½¢å¼ä¼ é€’è¿›æ¥ï¼Œevalå¯¹å…¶æ±‚å€¼ï¼Œå¦‚æœå®ƒæ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œå°±å¯¹è¡¨è¾¾å¼æ±‚å€¼ï¼Œè¿”å›ç»“æœnumberçš„105</details><h1 id="22-sessionStorage"><a href="#22-sessionStorage" class="headerlink" title="22 sessionStorage"></a>22 sessionStorage</h1><p>cool_secret å¯è®¿é—®å¤šé•¿æ—¶é—´ï¼Ÿ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sessionStorage.setItem(<span class="string">&quot;cool_secret&quot;</span>, <span class="number">123</span>);</span><br></pre></td></tr></table></figure><p>A: æ°¸è¿œï¼Œæ•°æ®ä¸ä¼šä¸¢å¤±ã€‚<br>B: å½“ç”¨æˆ·å…³æ‰æ ‡ç­¾é¡µæ—¶ã€‚<br>C: å½“ç”¨æˆ·å…³æ‰æ•´ä¸ªæµè§ˆå™¨ï¼Œè€Œä¸åªæ˜¯å…³æ‰æ ‡ç­¾é¡µã€‚<br>D: å½“ç”¨æˆ·å…³é—­ç”µè„‘æ—¶ã€‚</p><details><summary>ç­”æ¡ˆ</summary>B</details><h1 id="23-var"><a href="#23-var" class="headerlink" title="23 var"></a>23 var</h1><p>è¾“å‡ºæ˜¯ä»€ä¹ˆï¼Ÿ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> num = <span class="number">8</span>;</span><br><span class="line"><span class="keyword">var</span> num = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(num);</span><br></pre></td></tr></table></figure><p>A: 8<br>B: 10<br>C: SyntaxError<br>D: ReferenceError</p><details><summary>ç­”æ¡ˆ</summary>B æ–°å€¼è¦†ç›–æ—§å€¼ ä½†const letä¸è¡Œ</details><h1 id="24-å¯¹è±¡é”®å’Œseté›†åˆ"><a href="#24-å¯¹è±¡é”®å’Œseté›†åˆ" class="headerlink" title="24 å¯¹è±¡é”®å’Œseté›†åˆ"></a>24 å¯¹è±¡é”®å’Œseté›†åˆ</h1><p>è¾“å‡ºæ˜¯ä»€ä¹ˆï¼Ÿ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123; <span class="number">1</span>: <span class="string">&quot;a&quot;</span>, <span class="number">2</span>: <span class="string">&quot;b&quot;</span>, <span class="number">3</span>: <span class="string">&quot;c&quot;</span> &#125;;</span><br><span class="line"><span class="keyword">const</span> set = <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]);</span><br><span class="line"></span><br><span class="line">obj.hasOwnProperty(<span class="string">&quot;1&quot;</span>);</span><br><span class="line">obj.hasOwnProperty(<span class="number">1</span>);</span><br><span class="line">set.has(<span class="string">&quot;1&quot;</span>);</span><br><span class="line">set.has(<span class="number">1</span>);</span><br></pre></td></tr></table></figure><p>A: false true false true<br>B: false true true true<br>C: true true false true<br>D: true true true true</p><details><summary>ç­”æ¡ˆ</summary>C å¯¹è±¡çš„é”®å§‹ç»ˆæ˜¯å­—ç¬¦ä¸²ã€‚seté›†åˆæ˜¯æ ¹æ®è¾“å…¥çš„å‚æ•°å†³å®š</details><h1 id="25-åŒåçš„é”®"><a href="#25-åŒåçš„é”®" class="headerlink" title="25 åŒåçš„é”®"></a>25 åŒåçš„é”®</h1><p>è¾“å‡ºæ˜¯ä»€ä¹ˆ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123; <span class="attr">a</span>: <span class="string">&quot;one&quot;</span>, <span class="attr">b</span>: <span class="string">&quot;two&quot;</span>, <span class="attr">a</span>: <span class="string">&quot;three&quot;</span> &#125;;</span><br><span class="line"><span class="built_in">console</span>.log(obj);</span><br></pre></td></tr></table></figure><p>A: { a: â€œoneâ€, b: â€œtwoâ€ }<br>B: { b: â€œtwoâ€, a: â€œthreeâ€ }<br>C: { a: â€œthreeâ€, b: â€œtwoâ€ }<br>D: SyntaxError</p><details><summary>ç­”æ¡ˆ</summary>C å¦‚æœæœ‰ä¸¤ä¸ªåŒåçš„é”®ï¼Œæ–°å€¼ä¼šæ›¿æ¢æ—§å€¼ï¼Œä½†æ˜¯é”®è¿˜æ˜¯åœ¨åŸæ¥çš„ä½ç½®</details><h1 id="26-å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡"><a href="#26-å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡" class="headerlink" title="26 å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡"></a>26 å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡</h1><p>JavaScript å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ä¸ºä½ åšäº†ä¸¤ä»¶äº‹ï¼šå…¨å±€å¯¹è±¡å’Œ this å…³é”®å­—ã€‚</p><p>A: true<br>B: false<br>C: it depends</p><details><summary>ç­”æ¡ˆ</summary>A</details><h1 id="27-continue"><a href="#27-continue" class="headerlink" title="27 continue"></a>27 continue</h1><p>è¾“å‡ºæ˜¯ä»€ä¹ˆ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">  <span class="keyword">if</span> (i === <span class="number">3</span>) <span class="keyword">continue</span>;</span><br><span class="line">  <span class="built_in">console</span>.log(i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>A: 1 2<br>B: 1 2 3<br>C: 1 2 4<br>D: 1 3 4</p><details><summary>ç­”æ¡ˆ</summary>C continueè·³è¿‡æœ¬æ¬¡è¿­ä»£</details><h1 id="28-è®¿é—®åŸå‹æ·»åŠ çš„æ–¹æ³•"><a href="#28-è®¿é—®åŸå‹æ·»åŠ çš„æ–¹æ³•" class="headerlink" title="28 è®¿é—®åŸå‹æ·»åŠ çš„æ–¹æ³•"></a>28 è®¿é—®åŸå‹æ·»åŠ çš„æ–¹æ³•</h1><p>è¾“å‡ºæ˜¯ä»€ä¹ˆ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span>.prototype.giveLydiaPizza = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&quot;Just give Lydia pizza already!&quot;</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> name = <span class="string">&quot;Lydia&quot;</span>;</span><br><span class="line"></span><br><span class="line">name.giveLydiaPizza();</span><br></pre></td></tr></table></figure><p>A: â€œJust give Lydia pizza already!â€<br>B: TypeError: not a function<br>C: SyntaxError<br>D: undefined</p><details><summary>ç­”æ¡ˆ</summary>A æˆ‘ä»¬å‘Stringçš„åŸå‹æ·»åŠ äº†ä¸€ä¸ªæ–¹æ³•ï¼Œæ‰€ä»¥ä¸‹é¢æ‰€å±çš„stringå¯¹è±¡éƒ½å¯ä»¥è®¿é—®è¯¥æ–¹æ³•</details><h1 id="29-å¯¹è±¡è½¬å­—ç¬¦ä¸²"><a href="#29-å¯¹è±¡è½¬å­—ç¬¦ä¸²" class="headerlink" title="29 å¯¹è±¡è½¬å­—ç¬¦ä¸²"></a>29 å¯¹è±¡è½¬å­—ç¬¦ä¸²</h1><p>è¾“å‡ºæ˜¯ä»€ä¹ˆ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> a = &#123;&#125;;</span><br><span class="line"><span class="keyword">const</span> b = &#123; <span class="attr">key</span>: <span class="string">&quot;b&quot;</span> &#125;;</span><br><span class="line"><span class="keyword">const</span> c = &#123; <span class="attr">key</span>: <span class="string">&quot;c&quot;</span> &#125;;</span><br><span class="line"></span><br><span class="line">a[b] = <span class="number">123</span>;</span><br><span class="line">a[c] = <span class="number">456</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(a[b]);</span><br></pre></td></tr></table></figure><p>A: 123<br>B: 456<br>C: undefined<br>D: ReferenceError</p><details><summary>ç­”æ¡ˆ</summary>B aåœ¨ä½¿ç”¨bè¿™ä¸ªé”®çš„æ—¶å€™ï¼ŒæŠŠbè‡ªåŠ¨è½¬ä¸ºäº†å­—ç¬¦ä¸²ï¼Œä¹Ÿå°±æ˜¯`[object object]`ä¸”è¿™ä¸ªå€¼å¯¹åº”ä¸º123ç¬¬äºŒæ¬¡è½¬ä¸º456è¾“å‡ºçš„æ—¶å€™ ä¹Ÿå°±æ˜¯456äº†è€ƒå¯Ÿçš„æ˜¯å¯¹è±¡è½¬å­—ç¬¦ä¸²</details><h1 id="30-äº‹ä»¶å¾ªç¯"><a href="#30-äº‹ä»¶å¾ªç¯" class="headerlink" title="30 äº‹ä»¶å¾ªç¯"></a>30 äº‹ä»¶å¾ªç¯</h1><p>è¾“å‡ºæ˜¯ä»€ä¹ˆ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> foo = <span class="function">() =&gt;</span> <span class="built_in">console</span>.log(<span class="string">&quot;First&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> bar = <span class="function">() =&gt;</span> <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> <span class="built_in">console</span>.log(<span class="string">&quot;Second&quot;</span>));</span><br><span class="line"><span class="keyword">const</span> baz = <span class="function">() =&gt;</span> <span class="built_in">console</span>.log(<span class="string">&quot;Third&quot;</span>);</span><br><span class="line"></span><br><span class="line">bar();</span><br><span class="line">foo();</span><br><span class="line">baz();</span><br></pre></td></tr></table></figure><p>A: First Second Third<br>B: First Third Second<br>C: Second First Third<br>D: Second Third First</p><details><summary>ç­”æ¡ˆ</summary>B äº‹ä»¶å¾ªç¯</details><h1 id="31-äº‹ä»¶target"><a href="#31-äº‹ä»¶target" class="headerlink" title="31 äº‹ä»¶target"></a>31 äº‹ä»¶target</h1><p>å½“ç‚¹å‡»æŒ‰é’®æ—¶ï¼Œevent.target æ˜¯ä»€ä¹ˆï¼Ÿ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;div onclick=<span class="string">&quot;console.log(&#x27;first div&#x27;)&quot;</span>&gt;</span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">onclick</span>=<span class="string">&quot;console.log(&#x27;second div&#x27;)&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;console.log(&#x27;button&#x27;)&quot;</span>&gt;</span>Click!<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><p>A: Outer div<br>B: Inner div<br>C: button<br>D: ä¸€ä¸ªåŒ…å«æ‰€æœ‰åµŒå¥—å…ƒç´ çš„æ•°ç»„ã€‚</p><details><summary>ç­”æ¡ˆ</summary>C å¯¼è‡´äº‹ä»¶çš„æœ€æ·±åµŒå¥—å…ƒç´ æ˜¯äº‹ä»¶çš„targetã€‚å¯ä»¥é€šè¿‡`event.stopPropagation`æ¥åœæ­¢å†’æ³¡</details><h1 id="32-äº‹ä»¶æ‰§è¡Œ"><a href="#32-äº‹ä»¶æ‰§è¡Œ" class="headerlink" title="32 äº‹ä»¶æ‰§è¡Œ"></a>32 äº‹ä»¶æ‰§è¡Œ</h1><p>å½“æ‚¨å•å‡»è¯¥æ®µè½æ—¶ï¼Œæ—¥å¿—è¾“å‡ºæ˜¯ä»€ä¹ˆï¼Ÿ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;div onclick=<span class="string">&quot;console.log(&#x27;div&#x27;)&quot;</span>&gt;</span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">p</span> <span class="attr">onclick</span>=<span class="string">&quot;console.log(&#x27;p&#x27;)&quot;</span>&gt;</span>Click here!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><p>A: p div<br>B: div p<br>C: p<br>D: div</p><details><summary>ç­”æ¡ˆ</summary>A æ•è· ç›®æ ‡ å†’æ³¡é»˜è®¤æƒ…å†µä¸‹äº‹ä»¶å°†åœ¨å†’æ³¡é˜¶æ®µæ‰§è¡Œé™¤éè®¾ç½®`useCapture:true`</details><h1 id="33-call-å’Œ-bind"><a href="#33-call-å’Œ-bind" class="headerlink" title="33 call å’Œ bind"></a>33 call å’Œ bind</h1><p>è¾“å‡ºæ˜¯ä»€ä¹ˆ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> person = &#123; <span class="attr">name</span>: <span class="string">&quot;Lydia&quot;</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sayHi</span>(<span class="params">age</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;<span class="built_in">this</span>.name&#125;</span> is <span class="subst">$&#123;age&#125;</span>`</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">sayHi.call(person, <span class="number">21</span>);</span><br><span class="line">sayHi.bind(person, <span class="number">21</span>);</span><br></pre></td></tr></table></figure><p>A: undefined is 21 Lydia is 21<br>B: function function<br>C: Lydia is 21 Lydia is 21<br>D: Lydia is 21 function</p><details><summary>ç­”æ¡ˆ</summary>C`.call`ç»‘å®šçš„æ˜¯ç«‹åˆ»æ‰§è¡Œçš„`bind`è¿”å›çš„æ˜¯ä¸€ä¸ªå‡½æ•° éœ€è¦å»æ‰§è¡Œè¯¥å‡½æ•°æ‰å¯ä»¥</details><h1 id="34-typeof-IIFE"><a href="#34-typeof-IIFE" class="headerlink" title="34 typeof IIFE"></a>34 typeof IIFE</h1><p>è¾“å‡ºæ˜¯ä»€ä¹ˆ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sayHi</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (<span class="function">() =&gt;</span> <span class="number">0</span>)();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typeof</span> sayHi();</span><br></pre></td></tr></table></figure><p>A: â€œobjectâ€<br>B: â€œnumberâ€<br>C: â€œfunctionâ€<br>D: â€œundefinedâ€</p><details><summary>ç­”æ¡ˆ</summary>B sayHiè¿”å›çš„æ˜¯IIFEçš„è¿”å›å€¼ å…·ä½“æ˜¯0 æ‰€ä»¥æ˜¯number</details><h1 id="35-falsy"><a href="#35-falsy" class="headerlink" title="35 falsy"></a>35 falsy</h1><p>ä¸‹é¢å“ªäº›å€¼æ˜¯ falsy?</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span>;</span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Number</span>(<span class="number">0</span>)</span><br><span class="line">(<span class="string">&quot;&quot;</span>)</span><br><span class="line">(<span class="string">&quot; &quot;</span>);</span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Boolean</span>(<span class="literal">false</span>);</span><br><span class="line"><span class="literal">undefined</span>;</span><br></pre></td></tr></table></figure><p>A: 0, â€˜â€™, undefined<br>B: 0, new Number(0), â€˜â€™, new Boolean(false), undefined<br>C: 0, â€˜â€™, new Boolean(false), undefined<br>D: All of them are falsy</p><details><summary>ç­”æ¡ˆ</summary>A new xxxæ˜¯å¯¹è±¡ æ˜¯truthyï¼Œéç©ºå­—ç¬¦ä¸²ä¹Ÿæ˜¯truthy</details><h1 id="36-typeof-typeof"><a href="#36-typeof-typeof" class="headerlink" title="36 typeof typeof"></a>36 typeof typeof</h1><p>è¾“å‡ºæ˜¯ä»€ä¹ˆ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> <span class="keyword">typeof</span> <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">A: <span class="string">&quot;number&quot;</span>;</span><br><span class="line">B: <span class="string">&quot;string&quot;</span>;</span><br><span class="line">C: <span class="string">&quot;object&quot;</span>;</span><br><span class="line">D: <span class="string">&quot;undefined&quot;</span>;</span><br></pre></td></tr></table></figure><details><summary>ç­”æ¡ˆ</summary>B</details><h1 id="37-è®¾ç½®æ•°ç»„å€¼è¶…è¿‡æ•°ç»„é•¿åº¦"><a href="#37-è®¾ç½®æ•°ç»„å€¼è¶…è¿‡æ•°ç»„é•¿åº¦" class="headerlink" title="37 è®¾ç½®æ•°ç»„å€¼è¶…è¿‡æ•°ç»„é•¿åº¦"></a>37 è®¾ç½®æ•°ç»„å€¼è¶…è¿‡æ•°ç»„é•¿åº¦</h1><p>è¾“å‡ºæ˜¯ä»€ä¹ˆ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> numbers = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">numbers[<span class="number">10</span>] = <span class="number">11</span></span><br><span class="line"><span class="built_in">console</span>.log(numbers)</span><br><span class="line"></span><br><span class="line"><span class="attr">A</span>: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">7</span> x <span class="literal">null</span>, <span class="number">11</span>]</span><br><span class="line"><span class="attr">B</span>: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">11</span>]</span><br><span class="line"><span class="attr">C</span>: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">7</span> x empty, <span class="number">11</span>]</span><br><span class="line"><span class="attr">D</span>: <span class="built_in">SyntaxError</span></span><br></pre></td></tr></table></figure><details><summary>ç­”æ¡ˆ</summary>C å½“è®¾ç½®çš„æ•°ç»„å€¼è¶…è¿‡æ•°ç»„é•¿åº¦çš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ç³»åˆ—çš„undefined è¿™é‡Œä¹Ÿå°±æ˜¯æ˜¾ç¤ºäº†ä¸ƒä¸ªç©º</details><h1 id="38-catchæ¥æ”¶"><a href="#38-catchæ¥æ”¶" class="headerlink" title="38 catchæ¥æ”¶"></a>38 catchæ¥æ”¶</h1><p>è¾“å‡ºæ˜¯ä»€ä¹ˆ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> x, y</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>()</span><br><span class="line">  &#125; <span class="keyword">catch</span> (x) &#123;</span><br><span class="line">    (x = <span class="number">1</span>), (y = <span class="number">2</span>)</span><br><span class="line">    <span class="built_in">console</span>.log(x)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">console</span>.log(x)</span><br><span class="line">  <span class="built_in">console</span>.log(y)</span><br><span class="line">&#125;)()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attr">A</span>: <span class="number">1</span> <span class="literal">undefined</span> <span class="number">2</span></span><br><span class="line"><span class="attr">B</span>: <span class="literal">undefined</span> <span class="literal">undefined</span> <span class="literal">undefined</span></span><br><span class="line"><span class="attr">C</span>: <span class="number">1</span> <span class="number">1</span> <span class="number">2</span></span><br><span class="line"><span class="attr">D</span>: <span class="number">1</span> <span class="literal">undefined</span> <span class="literal">undefined</span></span><br></pre></td></tr></table></figure><details><summary>ç­”æ¡ˆ</summary>catchæ¥æ”¶çš„å‚æ•°xä¸æ˜¯å®é™…çš„xã€‚è¿™ä¸ªxæ˜¯å±äºcatchå—çº§ä½œç”¨åŸŸçš„ï¼Œç„¶åæŠŠå—çº§ä½œç”¨åŸŸçš„å˜é‡èµ‹ä¸º1ï¼ŒåŒæ—¶ä¹Ÿè®¾ç½®äº†yçš„å€¼ æ‰€ä»¥è¾“å‡º1 ç„¶åä¸‹é¢çš„xæ²¡æœ‰èµ‹å€¼æ˜¯undefined ç„¶åæ˜¯2</details><h1 id="39-JavaScript-ä¸­çš„ä¸€åˆ‡éƒ½æ˜¯ï¼Ÿ"><a href="#39-JavaScript-ä¸­çš„ä¸€åˆ‡éƒ½æ˜¯ï¼Ÿ" class="headerlink" title="39 JavaScript ä¸­çš„ä¸€åˆ‡éƒ½æ˜¯ï¼Ÿ"></a>39 JavaScript ä¸­çš„ä¸€åˆ‡éƒ½æ˜¯ï¼Ÿ</h1><p>JavaScript ä¸­çš„ä¸€åˆ‡éƒ½æ˜¯ï¼Ÿ<br>A: åŸºæœ¬ç±»å‹ä¸å¯¹è±¡<br>B: å‡½æ•°ä¸å¯¹è±¡<br>C: åªæœ‰å¯¹è±¡<br>D: æ•°å­—ä¸å¯¹è±¡</p><details><summary>ç­”æ¡ˆ</summary>A</details><h1 id="40-reduce"><a href="#40-reduce" class="headerlink" title="40 reduce"></a>40 reduce</h1><p>è¾“å‡ºæ˜¯ä»€ä¹ˆï¼Ÿ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">  [<span class="number">0</span>, <span class="number">1</span>],</span><br><span class="line">  [<span class="number">2</span>, <span class="number">3</span>],</span><br><span class="line">].reduce(</span><br><span class="line">  <span class="function">(<span class="params">acc, cur</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> acc.concat(cur);</span><br><span class="line">  &#125;,</span><br><span class="line">  [<span class="number">1</span>, <span class="number">2</span>]</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">A: [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">2</span>];</span><br><span class="line">B: [<span class="number">6</span>, <span class="number">1</span>, <span class="number">2</span>];</span><br><span class="line">C: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line">D: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">6</span>];</span><br></pre></td></tr></table></figure><details><summary>ç­”æ¡ˆ</summary>C</details><h1 id="41"><a href="#41" class="headerlink" title="41 !!"></a>41 !!</h1><p>è¾“å‡ºæ˜¯ä»€ä¹ˆï¼Ÿ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">!!<span class="literal">null</span></span><br><span class="line">!!<span class="string">&#x27;&#x27;</span></span><br><span class="line">!!<span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="attr">A</span>: <span class="literal">false</span> <span class="literal">true</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">B</span>: <span class="literal">false</span> <span class="literal">false</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">C</span>: <span class="literal">false</span> <span class="literal">true</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">D</span>: <span class="literal">true</span> <span class="literal">true</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><details><summary>ç­”æ¡ˆ</summary>B</details><h1 id="42-setInterval"><a href="#42-setInterval" class="headerlink" title="42 setInterval"></a>42 setInterval</h1><p>setInterval<br>æ–¹æ³•çš„è¿”å›å€¼æ˜¯ä»€ä¹ˆï¼Ÿ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> <span class="built_in">console</span>.log(<span class="string">&quot;Hi&quot;</span>), <span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line">A: ä¸€ä¸ªå”¯ä¸€çš„id;</span><br><span class="line">B: è¯¥æ–¹æ³•æŒ‡å®šçš„æ¯«ç§’æ•°;</span><br><span class="line">C: ä¼ é€’çš„å‡½æ•°;</span><br><span class="line">D: <span class="literal">undefined</span>;</span><br></pre></td></tr></table></figure><details><summary>ç­”æ¡ˆ</summary>A</details><h1 id="43-æ‹“å±•è¿ç®—ç¬¦"><a href="#43-æ‹“å±•è¿ç®—ç¬¦" class="headerlink" title="43 æ‹“å±•è¿ç®—ç¬¦"></a>43 æ‹“å±•è¿ç®—ç¬¦</h1><p>è¾“å‡ºæ˜¯ä»€ä¹ˆï¼Ÿ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[...<span class="string">&quot;Lydia&quot;</span>];</span><br><span class="line"></span><br><span class="line">A: [<span class="string">&quot;L&quot;</span>, <span class="string">&quot;y&quot;</span>, <span class="string">&quot;d&quot;</span>, <span class="string">&quot;i&quot;</span>, <span class="string">&quot;a&quot;</span>];</span><br><span class="line">B: [<span class="string">&quot;Lydia&quot;</span>];</span><br><span class="line">C: [[], <span class="string">&quot;Lydia&quot;</span>];</span><br><span class="line">D: [[<span class="string">&quot;L&quot;</span>, <span class="string">&quot;y&quot;</span>, <span class="string">&quot;d&quot;</span>, <span class="string">&quot;i&quot;</span>, <span class="string">&quot;a&quot;</span>]];</span><br></pre></td></tr></table></figure><details><summary>ç­”æ¡ˆ</summary>A stringæ˜¯å¯è¿­ä»£çš„</details><h1 id="44-generator"><a href="#44-generator" class="headerlink" title="44 generator"></a>44 generator</h1><p>è¾“å‡ºæ˜¯ä»€ä¹ˆï¼Ÿ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">generator</span>(<span class="params">i</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">yield</span> i;</span><br><span class="line">  <span class="keyword">yield</span> i * <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> gen = generator(<span class="number">10</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(gen.next().value);</span><br><span class="line"><span class="built_in">console</span>.log(gen.next().value);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">A: [<span class="number">0</span>, <span class="number">10</span>], [<span class="number">10</span>, <span class="number">20</span>]</span><br><span class="line"><span class="attr">B</span>: <span class="number">20</span>, <span class="number">20</span></span><br><span class="line"><span class="attr">C</span>: <span class="number">10</span>, <span class="number">20</span></span><br><span class="line"><span class="attr">D</span>: <span class="number">0</span>, <span class="number">10</span> and <span class="number">10</span>, <span class="number">20</span></span><br></pre></td></tr></table></figure><details><summary>ç­”æ¡ˆ</summary>C generatorä¼šåœä¸‹ï¼Œç›´åˆ°è°ƒç”¨ä¸‹ä¸€ä¸ªnext</details><h1 id="45-Promise-race"><a href="#45-Promise-race" class="headerlink" title="45 Promise.race"></a>45 <code>Promise.race</code></h1><p>è¿”å›å€¼æ˜¯ä»€ä¹ˆ?</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> firstPromise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">res, rej</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(res, <span class="number">500</span>, <span class="string">&quot;one&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> secondPromise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">res, rej</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(res, <span class="number">100</span>, <span class="string">&quot;two&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">Promise</span>.race([firstPromise, secondPromise]).then(<span class="function"><span class="params">res</span> =&gt;</span> <span class="built_in">console</span>.log(res));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">A: <span class="string">&quot;one&quot;</span></span><br><span class="line"><span class="attr">B</span>: <span class="string">&quot;two&quot;</span></span><br><span class="line"><span class="attr">C</span>: <span class="string">&quot;two&quot;</span> <span class="string">&quot;one&quot;</span></span><br><span class="line"><span class="attr">D</span>: <span class="string">&quot;one&quot;</span> <span class="string">&quot;two&quot;</span></span><br></pre></td></tr></table></figure><details><summary>ç­”æ¡ˆ</summary>raceä¸­æœ‰ä¸€ä¸ªçŠ¶æ€ä¼˜å…ˆæ”¹å˜å°±è¾“å‡ºæ”¹å˜çš„é‚£ä¸€ä¸ªè¿™é‡Œæ˜¯two å› ä¸ºä»–åªç”¨100mså¦å¤–any æ˜¯å…¶ä¸­ä¸€ä¸ªå˜æˆfulfilledå°±è¿”å›æˆåŠŸï¼Œå…¨éƒ¨éƒ½å¤±è´¥æ‰è¿”å›å¤±è´¥allæ˜¯å…¨éƒ¨æˆåŠŸæ‰è¿”å›æˆåŠŸï¼Œä¸€ä¸ªå¤±è´¥å°±è¿”å›å¤±è´¥ï¼Œç›¸å½“äºanyçš„ç›¸åallSettledä¼šç­‰å…¨éƒ¨æ‰§è¡Œå®Œï¼Œä¸ä¼šå› ä¸ºå¤±è´¥ç»ˆæ­¢</details><h1 id="46-å¼•ç”¨äº¤äº’"><a href="#46-å¼•ç”¨äº¤äº’" class="headerlink" title="46 å¼•ç”¨äº¤äº’"></a>46 å¼•ç”¨äº¤äº’</h1><p>è¾“å‡ºæ˜¯ä»€ä¹ˆ?</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person = &#123; <span class="attr">name</span>: <span class="string">&quot;Lydia&quot;</span> &#125;;</span><br><span class="line"><span class="keyword">const</span> members = [person];</span><br><span class="line">person = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(members);</span><br><span class="line"></span><br><span class="line">A: <span class="literal">null</span>;</span><br><span class="line">B: [<span class="literal">null</span>];</span><br><span class="line">C: [&#123;&#125;];</span><br><span class="line">D: [&#123; <span class="attr">name</span>: <span class="string">&quot;Lydia&quot;</span> &#125;];</span><br></pre></td></tr></table></figure><details><summary>ç­”æ¡ˆ</summary>D membersçš„ç¬¬ä¸€ä¸ªå…ƒç´ æ‹·è´äº†personï¼Œä½†å¹¶ä¸æ˜¯ä¿æŒç€å¼•ç”¨ï¼Œæ‰€ä»¥æœ€åå³ä½¿personå˜äº†å®ƒè¿˜æ˜¯ä¸ä¼šå˜æ³¨æ„åªæœ‰å¯¹è±¡å’Œå¯¹è±¡ä¹‹é—´æ‰æœ‰å¼•ç”¨äº¤äº’</details><h1 id="47-forin"><a href="#47-forin" class="headerlink" title="47 forin"></a>47 forin</h1><p>è¾“å‡ºæ˜¯ä»€ä¹ˆ?</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> person = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;Lydia&quot;</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="number">21</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> item <span class="keyword">in</span> person) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(item);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="attr">A</span>: &#123; <span class="attr">name</span>: <span class="string">&quot;Lydia&quot;</span> &#125;, &#123; <span class="attr">age</span>: <span class="number">21</span> &#125;</span><br><span class="line"><span class="attr">B</span>: <span class="string">&quot;name&quot;</span>, <span class="string">&quot;age&quot;</span></span><br><span class="line"><span class="attr">C</span>: <span class="string">&quot;Lydia&quot;</span>, <span class="number">21</span></span><br><span class="line"><span class="attr">D</span>: [<span class="string">&quot;name&quot;</span>, <span class="string">&quot;Lydia&quot;</span>], [<span class="string">&quot;age&quot;</span>, <span class="number">21</span>]</span><br></pre></td></tr></table></figure><details><summary>ç­”æ¡ˆ</summary>B</details><h1 id="48-è¿ç®—"><a href="#48-è¿ç®—" class="headerlink" title="48 è¿ç®—"></a>48 è¿ç®—</h1><p>è¾“å‡ºæ˜¯ä»€ä¹ˆ?</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="number">3</span> + <span class="number">4</span> + <span class="string">&quot;5&quot;</span>);</span><br><span class="line"></span><br><span class="line">A: <span class="string">&quot;345&quot;</span>;</span><br><span class="line">B: <span class="string">&quot;75&quot;</span>;</span><br><span class="line">C: <span class="number">12</span>;</span><br><span class="line">D: <span class="string">&quot;12&quot;</span>;</span><br></pre></td></tr></table></figure><details><summary>ç­”æ¡ˆ</summary>B</details><h1 id="49-parseInt"><a href="#49-parseInt" class="headerlink" title="49 parseInt"></a>49 parseInt</h1><p>num æ˜¯ä»€ä¹ˆ?</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> num = <span class="built_in">parseInt</span>(<span class="string">&quot;7*6&quot;</span>, <span class="number">10</span>);</span><br><span class="line"></span><br><span class="line">A: <span class="number">42</span>;</span><br><span class="line">B: <span class="string">&quot;42&quot;</span>;</span><br><span class="line">C: <span class="number">7</span>;</span><br><span class="line">D: <span class="literal">NaN</span>;</span><br></pre></td></tr></table></figure><details><summary>ç­”æ¡ˆ</summary>parseIntä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯è§£æçš„å‚æ•°ï¼Œå¦å¤–ä¸€ä¸ªæ˜¯è¿›åˆ¶ã€‚è¿™é‡Œè®¾ç½®äº†åè¿›åˆ¶ã€‚ç„¶åè§£æ7*6ç”±äº*ä¸åˆæ³•ï¼Œç›´æ¥è§£æå‡º7</details><h1 id="50-map"><a href="#50-map" class="headerlink" title="50 map"></a>50 map</h1><p>è¾“å‡ºæ˜¯ä»€ä¹ˆ?</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].map(<span class="function"><span class="params">num</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> num === <span class="string">&quot;number&quot;</span>) <span class="keyword">return</span>;</span><br><span class="line">  <span class="keyword">return</span> num * <span class="number">2</span>;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">A: []</span><br><span class="line"><span class="attr">B</span>: [<span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>]</span><br><span class="line"><span class="attr">C</span>: [<span class="literal">undefined</span>, <span class="literal">undefined</span>, <span class="literal">undefined</span>]</span><br><span class="line"><span class="attr">D</span>: [ <span class="number">3</span> x empty ]</span><br></pre></td></tr></table></figure><details><summary>ç­”æ¡ˆ</summary>mapåˆ›å»ºæ–°çš„å€¼è¿”å›ç»™æ•°ç»„ï¼Œç”±äºæ•°ç»„å…¨æ˜¯æ•°å­—æ‰€ä»¥ç¬¬ä¸€ä¸ªifæ°¸è¿œæˆç«‹ï¼Œæ‰€ä»¥è¿”å›undefined</details><h1 id="51-å€¼ä¸å¼•ç”¨"><a href="#51-å€¼ä¸å¼•ç”¨" class="headerlink" title="51 å€¼ä¸å¼•ç”¨"></a>51 å€¼ä¸å¼•ç”¨</h1><p>è¾“å‡ºæ˜¯ä»€ä¹ˆ?</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getInfo</span>(<span class="params">member, year</span>) </span>&#123;</span><br><span class="line">  member.name = <span class="string">&quot;Lydia&quot;</span>;</span><br><span class="line">  year = <span class="string">&quot;1998&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> person = &#123; <span class="attr">name</span>: <span class="string">&quot;Sarah&quot;</span> &#125;;</span><br><span class="line"><span class="keyword">const</span> birthYear = <span class="string">&quot;1997&quot;</span>;</span><br><span class="line"></span><br><span class="line">getInfo(person, birthYear);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(person, birthYear);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">A: &#123; <span class="attr">name</span>: <span class="string">&quot;Lydia&quot;</span> &#125;, <span class="string">&quot;1997&quot;</span></span><br><span class="line"><span class="attr">B</span>: &#123; <span class="attr">name</span>: <span class="string">&quot;Sarah&quot;</span> &#125;, <span class="string">&quot;1998&quot;</span></span><br><span class="line"><span class="attr">C</span>: &#123; <span class="attr">name</span>: <span class="string">&quot;Lydia&quot;</span> &#125;, <span class="string">&quot;1998&quot;</span></span><br><span class="line"><span class="attr">D</span>: &#123; <span class="attr">name</span>: <span class="string">&quot;Sarah&quot;</span> &#125;, <span class="string">&quot;1997&quot;</span></span><br></pre></td></tr></table></figure><details><summary>ç­”æ¡ˆ</summary>A å¯¹è±¡ä¼ é€’æ˜¯å¼•ç”¨ä¼ é€’ï¼Œæ™®é€šå‚æ•°éƒ½æ˜¯å€¼ä¼ é€’ã€‚å€¼ä¼ é€’æ˜¯ä¸€ä»½æ‹·è´birthYearæ˜¯ä¸€ä¸ªå€¼ï¼Œæ‰€ä»¥å‡½æ•°å†…éƒ¨çš„å½¢å‚æ€ä¹ˆå˜éƒ½ä¸ä¼šå½±å“åˆ°å¤–éƒ¨çš„birthYearpersonæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä¼ é€’äº†å¼•ç”¨å…³ç³»ï¼Œå‡½æ•°å†…éƒ¨æ”¹å˜äº†å®ƒçš„å¼•ç”¨ï¼Œæ‰€ä»¥personä¹Ÿå˜åŒ–äº†</details><h1 id="52-throw"><a href="#52-throw" class="headerlink" title="52 throw"></a>52 throw</h1><p>è¾“å‡ºæ˜¯ä»€ä¹ˆ?</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">greeting</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">throw</span> <span class="string">&quot;Hello world!&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sayHi</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> data = greeting();</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;It worked!&quot;</span>, data);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;Oh no an error!&quot;</span>, e);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">sayHi();</span><br><span class="line"></span><br><span class="line">A: <span class="string">&quot;It worked! Hello world!&quot;</span></span><br><span class="line"><span class="attr">B</span>: <span class="string">&quot;Oh no an error: undefined</span></span><br><span class="line"><span class="string">C: SyntaxError: can only throw Error objects</span></span><br><span class="line"><span class="string">D: &quot;</span>Oh no an error: Hello world!</span><br></pre></td></tr></table></figure><details><summary>ç­”æ¡ˆ</summary>D throwå¯ä»¥è‡ªå®šä¹‰é”™è¯¯ï¼Œå¼‚å¸¸å¯ä»¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä¸€ä¸ªæ•°å­—ï¼Œä¸€ä¸ªå¸ƒå°”ç±»å‹ï¼Œæˆ–è€…æ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚æœ¬ä¾‹å­ä¸­æ˜¯`Hello world`</details><h1 id="53-æ„é€ å‡½æ•°ä¸­çš„è¿”å›å€¼"><a href="#53-æ„é€ å‡½æ•°ä¸­çš„è¿”å›å€¼" class="headerlink" title="53 æ„é€ å‡½æ•°ä¸­çš„è¿”å›å€¼"></a>53 æ„é€ å‡½æ•°ä¸­çš„è¿”å›å€¼</h1><p>è¾“å‡ºæ˜¯ä»€ä¹ˆ?</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Car</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.make = <span class="string">&quot;Lamborghini&quot;</span>;</span><br><span class="line">  <span class="keyword">return</span> &#123; <span class="attr">make</span>: <span class="string">&quot;Maserati&quot;</span> &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> myCar = <span class="keyword">new</span> Car();</span><br><span class="line"><span class="built_in">console</span>.log(myCar.make);</span><br><span class="line"></span><br><span class="line">A: <span class="string">&quot;Lamborghini&quot;</span>;</span><br><span class="line">B: <span class="string">&quot;Maserati&quot;</span>;</span><br><span class="line">C: <span class="built_in">ReferenceError</span>;</span><br><span class="line">D: <span class="built_in">TypeError</span>;</span><br></pre></td></tr></table></figure><details><summary>ç­”æ¡ˆ</summary>B</details><h1 id="54-è¡¨è¾¾å¼æ‰§è¡Œé¡ºåº"><a href="#54-è¡¨è¾¾å¼æ‰§è¡Œé¡ºåº" class="headerlink" title="54 è¡¨è¾¾å¼æ‰§è¡Œé¡ºåº"></a>54 è¡¨è¾¾å¼æ‰§è¡Œé¡ºåº</h1><p>è¾“å‡ºæ˜¯ä»€ä¹ˆ?</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> x = (y = <span class="number">10</span>);</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> x);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> y);</span><br><span class="line"></span><br><span class="line">A: <span class="string">&quot;undefined&quot;</span>, <span class="string">&quot;number&quot;</span>;</span><br><span class="line">B: <span class="string">&quot;number&quot;</span>, <span class="string">&quot;number&quot;</span>;</span><br><span class="line">C: <span class="string">&quot;object&quot;</span>, <span class="string">&quot;number&quot;</span>;</span><br><span class="line">D: <span class="string">&quot;number&quot;</span>, <span class="string">&quot;undefined&quot;</span>;</span><br></pre></td></tr></table></figure><details><summary>ç­”æ¡ˆ</summary>A</details><h1 id="55-åˆ é™¤åŸå‹ä¸Šçš„æ–¹æ³•"><a href="#55-åˆ é™¤åŸå‹ä¸Šçš„æ–¹æ³•" class="headerlink" title="55 åˆ é™¤åŸå‹ä¸Šçš„æ–¹æ³•"></a>55 åˆ é™¤åŸå‹ä¸Šçš„æ–¹æ³•</h1><p>è¾“å‡ºæ˜¯ä»€ä¹ˆ?</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">name</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.name = name;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Dog.prototype.bark = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`Woof I am <span class="subst">$&#123;<span class="built_in">this</span>.name&#125;</span>`</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> pet = <span class="keyword">new</span> Dog(<span class="string">&quot;Mara&quot;</span>);</span><br><span class="line"></span><br><span class="line">pet.bark();</span><br><span class="line"></span><br><span class="line"><span class="keyword">delete</span> Dog.prototype.bark;</span><br><span class="line"></span><br><span class="line">pet.bark();</span><br><span class="line"></span><br><span class="line">A: <span class="string">&quot;Woof I am Mara&quot;</span>, <span class="built_in">TypeError</span>;</span><br><span class="line">B: <span class="string">&quot;Woof I am Mara&quot;</span>, <span class="string">&quot;Woof I am Mara&quot;</span>;</span><br><span class="line">C: <span class="string">&quot;Woof I am Mara&quot;</span>, <span class="literal">undefined</span>;</span><br><span class="line">D: <span class="built_in">TypeError</span>, <span class="built_in">TypeError</span>;</span><br></pre></td></tr></table></figure><details><summary>ç­”æ¡ˆ</summary>A å½“è°ƒç”¨ä¸€ä¸ªä¸å­˜åœ¨çš„å‡½æ•°ä¼šæŠ›å‡ºTypeErrorå¼‚å¸¸</details><h1 id="56-setè¿”å›å€¼"><a href="#56-setè¿”å›å€¼" class="headerlink" title="56 setè¿”å›å€¼"></a>56 setè¿”å›å€¼</h1><p>è¾“å‡ºæ˜¯ä»€ä¹ˆ?</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> set = <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(set);</span><br><span class="line"></span><br><span class="line">A: [<span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>];</span><br><span class="line">B: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>];</span><br><span class="line">C: &#123;</span><br><span class="line">  <span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="attr">D</span>: &#123;</span><br><span class="line">  <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><details><summary>ç­”æ¡ˆ</summary>D è¿”å›Set(4) { 1, 2, 3, 4 }</details><h1 id="57-è¯»å–æ¨¡å—"><a href="#57-è¯»å–æ¨¡å—" class="headerlink" title="57 è¯»å–æ¨¡å—"></a>57 è¯»å–æ¨¡å—</h1><p>è¾“å‡ºæ˜¯ä»€ä¹ˆ?</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// counter.js</span></span><br><span class="line"><span class="keyword">let</span> counter = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> counter;</span><br><span class="line"></span><br><span class="line"><span class="comment">// index.js</span></span><br><span class="line"><span class="keyword">import</span> myCounter <span class="keyword">from</span> <span class="string">&quot;./counter&quot;</span>;</span><br><span class="line"></span><br><span class="line">myCounter += <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(myCounter);</span><br><span class="line"></span><br><span class="line">A: <span class="number">10</span>;</span><br><span class="line">B: <span class="number">11</span>;</span><br><span class="line">C: <span class="built_in">Error</span>;</span><br><span class="line">D: <span class="literal">NaN</span>;</span><br></pre></td></tr></table></figure><details><summary>ç­”æ¡ˆ</summary>C å¼•å…¥çš„æ¨¡å—æ˜¯åªè¯»çš„ã€‚åªæœ‰å¯¼å‡ºå®ƒä»¬çš„æ¨¡å—æ‰èƒ½ä¿®æ”¹å…¶å€¼</details><h1 id="58-delete"><a href="#58-delete" class="headerlink" title="58 delete"></a>58 delete</h1><p>è¾“å‡ºæ˜¯ä»€ä¹ˆ?</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> name = <span class="string">&quot;Lydia&quot;</span>;</span><br><span class="line">age = <span class="number">21</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">delete</span> name);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">delete</span> age);</span><br><span class="line"></span><br><span class="line">A: <span class="literal">false</span>, <span class="literal">true</span>;</span><br><span class="line">B: <span class="string">&quot;Lydia&quot;</span>, <span class="number">21</span>;</span><br><span class="line">C: <span class="literal">true</span>, <span class="literal">true</span>;</span><br><span class="line">D: <span class="literal">undefined</span>, <span class="literal">undefined</span>;</span><br></pre></td></tr></table></figure><details><summary>ç­”æ¡ˆ</summary>A deleteè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼ŒtrueæˆåŠŸfalsè€Œå¤±è´¥ï¼Œåªèƒ½åˆ é™¤å¯¹è±¡çš„å€¼ï¼Œæ‰€ä»¥ç¬¬ä¸€ä¸ªæŠ›å‡ºfalseï¼Œç¬¬äºŒä¸ªå€¼æŒ‚è½½åˆ°äº†windowä¸Šï¼Œ æ‰€ä»¥æ˜¯true</details><h1 id="59-è§£æ„èµ‹å€¼"><a href="#59-è§£æ„èµ‹å€¼" class="headerlink" title="59 è§£æ„èµ‹å€¼"></a>59 è§£æ„èµ‹å€¼</h1><p>è¾“å‡ºæ˜¯ä»€ä¹ˆ?</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> numbers = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line"><span class="keyword">const</span> [y] = numbers;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(y);</span><br><span class="line"></span><br><span class="line">A: [[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]];</span><br><span class="line">B: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line">C: <span class="number">1</span>;</span><br><span class="line">D: [<span class="number">1</span>];</span><br></pre></td></tr></table></figure><details><summary>ç­”æ¡ˆ</summary>C æ•°ç»„çš„è§£æ„èµ‹å€¼æŒ‰é¡ºåºèµ‹å€¼ æ‰€ä»¥æ˜¯1</details><h1 id="60-æ‹“å±•è¿ç®—ç¬¦ç»„åˆå¯¹è±¡"><a href="#60-æ‹“å±•è¿ç®—ç¬¦ç»„åˆå¯¹è±¡" class="headerlink" title="60 æ‹“å±•è¿ç®—ç¬¦ç»„åˆå¯¹è±¡"></a>60 æ‹“å±•è¿ç®—ç¬¦ç»„åˆå¯¹è±¡</h1><p>è¾“å‡ºæ˜¯ä»€ä¹ˆ?</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> user = &#123; <span class="attr">name</span>: <span class="string">&quot;Lydia&quot;</span>, <span class="attr">age</span>: <span class="number">21</span> &#125;;</span><br><span class="line"><span class="keyword">const</span> admin = &#123; <span class="attr">admin</span>: <span class="literal">true</span>, ...user &#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(admin);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">A: &#123; <span class="attr">admin</span>: <span class="literal">true</span>, <span class="attr">user</span>: &#123; <span class="attr">name</span>: <span class="string">&quot;Lydia&quot;</span>, <span class="attr">age</span>: <span class="number">21</span> &#125; &#125;</span><br><span class="line"><span class="attr">B</span>: &#123; <span class="attr">admin</span>: <span class="literal">true</span>, <span class="attr">name</span>: <span class="string">&quot;Lydia&quot;</span>, <span class="attr">age</span>: <span class="number">21</span> &#125;</span><br><span class="line"><span class="attr">C</span>: &#123; <span class="attr">admin</span>: <span class="literal">true</span>, <span class="attr">user</span>: [<span class="string">&quot;Lydia&quot;</span>, <span class="number">21</span>] &#125;</span><br><span class="line"><span class="attr">D</span>: &#123; <span class="attr">admin</span>: <span class="literal">true</span> &#125;</span><br></pre></td></tr></table></figure><details><summary>ç­”æ¡ˆ</summary>B</details><h1 id="61-Object-defineProperty"><a href="#61-Object-defineProperty" class="headerlink" title="61 Object.defineProperty"></a>61 <code>Object.defineProperty</code></h1><p>è¾“å‡ºæ˜¯ä»€ä¹ˆ?</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> person = &#123; <span class="attr">name</span>: <span class="string">&quot;Lydia&quot;</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.defineProperty(person, <span class="string">&quot;age&quot;</span>, &#123; <span class="attr">value</span>: <span class="number">21</span> &#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(person);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.keys(person));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">A: &#123; <span class="attr">name</span>: <span class="string">&quot;Lydia&quot;</span>, <span class="attr">age</span>: <span class="number">21</span> &#125;, [<span class="string">&quot;name&quot;</span>, <span class="string">&quot;age&quot;</span>]</span><br><span class="line"><span class="attr">B</span>: &#123; <span class="attr">name</span>: <span class="string">&quot;Lydia&quot;</span>, <span class="attr">age</span>: <span class="number">21</span> &#125;, [<span class="string">&quot;name&quot;</span>]</span><br><span class="line"><span class="attr">C</span>: &#123; <span class="attr">name</span>: <span class="string">&quot;Lydia&quot;</span>&#125;, [<span class="string">&quot;name&quot;</span>, <span class="string">&quot;age&quot;</span>]</span><br><span class="line"><span class="attr">D</span>: &#123; <span class="attr">name</span>: <span class="string">&quot;Lydia&quot;</span>&#125;, [<span class="string">&quot;age&quot;</span>]</span><br></pre></td></tr></table></figure><details><summary>ç­”æ¡ˆ</summary>B `Object.defineProperty`ç»™å¯¹è±¡æ·»åŠ äº†ä¸€ä¸ªå±æ€§ï¼Œä½†æ˜¯é»˜è®¤ä¸å¯æšä¸¾ä¸å¯ä¿®æ”¹ã€‚æ‰€ä»¥ä¸ä¼šé€šè¿‡`Object.keys`æ˜¾ç¤ºå‡ºæ¥</details><h1 id="62-JSON-stringfy"><a href="#62-JSON-stringfy" class="headerlink" title="62 JSON.stringfy"></a>62 <code>JSON.stringfy</code></h1><p>è¾“å‡ºæ˜¯ä»€ä¹ˆ?</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> settings = &#123;</span><br><span class="line">  <span class="attr">username</span>: <span class="string">&quot;lydiahallie&quot;</span>,</span><br><span class="line">  <span class="attr">level</span>: <span class="number">19</span>,</span><br><span class="line">  <span class="attr">health</span>: <span class="number">90</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> data = <span class="built_in">JSON</span>.stringify(settings, [<span class="string">&quot;level&quot;</span>, <span class="string">&quot;health&quot;</span>]);</span><br><span class="line"><span class="built_in">console</span>.log(data);</span><br><span class="line"></span><br><span class="line">A: <span class="string">&quot;&#123;&quot;</span>level<span class="string">&quot;:19, &quot;</span>health<span class="string">&quot;:90&#125;&quot;</span></span><br><span class="line"><span class="attr">B</span>: <span class="string">&quot;&#123;&quot;</span>username<span class="string">&quot;: &quot;</span>lydiahallie<span class="string">&quot;&#125;&quot;</span></span><br><span class="line"><span class="attr">C</span>: <span class="string">&quot;[&quot;</span>level<span class="string">&quot;, &quot;</span>health<span class="string">&quot;]&quot;</span></span><br><span class="line"><span class="attr">D</span>: <span class="string">&quot;&#123;&quot;</span>username<span class="string">&quot;: &quot;</span>lydiahallie<span class="string">&quot;, &quot;</span>level<span class="string">&quot;:19, &quot;</span>health<span class="string">&quot;:90&#125;&quot;</span></span><br></pre></td></tr></table></figure><details><summary>ç­”æ¡ˆ</summary>A `JSON.stringfy`çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯replacer å®ƒå¯ä»¥æ˜¯ä¸€ä¸ªæ•°ç»„ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå‡½æ•°å¦‚æœæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œé‚£ä¹ˆ åªå–åˆ°æ•°ç»„ä¸­çš„å±æ€§å¦‚æœæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œé‚£ä¹ˆä¼šéå†å…¨éƒ¨çš„å€¼ï¼Œå‡½æ•°çš„è¿”å›å€¼ä¼šæˆä¸ºè¿™ä¸ªå±æ€§çš„å€¼</details><h1 id="63-æ“ä½œ"><a href="#63-æ“ä½œ" class="headerlink" title="63 ++æ“ä½œ"></a>63 ++æ“ä½œ</h1><p>è¾“å‡ºæ˜¯ä»€ä¹ˆ?</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> num = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> increaseNumber = <span class="function">() =&gt;</span> num++;</span><br><span class="line"><span class="keyword">const</span> increasePassedNumber = <span class="function">(<span class="params">number</span>) =&gt;</span> number++;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> num1 = increaseNumber();</span><br><span class="line"><span class="keyword">const</span> num2 = increasePassedNumber(num1);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(num1);</span><br><span class="line"><span class="built_in">console</span>.log(num2);</span><br><span class="line"></span><br><span class="line">A: <span class="number">10</span>, <span class="number">10</span>;</span><br><span class="line">B: <span class="number">10</span>, <span class="number">11</span>;</span><br><span class="line">C: <span class="number">11</span>, <span class="number">11</span>;</span><br><span class="line">D: <span class="number">11</span>, <span class="number">12</span>;</span><br></pre></td></tr></table></figure><details><summary>ç­”æ¡ˆ</summary>A</details><h1 id="64-å¯¹è±¡é»˜è®¤å€¼ä¸ä¼ é€’"><a href="#64-å¯¹è±¡é»˜è®¤å€¼ä¸ä¼ é€’" class="headerlink" title="64 å¯¹è±¡é»˜è®¤å€¼ä¸ä¼ é€’"></a>64 å¯¹è±¡é»˜è®¤å€¼ä¸ä¼ é€’</h1><p>è¾“å‡ºæ˜¯ä»€ä¹ˆ?</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> value = &#123; <span class="attr">number</span>: <span class="number">10</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> multiply = <span class="function">(<span class="params">x = &#123; ...value &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log((x.number *= <span class="number">2</span>));</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">multiply();</span><br><span class="line">multiply();</span><br><span class="line">multiply(value);</span><br><span class="line">multiply(value);</span><br><span class="line"></span><br><span class="line">A: <span class="number">20</span>, <span class="number">40</span>, <span class="number">80</span>, <span class="number">160</span>;</span><br><span class="line">B: <span class="number">20</span>, <span class="number">40</span>, <span class="number">20</span>, <span class="number">40</span>;</span><br><span class="line">C: <span class="number">20</span>, <span class="number">20</span>, <span class="number">20</span>, <span class="number">40</span>;</span><br><span class="line">D: <span class="literal">NaN</span>, <span class="literal">NaN</span>, <span class="number">20</span>, <span class="number">40</span>;</span><br></pre></td></tr></table></figure><details><summary>ç­”æ¡ˆ</summary>C å‰é¢ä¸¤æ¬¡æ˜¯å½¢å‚é»˜è®¤å€¼ä¸”è§£æ„ï¼Œæ‰€ä»¥æ¯æ¬¡éƒ½æ˜¯ä¸€æ ·çš„`{number:10}` å› æ­¤éƒ½æ˜¯20åé¢ä¸¤æ¬¡ä¼ é€’çš„æ˜¯value å› ä¸ºå¯¹è±¡ä¼ é€’æ˜¯å¼•ç”¨ æ‰€ä»¥ç¬¬ä¸€æ¬¡20 ç¬¬äºŒæ¬¡åœ¨ç¬¬ä¸€æ¬¡çš„åŸºç¡€ä¸Šæ”¹ å˜40</details><h1 id="65-reduce"><a href="#65-reduce" class="headerlink" title="65 reduce"></a>65 reduce</h1><p>è¾“å‡ºæ˜¯ä»€ä¹ˆ?</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>].reduce(<span class="function">(<span class="params">x, y</span>) =&gt;</span> <span class="built_in">console</span>.log(x, y));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">A: <span class="number">1</span> <span class="number">2</span> and <span class="number">3</span> <span class="number">3</span> and <span class="number">6</span> <span class="number">4</span></span><br><span class="line"><span class="attr">B</span>: <span class="number">1</span> <span class="number">2</span> and <span class="number">2</span> <span class="number">3</span> and <span class="number">3</span> <span class="number">4</span></span><br><span class="line"><span class="attr">C</span>: <span class="number">1</span> <span class="literal">undefined</span> and <span class="number">2</span> <span class="literal">undefined</span> and <span class="number">3</span> <span class="literal">undefined</span> and <span class="number">4</span> <span class="literal">undefined</span></span><br><span class="line"><span class="attr">D</span>: <span class="number">1</span> <span class="number">2</span> and <span class="literal">undefined</span> <span class="number">3</span> and <span class="literal">undefined</span> <span class="number">4</span></span><br></pre></td></tr></table></figure><details><summary>ç­”æ¡ˆ</summary>reduceæœ‰å››ä¸ªå‚æ•°* acc ç´¯åŠ å™¨* cur å½“å‰å€¼* idx å½“å‰ç´¢å¼•* src æºæ•°ç»„æ­¤æ—¶1æ˜¯ç´¯åŠ å™¨ 2æ˜¯å½“å‰å€¼ æ­¤æ—¶æ‰“å°æ˜¯console æ‰€ä»¥é»˜è®¤è¿”å›undefined ä¸‹ä¸€æ¬¡ç´¯åŠ å™¨åˆ™æ˜¯undefined æ‰€ä»¥ ç¬¬äºŒæ¬¡ undefined 3ç¬¬ä¸‰æ¬¡ undefined 4ç»“æŸ</details><h1 id="66-ç»§æ‰¿"><a href="#66-ç»§æ‰¿" class="headerlink" title="66 ç»§æ‰¿"></a>66 ç»§æ‰¿</h1><p>ä½¿ç”¨å“ªä¸ªæ„é€ å‡½æ•°å¯ä»¥æˆåŠŸç»§æ‰¿ Dog ç±»?</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">name</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.name = name;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Labrador</span> <span class="keyword">extends</span> <span class="title">Dog</span> </span>&#123;</span><br><span class="line">  <span class="comment">// 1</span></span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">name, size</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.size = size;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 2</span></span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">name, size</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(name);</span><br><span class="line">    <span class="built_in">this</span>.size = size;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 3</span></span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">size</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(name);</span><br><span class="line">    <span class="built_in">this</span>.size = size;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 4</span></span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">name, size</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.name = name;</span><br><span class="line">    <span class="built_in">this</span>.size = size;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">A: <span class="number">1</span></span><br><span class="line"><span class="attr">B</span>: <span class="number">2</span></span><br><span class="line"><span class="attr">C</span>: <span class="number">3</span></span><br><span class="line"><span class="attr">D</span>: <span class="number">4</span></span><br></pre></td></tr></table></figure><details><summary>ç­”æ¡ˆ</summary>B superåœ¨ä½¿ç”¨ä¹‹å‰ä¸èƒ½è®¿é—®thiså…³é”®å­— å¦åˆ™æŠ›å‡ºReferenceErroré”™è¯¯ã€‚ä½¿ç”¨super éœ€è¦æ„é€ å‡½æ•°ä¼ é€’ç›¸åº”çš„å‚æ•°ç»™superã€‚è¿™é‡Œä¼ é€’name</details><h1 id="67-import"><a href="#67-import" class="headerlink" title="67 import"></a>67 import</h1><p>è¾“å‡ºæ˜¯ä»€ä¹ˆ?</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// index.js</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;running index.js&#x27;</span>);</span><br><span class="line"><span class="keyword">import</span> &#123; sum &#125; <span class="keyword">from</span> <span class="string">&#x27;./sum.js&#x27;</span>;</span><br><span class="line"><span class="built_in">console</span>.log(sum(<span class="number">1</span>, <span class="number">2</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// sum.js</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;running sum.js&#x27;</span>);</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> sum = <span class="function">(<span class="params">a, b</span>) =&gt;</span> a + b;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">A: running index.js, running sum.js, <span class="number">3</span></span><br><span class="line"><span class="attr">B</span>: running sum.js, running index.js, <span class="number">3</span></span><br><span class="line"><span class="attr">C</span>: running sum.js, <span class="number">3</span>, running index.js</span><br><span class="line"><span class="attr">D</span>: running index.js, <span class="literal">undefined</span>, running sum.js</span><br></pre></td></tr></table></figure><details><summary>ç­”æ¡ˆ</summary>B importä¼šåœ¨ç¼–è¯‘çš„é˜¶æ®µæ‰§è¡Œï¼Œæ„å‘³ç€è¢«å¯¼å…¥çš„æ¨¡å—ä¼šå…ˆè¿è¡Œï¼Œå¯¼å…¥æ¨¡å—çš„æ–‡ä»¶ä¼šåè¿è¡Œã€‚å’Œ requireä¸åŒ requireæ˜¯åœ¨è¿è¡Œæ—¶æ‰§è¡Œçš„ æ‰€ä»¥å®ƒå¯ä»¥æ ¹æ®éœ€è¦åŠ è½½ä¾èµ–</details><h1 id="68-Symbol"><a href="#68-Symbol" class="headerlink" title="68 Symbol"></a>68 Symbol</h1><p>è¾“å‡ºæ˜¯ä»€ä¹ˆ?</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Number</span>(<span class="number">2</span>) === <span class="built_in">Number</span>(<span class="number">2</span>));</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Boolean</span>(<span class="literal">false</span>) === <span class="built_in">Boolean</span>(<span class="literal">false</span>));</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Symbol</span>(<span class="string">&quot;foo&quot;</span>) === <span class="built_in">Symbol</span>(<span class="string">&quot;foo&quot;</span>));</span><br><span class="line"></span><br><span class="line">A: <span class="literal">true</span>, <span class="literal">true</span>, <span class="literal">false</span>;</span><br><span class="line">B: <span class="literal">false</span>, <span class="literal">true</span>, <span class="literal">false</span>;</span><br><span class="line">C: <span class="literal">true</span>, <span class="literal">false</span>, <span class="literal">true</span>;</span><br><span class="line">D: <span class="literal">true</span>, <span class="literal">true</span>, <span class="literal">true</span>;</span><br></pre></td></tr></table></figure><details><summary>ç­”æ¡ˆ</summary>A</details><h1 id="69-padStart"><a href="#69-padStart" class="headerlink" title="69 padStart"></a>69 padStart</h1><p>è¾“å‡ºæ˜¯ä»€ä¹ˆ?</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> name = <span class="string">&quot;Lydia Hallie&quot;</span>;</span><br><span class="line"><span class="built_in">console</span>.log(name.padStart(<span class="number">13</span>));</span><br><span class="line"><span class="built_in">console</span>.log(name.padStart(<span class="number">2</span>));</span><br><span class="line"></span><br><span class="line">A: <span class="string">&quot;Lydia Hallie&quot;</span>, <span class="string">&quot;Lydia Hallie&quot;</span>;</span><br><span class="line">B: <span class="string">&quot; Lydia Hallie&quot;</span>,</span><br><span class="line">  <span class="string">&quot; Lydia Hallie&quot;</span>(</span><br><span class="line">    <span class="string">&quot;[13x whitespace]Lydia Hallie&quot;</span>,</span><br><span class="line">    <span class="string">&quot;[2x whitespace]Lydia Hallie&quot;</span></span><br><span class="line">  );</span><br><span class="line">C: <span class="string">&quot; Lydia Hallie&quot;</span>,</span><br><span class="line">  <span class="string">&quot;Lydia Hallie&quot;</span>(<span class="string">&quot;[1x whitespace]Lydia Hallie&quot;</span>, <span class="string">&quot;Lydia Hallie&quot;</span>);</span><br><span class="line">D: <span class="string">&quot;Lydia Hallie&quot;</span>, <span class="string">&quot;Lyd&quot;</span>;</span><br></pre></td></tr></table></figure><details><summary>ç­”æ¡ˆ</summary>C padStart apiç»™å­—ç¬¦ä¸²çš„å‰é¢æ·»åŠ ç©ºæ ¼ï¼Œè¿™ä¸ªå­—ç¬¦ä¸²çš„é•¿åº¦æ˜¯12 ç°åœ¨è¾“å…¥13åˆ™æ·»åŠ ä¸€ä¸ªç©ºæ ¼ å¦‚æœè¾“å…¥çš„å°äºå®ƒçš„é•¿åº¦åˆ™ä¸æ·»åŠ </details><h1 id="70-emoji"><a href="#70-emoji" class="headerlink" title="70 emoji"></a>70 emoji</h1><p>è¾“å‡ºæ˜¯ä»€ä¹ˆ?</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;ğŸ¥‘&quot;</span> + <span class="string">&quot;ğŸ’»&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">A: <span class="string">&quot;ğŸ¥‘ğŸ’»&quot;</span></span><br><span class="line"><span class="attr">B</span>: <span class="number">257548</span></span><br><span class="line"><span class="attr">C</span>: A string containing their code points</span><br><span class="line"><span class="attr">D</span>: <span class="built_in">Error</span></span><br></pre></td></tr></table></figure><details><summary>ç­”æ¡ˆ</summary>A</details><h1 id="71-generator"><a href="#71-generator" class="headerlink" title="71 generator"></a>71 generator</h1><p>å¦‚ä½•èƒ½æ‰“å°å‡º<br>console.log<br>è¯­å¥åæ³¨é‡Šæ‰çš„å€¼ï¼Ÿ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">startGame</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> answer = <span class="keyword">yield</span> <span class="string">&quot;Do you love JavaScript?&quot;</span>;</span><br><span class="line">  <span class="keyword">if</span> (answer !== <span class="string">&quot;Yes&quot;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;Oh wow... Guess we&#x27;re gone here&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&quot;JavaScript loves you back â¤ï¸&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> game = startGame();</span><br><span class="line"><span class="built_in">console</span>.log(<span class="comment">/* 1 */</span>); <span class="comment">// Do you love JavaScript?</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="comment">/* 2 */</span>); <span class="comment">// JavaScript loves you back â¤ï¸</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">A: game.next(<span class="string">&quot;Yes&quot;</span>).value and game.next().value</span><br><span class="line"><span class="attr">B</span>: game.next.value(<span class="string">&quot;Yes&quot;</span>) and game.next.value()</span><br><span class="line"><span class="attr">C</span>: game.next().value and game.next(<span class="string">&quot;Yes&quot;</span>).value</span><br><span class="line"><span class="attr">D</span>: game.next.value() and game.next.value(<span class="string">&quot;Yes&quot;</span>)</span><br></pre></td></tr></table></figure><details><summary>ç­”æ¡ˆ</summary>C</details><h1 id="72-String-raw"><a href="#72-String-raw" class="headerlink" title="72 String.raw"></a>72 <code>String.raw</code></h1><p>è¾“å‡ºæ˜¯ä»€ä¹ˆ?</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="built_in">String</span>.raw<span class="string">`Hello\nworld`</span>);</span><br><span class="line"></span><br><span class="line">A: Hello world!</span><br><span class="line">B: Hello</span><br><span class="line">world</span><br><span class="line"><span class="attr">C</span>: Hello\nworld</span><br><span class="line"><span class="attr">D</span>: Hello\n</span><br><span class="line">world</span><br></pre></td></tr></table></figure><details><summary>ç­”æ¡ˆ</summary>`String.raw`å‡½æ•°ç”¨æ¥è·å–æ¨¡æ¿å­—ç¬¦ä¸²çš„åŸå§‹å­—ç¬¦ä¸²ï¼Œå®ƒè¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²å¿½ç•¥äº†è½¬ä¹‰ç¬¦,ä¸è¿‡åæ–œæ å¯èƒ½æœ‰é—®é¢˜<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="string">`C:\Documents\Projects\table.html`</span></span><br><span class="line"><span class="built_in">String</span>.raw<span class="string">`<span class="subst">$&#123;path&#125;</span>`</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>è¿™å°†å¯¼è‡´ï¼š`"C:DocumentsProjects able.html"`ç›´æ¥ä½¿ç”¨`String.raw`<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span>.raw<span class="string">`C:\Documents\Projects\table.html`</span></span><br></pre></td></tr></table></figure>å®ƒä¼šå¿½ç•¥è½¬ä¹‰å­—ç¬¦å¹¶æ‰“å°ï¼š`C:\Documents\Projects\table.html`</details><h1 id="73-Promise"><a href="#73-Promise" class="headerlink" title="73 Promise"></a>73 Promise</h1><p>è¾“å‡ºæ˜¯ä»€ä¹ˆ?</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">getData</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">await</span> <span class="built_in">Promise</span>.resolve(<span class="string">&quot;I made it!&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> data = getData();</span><br><span class="line"><span class="built_in">console</span>.log(data);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">A: <span class="string">&quot;I made it!&quot;</span></span><br><span class="line"><span class="attr">B</span>: <span class="built_in">Promise</span> &#123;&lt;resolved&gt;: <span class="string">&quot;I made it!&quot;</span>&#125;</span><br><span class="line"><span class="attr">C</span>: <span class="built_in">Promise</span> &#123;&lt;pending&gt;&#125;</span><br><span class="line"><span class="attr">D</span>: <span class="literal">undefined</span></span><br></pre></td></tr></table></figure><details><summary>ç­”æ¡ˆ</summary>C å¼‚æ­¥å‡½æ•°å§‹ç»ˆè¿”å›ä¸€ä¸ªpromise è¦æƒ³è·å–å€¼ ä½¿ç”¨`data.then((res)=>console.log(res))`</details><h1 id="74-push"><a href="#74-push" class="headerlink" title="74 push"></a>74 push</h1><p>è¾“å‡ºæ˜¯ä»€ä¹ˆ?</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addToList</span>(<span class="params">item, list</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> list.push(item);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> result = addToList(<span class="string">&quot;apple&quot;</span>, [<span class="string">&quot;banana&quot;</span>]);</span><br><span class="line"><span class="built_in">console</span>.log(result);</span><br><span class="line"></span><br><span class="line">A: [<span class="string">&quot;apple&quot;</span>, <span class="string">&quot;banana&quot;</span>];</span><br><span class="line">B: <span class="number">2</span>;</span><br><span class="line">C: <span class="literal">true</span>;</span><br><span class="line">D: <span class="literal">undefined</span>;</span><br></pre></td></tr></table></figure><details><summary>ç­”æ¡ˆ</summary>B pushæ–¹æ³•è¿”å›æ–°æ•°ç»„çš„é•¿åº¦</details><h1 id="75-Object-freeze"><a href="#75-Object-freeze" class="headerlink" title="75 Object.freeze"></a>75 <code>Object.freeze</code></h1><p>è¾“å‡ºæ˜¯ä»€ä¹ˆ?</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> box = &#123; <span class="attr">x</span>: <span class="number">10</span>, <span class="attr">y</span>: <span class="number">20</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.freeze(box);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> shape = box;</span><br><span class="line">shape.x = <span class="number">100</span>;</span><br><span class="line"><span class="built_in">console</span>.log(shape)</span><br><span class="line"></span><br><span class="line"><span class="attr">A</span>: &#123; <span class="attr">x</span>: <span class="number">100</span>, <span class="attr">y</span>: <span class="number">20</span> &#125;</span><br><span class="line"><span class="attr">B</span>: &#123; <span class="attr">x</span>: <span class="number">10</span>, <span class="attr">y</span>: <span class="number">20</span> &#125;</span><br><span class="line"><span class="attr">C</span>: &#123; <span class="attr">x</span>: <span class="number">100</span> &#125;</span><br><span class="line"><span class="attr">D</span>: <span class="built_in">ReferenceError</span></span><br></pre></td></tr></table></figure><details><summary>ç­”æ¡ˆ</summary>B å£°æ˜ä¸€ä¸ªå†»ç»“å¯¹è±¡ï¼Œshapeèµ‹å€¼çš„æ—¶å€™ï¼Œä¹ŸæŒ‡å‘çš„æ˜¯é‚£ä¸ªå†»ç»“å¯¹è±¡ï¼Œæ‰€ä»¥ä¹Ÿæ˜¯æ²¡åŠæ³•æ”¹å˜å€¼çš„`Object.isFrozen`åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦å†»ç»“</details><h1 id="76-å˜é‡é‡å‘½å"><a href="#76-å˜é‡é‡å‘½å" class="headerlink" title="76 å˜é‡é‡å‘½å"></a>76 å˜é‡é‡å‘½å</h1><p>è¾“å‡ºæ˜¯ä»€ä¹ˆ?</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; <span class="attr">name</span>: myName &#125; = &#123; <span class="attr">name</span>: <span class="string">&quot;Lydia&quot;</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(name);</span><br><span class="line"></span><br><span class="line">A: <span class="string">&quot;Lydia&quot;</span>;</span><br><span class="line">B: <span class="string">&quot;myName&quot;</span>;</span><br><span class="line">C: <span class="literal">undefined</span>;</span><br><span class="line">D: <span class="built_in">ReferenceError</span>;</span><br></pre></td></tr></table></figure><details><summary>ç­”æ¡ˆ</summary>D æ­¤æ—¶å·²ç»é‡å‘½åä¸ºmyNameäº†ï¼Œä¹Ÿå°±æ˜¯åŸå…ˆçš„å˜é‡ä¸å­˜åœ¨äº†</details><h1 id="77-çº¯å‡½æ•°"><a href="#77-çº¯å‡½æ•°" class="headerlink" title="77 çº¯å‡½æ•°"></a>77 çº¯å‡½æ•°</h1><p>ä»¥ä¸‹æ˜¯ä¸ªçº¯å‡½æ•°ä¹ˆ?</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="attr">A</span>: Yes;</span><br><span class="line">B: No;</span><br></pre></td></tr></table></figure><details><summary>ç­”æ¡ˆ</summary>A æ²¡æœ‰å‰¯ä½œç”¨</details><h1 id="78-è®°å¿†å‡½æ•°"><a href="#78-è®°å¿†å‡½æ•°" class="headerlink" title="78 è®°å¿†å‡½æ•°"></a>78 è®°å¿†å‡½æ•°</h1><p>è¾“å‡ºæ˜¯ä»€ä¹ˆ?</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> add = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> cache = &#123;&#125;;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="params">num</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (num <span class="keyword">in</span> cache) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="string">`From cache! <span class="subst">$&#123;cache[num]&#125;</span>`</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> result = num + <span class="number">10</span>;</span><br><span class="line">      cache[num] = result;</span><br><span class="line">      <span class="keyword">return</span> <span class="string">`Calculated! <span class="subst">$&#123;result&#125;</span>`</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> addFunction = add();</span><br><span class="line"><span class="built_in">console</span>.log(addFunction(<span class="number">10</span>));</span><br><span class="line"><span class="built_in">console</span>.log(addFunction(<span class="number">10</span>));</span><br><span class="line"><span class="built_in">console</span>.log(addFunction(<span class="number">5</span> * <span class="number">2</span>));</span><br><span class="line"></span><br><span class="line">A: Calculated! <span class="number">20</span> Calculated! <span class="number">20</span> Calculated! <span class="number">20</span></span><br><span class="line"><span class="attr">B</span>: Calculated! <span class="number">20</span> From cache! <span class="number">20</span> Calculated! <span class="number">20</span></span><br><span class="line"><span class="attr">C</span>: Calculated! <span class="number">20</span> From cache! <span class="number">20</span> From cache! <span class="number">20</span></span><br><span class="line"><span class="attr">D</span>: Calculated! <span class="number">20</span> From cache! <span class="number">20</span> <span class="built_in">Error</span></span><br></pre></td></tr></table></figure><details><summary>ç­”æ¡ˆ</summary>C è®°å¿†åŒ–ç¼“å­˜</details><h1 id="79-forin"><a href="#79-forin" class="headerlink" title="79 forin"></a>79 forin</h1><p>è¾“å‡ºæ˜¯ä»€ä¹ˆ?</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> myLifeSummedUp = [<span class="string">&quot;â˜•&quot;</span>, <span class="string">&quot;ğŸ’»&quot;</span>, <span class="string">&quot;ğŸ·&quot;</span>, <span class="string">&quot;ğŸ«&quot;</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> item <span class="keyword">in</span> myLifeSummedUp) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(item)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> item <span class="keyword">of</span> myLifeSummedUp) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(item)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attr">A</span>: <span class="number">0</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> and <span class="string">&quot;â˜•&quot;</span> <span class="string">&quot;ğŸ’»&quot;</span> <span class="string">&quot;ğŸ·&quot;</span> <span class="string">&quot;ğŸ«&quot;</span></span><br><span class="line"><span class="attr">B</span>: <span class="string">&quot;â˜•&quot;</span> <span class="string">&quot;ğŸ’»&quot;</span> <span class="string">&quot;ğŸ·&quot;</span> <span class="string">&quot;ğŸ«&quot;</span> and <span class="string">&quot;â˜•&quot;</span> <span class="string">&quot;ğŸ’»&quot;</span> <span class="string">&quot;ğŸ·&quot;</span> <span class="string">&quot;ğŸ«&quot;</span></span><br><span class="line"><span class="attr">C</span>: <span class="string">&quot;â˜•&quot;</span> <span class="string">&quot;ğŸ’»&quot;</span> <span class="string">&quot;ğŸ·&quot;</span> <span class="string">&quot;ğŸ«&quot;</span> and <span class="number">0</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span></span><br><span class="line"><span class="attr">D</span>: <span class="number">0</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> and &#123;<span class="number">0</span>: <span class="string">&quot;â˜•&quot;</span>, <span class="number">1</span>: <span class="string">&quot;ğŸ’»&quot;</span>, <span class="number">2</span>: <span class="string">&quot;ğŸ·&quot;</span>, <span class="number">3</span>: <span class="string">&quot;ğŸ«&quot;</span>&#125;</span><br></pre></td></tr></table></figure><details><summary>ç­”æ¡ˆ</summary>A forinæˆ‘ä»¬å¯ä»¥éå†ä¸€ä¸ªå¯¹è±¡è‡ªæœ‰çš„ã€ç»§æ‰¿çš„ã€å¯æšä¸¾çš„ã€éSymbolçš„å±æ€§éå†æ•°ç»„å–åˆ°çš„æ˜¯æ•°ç»„çš„é”®ä¹Ÿå°±æ˜¯ç´¢å¼•</details><h1 id="80-æ•°ç»„å…ƒç´ "><a href="#80-æ•°ç»„å…ƒç´ " class="headerlink" title="80 æ•°ç»„å…ƒç´ "></a>80 æ•°ç»„å…ƒç´ </h1><p>è¾“å‡ºæ˜¯ä»€ä¹ˆ?</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> list = [<span class="number">1</span> + <span class="number">2</span>, <span class="number">1</span> * <span class="number">2</span>, <span class="number">1</span> / <span class="number">2</span>];</span><br><span class="line"><span class="built_in">console</span>.log(list);</span><br><span class="line"></span><br><span class="line">A: [<span class="string">&quot;1 + 2&quot;</span>, <span class="string">&quot;1 * 2&quot;</span>, <span class="string">&quot;1 / 2&quot;</span>];</span><br><span class="line">B: [<span class="string">&quot;12&quot;</span>, <span class="number">2</span>, <span class="number">0.5</span>];</span><br><span class="line">C: [<span class="number">3</span>, <span class="number">2</span>, <span class="number">0.5</span>];</span><br><span class="line">D: [<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>];</span><br></pre></td></tr></table></figure><details><summary>ç­”æ¡ˆ</summary>C æ•°ç»„é‡Œé¢å¯ä»¥æ”¾è¡¨è¾¾å¼ ä½†æ˜¯æœ€åè¿”å›çš„ç»“æœæ˜¯è§£æå¼çš„ç»“æœ</details><h1 id="81-ä¸ä¼ å½¢å‚"><a href="#81-ä¸ä¼ å½¢å‚" class="headerlink" title="81 ä¸ä¼ å½¢å‚"></a>81 ä¸ä¼ å½¢å‚</h1><p>è¾“å‡ºæ˜¯ä»€ä¹ˆ?</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sayHi</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">`Hi there, <span class="subst">$&#123;name&#125;</span>`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(sayHi())</span><br><span class="line"></span><br><span class="line"><span class="attr">A</span>: Hi there,</span><br><span class="line"><span class="attr">B</span>: Hi there, <span class="literal">undefined</span></span><br><span class="line"><span class="attr">C</span>: Hi there, <span class="literal">null</span></span><br><span class="line"><span class="attr">D</span>: <span class="built_in">ReferenceError</span></span><br></pre></td></tr></table></figure><details><summary>ç­”æ¡ˆ</summary>B</details><h1 id="82-this"><a href="#82-this" class="headerlink" title="82 this"></a>82 this</h1><p>è¾“å‡ºæ˜¯ä»€ä¹ˆ?</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> status = <span class="string">&quot;ğŸ˜&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> status = <span class="string">&quot;ğŸ˜&quot;</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> data = &#123;</span><br><span class="line">    <span class="attr">status</span>: <span class="string">&quot;ğŸ¥‘&quot;</span>,</span><br><span class="line">    <span class="function"><span class="title">getStatus</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">this</span>.status</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">console</span>.log(data.getStatus())</span><br><span class="line">  <span class="built_in">console</span>.log(data.getStatus.call(<span class="built_in">this</span>))</span><br><span class="line">&#125;, <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attr">A</span>: <span class="string">&quot;ğŸ¥‘&quot;</span> and <span class="string">&quot;ğŸ˜&quot;</span></span><br><span class="line"><span class="attr">B</span>: <span class="string">&quot;ğŸ¥‘&quot;</span> and <span class="string">&quot;ğŸ˜&quot;</span></span><br><span class="line"><span class="attr">C</span>: <span class="string">&quot;ğŸ˜&quot;</span> and <span class="string">&quot;ğŸ˜&quot;</span></span><br><span class="line"><span class="attr">D</span>: <span class="string">&quot;ğŸ˜&quot;</span> and <span class="string">&quot;ğŸ˜&quot;</span></span><br></pre></td></tr></table></figure><details><summary>ç­”æ¡ˆ</summary>B ç¬¬ä¸€ä¸ªthisæ¥è‡ªäºè°ƒç”¨è€…data ç¬¬äºŒä¸ªçš„thisæ¥è‡ªäºwindow</details><h1 id="83-ä¿®æ”¹ä¸å­˜åœ¨çš„å¯¹è±¡å±æ€§"><a href="#83-ä¿®æ”¹ä¸å­˜åœ¨çš„å¯¹è±¡å±æ€§" class="headerlink" title="83 ä¿®æ”¹ä¸å­˜åœ¨çš„å¯¹è±¡å±æ€§"></a>83 ä¿®æ”¹ä¸å­˜åœ¨çš„å¯¹è±¡å±æ€§</h1><p>è¾“å‡ºæ˜¯ä»€ä¹ˆ?</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> person = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;Lydia&quot;</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="number">21</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> city = person.city</span><br><span class="line">city = <span class="string">&quot;Amsterdam&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(person)</span><br><span class="line"></span><br><span class="line"><span class="attr">A</span>: &#123; <span class="attr">name</span>: <span class="string">&quot;Lydia&quot;</span>, <span class="attr">age</span>: <span class="number">21</span> &#125;</span><br><span class="line"><span class="attr">B</span>: &#123; <span class="attr">name</span>: <span class="string">&quot;Lydia&quot;</span>, <span class="attr">age</span>: <span class="number">21</span>, <span class="attr">city</span>: <span class="string">&quot;Amsterdam&quot;</span> &#125;</span><br><span class="line"><span class="attr">C</span>: &#123; <span class="attr">name</span>: <span class="string">&quot;Lydia&quot;</span>, <span class="attr">age</span>: <span class="number">21</span>, <span class="attr">city</span>: <span class="literal">undefined</span> &#125;</span><br><span class="line"><span class="attr">D</span>: <span class="string">&quot;Amsterdam&quot;</span></span><br></pre></td></tr></table></figure><details><summary>ç­”æ¡ˆ</summary>A ä¸€å¼€å§‹æ˜¯personä¸Šé¢æ²¡æœ‰city æ­¤æ—¶èµ‹å€¼ç»™çš„æ˜¯undefinedï¼Œåé¢ä¿®æ”¹city å› ä¸ºå…ˆå‰ç»™çš„ä¸æ˜¯personçš„å¼•ç”¨ï¼Œåªæ˜¯å¯¹è±¡ä¸­çš„å±æ€§ï¼Œæ‰€ä»¥personä¸å˜</details><h1 id="84-å—çº§ä½œç”¨åŸŸå¤–ä½¿ç”¨å£°æ˜çš„const-letå˜é‡"><a href="#84-å—çº§ä½œç”¨åŸŸå¤–ä½¿ç”¨å£°æ˜çš„const-letå˜é‡" class="headerlink" title="84 å—çº§ä½œç”¨åŸŸå¤–ä½¿ç”¨å£°æ˜çš„const/letå˜é‡"></a>84 å—çº§ä½œç”¨åŸŸå¤–ä½¿ç”¨å£°æ˜çš„const/letå˜é‡</h1><p>è¾“å‡ºæ˜¯ä»€ä¹ˆ?</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">checkAge</span>(<span class="params">age</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (age &lt; <span class="number">18</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> message = <span class="string">&quot;Sorry, you&#x27;re too young.&quot;</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> message = <span class="string">&quot;Yay! You&#x27;re old enough!&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> message;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(checkAge(<span class="number">21</span>));</span><br><span class="line"></span><br><span class="line">A: <span class="string">&quot;Sorry, you&#x27;re too young.&quot;</span>;</span><br><span class="line">B: <span class="string">&quot;Yay! You&#x27;re old enough!&quot;</span>;</span><br><span class="line">C: <span class="built_in">ReferenceError</span>;</span><br><span class="line">D: <span class="literal">undefined</span>;</span><br></pre></td></tr></table></figure><details><summary>ç­”æ¡ˆ</summary>C åœ¨å—çº§ä½œç”¨åŸŸå¤–é¢ä½¿ç”¨constæˆ–è€…letå£°æ˜çš„å˜é‡æŠ›å‡ºå¼‚å¸¸ReferenceError</details><h1 id="85-promiseé“¾å¼è°ƒç”¨"><a href="#85-promiseé“¾å¼è°ƒç”¨" class="headerlink" title="85 promiseé“¾å¼è°ƒç”¨"></a>85 promiseé“¾å¼è°ƒç”¨</h1><p>è¾“å‡ºæ˜¯ä»€ä¹ˆ?</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">fetch(<span class="string">&#x27;https://www.website.com/api/user/1&#x27;</span>)</span><br><span class="line">  .then(<span class="function"><span class="params">res</span> =&gt;</span> res.json())</span><br><span class="line">  .then(<span class="function"><span class="params">res</span> =&gt;</span> <span class="built_in">console</span>.log(res))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attr">A</span>: fetchæ–¹æ³•çš„ç»“æœ</span><br><span class="line"><span class="attr">B</span>: ç¬¬äºŒæ¬¡è°ƒç”¨fetchæ–¹æ³•çš„ç»“æœ</span><br><span class="line"><span class="attr">C</span>: å‰ä¸€ä¸ª.then()ä¸­å›è°ƒæ–¹æ³•è¿”å›çš„ç»“æœ</span><br><span class="line"><span class="attr">D</span>: æ€»æ˜¯<span class="literal">undefined</span></span><br></pre></td></tr></table></figure><details><summary>ç­”æ¡ˆ</summary>C</details><h1 id="86"><a href="#86" class="headerlink" title="86 !!"></a>86 !!</h1><p>å“ªä¸ªé€‰é¡¹æ˜¯å°†hasNameè®¾ç½®ä¸ºtrueçš„æ–¹æ³•ï¼Œå‰ææ˜¯ä¸èƒ½å°†trueä½œä¸ºå‚æ•°ä¼ é€’?</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getName</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> hasName = <span class="comment">//</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="attr">A</span>: !!name</span><br><span class="line"><span class="attr">B</span>: name</span><br><span class="line"><span class="attr">C</span>: <span class="keyword">new</span> <span class="built_in">Boolean</span>(name)</span><br><span class="line"><span class="attr">D</span>: name.length</span><br></pre></td></tr></table></figure><details><summary>ç­”æ¡ˆ</summary>A</details><h1 id="87-æ•°ç»„å¯è¿­ä»£"><a href="#87-æ•°ç»„å¯è¿­ä»£" class="headerlink" title="87 æ•°ç»„å¯è¿­ä»£"></a>87 æ•°ç»„å¯è¿­ä»£</h1><p>è¾“å‡ºæ˜¯ä»€ä¹ˆ?<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;I want pizza&quot;</span>[<span class="number">0</span>])</span><br><span class="line"></span><br><span class="line"><span class="attr">A</span>: <span class="string">&quot;&quot;</span><span class="string">&quot;</span></span><br><span class="line"><span class="string">B: &quot;</span>I<span class="string">&quot;</span></span><br><span class="line"><span class="string">C: SyntaxError</span></span><br><span class="line"><span class="string">D: undefined</span></span><br></pre></td></tr></table></figure></p><details><summary>ç­”æ¡ˆ</summary>B</details><h1 id="88-é»˜è®¤å‚æ•°"><a href="#88-é»˜è®¤å‚æ•°" class="headerlink" title="88 é»˜è®¤å‚æ•°"></a>88 é»˜è®¤å‚æ•°</h1><p>è¾“å‡ºæ˜¯ä»€ä¹ˆ?</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">num1, num2 = num1</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(num1 + num2);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">sum(<span class="number">10</span>);</span><br><span class="line"></span><br><span class="line">A: <span class="literal">NaN</span>;</span><br><span class="line">B: <span class="number">20</span>;</span><br><span class="line">C: <span class="built_in">ReferenceError</span>;</span><br><span class="line">D: <span class="literal">undefined</span>;</span><br></pre></td></tr></table></figure><details><summary>ç­”æ¡ˆ</summary>B äº¤æ¢åˆ™ä¸è¡Œ</details><h1 id="89-import-as-xxx-from-xxx"><a href="#89-import-as-xxx-from-xxx" class="headerlink" title="89 import * as xxx from xxx"></a>89 <code>import * as xxx from xxx</code></h1><p>è¾“å‡ºæ˜¯ä»€ä¹ˆ?</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// module.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> () =&gt; <span class="string">&quot;Hello world&quot;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> name = <span class="string">&quot;Lydia&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// index.js</span></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> data <span class="keyword">from</span> <span class="string">&quot;./module&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(data)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attr">A</span>: &#123; <span class="attr">default</span>: <span class="function"><span class="keyword">function</span> <span class="title">default</span>(<span class="params"></span>), <span class="title">name</span>: &quot;<span class="title">Lydia</span>&quot; &#125;</span></span><br><span class="line"><span class="function"><span class="title">B</span>: </span>&#123; <span class="keyword">default</span>: <span class="function"><span class="keyword">function</span> <span class="title">default</span>(<span class="params"></span>) &#125;</span></span><br><span class="line"><span class="function"><span class="title">C</span>: </span>&#123; <span class="keyword">default</span>: <span class="string">&quot;Hello world&quot;</span>, <span class="attr">name</span>: <span class="string">&quot;Lydia&quot;</span> &#125;</span><br><span class="line"><span class="attr">D</span>: Global object <span class="keyword">of</span> <span class="built_in">module</span>.js</span><br></pre></td></tr></table></figure><details><summary>ç­”æ¡ˆ</summary>A ä½¿ç”¨`import *`å¾—åˆ°é»˜è®¤å¯¼å‡ºå’Œå…·åå¯¼å‡ºï¼Œå…¶ä¸­é»˜è®¤å¯¼å‡ºæ˜¯ä¸€ä¸ªå‡½æ•°</details><h1 id="90-ç±»å’Œæ„é€ å‡½æ•°"><a href="#90-ç±»å’Œæ„é€ å‡½æ•°" class="headerlink" title="90 ç±»å’Œæ„é€ å‡½æ•°"></a>90 ç±»å’Œæ„é€ å‡½æ•°</h1><p>è¾“å‡ºæ˜¯ä»€ä¹ˆ?</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">name</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.name = name;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> member = <span class="keyword">new</span> Person(<span class="string">&quot;John&quot;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> member);</span><br><span class="line"></span><br><span class="line">A: <span class="string">&quot;class&quot;</span>;</span><br><span class="line">B: <span class="string">&quot;function&quot;</span>;</span><br><span class="line">C: <span class="string">&quot;object&quot;</span>;</span><br><span class="line">D: <span class="string">&quot;string&quot;</span>;</span><br></pre></td></tr></table></figure><details><summary>ç­”æ¡ˆ</summary>C å®ä¾‹å°±æ˜¯ä¸€ä¸ªå¯¹è±¡</details><h1 id="91-push"><a href="#91-push" class="headerlink" title="91 push"></a>91 push</h1><p>è¾“å‡ºæ˜¯ä»€ä¹ˆ?</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> newList = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].push(<span class="number">4</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(newList.push(<span class="number">5</span>));</span><br><span class="line"></span><br><span class="line">A: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line">B: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>];</span><br><span class="line">C: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>];</span><br><span class="line">D: <span class="built_in">Error</span>;</span><br></pre></td></tr></table></figure><details><summary>ç­”æ¡ˆ</summary>D pushè¿”å›æ•°ç»„é•¿åº¦ æ­¤æ—¶newListæ˜¯4 ä¸èƒ½å¯¹stringä½¿ç”¨push</details><h1 id="92-ç®­å¤´å‡½æ•°å’ŒåŸå‹å¯¹è±¡"><a href="#92-ç®­å¤´å‡½æ•°å’ŒåŸå‹å¯¹è±¡" class="headerlink" title="92 ç®­å¤´å‡½æ•°å’ŒåŸå‹å¯¹è±¡"></a>92 ç®­å¤´å‡½æ•°å’ŒåŸå‹å¯¹è±¡</h1><p>è¾“å‡ºæ˜¯ä»€ä¹ˆ?</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">giveLydiaPizza</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&quot;Here is pizza!&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> giveLydiaChocolate = <span class="function">() =&gt;</span> <span class="string">&quot;Here&#x27;s chocolate... now go hit the gym already.&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(giveLydiaPizza.prototype)</span><br><span class="line"><span class="built_in">console</span>.log(giveLydiaChocolate.prototype)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attr">A</span>: &#123; <span class="attr">constructor</span>: ...&#125; &#123; <span class="attr">constructor</span>: ...&#125;</span><br><span class="line"><span class="attr">B</span>: &#123;&#125; &#123; <span class="attr">constructor</span>: ...&#125;</span><br><span class="line"><span class="attr">C</span>: &#123; <span class="attr">constructor</span>: ...&#125; &#123;&#125;</span><br><span class="line"><span class="attr">D</span>: &#123; <span class="attr">constructor</span>: ...&#125; <span class="literal">undefined</span></span><br></pre></td></tr></table></figure><details><summary>ç­”æ¡ˆ</summary>D ç®­å¤´å‡½æ•°æ²¡æœ‰åŸå‹å¯¹è±¡</details><h1 id="93-Object-entries"><a href="#93-Object-entries" class="headerlink" title="93 Object.entries"></a>93 <code>Object.entries</code></h1><p>è¾“å‡ºæ˜¯ä»€ä¹ˆ?</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> person = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;Lydia&quot;</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="number">21</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> [x, y] <span class="keyword">of</span> <span class="built_in">Object</span>.entries(person)) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(x, y)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attr">A</span>: name Lydia and age <span class="number">21</span></span><br><span class="line"><span class="attr">B</span>: [<span class="string">&quot;name&quot;</span>, <span class="string">&quot;Lydia&quot;</span>] and [<span class="string">&quot;age&quot;</span>, <span class="number">21</span>]</span><br><span class="line"><span class="attr">C</span>: [<span class="string">&quot;name&quot;</span>, <span class="string">&quot;age&quot;</span>] and <span class="literal">undefined</span></span><br><span class="line"><span class="attr">D</span>: <span class="built_in">Error</span></span><br></pre></td></tr></table></figure><details><summary>ç­”æ¡ˆ</summary>A `Object.entries`è¿”å›ä¸€ä¸ªé”®å€¼å¯¹æ„æˆçš„æ•°ç»„å¦‚ï¼š`[['name','Lydia'],['age',21]]`</details><h1 id="94-å‰©ä½™å‚æ•°çš„ä½ç½®"><a href="#94-å‰©ä½™å‚æ•°çš„ä½ç½®" class="headerlink" title="94 å‰©ä½™å‚æ•°çš„ä½ç½®"></a>94 å‰©ä½™å‚æ•°çš„ä½ç½®</h1><p>è¾“å‡ºæ˜¯ä»€ä¹ˆ?</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getItems</span>(<span class="params">fruitList, ...args, favoriteFruit</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> [...fruitList, ...args, favoriteFruit]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">getItems([<span class="string">&quot;banana&quot;</span>, <span class="string">&quot;apple&quot;</span>], <span class="string">&quot;pear&quot;</span>, <span class="string">&quot;orange&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attr">A</span>: [<span class="string">&quot;banana&quot;</span>, <span class="string">&quot;apple&quot;</span>, <span class="string">&quot;pear&quot;</span>, <span class="string">&quot;orange&quot;</span>]</span><br><span class="line"><span class="attr">B</span>: [[<span class="string">&quot;banana&quot;</span>, <span class="string">&quot;apple&quot;</span>], <span class="string">&quot;pear&quot;</span>, <span class="string">&quot;orange&quot;</span>]</span><br><span class="line"><span class="attr">C</span>: [<span class="string">&quot;banana&quot;</span>, <span class="string">&quot;apple&quot;</span>, [<span class="string">&quot;pear&quot;</span>], <span class="string">&quot;orange&quot;</span>]</span><br><span class="line"><span class="attr">D</span>: <span class="built_in">SyntaxError</span></span><br></pre></td></tr></table></figure><details><summary>ç­”æ¡ˆ</summary>D `...args`åªèƒ½æ”¾åœ¨å‚æ•°çš„æœ€åé¢ï¼Œå¦åˆ™æŠ›å‡ºè¯­æ³•é”™è¯¯`SyntaxError`</details><h1 id="95-returnåæ–°è¡Œ"><a href="#95-returnåæ–°è¡Œ" class="headerlink" title="95 returnåæ–°è¡Œ"></a>95 returnåæ–°è¡Œ</h1><p>è¾“å‡ºæ˜¯ä»€ä¹ˆ?</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">nums</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span></span><br><span class="line">  (a &gt; b)</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;a is bigger&#x27;</span>)</span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;b is bigger&#x27;</span>)</span><br><span class="line">  <span class="keyword">return</span></span><br><span class="line">  a + b</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(nums(<span class="number">4</span>, <span class="number">2</span>))</span><br><span class="line"><span class="built_in">console</span>.log(nums(<span class="number">1</span>, <span class="number">2</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attr">A</span>: a is bigger, <span class="number">6</span> and b is bigger, <span class="number">3</span></span><br><span class="line"><span class="attr">B</span>: a is bigger, <span class="literal">undefined</span> and b is bigger, <span class="literal">undefined</span></span><br><span class="line"><span class="attr">C</span>: <span class="literal">undefined</span> and <span class="literal">undefined</span></span><br><span class="line"><span class="attr">D</span>: <span class="built_in">SyntaxError</span></span><br></pre></td></tr></table></figure><details><summary>ç­”æ¡ˆ</summary>B æ­¤æ—¶çš„return jsæ— æ³•åˆ¤æ–­å®ƒä¸‹ä¸€ä¸ªå€¼æ˜¯å¦æ˜¯éœ€è¦çš„å€¼ï¼Œè‡ªåŠ¨åŠ äº†åˆ†å·ï¼Œæ‰€ä»¥ç»“æŸäº†</details><h1 id="96-ç±»"><a href="#96-ç±»" class="headerlink" title="96 ç±»"></a>96 ç±»</h1><p>è¾“å‡ºæ˜¯ä»€ä¹ˆ?</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.name = <span class="string">&quot;Lydia&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Person = <span class="class"><span class="keyword">class</span> <span class="title">AnotherPerson</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.name = <span class="string">&quot;Sarah&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> member = <span class="keyword">new</span> Person()</span><br><span class="line"><span class="built_in">console</span>.log(member.name)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attr">A</span>: <span class="string">&quot;Lydia&quot;</span></span><br><span class="line"><span class="attr">B</span>: <span class="string">&quot;Sarah&quot;</span></span><br><span class="line"><span class="attr">C</span>: <span class="built_in">Error</span>: cannot redeclare Person</span><br><span class="line"><span class="attr">D</span>: <span class="built_in">SyntaxError</span></span><br></pre></td></tr></table></figure><details><summary>ç­”æ¡ˆ</summary>B æˆ‘ä»¬å¯ä»¥å°†ç±»è®¾ç½®ä¸ºç­‰äºå…¶ä»–ç±»/å‡½æ•°æ„é€ å‡½æ•°ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å°†Personè®¾ç½®ä¸ºAnotherPersonã€‚ è¿™ä¸ªæ„é€ å‡½æ•°çš„åå­—æ˜¯Sarahï¼Œæ‰€ä»¥æ–°çš„Personå®ä¾‹memberä¸Šçš„nameå±æ€§æ˜¯Sarahã€‚</details><h1 id="97-Symbol"><a href="#97-Symbol" class="headerlink" title="97 Symbol"></a>97 Symbol</h1><p>è¾“å‡ºæ˜¯ä»€ä¹ˆ?</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> info = &#123;</span><br><span class="line">  [<span class="built_in">Symbol</span>(<span class="string">&#x27;a&#x27;</span>)]: <span class="string">&#x27;b&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(info)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.keys(info))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attr">A</span>: &#123;<span class="built_in">Symbol</span>(<span class="string">&#x27;a&#x27;</span>): <span class="string">&#x27;b&#x27;</span>&#125; and [<span class="string">&quot;&#123;Symbol(&#x27;a&#x27;)&quot;</span>]</span><br><span class="line"><span class="attr">B</span>: &#123;&#125; and []</span><br><span class="line"><span class="attr">C</span>: &#123; <span class="attr">a</span>: <span class="string">&quot;b&quot;</span> &#125; and [<span class="string">&quot;a&quot;</span>]</span><br><span class="line"><span class="attr">D</span>: &#123;<span class="built_in">Symbol</span>(<span class="string">&#x27;a&#x27;</span>): <span class="string">&#x27;b&#x27;</span>&#125; and []</span><br></pre></td></tr></table></figure><details><summary>ç­”æ¡ˆ</summary>D symbolç±»å‹ä¸å¯æšä¸¾ï¼Œæ‰€ä»¥`Object.keys`çš„æ—¶å€™æ²¡æœ‰è¿”å›</details><h1 id="98-å‰©ä½™å‚æ•°å’Œç®­å¤´å‡½æ•°è¿”å›å¯¹è±¡"><a href="#98-å‰©ä½™å‚æ•°å’Œç®­å¤´å‡½æ•°è¿”å›å¯¹è±¡" class="headerlink" title="98 å‰©ä½™å‚æ•°å’Œç®­å¤´å‡½æ•°è¿”å›å¯¹è±¡"></a>98 å‰©ä½™å‚æ•°å’Œç®­å¤´å‡½æ•°è¿”å›å¯¹è±¡</h1><p>è¾“å‡ºæ˜¯ä»€ä¹ˆ?</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> getList = <span class="function">(<span class="params">[x, ...y]</span>) =&gt;</span> [x, y]</span><br><span class="line"><span class="keyword">const</span> getUser = <span class="function"><span class="params">user</span> =&gt;</span> (&#123; <span class="attr">name</span>: user.name, <span class="attr">age</span>: user.age &#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> list = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line"><span class="keyword">const</span> user = &#123; <span class="attr">name</span>: <span class="string">&quot;Lydia&quot;</span>, <span class="attr">age</span>: <span class="number">21</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(getList(list))</span><br><span class="line"><span class="built_in">console</span>.log(getUser(user))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attr">A</span>: [<span class="number">1</span>, [<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]] and <span class="literal">undefined</span></span><br><span class="line"><span class="attr">B</span>: [<span class="number">1</span>, [<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]] and &#123; <span class="attr">name</span>: <span class="string">&quot;Lydia&quot;</span>, <span class="attr">age</span>: <span class="number">21</span> &#125;</span><br><span class="line"><span class="attr">C</span>: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>] and &#123; <span class="attr">name</span>: <span class="string">&quot;Lydia&quot;</span>, <span class="attr">age</span>: <span class="number">21</span> &#125;</span><br><span class="line"><span class="attr">D</span>: <span class="built_in">Error</span> and &#123; <span class="attr">name</span>: <span class="string">&quot;Lydia&quot;</span>, <span class="attr">age</span>: <span class="number">21</span> &#125;</span><br></pre></td></tr></table></figure><details><summary>ç­”æ¡ˆ</summary>B `...y` æ­¤æ—¶yæ˜¯ä¸€ä¸ªæ•°ç»„åŒ…å«å‰©ä½™å‚æ•°ï¼Œå¯¹äºç®­å¤´å‡½æ•° å¦‚æœè¦è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œéœ€è¦ä½¿ç”¨åœ†æ‹¬å·åŒ…è£¹</details><h1 id="99-æŠ›å‡ºé”™è¯¯"><a href="#99-æŠ›å‡ºé”™è¯¯" class="headerlink" title="99 æŠ›å‡ºé”™è¯¯"></a>99 æŠ›å‡ºé”™è¯¯</h1><p>è¾“å‡ºæ˜¯ä»€ä¹ˆ?</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> name = <span class="string">&quot;Lydia&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(name());</span><br><span class="line"></span><br><span class="line">A: <span class="built_in">SyntaxError</span>;</span><br><span class="line">B: <span class="built_in">ReferenceError</span>;</span><br><span class="line">C: <span class="built_in">TypeError</span>;</span><br><span class="line">D: <span class="literal">undefined</span>;</span><br></pre></td></tr></table></figure><details><summary>ç­”æ¡ˆ</summary>C å½“å€¼ä¸æ˜¯é¢„æœŸç±»å‹æ—¶ï¼Œä¼šæŠ›å‡ºTypeErrorsã€‚ JavaScriptæœŸæœ›nameæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå› ä¸ºæˆ‘ä»¬è¯•å›¾è°ƒç”¨å®ƒã€‚ ä½†å®ƒæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå› æ­¤æŠ›å‡ºTypeErrorï¼šname is not a functionå½“ä½ ç¼–å†™äº†ä¸€äº›éæœ‰æ•ˆçš„JavaScriptæ—¶ï¼Œä¼šæŠ›å‡ºè¯­æ³•é”™è¯¯ï¼Œä¾‹å¦‚å½“ä½ æŠŠreturnè¿™ä¸ªè¯å†™æˆretrunæ—¶ã€‚ å½“JavaScriptæ— æ³•æ‰¾åˆ°æ‚¨å°è¯•è®¿é—®çš„å€¼çš„å¼•ç”¨æ—¶ï¼ŒæŠ›å‡ºReferenceErrorsã€‚</details><h1 id="100-amp-amp"><a href="#100-amp-amp" class="headerlink" title="100 &amp;&amp;"></a>100 <code>&amp;&amp;</code></h1><p>è¾“å‡ºæ˜¯ä»€ä¹ˆ?</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ğŸ‰âœ¨ This is my 100th question! âœ¨ğŸ‰</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> output = <span class="string">`<span class="subst">$&#123;[] &amp;&amp; <span class="string">&#x27;Im&#x27;</span>&#125;</span>possible!</span></span><br><span class="line"><span class="string">You should<span class="subst">$&#123;<span class="string">&#x27;&#x27;</span> &amp;&amp; <span class="string">`n&#x27;t`</span>&#125;</span> see a therapist after so much JavaScript lol`</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attr">A</span>: possible! You should see a therapist after so much JavaScript lol</span><br><span class="line"><span class="attr">B</span>: Impossible! You should see a therapist after so much JavaScript lol</span><br><span class="line"><span class="attr">C</span>: possible! You shouldn<span class="string">&#x27;t see a therapist after so much JavaScript lol</span></span><br><span class="line"><span class="string">D: Impossible! You shouldn&#x27;</span>t see a therapist after so much JavaScript lol</span><br></pre></td></tr></table></figure><details><summary>ç­”æ¡ˆ</summary>B `[]`æ˜¯ä¸€ä¸ªçœŸå€¼ åœ¨`&&`ä¸­ä¼šè¿”å›åé¢é‚£ä¸ªå€¼ `''`æ˜¯ä¸€ä¸ªå‡å€¼ ç›´æ¥ä¸è¿”å›äº†</details><h1 id="101-åˆ¤æ–­çœŸå‡"><a href="#101-åˆ¤æ–­çœŸå‡" class="headerlink" title="101 åˆ¤æ–­çœŸå‡"></a>101 åˆ¤æ–­çœŸå‡</h1><p>è¾“å‡ºæ˜¯ä»€ä¹ˆ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> one = (<span class="literal">false</span> || &#123;&#125; || <span class="literal">null</span>)</span><br><span class="line"><span class="keyword">const</span> two = (<span class="literal">null</span> || <span class="literal">false</span> || <span class="string">&quot;&quot;</span>)</span><br><span class="line"><span class="keyword">const</span> three = ([] || <span class="number">0</span> || <span class="literal">true</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(one, two, three)</span><br><span class="line"></span><br><span class="line"><span class="attr">A</span>: <span class="literal">false</span> <span class="literal">null</span> []</span><br><span class="line"><span class="attr">B</span>: <span class="literal">null</span> <span class="string">&quot;&quot;</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">C</span>: &#123;&#125; <span class="string">&quot;&quot;</span> []</span><br><span class="line"><span class="attr">D</span>: <span class="literal">null</span> <span class="literal">null</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><details><summary>ç­”æ¡ˆ</summary>C</details>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="JSç³»åˆ—" scheme="https://zlinni.github.io/categories/JS%E7%B3%BB%E5%88%97/"/>
    
    
    <category term="javascript" scheme="https://zlinni.github.io/tags/javascript/"/>
    
  </entry>
  
  <entry>
    <title>Viteå®˜æ–¹æ–‡æ¡£æµ“ç¼©</title>
    <link href="https://zlinni.github.io/posts/559196830/"/>
    <id>https://zlinni.github.io/posts/559196830/</id>
    <published>2022-08-03T00:33:05.000Z</published>
    <updated>2022-08-07T02:22:12.040Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><div class="note primary flat"><p>è¿™ä¸€ç¯‡ä¸ºä»€ä¹ˆè¦å« vite å®˜æ–¹æ–‡æ¡£æµ“ç¼©å‘¢ï¼Ÿä¸€æ–¹é¢æ˜¯è‡ªå·±ä¸å¤ªäº†è§£ viteï¼Œæƒ³é€šè¿‡å®˜æ–¹æ–‡æ¡£è¿›è¡Œ vite çš„å­¦ä¹ ã€‚ä¸€æ–¹é¢æ˜¯é è‡ªå·±çš„ç†è§£å¤„ç†ä¸€ä¸‹æ–‡æ¡£çš„ç»†èŠ‚ã€‚è¯ä¸å¤šè¯´ï¼Œå¼€åˆ·</p><p>å‰ç½®çŸ¥è¯†ï¼šCJS/ESMï¼ŒHMRï¼ŒESM çš„å¼•å…¥æ–¹å¼ï¼ŒFOUC</p></div><h1 id="ä¸ºä»€ä¹ˆé€‰-Vite"><a href="#ä¸ºä»€ä¹ˆé€‰-Vite" class="headerlink" title="ä¸ºä»€ä¹ˆé€‰ Vite"></a>ä¸ºä»€ä¹ˆé€‰ Vite</h1><p>Vite è¯ç”Ÿçš„èƒŒæ™¯æ˜¯å¤§å‹åº”ç”¨ä¸­ webpack æ„å»ºé€Ÿåº¦å˜æ…¢ï¼Œéœ€è¦å¾ˆä¹…æ‰èƒ½å¼€å¯æœåŠ¡å™¨ï¼Œå³ä½¿é€šè¿‡ HMR ä¹Ÿéœ€è¦å¾ˆä¹…æµè§ˆå™¨æ‰èƒ½åé¦ˆå‡ºå†…å®¹ã€‚ä»¥ä¸Šéƒ½æ˜¯åŸºäºæ‰“åŒ…çš„å­¦è¯´ï¼Œè€Œ Vite è¯ç”Ÿçš„åŸå› åˆ™æ˜¯æµè§ˆå™¨å¼€å§‹é€æ­¥æ”¯æŒ JS æ¨¡å—ï¼Œä»–ä½¿ç”¨éæ‰“åŒ…çš„æ–¹å¼æ„å»ºï¼Œä»¥å†·å¯åŠ¨çš„æ–¹å¼å¯åŠ¨ï¼Œå› æ­¤æ„å»ºé€Ÿåº¦ä¸Šé¢æå¤§å¿«äºå‰è€…ã€‚</p><h1 id="å†·å¯åŠ¨"><a href="#å†·å¯åŠ¨" class="headerlink" title="å†·å¯åŠ¨"></a>å†·å¯åŠ¨</h1><p>Vite å…ˆå°†åº”ç”¨ä¸­çš„æ¨¡å—åˆ†ä¸ºä¾èµ–å’Œæºç ä¸¤ç±»ï¼Œæ”¹è¿›æœåŠ¡å™¨å¯åŠ¨æ—¶é—´ã€‚</p><ul><li>ä¾èµ–ï¼šä¾èµ–å¤§å¤šæ•°ä¸ºå¼€å‘ä¸ä¼šå˜åŠ¨çš„çº¯ jsã€‚ä¸€äº›æ¯”è¾ƒå¤§çš„ä¾èµ–(æ¯”å¦‚ç»„ä»¶åº“)å¤„ç†çš„æˆæœ¬ä¹Ÿå¾ˆé«˜ï¼Œä¾èµ–é€šå¸¸æœ‰å¤šç§æ¨¡å—åŒ–çš„æ ¼å¼(eg:CJS/ESM)</li></ul><p>Vite åœ¨ä¾èµ–å¤„ç†è¿™æ–¹é¢ä½¿ç”¨çš„æ˜¯ esbuildï¼Œç”± go è¯­è¨€ç¼–å†™ï¼Œæ¯” js ç¼–å†™çš„æ‰“åŒ…å™¨é¢„æ„å»ºå¿« 10-100 å€</p><ul><li>æºç ï¼šæºç é€šå¸¸åŒ…å«ä¸€äº›é js æ–‡ä»¶ï¼Œæ¯”å¦‚ cssï¼Œjsx æˆ–è€… vue/svelte ç»„ä»¶ï¼Œç‰¹ç‚¹æ˜¯æ—¶å¸¸ä¼šè¢«ç¼–è¾‘ã€‚åŒæ—¶ä¸æ˜¯æ‰€æœ‰çš„æºç éƒ½éœ€è¦åŒæ—¶è¢«åŠ è½½(æ¯”å¦‚åŸºäºè·¯ç”±æ‹†åˆ†çš„ä»£ç æ¨¡å—)</li></ul><p>Vite ä»¥åŸç”Ÿ ESM çš„æ–¹å¼æä¾›æºç ã€‚ç›¸å½“äºè®©æµè§ˆå™¨æ¥ç®¡äº†æ‰“åŒ…ç¨‹åºçš„éƒ¨åˆ†å·¥ä½œï¼šVite åªéœ€è¦åœ¨æµè§ˆå™¨è¯·æ±‚æºç çš„æ—¶å€™æ‰å»è½¬æ¢å¹¶æä¾›æºç ã€‚æ ¹æ®æƒ…æ™¯åŠ¨æ€å¯¼å…¥æºç ï¼Œå¤§éƒ¨åˆ†æ˜¯å½“å‰å±å¹•ä¸­æœ‰çš„æ“ä½œæ‰ä¼šè¢«å¤„ç†ã€‚</p><p>ä»¥ä¸‹æ˜¯å¸¸è§„æ‰“åŒ…æ„å»ºå’Œéæ‰“åŒ…é¢„æ„å»ºçš„ç¤ºä¾‹å›¾<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220803085603.png" alt=""><br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220803085618.png" alt=""></p><p>çœ‹å›¾å¯ä»¥å‘ç° Vite åº”è¯¥æ˜¯åªæ„å»ºäº†å½“å‰è§†å›¾ä¸­è·¯ç”±å’Œä¸è¯¥è·¯ç”±ç›¸å…³çš„æ¨¡å—</p><h1 id="ç¼“æ…¢æ›´æ–°"><a href="#ç¼“æ…¢æ›´æ–°" class="headerlink" title="ç¼“æ…¢æ›´æ–°"></a>ç¼“æ…¢æ›´æ–°</h1><p>å½“ä½ æ›´æ–°åº”ç”¨çš„æ—¶å€™ï¼Œå¸¸è§„çš„æ‰“åŒ…å™¨ä½¿ç”¨ HMRï¼Œè®©ä¸€ä¸ªæ¨¡å—çƒ­æ›¿æ¢è‡ªå·±ï¼Œè€Œä¸ä¼šå½±å“é¡µé¢çš„å…¶ä»–éƒ¨åˆ†ï¼Œå¤§å¤§çš„æ”¹å–„äº†å¼€å‘ä½“éªŒã€‚ä¸è¿‡å½“åº”ç”¨ç¨‹åºè¶Šæ¥è¶Šå¤§çš„æ—¶å€™ï¼Œè¿™ç§æ–¹å¼ä¹Ÿæ˜¾å¾—æ‰è¥Ÿè§è‚˜ã€‚</p><h2 id="è¾¹ç•Œé“¾å¤±æ´»"><a href="#è¾¹ç•Œé“¾å¤±æ´»" class="headerlink" title="è¾¹ç•Œé“¾å¤±æ´»"></a>è¾¹ç•Œé“¾å¤±æ´»</h2><p>Vite ä¸­ï¼ŒHMR æ˜¯åœ¨åŸç”Ÿ ESM ä¸Šé¢æ‰§è¡Œçš„ã€‚å½“ç¼–è¾‘ä¸€ä¸ªæ–‡ä»¶çš„æ—¶å€™ï¼Œvite åªéœ€è¦å¯¹å·²ç¼–è¾‘çš„æ¨¡å—ä¸å…¶æœ€è¿‘çš„ HMR è¾¹ç•Œçš„é“¾å¤±æ´»ï¼ˆä¸éœ€è¦å…¨éƒ¨é‡æ„å»ºï¼‰ä½¿å¾—æ— è®ºåº”ç”¨å¤§å°å¦‚ä½•ï¼ŒHMR å§‹ç»ˆä¿æŒå¿«é€Ÿæ›´æ–°</p><h2 id="åŠ é€Ÿé¡µé¢é‡è½½"><a href="#åŠ é€Ÿé¡µé¢é‡è½½" class="headerlink" title="åŠ é€Ÿé¡µé¢é‡è½½"></a>åŠ é€Ÿé¡µé¢é‡è½½</h2><p>Vite ä½¿ç”¨ HTTP è¯·æ±‚å¤´æ¥ä½¿å¾—é¡µé¢å¿«é€Ÿé‡è½½ï¼Œå¯¹äºä¾èµ–ä½¿ç”¨çš„æ˜¯<code>Cache-Control: max-age=31536000,immutable</code>è¿›è¡Œå¼ºç¼“å­˜ï¼Œæºç æ¨¡å—é€šè¿‡ 304 è¿›è¡Œåå•†ç¼“å­˜ã€‚</p><h1 id="ä»éœ€è¦æ‰“åŒ…çš„ç”Ÿäº§ç¯å¢ƒ"><a href="#ä»éœ€è¦æ‰“åŒ…çš„ç”Ÿäº§ç¯å¢ƒ" class="headerlink" title="ä»éœ€è¦æ‰“åŒ…çš„ç”Ÿäº§ç¯å¢ƒ"></a>ä»éœ€è¦æ‰“åŒ…çš„ç”Ÿäº§ç¯å¢ƒ</h1><p>ä¸Šé¢çš„ Bundless åªæ˜¯åŸºäºå¼€å‘ç¯å¢ƒçš„ï¼Œæ­£å¼ä¸Šçº¿è¿˜æ˜¯éœ€è¦è¿›è¡Œæ‰“åŒ…ã€‚åŸå› å¾ˆç®€å•ï¼š</p><p>åµŒå¥—æ‰“åŒ…ä¼šå¯¼è‡´é¢å¤–çš„ç½‘ç»œå¾€è¿”ï¼Œå³ä½¿ä½¿ç”¨äº† HTTP2 ä¹Ÿæ˜¯æ•ˆç‡ä½ä¸‹</p><p>æ‰€ä»¥ä¸ºäº†åœ¨ç”Ÿäº§ç¯å¢ƒä¸­è·å¾—æ›´å¥½çš„åŠ è½½æ€§èƒ½ï¼Œæœ€å¥½è¿˜æ˜¯å¯¹ä»£ç è¿›è¡Œ tree-shakingï¼Œæ‡’åŠ è½½å’Œ chunk åˆ†å‰²ï¼ˆwebpack é‚£å¥—ï¼‰</p><h2 id="ä¸ºä»€ä¹ˆä¸ç”¨-esbuild-æ‰“åŒ…ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆä¸ç”¨-esbuild-æ‰“åŒ…ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆä¸ç”¨ esbuild æ‰“åŒ…ï¼Ÿ"></a>ä¸ºä»€ä¹ˆä¸ç”¨ esbuild æ‰“åŒ…ï¼Ÿ</h2><p>esbuild å¾ˆå¿«ï¼Œä½†æ˜¯è¿˜ä¸å¤Ÿå®Œå–„ï¼Œå°¤å…¶æ˜¯åœ¨ css å’Œä»£ç åˆ†å‰²æ–¹é¢ã€‚ç›®å‰é‡‡ç”¨çš„æ˜¯æ¯”è¾ƒç¨³å®šçš„ rollup</p><h1 id="NPM-ä¾èµ–è§£æå’Œé¢„æ„å»º"><a href="#NPM-ä¾èµ–è§£æå’Œé¢„æ„å»º" class="headerlink" title="NPM ä¾èµ–è§£æå’Œé¢„æ„å»º"></a>NPM ä¾èµ–è§£æå’Œé¢„æ„å»º</h1><p>æˆ‘ä»¬çŸ¥é“ esm æ˜¯ä¸æ”¯æŒè£¸å¯¼å…¥çš„ï¼Œæƒ³è¦å°† es æ¨¡å—åœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨ï¼Œæœ‰ä¸‰ç§æ–¹å¼</p><ol><li>import from URL</li><li>importmap</li><li>assertion</li></ol><p>å…¶ä¸­ç¬¬äºŒç§æ–¹å¼ä½¿å¾—åç»­çš„è£¸å¯¼å…¥æˆä¸ºå¯èƒ½ã€‚</p><p>ä½†æ˜¯ vite çš„æ€è·¯æ˜¯è¿™æ ·çš„ï¼Œæ£€æµ‹æ‰€æœ‰è£¸å¯¼å…¥çš„æ¨¡å—ï¼Œå¯¹å…¶è¿›è¡Œä»¥ä¸‹æ“ä½œï¼š</p><ol><li>ä½¿ç”¨ esbuild é¢„æ„å»ºä¾èµ–ï¼Œå°† cjs å’Œ umd è½¬æ¢ä¸º esmã€‚</li><li>é‡å†™å¯¼å…¥ä¸ºåˆæ³•çš„ URL(åˆ©ç”¨ç¬¬ä¸€ç§æ–¹å¼)ï¼Œeg:<code>/node_modules/.vite/deps/my-dep.js?v=f3sf2ebd</code>è®©æµè§ˆå™¨èƒ½å¤Ÿè¯†åˆ«å®ƒä»¬</li></ol><h1 id="æ›´å¿«çš„-Typescript-è½¬è¯‘"><a href="#æ›´å¿«çš„-Typescript-è½¬è¯‘" class="headerlink" title="æ›´å¿«çš„ Typescript è½¬è¯‘"></a>æ›´å¿«çš„ Typescript è½¬è¯‘</h1><p>vite ä½¿ç”¨ esbuild è½¬ ts åˆ° jsï¼Œæ¯” tsc é€Ÿåº¦å¿« 20-30 å€ã€‚</p><h2 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h2><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220803093125.png" alt=""></p><h1 id="css"><a href="#css" class="headerlink" title="css"></a>css</h1><p>å¯¼å…¥ css æ–‡ä»¶å°†ä¼šæŠŠå†…å®¹æ’å…¥åˆ° style æ ‡ç­¾ä¸­ï¼ŒåŒæ—¶ä¹Ÿå¸¦æœ‰ HMR æ”¯æŒã€‚ä¹Ÿèƒ½ä»¥å­—ç¬¦ä¸²çš„å½¢å¼æ£€ç´¢å¤„ç†åçš„ï¼Œä½œä¸ºå…¶æ¨¡å—é»˜è®¤å¯¼å‡ºçš„ css</p><h2 id="import-å†…è”å’Œå˜åŸº"><a href="#import-å†…è”å’Œå˜åŸº" class="headerlink" title="@import å†…è”å’Œå˜åŸº"></a>@import å†…è”å’Œå˜åŸº</h2><p>Vite é€šè¿‡ <code>postcss-import</code> é¢„é…ç½®æ”¯æŒäº† css çš„ <code>@import</code> å†…è”ï¼Œæ„å‘³ç€æ‰€æœ‰ css çš„ <code>url</code> å¼•ç”¨ï¼Œå³ä½¿å¯¼å…¥çš„æ–‡ä»¶åœ¨ä¸åŒçš„ç›®å½•å†…ï¼Œä¹Ÿæ€»æ˜¯è‡ªåŠ¨å˜åŸº</p><h2 id="postcss"><a href="#postcss" class="headerlink" title="postcss"></a>postcss</h2><p>å¦‚æœé¡¹ç›®åŒ…å«æœ‰æ•ˆçš„ PostCSS é…ç½® (ä»»ä½•å— <code>postcss-load-config</code> æ”¯æŒçš„æ ¼å¼ï¼Œä¾‹å¦‚ <code>postcss.config.js</code>)ï¼Œå®ƒå°†ä¼šè‡ªåŠ¨åº”ç”¨äºæ‰€æœ‰å·²å¯¼å…¥çš„ CSSã€‚</p><h2 id="cssmodule"><a href="#cssmodule" class="headerlink" title="cssmodule"></a>cssmodule</h2><p>ä»»ä½•ä»¥ <code>.module.css</code> ä¸ºåç¼€åçš„ CSS æ–‡ä»¶éƒ½è¢«è®¤ä¸ºæ˜¯ä¸€ä¸ª CSS modules æ–‡ä»¶ã€‚å¯¼å…¥è¿™æ ·çš„æ–‡ä»¶ä¼šè¿”å›ä¸€ä¸ªç›¸åº”çš„æ¨¡å—å¯¹è±¡ï¼š<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220803094958.png" alt=""></p><h2 id="CSS-é¢„å¤„ç†å™¨"><a href="#CSS-é¢„å¤„ç†å™¨" class="headerlink" title="CSS é¢„å¤„ç†å™¨"></a>CSS é¢„å¤„ç†å™¨</h2><p>vite æä¾›äº†å¯¹<code>.scss, .sass, .less, .styl</code> å’Œ <code>.stylus</code> æ–‡ä»¶çš„å†…ç½®æ”¯æŒã€‚æ²¡å¿…è¦å®‰è£…ç‰¹å®šçš„ vite æ’ä»¶ï¼Œä½†éœ€è¦å®‰è£…ç›¸åº”çš„é¢„å¤„ç†å™¨ä¾èµ–</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># .scss and .sass</span></span><br><span class="line">npm add -D sass</span><br><span class="line"></span><br><span class="line"><span class="comment"># .less</span></span><br><span class="line">npm add -D less</span><br><span class="line"></span><br><span class="line"><span class="comment"># .styl and .stylus</span></span><br><span class="line">npm add -D stylus</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="æ„å»ºæ€§èƒ½ä¼˜åŒ–"><a href="#æ„å»ºæ€§èƒ½ä¼˜åŒ–" class="headerlink" title="æ„å»ºæ€§èƒ½ä¼˜åŒ–"></a>æ„å»ºæ€§èƒ½ä¼˜åŒ–</h1><div class="note primary flat"><p>ä¸‹é¢æ‰€ç½—åˆ—çš„åŠŸèƒ½ä¼šè‡ªåŠ¨åº”ç”¨ä¸ºæ„å»ºè¿‡ç¨‹çš„ä¸€éƒ¨åˆ†ï¼Œé™¤éä½ æƒ³ç¦ç”¨å®ƒä»¬ï¼Œå¦åˆ™æ²¡æœ‰å¿…è¦æ˜¾å¼é…ç½®ã€‚</p></div><h2 id="css-ä»£ç åˆ†å‰²"><a href="#css-ä»£ç åˆ†å‰²" class="headerlink" title="css ä»£ç åˆ†å‰²"></a>css ä»£ç åˆ†å‰²</h2><p>vite ä¼šè‡ªåŠ¨çš„å°†ä¸€ä¸ªå¼‚æ­¥çš„ chunk æ¨¡å—ä¸­ä½¿ç”¨åˆ°çš„ css ä»£ç æŠ½ç¦»å‡ºæ¥å¹¶ä¸ºå…¶ç”Ÿæˆä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶ã€‚è¿™ä¸ª css æ–‡ä»¶å°†åœ¨å¼‚æ­¥ chunk åŠ è½½å®Œæˆçš„æ—¶å€™è‡ªåŠ¨é€šè¿‡ä¸€ä¸ª link æ ‡ç­¾è½½å…¥ï¼Œè¯¥å¼‚æ­¥ chunk ä¼šä¿è¯åªåœ¨ css åŠ è½½å®Œæˆåæ‰§è¡Œï¼Œé¿å…å‘ç”Ÿ FOUC</p><p>ä¸è¿‡ä¹Ÿå¯ä»¥å•ç‹¬æŠ½ç¦»æ‰€æœ‰çš„ css åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œé€šè¿‡è®¾ç½®ï¼šbuild.cssCodeSplit ä¸º false æ¥ç¦ç”¨ css ä»£ç åˆ†å‰²ã€‚</p><h2 id="é¢„åŠ è½½æŒ‡ä»¤ç”Ÿæˆ"><a href="#é¢„åŠ è½½æŒ‡ä»¤ç”Ÿæˆ" class="headerlink" title="é¢„åŠ è½½æŒ‡ä»¤ç”Ÿæˆ"></a>é¢„åŠ è½½æŒ‡ä»¤ç”Ÿæˆ</h2><p>vite ä¼šä¸ºå…¥å£ chunk å’Œå®ƒä»¬æ‰“åŒ…å‡ºçš„ html ä¸­ç›´æ¥å¼•å…¥è‡ªåŠ¨ç”Ÿæˆ<code>&lt;link ref = &#39;modulepreload&#39;&gt;</code>æŒ‡ä»¤ã€‚</p><h2 id="å¼‚æ­¥-chunk-åŠ è½½ä¼˜åŒ–"><a href="#å¼‚æ­¥-chunk-åŠ è½½ä¼˜åŒ–" class="headerlink" title="å¼‚æ­¥ chunk åŠ è½½ä¼˜åŒ–"></a>å¼‚æ­¥ chunk åŠ è½½ä¼˜åŒ–</h2><p>å®é™…é¡¹ç›®ä¸­ï¼Œrollup é€šå¸¸ä¼šç”Ÿæˆå…±ç”¨ chunkâ€”-è¢«ä¸¤ä¸ªæˆ–è€…ä¸¤ä¸ªä»¥ä¸Šçš„å…¶ä»– chunk å…±äº«çš„ chunkã€‚ä¸åŠ¨æ€å¯¼å…¥ç›¸ç»“åˆï¼Œå¾ˆå®¹æ˜“å‡ºç°ä¸‹é¢çš„æƒ…å†µ<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220803102110.png" alt=""></p><p>åœ¨æ— ä¼˜åŒ–çš„æƒ…å†µä¸‹ï¼Œå½“å¼‚æ­¥ chunkA è¢«åŠ è½½çš„æ—¶å€™ï¼Œæµè§ˆå™¨å¿…é¡»å…ˆè§£æ A æ‰çŸ¥é“ A å’Œ C çš„å…±ç”¨å…³ç³»ï¼Œè¿™ä¼šå¯¼è‡´é¢å¤–çš„ç½‘ç»œå¾€è¿”ã€‚</p><p>Vite ä½¿ç”¨ä¸€ä¸ªé¢„åŠ è½½æ­¥éª¤è‡ªåŠ¨é‡å†™ä»£ç ï¼Œæ¥åˆ†å‰²åŠ¨æ€å¯¼å…¥è°ƒç”¨ï¼Œä»¥å®ç°å½“ A è¢«è¯·æ±‚æ—¶ï¼ŒC ä¹Ÿå°†åŒæ—¶è¢«è¯·æ±‚ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(Entry) =&gt; A + C;</span><br></pre></td></tr></table></figure><p>C é‡Œé¢è¿˜å¯èƒ½æœ‰æ›´å¤šçš„åµŒå¥—å…±ç”¨å†…å®¹ï¼Œæ‰€ä»¥è¿™ç§é¢„åŠ è½½å¤„ç†æ˜¯å¾ˆé‡è¦çš„ï¼Ÿ</p><p>Vite å…·ä½“æ˜¯è¿™ä¹ˆæ“ä½œçš„ï¼Ÿé¢„åŠ è½½çš„åŸç†ï¼Ÿ</p><h1 id="Vite-ä½¿ç”¨æ’ä»¶"><a href="#Vite-ä½¿ç”¨æ’ä»¶" class="headerlink" title="Vite ä½¿ç”¨æ’ä»¶"></a>Vite ä½¿ç”¨æ’ä»¶</h1><p>Vite çš„æ’ä»¶æ˜¯åŸºäº Rollup ç³»ç»Ÿçš„ï¼Œå¹¶ä¸”æ·»åŠ äº†è‡ªå·±é¢å¤–çš„é€‰é¡¹</p><p>å…·ä½“å¦‚æœæƒ³è¦æ·»åŠ ä¸€ä¸ªæ’ä»¶ï¼Œéœ€è¦æ·»åŠ åˆ°é¡¹ç›®çš„<code>devDependencies</code>ä¸­ï¼Œå¹¶åœ¨ vite.config.js é…ç½®æ–‡ä»¶ä¸­çš„ plugins æ•°ç»„é‡Œé¢å¼•å…¥ä»–ã€‚ä¾‹å¦‚ï¼Œæƒ³è¦ä¸ºä¼ ç»Ÿæµè§ˆå™¨æä¾›æ”¯æŒå¯ä»¥ä½¿ç”¨<code>@vitejs/plugin-legacy</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm add -D @vitejs/plugin-legacy</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vite.config.js</span></span><br><span class="line"><span class="keyword">import</span> legacy <span class="keyword">from</span> <span class="string">&quot;@vitejs/plugin-legacy&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&quot;vite&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> defineConfig(&#123;</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    legacy(&#123;</span><br><span class="line">      <span class="attr">targets</span>: [<span class="string">&quot;defaults&quot;</span>, <span class="string">&quot;not IE 11&quot;</span>],</span><br><span class="line">    &#125;),</span><br><span class="line">  ],</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>plugin å¯ä»¥æ¥æ”¶å¤šä¸ªæ’ä»¶å¹¶ä¸”ä¼šåœ¨é‡Œé¢è‡ªåŠ¨æ‰å¹³åŒ–è¿™ä¸ªæ•°ç»„ã€‚</p><p>è·å–æ–¹å¼<br>Vite æ’ä»¶ï¼š<a href="https://www.npmjs.com/search?q=vite-plugin&amp;ranking=popularity">ä¼ é€é—¨</a><br>Rollup æ’ä»¶ï¼š<a href="https://www.npmjs.com/search?q=rollup-plugin&amp;ranking=popularity">ä¼ é€é—¨</a></p><h2 id="å¼ºåˆ¶æ’ä»¶æ’åº"><a href="#å¼ºåˆ¶æ’ä»¶æ’åº" class="headerlink" title="å¼ºåˆ¶æ’ä»¶æ’åº"></a>å¼ºåˆ¶æ’ä»¶æ’åº</h2><p>Vite çš„æ’ä»¶å¯èƒ½å’Œ Rollup çš„æ’ä»¶å†²çªï¼Œéœ€è¦ä¿®æ”¹æ’ä»¶çš„æ‰§è¡Œé¡ºåºæˆ–è€…åªåœ¨æ„å»ºçš„æ—¶å€™ä½¿ç”¨ã€‚ä½¿ç”¨ä¿®é¥°ç¬¦ enforce æ¥å®Œæˆè¿™ä»¶äº‹</p><ul><li>preï¼šåœ¨ vite æ’ä»¶ä¹‹å‰</li><li>é»˜è®¤/postï¼šåœ¨ vite æ’ä»¶ä¹‹å</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vite.config.js</span></span><br><span class="line"><span class="keyword">import</span> image <span class="keyword">from</span> <span class="string">&quot;@rollup/plugin-image&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&quot;vite&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> defineConfig(&#123;</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      ...image(),</span><br><span class="line">      <span class="attr">enforce</span>: <span class="string">&quot;pre&quot;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  ],</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹å…¼å®¹æ€§<a href="https://vite-rollup-plugins.patak.dev/">ä¼ é€é—¨</a></p><h2 id="æŒ‰éœ€åº”ç”¨"><a href="#æŒ‰éœ€åº”ç”¨" class="headerlink" title="æŒ‰éœ€åº”ç”¨"></a>æŒ‰éœ€åº”ç”¨</h2><p>æŒ‡å®šæ’ä»¶åœ¨å¼€å‘(serve)è¿˜æ˜¯ç”Ÿäº§(build)ä¸­ä½¿ç”¨:apply ä¿®é¥°ç¬¦</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vite.config.js</span></span><br><span class="line"><span class="keyword">import</span> typescript2 <span class="keyword">from</span> <span class="string">&quot;rollup-plugin-typescript2&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&quot;vite&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> defineConfig(&#123;</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      ...typescript2(),</span><br><span class="line">      <span class="attr">apply</span>: <span class="string">&quot;build&quot;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  ],</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h1 id="ä¾èµ–é¢„æ„å»º"><a href="#ä¾èµ–é¢„æ„å»º" class="headerlink" title="ä¾èµ–é¢„æ„å»º"></a>ä¾èµ–é¢„æ„å»º</h1><p>é¦–æ¬¡å¯åŠ¨ vite ä¼šæ‰“å°ç›¸å…³ä¿¡æ¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Pre-bundling dependencies: ï¼ˆæ­£åœ¨é¢„æ„å»ºä¾èµ–ï¼šï¼‰</span><br><span class="line">  react</span><br><span class="line">  react-dom</span><br><span class="line">(this will be run only when your dependencies or config have changed)ï¼ˆè¿™å°†åªä¼šåœ¨ä½ çš„ä¾èµ–æˆ–é…ç½®å‘ç”Ÿå˜åŒ–æ—¶æ‰§è¡Œï¼‰</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å› ä¸ºæ­¤æ—¶ vite æ­£åœ¨æ‰§è¡Œé¢„æ„å»ºï¼Œä¸”æ¯æ¬¡æœ‰æ–°çš„æ’ä»¶åŠ è¿›æ¥ï¼Œéƒ½ä¼šé‡æ–°é¢„æ„å»ºã€‚</p><h2 id="åŸå› "><a href="#åŸå› " class="headerlink" title="åŸå› "></a>åŸå› </h2><p>vite çš„ä¾èµ–é¢„æ„å»ºæœ‰ä¸¤ä¸ªåŸå› </p><ol><li>CJS å’Œ UMD å…¼å®¹æ€§ï¼šå¼€å‘é˜¶æ®µï¼Œvite è¦å°†æ‰€æœ‰çš„ cjs æ¨¡å—è½¬åŒ–æˆä¸º esmï¼Œvite ä¼šæ™ºèƒ½åˆ†ææ‰€æœ‰çš„ cjs æˆ–è€… umd ä¾èµ–ç„¶åç”Ÿæˆå¯¹åº” esmï¼ˆå…³äºæ€ä¹ˆè½¬ esm çš„ä¸€äº›ç»†èŠ‚åœ¨ webpack çš„ bundless ç« èŠ‚å·²ç»è®²è¿°è¿‡ï¼‰</li><li>æ€§èƒ½ï¼šé™¤äº†å¯¹ cjsï¼Œumd å¤„ç†ä¹‹å¤–ï¼Œvite è¿˜å¯¹æœ‰è®¸å¤šå†…éƒ¨æ¨¡å—çš„ esm ä¾èµ–å…³ç³»è½¬ä¸ºå•ä¸ªæ¨¡å—ï¼Œä¸¾ä¸ªä¾‹å­ï¼Œæ‰§è¡Œ loadash çš„æ—¶å€™ï¼Œä¼šå‘é€å…­ç™¾å¤šä¸ªè¯·æ±‚ï¼Œåœ¨æµè§ˆå™¨ç«¯ä¼šé€ æˆå¾ˆå¤§çš„å‹åŠ›ï¼Œå¯¼è‡´é¡µé¢çš„åŠ è½½é€Ÿåº¦å˜æ…¢ã€‚</li></ol><p>é€šè¿‡é¢„æ„å»º loadash-es æˆä¸ºä¸€ä¸ªæ¨¡å—ï¼Œé‚£ä¹ˆåªéœ€è¦å‘é€ä¸€ä¸ªè¯·æ±‚å³å¯ã€‚</p><p>æ³¨æ„ï¼šå¼€å‘ç¯å¢ƒä½¿ç”¨çš„æ˜¯ esbuild è½¬åŒ– esm æ¨¡å—ï¼Œç”Ÿäº§ç¯å¢ƒä½¿ç”¨çš„æ˜¯<code>@rollup/plugin-commonjs</code></p><h2 id="è‡ªåŠ¨ä¾èµ–æœå¯»"><a href="#è‡ªåŠ¨ä¾èµ–æœå¯»" class="headerlink" title="è‡ªåŠ¨ä¾èµ–æœå¯»"></a>è‡ªåŠ¨ä¾èµ–æœå¯»</h2><p>å¦‚æœ vite æ²¡æœ‰æ‰¾åˆ°ä½ çš„ç¼“å­˜ï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰ 304 åå•†ç¼“å­˜ï¼Œä¹Ÿæ²¡æœ‰å¼ºç¼“å­˜ï¼Œé‚£ä¹ˆ vite ä¼šè‡ªåŠ¨æŠ“å–ä½ çš„æºç ï¼Œæ‰¾åˆ°å¼•å…¥çš„ä¾èµ–é¡¹ï¼Œæ¯”å¦‚è£¸å¯¼å…¥çš„æ¨¡å—ï¼Œå¹¶å°†è¿™äº›ä¾èµ–é¡¹ä½œä¸ºé¢„æ„å»ºåŒ…çš„å…¥å£ç‚¹ï¼Œé¢„æ„å»ºé€šè¿‡ esbuild è¿›è¡Œï¼Œæ‰€ä»¥å¾ˆå¿«ã€‚</p><p>åœ¨æœåŠ¡å™¨å¯åŠ¨ä¹‹åï¼Œå¦‚æœå‘ç°ä¸€ä¸ªæ–°çš„ä¾èµ–é¡¹è¿›æ¥ï¼Œä¸”ä»–æ²¡æœ‰åœ¨ç¼“å­˜ä¸­ï¼Œvite ä¼šé‡æ–°æ‰§è¡Œä¾èµ–æ„å»ºè¿‡ç¨‹å¹¶é‡è½½æµè§ˆå™¨ã€‚</p><h2 id="Monorepo-å’Œé“¾æ¥ä¾èµ–"><a href="#Monorepo-å’Œé“¾æ¥ä¾èµ–" class="headerlink" title="Monorepo å’Œé“¾æ¥ä¾èµ–"></a>Monorepo å’Œé“¾æ¥ä¾èµ–</h2><p>åœ¨ä¸€ä¸ª Monorepo å¯åŠ¨ä¸­ï¼Œè¯¥ä»“åº“çš„æŸä¸ªä¾èµ–å¯èƒ½ä¼šæˆä¸ºå¦ä¸€ä¸ªåŒ…çš„ä¾èµ–ï¼Œvite ä¼šè‡ªåŠ¨ä¾¦æµ‹æ²¡æœ‰ä» nodemodules é‡Œé¢è§£æçš„ä¾èµ–é¡¹ï¼Œå¹¶å°†é“¾æ¥çš„ä¾èµ–è§†ä¸ºæºç ï¼Œä»–ä¸ä¼šå°è¯•æ‰“åŒ…è¢«é“¾æ¥çš„ä¾èµ–ï¼Œè€Œæ˜¯ä¼šåˆ†æè¢«é“¾æ¥ä¾èµ–çš„ä¾èµ–åˆ—è¡¨ã€‚</p><p>ä¸è¿‡è¿™éœ€è¦è¢«é“¾æ¥çš„ä¾èµ–è¢«å¯¼å‡ºä¸º esm æ ¼å¼ã€‚å¦‚æœä¸æ˜¯ï¼Œé‚£ä¹ˆä½ å¯ä»¥åœ¨é…ç½®ä¸­å°†æ­¤ä¾èµ–æ·»åŠ åˆ° optimizeDeps.include å’Œ build.commonjsOptions.include è¿™ä¸¤é¡¹ä¸­ã€‚<code>optimizeDeps.include</code> å’Œ <code>build.commonjsOptions.include</code> è¿™ä¸¤é¡¹ä¸­ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> defineConfig(&#123;</span><br><span class="line">  <span class="attr">optimizeDeps</span>: &#123;</span><br><span class="line">    <span class="attr">include</span>: [<span class="string">&quot;linked-dep&quot;</span>],</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">build</span>: &#123;</span><br><span class="line">    <span class="attr">commonjsOptions</span>: &#123;</span><br><span class="line">      <span class="attr">include</span>: [<span class="regexp">/linked-dep/</span>, <span class="regexp">/node_modules/</span>],</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>å½“è¿™ä¸ªè¢«é“¾æ¥çš„ä¾èµ–å‘ç”Ÿå˜æ›´åï¼Œåœ¨é‡å¯å¼€å‘æœåŠ¡å™¨æ—¶åœ¨å‘½ä»¤ä¸­å¸¦ä¸Š <code>--force</code> é€‰é¡¹è®©æ‰€æœ‰æ›´æ”¹ç”Ÿæ•ˆã€‚</p><p>é‡å¤åˆ é™¤</p><p>ç”±äºå¯¹é“¾æ¥ä¾èµ–çš„è§£ææ–¹å¼ä¸åŒï¼Œä¼ é€’æ€§çš„ä¾èµ–é¡¹å¯èƒ½ä¼šä¸æ­£ç¡®åœ°è¿›è¡Œé‡å¤æ•°æ®åˆ é™¤ï¼Œè€Œé€ æˆè¿è¡Œæ—¶çš„é—®é¢˜ã€‚å¦‚æœä½ å¶ç„¶å‘ç°äº†è¿™ä¸ªé—®é¢˜ï¼Œè¯·ä½¿ç”¨ npm pack æ¥ä¿®å¤å®ƒã€‚</p><h2 id="è‡ªå®šä¹‰è¡Œä¸º"><a href="#è‡ªå®šä¹‰è¡Œä¸º" class="headerlink" title="è‡ªå®šä¹‰è¡Œä¸º"></a>è‡ªå®šä¹‰è¡Œä¸º</h2><p>é»˜è®¤çš„ä¾èµ–é¡¹ä¸ºå¯å‘å¼å¯èƒ½å¹¶ä¸æ€»æ˜¯å¯å–çš„ï¼Œå¯ä»¥ä½¿ç”¨ optimizeDeps é…ç½®é¡¹ï¼šinclude å’Œ exclude å»é…ç½®ä½ æƒ³è¦å¯»æ‰¾çš„ä¾èµ–æˆ–è€…æ’é™¤ä¾èµ–ã€‚</p><p>å»ºè®®ï¼šå¦‚æœä¾èµ–é¡¹å¾ˆå¤§ï¼ˆæœ‰å¾ˆå¤šå†…éƒ¨æ¨¡å—ï¼‰æˆ–è€…æ˜¯ CJSï¼Œä½ åº”è¯¥åŒ…å«ä»–è®© vite è‡ªåŠ¨å»å¤„ç†ï¼Œå¦‚æœä¾èµ–é¡¹å¾ˆå°å¹¶ä¸”å·²ç»æ˜¯ esmï¼Œé‚£ä¹ˆå¯ä»¥æ’é™¤ä»–ï¼Œè®©æµè§ˆå™¨è‡ªåŠ¨åŠ è½½ä»–ã€‚</p><h2 id="ç¼“å­˜"><a href="#ç¼“å­˜" class="headerlink" title="ç¼“å­˜"></a>ç¼“å­˜</h2><p>åŒ…å«æ–‡ä»¶ç³»ç»Ÿç¼“å­˜å’Œæµè§ˆå™¨ç¼“å­˜<br>vite ä¼šå°†é¢„æ„å»ºçš„ä¾èµ–ç¼“å­˜åˆ°<code>node_modules/.vite</code>.å®ƒæ ¹æ®å‡ ä¸ªæºæ¥å†³å®šæ˜¯å¦é‡æ–°æ‰§è¡Œé¢„æ„å»º</p><ol><li>packgejson ä¸­çš„ dependencies åˆ—è¡¨</li><li>åŒ…ç®¡ç†å™¨çš„ lockfile</li><li>åœ¨ vite.config.js ä¸­ç›¸å…³å­—æ®µé…ç½®è¿‡çš„ï¼ˆæ¯”å¦‚åˆšåˆšè¯´çš„ optimize:inclde/excludeï¼‰</li></ol><p>å¦‚æœæƒ³è¦ vite å¼ºåˆ¶ä¾èµ–é¢„æ„å»ºï¼Œéœ€è¦ä½¿ç”¨<code>--force</code>æ¥å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼Œæˆ–è€…æ‰‹åŠ¨åˆ é™¤<code>node_modules/.vite</code></p><h2 id="æµè§ˆå™¨ç¼“å­˜"><a href="#æµè§ˆå™¨ç¼“å­˜" class="headerlink" title="æµè§ˆå™¨ç¼“å­˜"></a>æµè§ˆå™¨ç¼“å­˜</h2><p>è§£æåçš„ä¾èµ–è¯·æ±‚ä¼šä»¥ http å¤´<code>max-age:31536000 immutable</code>è¿›è¡Œå¼ºç¼“å­˜ï¼Œç”¨æ¥æé«˜å¼€å‘æ—¶çš„é¡µé¢æ€§èƒ½ã€‚ä¸€æ—¦è¢«ç¼“å­˜ï¼Œè¿™äº›è¯·æ±‚å°†æ°¸è¿œä¸ä¼šåˆ°è¾¾å¼€å‘æœåŠ¡å™¨ã€‚å¦‚æœå®‰è£…äº†ä¸åŒç‰ˆæœ¬çš„åˆ™é™„åŠ çš„ç‰ˆæœ¬ query ä¼šè‡ªåŠ¨ä½¿ä»–ä»¬å¤±æ•ˆ(ä¿è¯åªèƒ½æœ‰ä¸€ä¸ªç‰ˆæœ¬)ã€‚å¦‚æœè¦è°ƒè¯•ä¾èµ–ï¼Œå¯ä»¥ä½¿ç”¨ï¼š</p><ol><li>é€šè¿‡æµè§ˆå™¨è°ƒè¯•å·¥å…·çš„ Network é€‰é¡¹å¡æš‚ç”¨ç¼“å­˜</li><li>é‡å¯ vite dev server å¹¶<code>--force</code>å‘½ä»¤ä»¥é‡æ–°è¿›è¡Œä¾èµ–é¢„æ„å»ºã€‚</li><li>é‡è½½é¡µé¢</li></ol><h1 id="é™æ€èµ„æºå¤„ç†"><a href="#é™æ€èµ„æºå¤„ç†" class="headerlink" title="é™æ€èµ„æºå¤„ç†"></a>é™æ€èµ„æºå¤„ç†</h1><h2 id="å°†èµ„æºå¼•å…¥ä¸º-URL"><a href="#å°†èµ„æºå¼•å…¥ä¸º-URL" class="headerlink" title="å°†èµ„æºå¼•å…¥ä¸º URL"></a>å°†èµ„æºå¼•å…¥ä¸º URL</h2><p>æœåŠ¡æ—¶ï¼Œå¼•å…¥ä¸€ä¸ªé™æ€èµ„æºä¼šè¿”å›è§£æåçš„å…¬å…±è·¯å¾„</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> imgUrl <span class="keyword">from</span> <span class="string">&quot;./img.png&quot;</span>;</span><br><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">&quot;hero-img&quot;</span>).src = imgUrl;</span><br></pre></td></tr></table></figure><p>æ¯”å¦‚ imgURL åœ¨å¼€å‘æ—¶ä¼šæ˜¯<code>/img.png</code>ï¼Œç”Ÿäº§æ„å»ºåä¼šæ˜¯<code>/assets/img.2d8efhg.png</code></p><p>è¿™ä¸ªç±»ä¼¼äº webpack çš„ file-loaderï¼Œä½†æ˜¯ä¸ä¸€æ ·çš„ç‚¹åœ¨äºæ—¢å¯ä»¥å¼•å…¥ç»å¯¹å…¬å…±è·¯å¾„ï¼Œä¹Ÿå¯ä»¥å¼•å…¥ç›¸å¯¹è·¯å¾„</p><ul><li><code>url()</code>åœ¨ css ä¸­çš„å¼•ç”¨ä¼šä»¥åŒæ ·æ–¹å¼è¿›è¡Œå¤„ç†ã€‚</li><li>å¦‚æœ <code>vite</code> å¼•ç”¨äº† <code>vue</code> æ’ä»¶ï¼Œ<code>vue sfc</code> æ¨¡æ¿ä¸­çš„èµ„æºéƒ½å°†è‡ªåŠ¨è½¬æ¢ä¸ºå¯¼å…¥</li><li>å¸¸è§çš„å›¾åƒï¼Œåª’ä½“ï¼Œå’Œå­—ä½“æ–‡ä»¶ç±»å‹å°†è¢«è‡ªåŠ¨æ£€æµ‹ã€‚å¯ä»¥ä½¿ç”¨ <code>assetsInclude</code> é€‰é¡¹æ‹“å±•å†…éƒ¨åˆ—è¡¨ã€‚</li><li>å¼•ç”¨çš„èµ„æºä½œä¸ºæ„å»ºèµ„æºå›¾çš„ä¸€éƒ¨åˆ†åŒ…æ‹¬åœ¨å†…ï¼Œå°†ç”Ÿæˆæ•£åˆ—æ–‡ä»¶åï¼Œå¹¶å¯ç”±æ’ä»¶å¤„ç†ä¼˜åŒ–ã€‚</li><li>è¾ƒå°çš„èµ„æºä½“ç§¯ä¸ <code>assetsInlineLimit</code> é€‰é¡¹å€¼å°†ä¼šè¢«å†…è”ä¸º <code>base64URL</code></li></ul><h2 id="æ˜¾å¼-URL-å¼•å…¥"><a href="#æ˜¾å¼-URL-å¼•å…¥" class="headerlink" title="æ˜¾å¼ URL å¼•å…¥"></a>æ˜¾å¼ URL å¼•å…¥</h2><p>æœªè¢«åŒ…å«åœ¨å†…éƒ¨åˆ—è¡¨æˆ– <code>assetsInclude</code> ä¸­çš„èµ„æºï¼Œå¯ä»¥ä½¿ç”¨<code>?url</code>åç¼€æ˜¾å¼å¯¼å…¥ä¸ºä¸€ä¸ª URLã€‚æ¯”å¦‚å¯¼å…¥<code>Houdini Paint Worklets</code> æ—¶ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> workletURL <span class="keyword">from</span> <span class="string">&quot;extra-scalloped-border/worklet.js?url&quot;</span>;</span><br><span class="line">CSS.paintWorklet.addModule(workletURL);</span><br></pre></td></tr></table></figure><h2 id="å°†èµ„æºå¼•å…¥ä¸ºå­—ç¬¦ä¸²"><a href="#å°†èµ„æºå¼•å…¥ä¸ºå­—ç¬¦ä¸²" class="headerlink" title="å°†èµ„æºå¼•å…¥ä¸ºå­—ç¬¦ä¸²"></a>å°†èµ„æºå¼•å…¥ä¸ºå­—ç¬¦ä¸²</h2><p>èµ„æºå¯ä»¥ä½¿ç”¨ ?raw åç¼€å£°æ˜ä½œä¸ºå­—ç¬¦ä¸²å¼•å…¥ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> shaderString <span class="keyword">from</span> <span class="string">&quot;./shader.glsl?raw&quot;</span>;</span><br></pre></td></tr></table></figure><h2 id="å¯¼å…¥è„šæœ¬ä½œä¸º-Worker"><a href="#å¯¼å…¥è„šæœ¬ä½œä¸º-Worker" class="headerlink" title="å¯¼å…¥è„šæœ¬ä½œä¸º Worker"></a>å¯¼å…¥è„šæœ¬ä½œä¸º Worker</h2><p>è„šæœ¬å¯ä»¥é€šè¿‡ <code>?worker</code> æˆ– <code>?sharedworker</code> åç¼€å¯¼å…¥ä¸º web workerã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åœ¨ç”Ÿäº§æ„å»ºä¸­å°†ä¼šåˆ†ç¦»å‡º chunk</span></span><br><span class="line"><span class="keyword">import</span> Worker <span class="keyword">from</span> <span class="string">&quot;./shader.js?worker&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> worker = <span class="keyword">new</span> Worker();</span><br><span class="line"></span><br><span class="line"><span class="comment">// sharedworker</span></span><br><span class="line"><span class="keyword">import</span> SharedWorker <span class="keyword">from</span> <span class="string">&quot;./shader.js?sharedworker&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> sharedWorker = <span class="keyword">new</span> SharedWorker();</span><br><span class="line"></span><br><span class="line"><span class="comment">// å†…è”ä¸º base64 å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="keyword">import</span> InlineWorker <span class="keyword">from</span> <span class="string">&quot;./shader.js?worker&amp;inline&quot;</span>;</span><br></pre></td></tr></table></figure><h2 id="public-ç›®å½•"><a href="#public-ç›®å½•" class="headerlink" title="public ç›®å½•"></a>public ç›®å½•</h2><p>ç‰¹ç‚¹ï¼š</p><ol><li>ä¸ä¼šè¢«æºç å¼•ç”¨ï¼ˆjs æ–‡ä»¶ï¼‰</li><li>å¿…é¡»ä¿æŒæºæ–‡ä»¶åç§°(ä¸è¢« hash)</li><li>æˆ–è€…åªæƒ³è¦å¾—åˆ°å®ƒçš„ URL</li></ol><p>ä¸Šè¿°èµ„æºæ”¾å…¥ public æœ€å¥½ã€‚å¯ä»¥é€šè¿‡<code>/</code>åœ¨å¼€å‘çš„æ—¶å€™ç›´æ¥è®¿é—®åˆ°æ¯”å¦‚<code>public/icon.png =&gt; /icon.png</code></p><p>é»˜è®¤ç›®å½•ï¼š<code>&lt;root&gt;/public</code>,ä½†å¯ä»¥é€šè¿‡<code>publicDir</code>é…ç½®</p><h2 id="new-URL-url-import-meta-url"><a href="#new-URL-url-import-meta-url" class="headerlink" title="new URL(url, import.meta.url)"></a><code>new URL(url, import.meta.url)</code></h2><p><code>import.meta.url</code>æ˜¯ esm çš„åŸç”ŸåŠŸèƒ½ï¼Œå¯ä»¥æš´éœ²å½“å‰æ¨¡å—çš„ urlï¼Œåœ¨ js æ¨¡å—ä¸­å¯ä»¥é€šè¿‡ç›¸å¯¹è·¯å¾„è·å¾—ä¸€ä¸ªå®Œæ•´çš„é™æ€èµ„æº urlã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> imgUrl = <span class="keyword">new</span> URL(<span class="string">&quot;./img.png&quot;</span>, <span class="keyword">import</span>.meta.url).href;</span><br><span class="line"></span><br><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">&quot;hero-img&quot;</span>).src = imgUrl;</span><br></pre></td></tr></table></figure><p>è¿™åœ¨ç°ä»£æµè§ˆå™¨ä¸­èƒ½å¤ŸåŸç”Ÿä½¿ç”¨ - å®é™…ä¸Šï¼ŒVite å¹¶ä¸éœ€è¦åœ¨å¼€å‘é˜¶æ®µå¤„ç†è¿™äº›ä»£ç ï¼</p><p>è¿™ä¸ªæ¨¡å¼åŒæ ·è¿˜å¯ä»¥é€šè¿‡å­—ç¬¦ä¸²æ¨¡æ¿æ”¯æŒåŠ¨æ€ URLï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getImageUrl</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> URL(<span class="string">`./dir/<span class="subst">$&#123;name&#125;</span>.png`</span>, <span class="keyword">import</span>.meta.url).href;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ç”Ÿäº§æ„å»ºæ—¶ï¼ŒVite æ‰ä¼šè¿›è¡Œå¿…è¦çš„è½¬æ¢ä¿è¯ URL åœ¨æ‰“åŒ…å’Œèµ„æºå“ˆå¸Œåä»æŒ‡å‘æ­£ç¡®çš„åœ°å€ã€‚</p><p>æ³¨æ„æ— æ³•åœ¨ ssr ä¸­ä½¿ç”¨ï¼Œå› ä¸ºè¿™ä¸ªæ˜¯ esm çš„æ–¹æ³•ï¼Œä¹Ÿå°±æ„å‘³ç€åœ¨ node å’Œæµè§ˆå™¨æœ‰ä¸åŒçš„è¯­ä¹‰ï¼ŒæœåŠ¡å™¨ä¹Ÿæ²¡åŠæ³•é¢„å…ˆç¡®å®šå®¢æˆ·ç«¯ä¸»æœº url</p><h1 id="æ„å»ºç”Ÿäº§ç‰ˆæœ¬"><a href="#æ„å»ºç”Ÿäº§ç‰ˆæœ¬" class="headerlink" title="æ„å»ºç”Ÿäº§ç‰ˆæœ¬"></a>æ„å»ºç”Ÿäº§ç‰ˆæœ¬</h1><p>å‘½ä»¤ï¼š<code>vite build</code>é»˜è®¤æƒ…å†µä½¿ç”¨<code>&lt;root&gt;/index.html</code>ä½œä¸ºæ„å»ºå…¥å£ã€‚</p><h2 id="æµè§ˆå™¨å…¼å®¹æ€§"><a href="#æµè§ˆå™¨å…¼å®¹æ€§" class="headerlink" title="æµè§ˆå™¨å…¼å®¹æ€§"></a>æµè§ˆå™¨å…¼å®¹æ€§</h2><p>vite çš„ç›®æ ‡æ˜¯æ”¯æŒ esm çš„æµè§ˆå™¨ï¼ŒæŒ‰ç…§æ¡ä»¶è¿›è¡Œ browerslist æŸ¥è¯¢çš„æµè§ˆå™¨</p><p>ä¹Ÿå¯ä»¥æ‰‹åŠ¨é€šè¿‡<code>build.target</code>é…ç½®é¡¹æ„å»ºæŒ‡å®šç›®æ ‡ã€‚æœ€ä½æ”¯æŒ es2015</p><p>é»˜è®¤æƒ…å†µä¸‹ vite ä¸åŒ…å«ä»»ä½• polyfillï¼Œåªè´Ÿè´£è½¬ä¹‰ï¼Œè¦ä½¿ç”¨ç›¸å…³çš„æœåŠ¡è¿›è¡Œ polyfill ç”Ÿæˆï¼Œ<code>Polyfill.io</code></p><p>ä¼ ç»Ÿæµè§ˆå™¨éœ€è¦æ’ä»¶<code>@vitejs/plugin-legacy</code>çš„æ”¯æŒï¼Œå®ƒå°†ä¼šè‡ªåŠ¨ç”Ÿæˆä¼ ç»Ÿç‰ˆæœ¬çš„ chunk ä¸å…¶å¯¹åº” es æ–¹é¢è¯­è¨€çš„ polyfillã€‚</p><h2 id="å…¬å…±åŸºç¡€è·¯å¾„"><a href="#å…¬å…±åŸºç¡€è·¯å¾„" class="headerlink" title="å…¬å…±åŸºç¡€è·¯å¾„"></a>å…¬å…±åŸºç¡€è·¯å¾„</h2><p>é…ç½® base é¡¹æ‰€æœ‰çš„èµ„æºä¼šæŒ‰æ­¤è·¯å¾„é‡å†™ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å‘½ä»¤è¡Œï¼š<code>vite build --base=/my/public/path/</code></p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/viteå®˜æ–¹æ–‡æ¡£æµ“ç¼©.png" alt=""></p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="Webpackç³»åˆ—" scheme="https://zlinni.github.io/categories/Webpack%E7%B3%BB%E5%88%97/"/>
    
    
    <category term="å‰ç«¯" scheme="https://zlinni.github.io/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="Webpack" scheme="https://zlinni.github.io/tags/Webpack/"/>
    
  </entry>
  
  <entry>
    <title>å‰ç«¯å·¥ç¨‹åŒ–â‘¢BundlessåŸºç¡€è®¾æ–½å»ºè®¾</title>
    <link href="https://zlinni.github.io/posts/351158764/"/>
    <id>https://zlinni.github.io/posts/351158764/</id>
    <published>2022-08-02T06:14:30.000Z</published>
    <updated>2022-08-02T08:26:26.799Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><div class="note primary flat"><p>æœ¬æ–‡å°†ç®€è¿°å‰ç«¯é€šè¿‡ä¸æ‰“åŒ…çš„æ–¹å¼å°†ä»£ç è¿è¡Œåœ¨æµè§ˆå™¨ä¸Šçš„å‡ ç§æ–¹å¼</p></div><h1 id="åŸç†ä¸æµè§ˆå™¨ä¸­çš„-ESM"><a href="#åŸç†ä¸æµè§ˆå™¨ä¸­çš„-ESM" class="headerlink" title="åŸç†ä¸æµè§ˆå™¨ä¸­çš„ ESM"></a>åŸç†ä¸æµè§ˆå™¨ä¸­çš„ ESM</h1><p>å½“ä¸‹ï¼Œä¸»æµæµè§ˆå™¨å·²ç»é€æ­¥æ”¯æŒ js åŸç”Ÿæ¨¡å—çš„å¯¼å…¥ï¼Œå‡ºç°äº†å¾ˆå¤š bundless çš„æ„å»ºæ–¹æ¡ˆï¼Œæ¯”å¦‚ viteï¼Œsnowpack ç­‰ã€‚åŸç†å°±æ˜¯åˆ©ç”¨æµè§ˆå™¨å¯¹äºåŸç”Ÿ esm çš„æ”¯æŒï¼Œè¿›è¡Œä»£ç çš„å¼€å‘å’Œéƒ¨ç½²ã€‚</p><h2 id="Native-Import-import-from-URL"><a href="#Native-Import-import-from-URL" class="headerlink" title="Native Import: import from URL"></a>Native Import: import from URL</h2><p>é€šè¿‡<code>script[type=module]</code>ï¼Œå¯ä»¥ç›´æ¥åœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨åŸç”Ÿ ESMï¼Œä½¿å¾—å‰ç«¯ä¸æ‰“åŒ…æˆä¸ºå¯èƒ½</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;module&quot;</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> lodash <span class="keyword">from</span> <span class="string">&quot;http://cdn.skypack.dev/lodash&quot;</span>;</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç”±äºå‰ç«¯è¿è¡Œåœ¨æµè§ˆå™¨ä¸­ï¼Œæ‰€ä»¥ä»–ä¹Ÿåªèƒ½ä» URL ä¸­å¼•å…¥ package</p><ol><li>ç»å¯¹è·¯å¾„ï¼š<code>http://cdn.skypack.dev/lodash</code></li><li>ç›¸å¯¹è·¯å¾„ï¼š<code>./lib.js</code></li></ol><p>ç°åœ¨æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°ï¼ŒæŠŠä¸‹é¢çš„ä»£ç ç²˜è´´åœ¨æ§åˆ¶å°ä¸­ï¼Œå°±å¯ä»¥è°ƒè¯• loadash äº†ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt; lodash = <span class="keyword">await</span> <span class="keyword">import</span>(<span class="string">&#x27;https://cdn.skypack.dev/lodash&#x27;</span>)</span><br><span class="line"></span><br><span class="line">&gt; lodash.get(&#123; <span class="attr">a</span>: <span class="number">3</span> &#125;, <span class="string">&#x27;a&#x27;</span>)</span><br></pre></td></tr></table></figure><h2 id="Import-Map"><a href="#Import-Map" class="headerlink" title="Import Map"></a>Import Map</h2><p>ä¸è¿‡ http Import æ¯æ¬¡éƒ½è¦å¯¼å…¥å®Œå…¨çš„ URLï¼Œè¿™ä¸ªè‚¯å®šæ˜¯ä¸å¤ªåˆç†çš„ï¼Œç›¸æ¯”ä»¥å‰çš„è£¸å¯¼å…¥ï¼Œå¾ˆä¸æ–¹ä¾¿,å¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> lodash <span class="keyword">from</span> <span class="string">&quot;lodash&quot;</span>;</span><br></pre></td></tr></table></figure><p>ä»–ä¸åŒäº nodejs ä¾èµ–ç³»ç»Ÿæ–‡ä»¶ç³»ç»Ÿï¼Œå±‚å±‚å¯»æ‰¾<code>node_modules</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/home/app/packages/project-a/node_modules/lodash/index.js</span><br><span class="line">/home/app/packages/node_modules/lodash/index.js</span><br><span class="line">/home/app/node_modules/lodash/index.js</span><br><span class="line">/home/node_modules/lodash/index.js</span><br></pre></td></tr></table></figure><p>åœ¨ esm ä¸­ï¼Œå¯ä»¥é€šè¿‡ ImportMap ä½¿å¾—è£¸å¯¼å…¥æˆä¸ºå¯æ­£å¸¸å·¥ä½œ</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;importmap&quot;</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">  &#123;</span></span><br><span class="line"><span class="javascript">    <span class="string">&quot;imports&quot;</span>: &#123;</span></span><br><span class="line"><span class="javascript">      <span class="string">&quot;lodash&quot;</span>: <span class="string">&quot;http://cdn.skypack.dev/lodash&quot;</span>,</span></span><br><span class="line"><span class="javascript">      <span class="string">&quot;ms&quot;</span>: <span class="string">&quot;https://cdn.skypack.dev/ms&quot;</span></span></span><br><span class="line"><span class="javascript">    &#125;</span></span><br><span class="line"><span class="javascript">  &#125;</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ­¤æ—¶å¯ä»¥ä¸ä»¥å‰åŒæ ·çš„æ–¹å¼è¿›è¡Œæ¨¡å—å¯¼å…¥</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> loadash <span class="keyword">from</span> <span class="string">&#x27;loadash&#x27;</span></span><br><span class="line"><span class="keyword">import</span>(<span class="string">&#x27;loadash&#x27;</span>).then(<span class="function"><span class="params">_</span>=&gt;</span>...)</span><br></pre></td></tr></table></figure><p>é‚£ä¹ˆé€šè¿‡è£¸å¯¼å…¥å¦‚ä½•å¯¼å…¥å­è·¯å¾„å‘¢ï¼Ÿ</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;importmap&quot;</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">  &#123;</span></span><br><span class="line"><span class="javascript">    <span class="string">&quot;imports&quot;</span>: &#123;</span></span><br><span class="line"><span class="javascript">      <span class="string">&quot;lodash&quot;</span>: <span class="string">&quot;https://cdn.skypack.dev/lodash&quot;</span>,</span></span><br><span class="line"><span class="javascript">      <span class="string">&quot;lodash/&quot;</span>: <span class="string">&quot;https://cdn.skypack.dev/lodash/&quot;</span></span></span><br><span class="line"><span class="javascript">    &#125;</span></span><br><span class="line"><span class="javascript">  &#125;</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;module&quot;</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> get <span class="keyword">from</span> <span class="string">&quot;lodash/get.js&quot;</span>;</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="Import-Assertion"><a href="#Import-Assertion" class="headerlink" title="Import Assertion"></a>Import Assertion</h2><p>é€šè¿‡<code>script[type=module]</code>ï¼Œä¸ä»…å¯ä»¥å¼•å…¥ js èµ„æºï¼Œç”šè‡³å¯ä»¥å¼•å…¥ json/css èµ„æºï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;module&quot;</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> data <span class="keyword">from</span> <span class="string">&quot;./xxx.json&quot;</span> assert &#123; <span class="attr">type</span>: <span class="string">&quot;json&quot;</span> &#125;;</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="å¦‚ä½•å°†-CJS-è½¬åŒ–ä¸º-ESM"><a href="#å¦‚ä½•å°†-CJS-è½¬åŒ–ä¸º-ESM" class="headerlink" title="å¦‚ä½•å°† CJS è½¬åŒ–ä¸º ESM"></a>å¦‚ä½•å°† CJS è½¬åŒ–ä¸º ESM</h1><p>Bundless çš„å…´èµ·ï¼Œè¦æ±‚æ‰€æœ‰çš„æ¨¡å—éƒ½æ˜¯ ESM æ¨¡å—æ ¼å¼ã€‚</p><p>ç›®å‰ç¤¾åŒºæœ‰ä¸€éƒ¨åˆ†æ¨¡å—åŒæ—¶æ”¯æŒ ESM å’Œ CJSï¼Œä½†ä»æœ‰è®¸å¤šæ¨¡å—ä»…æ”¯æŒ CJS/UMD,å› æ­¤å°† CJS è½¬ä¸º ESM æ˜¯å…¨éƒ¨æ¨¡å— ESM åŒ–çš„è¿‡åº¦é˜¶æ®µ</p><h2 id="ESM-ä¸-CJS-çš„å¯¼å…¥å¯¼å‡ºä¸åŒ"><a href="#ESM-ä¸-CJS-çš„å¯¼å…¥å¯¼å‡ºä¸åŒ" class="headerlink" title="ESM ä¸ CJS çš„å¯¼å…¥å¯¼å‡ºä¸åŒ"></a>ESM ä¸ CJS çš„å¯¼å…¥å¯¼å‡ºä¸åŒ</h2><p>åœ¨ ESM ä¸­ï¼Œå¯¼å…¥å¯¼å‡ºæœ‰ä¸¤ç§æ–¹å¼</p><ol><li>å…·åå¯¼å‡ºå¯¼å…¥</li><li>é»˜è®¤å¯¼å‡ºå¯¼å…¥</li></ol><p>eg</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å…·åå¯¼å…¥å¯¼å‡º</span></span><br><span class="line"><span class="keyword">export</span> &#123; sum &#125;;</span><br><span class="line"><span class="keyword">import</span> &#123; sum &#125; <span class="keyword">from</span> <span class="string">&quot;sum&quot;</span>;</span><br><span class="line"><span class="comment">// é»˜è®¤å¯¼å…¥å¯¼å‡º</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> sum;</span><br><span class="line"><span class="keyword">import</span> sum <span class="keyword">from</span> <span class="string">&quot;sum&quot;</span>;</span><br></pre></td></tr></table></figure><p>è€Œåœ¨ CJS ä¸­,å¯¼å…¥å¯¼å‡ºçš„æ–¹æ³•åªæœ‰ä¸€ç§</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = sum;</span><br></pre></td></tr></table></figure><p>è€Œæ‰€è°“çš„ exports ä»…ä»…æ˜¯ module.exports çš„å¼•ç”¨è€Œå·²</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">exports</span> = <span class="built_in">module</span>.exports;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä»¥ä¸‹ä¸¤ä¸ªç­‰ä»·</span></span><br><span class="line"><span class="built_in">exports</span>.a = <span class="number">3</span>;</span><br><span class="line"><span class="built_in">module</span>.exports.a = <span class="number">3</span>;</span><br></pre></td></tr></table></figure><p>ä¸‹åˆ—ä¸¾ä¸¤ä¸ªä¾‹å­,æ¥éªŒè¯ä»–ä¿©çš„åŒºåˆ«</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// hello.js</span></span><br><span class="line"><span class="built_in">exports</span>.a = <span class="number">3</span>;</span><br><span class="line"><span class="built_in">module</span>.exports.b = <span class="number">4</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// index.js</span></span><br><span class="line"><span class="keyword">const</span> hello = <span class="built_in">require</span>(<span class="string">&quot;./hello&quot;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(hello);</span><br><span class="line"><span class="comment">// è¾“å‡ºæ˜¯&#123;a:3,b:4&#125;</span></span><br></pre></td></tr></table></figure><p>ç¬¬äºŒ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// hello.js</span></span><br><span class="line"><span class="built_in">exports</span>.a = <span class="number">3</span>;</span><br><span class="line"><span class="built_in">module</span>.exports = &#123; <span class="attr">b</span>: <span class="number">4</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// index.js</span></span><br><span class="line"><span class="keyword">const</span> hello = <span class="built_in">require</span>(<span class="string">&quot;./hello&quot;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(hello);</span><br><span class="line"><span class="comment">// è¾“å‡ºæ˜¯&#123;b:4&#125;</span></span><br></pre></td></tr></table></figure><p>æ­£å› ä¸ºå®ƒä»¬ä¸¤è€…çš„ä¸åŒ,æ‰€ä»¥åœ¨ä¸¤è€…è½¬æ¢çš„æ—¶å€™æœ‰ä¸€äº›å…¼å®¹é—®é¢˜éœ€è¦å»è§£å†³.</p><h2 id="exports-çš„è½¬åŒ–"><a href="#exports-çš„è½¬åŒ–" class="headerlink" title="exports çš„è½¬åŒ–"></a>exports çš„è½¬åŒ–</h2><p>æ­£å› ä¸ºä¸¤è€…ä¸åŒ,æ‰€ä»¥å½“ exports è½¬åŒ–çš„æ—¶å€™,æ—¢è¦è½¬æ¢ä¸º<code>exports&#123;&#125;</code>åˆè¦è½¬åŒ–ä¸º<code>export default&#123;&#125;</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¾“å…¥</span></span><br><span class="line"><span class="built_in">exports</span>.a = <span class="number">3</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è½¬åŒ–</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> a = <span class="number">3</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123; a &#125;;</span><br></pre></td></tr></table></figure><p>å¦‚æœåªè½¬åŒ–ä¸ºå…·åå¯¼å‡ºä¸è½¬åŒ–ä¸ºé»˜è®¤å¯¼å‡ºä¼šå‘ç”Ÿä»€ä¹ˆ?<br>eg</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Input: CJS</span></span><br><span class="line"><span class="built_in">exports</span>.a = <span class="number">3</span>; <span class="comment">// index.cjs =&gt;æä¾›&#123;a:3&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> o = <span class="built_in">require</span>(<span class="string">&quot;.&quot;</span>); <span class="comment">// foo.cjs</span></span><br><span class="line"><span class="built_in">console</span>.log(o.a); <span class="comment">// foo.cjs è¾“å‡º3</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Output: ESM</span></span><br><span class="line"><span class="comment">// è¿™æ˜¯æœ‰é—®é¢˜çš„é”™è¯¯è½¬æ¢ç¤ºä¾‹:</span></span><br><span class="line"><span class="comment">// æ­¤å¤„ a åº”è¯¥å† export default &#123; a &#125; ä¸€æ¬¡</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> a = <span class="number">3</span>; <span class="comment">// index.mjs æä¾›3</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> o <span class="keyword">from</span> <span class="string">&quot;.&quot;</span>; <span class="comment">// foo.mjs è·å¾—3</span></span><br><span class="line"><span class="built_in">console</span>.log(o.a); <span class="comment">// foo.mjs å‡ºå¤§é—®é¢˜ 3ä¸æ˜¯å¯¹è±¡</span></span><br></pre></td></tr></table></figure><h2 id="module-exportsè½¬åŒ–"><a href="#module-exportsè½¬åŒ–" class="headerlink" title="module.exportsè½¬åŒ–"></a><code>module.exports</code>è½¬åŒ–</h2><p>å¯¹äº<code>module.exports</code>,æˆ‘ä»¬å¯ä»¥éå†å…¶ä¸­çš„ key,é€šè¿‡ ast,å°† key è½¬åŒ–ä¸ºå…·åå¯¼å‡º,å°†<code>module.exports</code>è½¬åŒ–ä¸ºé»˜è®¤å¯¼å‡º</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¾“å…¥</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="attr">a</span>: <span class="number">3</span>,</span><br><span class="line">  <span class="attr">b</span>: <span class="number">4</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾“å‡º</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">a</span>: <span class="number">3</span>,</span><br><span class="line">  <span class="attr">b</span>: <span class="number">4</span>,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> a = <span class="number">3</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> b = <span class="number">4</span>;</span><br></pre></td></tr></table></figure><p>å¦‚æœ<code>module.exports</code>å¯¼å‡ºçš„æ˜¯å‡½æ•°è¯¥å¦‚ä½•å¤„ç†? ç‰¹åˆ«æ˜¯<code>exports</code>å’Œ<code>module.exports</code>çš„ç¨‹åºé€»è¾‘æ··åˆåœ¨ä¸€èµ·?</p><p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªæ­£ç¡®çš„è½¬åŒ–ç»“æœ:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¾“å…¥</span></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function">()=&gt;</span>&#123;&#125;;</span><br><span class="line"><span class="keyword">export</span>.a = <span class="number">3</span>;</span><br><span class="line"><span class="keyword">export</span>.b = <span class="number">4</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾“å‡º</span></span><br><span class="line"><span class="keyword">const</span> sum = <span class="function">()=&gt;</span>&#123;&#125;;</span><br><span class="line">sum.a = <span class="number">3</span>;</span><br><span class="line">sum.b = <span class="number">4</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> a = <span class="number">3</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> b = <span class="number">4</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> = sum;</span><br></pre></td></tr></table></figure></p><p>ä¹Ÿå¯ä»¥è¿™ä¹ˆå¤„ç†:å°†<code>module.exports</code>ä¸<code>exports</code>çš„ä»£ç ä½¿ç”¨å‡½æ•°åŒ…è£¹èµ·æ¥,æ­¤æ—¶æˆ‘ä»¬æ— éœ€å…³å¿ƒå…¶ä¸­çš„é€»è¾‘ç»†èŠ‚.</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> esm$<span class="number">1</span> = &#123; <span class="attr">export</span>:&#123;&#125; &#125;;</span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"><span class="built_in">module</span>,<span class="built_in">exports</span></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">module</span>.exports = <span class="function">()=&gt;</span>&#123;&#125;;</span><br><span class="line">    <span class="built_in">exports</span>.a = <span class="number">3</span>;</span><br><span class="line">    <span class="built_in">exports</span>.b = <span class="number">4</span>;</span><br><span class="line">&#125;)(esm$<span class="number">1</span>,esm$<span class="number">1.</span><span class="built_in">exports</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> esm = esm$<span class="number">1.</span><span class="built_in">exports</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123; esm <span class="keyword">as</span> <span class="keyword">default</span> &#125;</span><br></pre></td></tr></table></figure><h2 id="ä¸€äº›å¤æ‚çš„è½¬æ¢"><a href="#ä¸€äº›å¤æ‚çš„è½¬æ¢" class="headerlink" title="ä¸€äº›å¤æ‚çš„è½¬æ¢"></a>ä¸€äº›å¤æ‚çš„è½¬æ¢</h2><p>ESMä¸CJSä¸ä»…ä»…æ˜¯è¯­æ³•å±‚æ¬¡ä¸Šçš„ä¸åŒ,æœ¬èº«çš„æ€ç»´é€»è¾‘å°±å®Œå…¨ä¸ä¸€æ ·.æ‰€ä»¥æœ‰ä¸€äº›è¾ƒä¸ºå¤æ‚çš„è½¬æ¢,ä¸åšè®¨è®º.<br>æ¯”å¦‚:</p><ol><li>å¦‚ä½•å¤„ç†<code>_dirname</code>;</li><li>å¦‚ä½•å¤„ç†<code>require(dynamicString)</code>;</li><li>å¦‚ä½•å¤„ç†cjsçš„ç¼–ç¨‹é€»è¾‘</li></ol><p>ä»¥ä¸‹ä»£ç æ¶‰åŠåˆ°ç¼–ç¨‹é€»è¾‘,ç”±äº<code>exports</code>æ˜¯ä¸€ä¸ªåŠ¨æ€çš„jså¯¹è±¡,è€Œä»–è‡ªç„¶å¯ä»¥ä½¿ç”¨ä¸¤æ¬¡,é‚£åº”è¯¥å¦‚ä½•æ­£ç¡®çš„è¢«ç¼–ä¸ºesmå‘¢?<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// input: index.cjs</span></span><br><span class="line"><span class="built_in">exports</span>.sum = <span class="number">0</span>;</span><br><span class="line"><span class="built_in">Promise</span>.resolve().then(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">exports</span>.sum = <span class="number">100</span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p><p>ä»¥ä¸‹æ˜¯ä¸€ç§ä¸ä¼šå‡ºç°é—®é¢˜çš„è½¬æ¢ç»“æœ<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> _default = &#123;&#125;;</span><br><span class="line"><span class="keyword">let</span> sum = (_default.sum = <span class="number">0</span>);</span><br><span class="line"><span class="built_in">Promise</span>.resolve().then(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    sum = _default.sum = <span class="number">100</span>;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> _default;</span><br><span class="line"><span class="keyword">export</span> &#123;sum&#125;</span><br></pre></td></tr></table></figure></p><h2 id="CJS-to-ESMçš„æ„å»ºå·¥å…·"><a href="#CJS-to-ESMçš„æ„å»ºå·¥å…·" class="headerlink" title="CJS to ESMçš„æ„å»ºå·¥å…·"></a>CJS to ESMçš„æ„å»ºå·¥å…·</h2><p>CJSå‘ESMè½¬æ¢,è‡ªç„¶æœ‰æ„å»ºå·¥å…·çš„å‚ä¸.æ¯”å¦‚:<br><code>@rollup/plugin-commonjs</code></p><p>ç”šè‡³æŠŠä¸€äº› CommonJS åº“è½¬åŒ–ä¸º ESMï¼Œå¹¶ä¸”ç½®äº CDN ä¸­ï¼Œä½¿å¾—æˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œè€Œæ— éœ€æ„å»ºå·¥å…·å‚ä¸</p><ul><li><code>https://cdn.skypack.dev/(opens new window)</code></li><li><code>https://jspm.org/</code></li></ul><h1 id="Bundlessçš„ä¼˜åŠ¿ä¸ä¸è¶³"><a href="#Bundlessçš„ä¼˜åŠ¿ä¸ä¸è¶³" class="headerlink" title="Bundlessçš„ä¼˜åŠ¿ä¸ä¸è¶³"></a>Bundlessçš„ä¼˜åŠ¿ä¸ä¸è¶³</h1><p>ä¼˜åŠ¿åœ¨äº ä¸éœ€è¦å¤„ç†æ‰“åŒ…çš„é—®é¢˜,ç›´æ¥æ”¾åˆ°æµè§ˆå™¨ä¸Šé¢ä½¿ç”¨.<br>ä¸è¶³åœ¨äº ç°åœ¨è¿˜æœ‰å¾ˆå¤šæ¨¡å—æ²¡æœ‰æ”¯æŒesm,æ‰€ä»¥è½¬æ¢cjsåˆ°esmæ˜¯ä¸ªé—®é¢˜</p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/BundlessåŸºç¡€è®¾æ–½å»ºè®¾.png" alt=""></p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="Webpackç³»åˆ—" scheme="https://zlinni.github.io/categories/Webpack%E7%B3%BB%E5%88%97/"/>
    
    
    <category term="å‰ç«¯" scheme="https://zlinni.github.io/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="Webpack" scheme="https://zlinni.github.io/tags/Webpack/"/>
    
  </entry>
  
  <entry>
    <title>å‰ç«¯å·¥ç¨‹åŒ–â‘¡æ‰“åŒ…ä½“ç§¯ä¼˜åŒ–</title>
    <link href="https://zlinni.github.io/posts/1572391089/"/>
    <id>https://zlinni.github.io/posts/1572391089/</id>
    <published>2022-08-02T02:42:19.000Z</published>
    <updated>2022-08-02T08:26:26.794Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><div class="note primary flat"><p>æœ¬ç¯‡è®²è¿° webpack æ‰“åŒ…ä½“ç§¯ä¼˜åŒ–çš„æ€è·¯å’Œæ–¹å‘</p></div><h1 id="å¦‚ä½•åˆ†ææ‰“åŒ…ä½“ç§¯"><a href="#å¦‚ä½•åˆ†ææ‰“åŒ…ä½“ç§¯" class="headerlink" title="å¦‚ä½•åˆ†ææ‰“åŒ…ä½“ç§¯"></a>å¦‚ä½•åˆ†ææ‰“åŒ…ä½“ç§¯</h1><p>åšè¿‡ç¬¬ä¸‰æ–¹ä¾èµ– CDN å¼•å…¥çš„è¯ï¼Œåº”è¯¥éƒ½äº†è§£åˆ°éœ€è¦ä½¿ç”¨<code>webpack-bundle-analyzer</code>åˆ†ææ‰“åŒ…åçš„ä½“ç§¯ã€‚</p><p>åŸç†å°±æ˜¯ webpack æ‰“åŒ…å Stats æ•°æ®è¿›è¡Œåˆ†æã€‚åœ¨ webpack compiler çš„ done hook è¿›è¡Œå¤„ç†ã€‚è§æºç ï¼›</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">compiler.hooks.done.tapAsync(<span class="string">&quot;webpack-bundle-analyzer&quot;</span>, <span class="function">(<span class="params">stats</span>) =&gt;</span> &#123;&#125;);</span><br></pre></td></tr></table></figure><p>statsæ•°æ®ï¼šä¸€ä¸ªjsonæ–‡ä»¶ï¼ŒåŒ…å«äº†æ¨¡å—çš„ç»Ÿè®¡ä¿¡æ¯ï¼Œç”¨cliå‘½ä»¤ç”Ÿæˆ<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220802134913.png" alt=""></p><p>åœ¨é»˜è®¤é…ç½®ä¸‹ï¼Œ<code>webpack-bundle-analyzer</code>(opens new window)å°†ä¼šå¯åŠ¨æœåŠ¡æ‰“å¼€ä¸€ä¸ªå„ä¸ª chunk ä¸‹å„ä¸ª module å ç”¨ä½“ç§¯çš„å¯è§†åŒ–å›¾ã€‚<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220802104855.png" alt=""></p><p>å¯ä»¥é€šè¿‡ä»–æ‰¾åˆ°åœ¨æ‰“åŒ…ä½“ç§¯ä¸­æœ€å¤§çš„æ¨¡å—å¹¶è¿›è¡Œä¼˜åŒ–ã€‚</p><p>åœ¨æŸ¥çœ‹é¡µé¢æœ‰ä¸‰ä¸ªé€‰é¡¹ï¼š</p><ol><li>statï¼šæ¯ä¸ªæ¨¡å—çš„åŸå§‹ä½“ç§¯ã€‚</li><li>parsedï¼šæ¯ä¸ªæ¨¡å—ç»è¿‡ webpack æ‰“åŒ…å¤„ç†åçš„ä½“ç§¯ï¼Œæ¯”å¦‚ terser ç­‰åšäº†å‹ç¼©ï¼Œå°±ä¼šæ˜¾ç¤ºåœ¨ä¸Šé¢ã€‚</li><li>gzip:ç»è¿‡ gzip å‹ç¼©åçš„ä½“ç§¯ã€‚</li></ol><h2 id="analyze"><a href="#analyze" class="headerlink" title="analyze"></a>analyze</h2><p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œå¾€å¾€é€šè¿‡ç¯å¢ƒå˜é‡ analyze é…ç½®è¯¥æ’ä»¶ï¼Œcode å¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> webpack = <span class="built_in">require</span>(<span class="string">&quot;webpack&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> BundleAnalyzerPlugin =</span><br><span class="line">  <span class="built_in">require</span>(<span class="string">&quot;webpack-bundle-analyzer&quot;</span>).BundleAnalyzerPlugin;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1. BundleAnalyzerPluginæ˜¯å¦‚ä½•å·¥ä½œçš„?</span></span><br><span class="line"><span class="comment">// 2. stat parsed gzipåˆ†åˆ«æ˜¯ä½•æ„ä¹‰</span></span><br><span class="line"><span class="comment">// 3. terserPlugin å¯¹æ­¤ç»“æœæœ‰å½±å“å—</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> webpack(&#123;</span><br><span class="line">    <span class="attr">entry</span>: <span class="string">&quot;./index.js&quot;</span>,</span><br><span class="line">    <span class="attr">mode</span>: <span class="string">&quot;none&quot;</span>,</span><br><span class="line">    <span class="attr">plugins</span>: [process.env.ANALYZE &amp;&amp; <span class="keyword">new</span> BundleAnalyzerPlugin()],</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">f1().run(<span class="function">(<span class="params">err, stat</span>) =&gt;</span> &#123;&#125;);</span><br></pre></td></tr></table></figure><p>åœ¨æ‰“åŒ…æ—¶ï¼Œé€šè¿‡åˆ¶å®šç¯å¢ƒå˜é‡å³å¯åˆ†ææ‰“åŒ…ä½“ç§¯ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ANALYZE=<span class="literal">true</span> npm run build</span><br></pre></td></tr></table></figure><h1 id="js-å‹ç¼©"><a href="#js-å‹ç¼©" class="headerlink" title="js å‹ç¼©"></a>js å‹ç¼©</h1><p>é€šè¿‡ ast åˆ†æï¼Œæ ¹æ®é€‰é¡¹é…ç½®ä¸€äº›ç­–ç•¥ï¼Œæ¥ç”Ÿæˆä¸€é¢—é¢—ç²’æ›´å°ä½“ç§¯çš„ AST å¹¶ç”Ÿæˆä»£ç </p><p>ç›®å‰å‰ç«¯å·¥ç¨‹åŒ–ä¸­ä½¿ç”¨ terser å’Œ swc è¿›è¡Œ js ä»£ç å‹ç¼©ï¼Œå®ƒä»¬æ‹¥æœ‰ç›¸åŒçš„ api</p><p>å¸¸è§çš„å‹ç¼© ast çš„å‡ ç§æ–¹æ¡ˆå¦‚ä¸‹ï¼š</p><h2 id="å»é™¤å¤šä½™å­—ç¬¦ï¼Œç©ºæ ¼ï¼Œæ¢è¡Œä»¥åŠæ³¨é‡Š"><a href="#å»é™¤å¤šä½™å­—ç¬¦ï¼Œç©ºæ ¼ï¼Œæ¢è¡Œä»¥åŠæ³¨é‡Š" class="headerlink" title="å»é™¤å¤šä½™å­—ç¬¦ï¼Œç©ºæ ¼ï¼Œæ¢è¡Œä»¥åŠæ³¨é‡Š"></a>å»é™¤å¤šä½™å­—ç¬¦ï¼Œç©ºæ ¼ï¼Œæ¢è¡Œä»¥åŠæ³¨é‡Š</h2><p>code</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> x + y;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶è¿™ä¸ªæ–‡ä»¶å¤§å°æ˜¯ 62kbï¼Œä¸€èˆ¬æ¥è¯´ä¸­æ–‡ä¼šå ç”¨æ›´å¤šçš„ç©ºé—´ã€‚</p><p>å¤šä½™çš„ç©ºç™½å­—ç¬¦ä¼šå ç”¨å¤§é‡çš„ä½“ç§¯ï¼Œå¦‚ç©ºæ ¼ï¼Œæ¢è¡Œç¬¦ï¼Œå¦å¤–æ³¨é‡Šä¹Ÿä¼šå ç”¨æ–‡ä»¶ä½“ç§¯ã€‚å½“æˆ‘ä»¬æŠŠæ‰€æœ‰ç©ºç™½å’Œæ³¨é‡Šéƒ½å»æ‰ä¹‹åï¼Œä»£ç ä½“ç§¯å‡å°åˆ° 30kbï¼Œå¦‚ä¸‹</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸è¿‡æ›¿æ¢æ‰å¤šä½™çš„å­—ç¬¦ä¼šæœ‰ä»€ä¹ˆå½±å“å‘¢ï¼Ÿ</p><p>å…¶å®æœ‰å½±å“çš„ï¼Œæ¯”å¦‚ä»£ç å‹ç¼©åˆ°ä¸€è¡Œçš„æ—¶å€™è¦æ³¨æ„è¡Œå°¾çš„åˆ†å·ã€‚</p><h2 id="å‹ç¼©å˜é‡åï¼Œå‡½æ•°åï¼Œä»¥åŠå±æ€§å"><a href="#å‹ç¼©å˜é‡åï¼Œå‡½æ•°åï¼Œä»¥åŠå±æ€§å" class="headerlink" title="å‹ç¼©å˜é‡åï¼Œå‡½æ•°åï¼Œä»¥åŠå±æ€§å"></a>å‹ç¼©å˜é‡åï¼Œå‡½æ•°åï¼Œä»¥åŠå±æ€§å</h2><p>code</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">first, second</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> first + second;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶æˆ‘ä»¬å¯ä»¥å¾ˆæ˜æ˜¾çš„çŸ¥é“è¿™ä¸¤ä¸ªå˜é‡åªåœ¨ sum çš„ä½œç”¨åŸŸäº§ç”Ÿå½±å“ï¼Œæ‰€ä»¥ä»–ä»¬çš„å˜é‡åå…¶å®å¯ä»¥æ›´çŸ­ã€‚</p><p>ä¸ä»…å¦‚æ­¤ï¼Œå¦‚æœ sum å‡½æ•°è¿˜æ˜¯åœ¨ä¸€ä¸ª module ä¸­ä¸è¢«å¯¼å‡ºï¼Œé‚£ä¹ˆ sum è¿™ä¸ªå‡½æ•°åä¹Ÿå¯ä»¥æ›´çŸ­ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å‹ç¼©: ç¼©çŸ­å˜é‡å</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> x + y;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å†å‹ç¼©: å»é™¤ç©ºä½™å­—ç¬¦</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">s</span>(<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> x + y;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ä»¥ä¸Šçš„ç¤ºä¾‹ä¸­ï¼Œå½“ä»£ç å®Œæˆå‹ç¼©çš„æ—¶å€™ï¼Œå…¶å®ä»£ç çš„æ··æ·†ä¹Ÿé¡ºå¸¦å®Œæˆã€‚ä½†æ­¤æ—¶ç¼©çŸ­å˜é‡çš„å‘½åéœ€è¦åœ¨ ast ä¸­æ”¯æŒï¼Œä¸è‡³äºåœ¨ä½œç”¨åŸŸä¸­é€ æˆå‘½åå†²çªã€‚</p><h2 id="è§£æç¨‹åºé€»è¾‘ï¼Œåˆå¹¶å£°æ˜ä»¥åŠå¸ƒå°”å€¼ç®€åŒ–"><a href="#è§£æç¨‹åºé€»è¾‘ï¼Œåˆå¹¶å£°æ˜ä»¥åŠå¸ƒå°”å€¼ç®€åŒ–" class="headerlink" title="è§£æç¨‹åºé€»è¾‘ï¼Œåˆå¹¶å£°æ˜ä»¥åŠå¸ƒå°”å€¼ç®€åŒ–"></a>è§£æç¨‹åºé€»è¾‘ï¼Œåˆå¹¶å£°æ˜ä»¥åŠå¸ƒå°”å€¼ç®€åŒ–</h2><p>åˆå¹¶å£°æ˜çš„ä¾‹å­ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> name = <span class="string">&quot;jojo&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> age = <span class="number">18</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‹ç¼©å=&gt;</span></span><br><span class="line"><span class="keyword">const</span> name = <span class="string">&quot;jojo&quot;</span>,</span><br><span class="line">  age = <span class="number">18</span>;</span><br></pre></td></tr></table></figure><p>å¸ƒå°”å€¼ç®€åŒ–çš„ä¾‹å­</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">!b &amp;&amp; !c &amp;&amp; !d &amp;&amp; !e;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‹ç¼©å=&gt;</span></span><br><span class="line">!(b || c || d || e);</span><br></pre></td></tr></table></figure><h2 id="è§£æç¨‹åºé€»è¾‘ï¼šç¼–è¯‘é¢„è¿ç®—"><a href="#è§£æç¨‹åºé€»è¾‘ï¼šç¼–è¯‘é¢„è¿ç®—" class="headerlink" title="è§£æç¨‹åºé€»è¾‘ï¼šç¼–è¯‘é¢„è¿ç®—"></a>è§£æç¨‹åºé€»è¾‘ï¼šç¼–è¯‘é¢„è¿ç®—</h2><p>åœ¨ç¼–è¯‘æœŸè¿›è¡Œè¿ç®—ï¼Œå‡å°‘è¿è¡Œæ—¶çš„è®¡ç®—é‡ï¼Œå¦‚ä¸‹ç¤ºä¾‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å‹ç¼©å‰</span></span><br><span class="line"><span class="keyword">const</span> ONE_YEAR = <span class="number">365</span> * <span class="number">24</span> * <span class="number">60</span> * <span class="number">60</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‹ç¼©å</span></span><br><span class="line"><span class="keyword">const</span> ONE_YAAR = <span class="number">31536000</span>;</span><br></pre></td></tr></table></figure><p>ä»¥åŠä¸€ä¸ªæ›´å¤æ‚çš„ä¾‹å­ï¼Œç®€ç›´æ˜¯æ€æ‰‹é”çº§åˆ«çš„ä¼˜åŒ–ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å‹ç¼©å‰</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">hello</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;hello, world&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">hello();</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‹ç¼©å</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;hello, world&quot;</span>);</span><br></pre></td></tr></table></figure><h1 id="Tree-Shaking"><a href="#Tree-Shaking" class="headerlink" title="Tree Shaking"></a>Tree Shaking</h1><p>ä»‹ç»ï¼š<br>Tree Shaking æŒ‡çš„æ˜¯åŸºäº ES Module è¿›è¡Œé™æ€åˆ†æï¼Œé€šè¿‡ AST å°†ç”¨ä¸åˆ°çš„å‡½æ•°è¿›è¡Œç§»é™¤ï¼Œä»è€Œå‡å°æ‰“åŒ…ä½“ç§¯ã€‚</p><p>ä¾‹å­ï¼šby rollup</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; sum &#125; <span class="keyword">from</span> <span class="string">&quot;./math.js&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(sum(<span class="number">5</span>, <span class="number">5</span>));</span><br></pre></td></tr></table></figure><p>mathjs</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> x + y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ç”±äºsubå‡½æ•°æ²¡æœ‰è¢«å¼•ç”¨åˆ°æ‰€ä»¥æœ€ç»ˆä¸ä¼šå¯¹ä»–è¿›è¡Œæ‰“åŒ…</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">sub</span>(<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> x - y;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ‰“åŒ…åçš„ä»£ç </p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// maths.js</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> x + y;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* TREE-SHAKING */</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(sum(<span class="number">5</span>, <span class="number">5</span>));</span><br></pre></td></tr></table></figure><h2 id="import"><a href="#import" class="headerlink" title="import *"></a><code>import *</code></h2><p>å½“ä½¿ç”¨<code>import *</code>çš„æ—¶å€™ï¼Œtreeshaking ä»ç„¶æœ‰æ•ˆ.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> \* <span class="keyword">as</span> maths <span class="keyword">from</span> <span class="string">&quot;./maths&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Tree Shaking ä¾ç„¶ç”Ÿæ•ˆ</span></span><br><span class="line">maths.sum(<span class="number">3</span>, <span class="number">4</span>);</span><br><span class="line">maths[<span class="string">&quot;sum&quot;</span>](<span class="number">3</span>, <span class="number">4</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure></p><p><code>import * as maths</code>ï¼Œå…¶ä¸­ <code>maths</code> çš„æ•°æ®ç»“æ„æ˜¯å›ºå®šçš„ï¼Œæ— å¤æ‚æ•°æ®ï¼Œé€šè¿‡ AST åˆ†æå¯æŸ¥çŸ¥å…¶å¼•ç”¨å…³ç³»ã€‚<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> maths = &#123;</span><br><span class="line">  <span class="function"><span class="title">sum</span>(<span class="params"></span>)</span> &#123;&#125;,</span><br><span class="line">  <span class="function"><span class="title">sub</span>(<span class="params"></span>)</span> &#123;&#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p><h2 id="JSON-TreeShaking"><a href="#JSON-TreeShaking" class="headerlink" title="JSON TreeShaking"></a>JSON TreeShaking</h2><p>tree shakingç”šè‡³å¯ä»¥å¯¹jsonè¿›è¡Œä¼˜åŒ–ï¼ŒåŸç†æ˜¯å› ä¸ºjsonæ ¼å¼ç®€å•ï¼Œé€šè¿‡astå®¹æ˜“é¢„æµ‹ç»“æœï¼Œä¸åƒjså¯¹è±¡æœ‰å¤æ‚çš„ç±»å‹ä¸å‰¯ä½œç”¨ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;a&quot;</span>: <span class="number">3</span>,</span><br><span class="line">  <span class="string">&quot;b&quot;</span>: <span class="number">4</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> obj <span class="keyword">from</span> <span class="string">&quot;./main.json&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// obj.b ç”±äºæœªä½¿ç”¨åˆ°ï¼Œä»æ—§ä¸ä¼šè¢«æ‰“åŒ…</span></span><br><span class="line"><span class="built_in">console</span>.log(obj.a);</span><br></pre></td></tr></table></figure><h2 id="å¼•å…¥æ”¯æŒ-Tree-Shaking-çš„-Package"><a href="#å¼•å…¥æ”¯æŒ-Tree-Shaking-çš„-Package" class="headerlink" title="å¼•å…¥æ”¯æŒ Tree Shaking çš„ Package"></a>å¼•å…¥æ”¯æŒ Tree Shaking çš„ Package</h2><p>åœ¨<a href="https://npm.devtool.tech/lodash-es">npm.devtool.tech</a>ä¸­æˆ‘ä»¬å¯ä»¥å¾ˆæ¸…æ¥šçš„çœ‹åˆ°æ¯ä¸ªåŒ…æ˜¯å¦æ”¯æŒtreeshakingã€‚æˆ‘ä»¬æœ€å¥½æ˜¯å¼•å…¥æ”¯æŒtreeshakingçš„åŒ…æ¥å‡å°ç”Ÿäº§ç¯å¢ƒçš„ä½“ç§¯ã€‚</p><h1 id="corejs-polyfill"><a href="#corejs-polyfill" class="headerlink" title="corejs polyfill"></a>corejs polyfill</h1><p>corejsæ˜¯å…³äºESæ ‡å‡†æœ€å‡ºåçš„polyfillã€‚polyfillæŒ‡çš„æ˜¯å½“æµè§ˆå™¨ä¸æ”¯æŒæŸä¸ªæœ€æ–°apiçš„æ—¶å€™ï¼Œä»–å¸®ä½ å®ç°ï¼Œä¸­æ–‡åç§°å«åšå«ç‰‡ã€‚</p><p>ç”±äºå«ç‰‡çš„å­˜åœ¨ï¼Œæ‰“åŒ…åçš„ä½“ç§¯ä¾¿ä¼šå¢åŠ ï¼Œæ‰€æ”¯æŒçš„æµè§ˆå™¨ç‰ˆæœ¬è¶Šé«˜ï¼Œéœ€è¦çš„å«ç‰‡è¶Šå°‘ï¼Œæ‰“åŒ…ä½“ç§¯è¶Šå°ã€‚</p><p>ç›¸åº”çš„å¦‚æœè¦å‘ä¸‹å…¼å®¹ï¼Œé‚£ä¹ˆå«ç‰‡å°±è¶Šå¤šï¼Œæ‰“åŒ…ä½“ç§¯å°±è¶Šå¤§ã€‚</p><p>çœ‹ä¸€ä¸ª<code>Array.from</code>çš„å«ç‰‡ä»£ç ,æœ‰äº†ä»–çš„å­˜åœ¨ï¼Œä»»æ„æµè§ˆå™¨éƒ½èƒ½ä½¿ç”¨è¿™ä¸ªapi<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Production steps of ECMA-262, Edition 6, 22.1.2.1</span></span><br><span class="line"><span class="keyword">if</span> (!<span class="built_in">Array</span>.from) &#123;</span><br><span class="line">  <span class="built_in">Array</span>.from = <span class="function">() =&gt;</span> &#123; <span class="comment">// çœç•¥è‹¥å¹²ä»£ç  &#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>è€ŒCorejsçš„å‰å®³ä¹‹å¤„å°±æ˜¯ä»–åŒ…å«äº†æ‰€æœ‰çš„es6+çš„polyfillï¼Œå¹¶ä¸”é›†æˆåœ¨babelç­‰ç¼–è¯‘å·¥å…·ä¹‹ä¸­ã€‚</p><p>æ›¾ç»æˆ‘ä»¬è¯•è¿‡ä½¿ç”¨<code>?.</code>å¯é€‰é“¾æ“ä½œç¬¦ï¼Œbabelä¼šæˆ‘ä»¬å¯¹åº”æ·»åŠ æ”¯æŒã€‚ä½†æ˜¯å¦‚æœæ˜¯æ–°çš„apiå°±ä¸æ˜¯äº†ï¼Œå°±éœ€è¦corejsåšpolyfillå¸®åŠ©æˆ‘ä»¬èƒ½å¤Ÿä½¿ç”¨ã€‚ç›®å‰ä»–å·²ç»é›†æˆäº†ï¼Œæ‰€ä»¥ä¸ç”¨è€ƒè™‘è¿™ä¸ªé—®é¢˜ã€‚</p><h1 id="browserslist"><a href="#browserslist" class="headerlink" title="browserslist"></a>browserslist</h1><p>æˆ‘ä»¬çŸ¥é“corejsèƒ½å¸®åŠ©æˆ‘ä»¬ç»™å‘ä¸‹çš„æµè§ˆå™¨å…¼å®¹æ–°çš„apiï¼Œä¹ŸçŸ¥é“äº†ä»–çš„ç¼ºç‚¹æ˜¯å…¼å®¹çš„è¶Šå¤šï¼Œéœ€è¦çš„polyfillè¶Šå¤šï¼Œä½“ç§¯è¶Šå¤§ã€‚ç›¸åº”çš„å°±è¯ç”Ÿäº†å«ç‰‡ä½“ç§¯æ§åˆ¶å·¥å…·browserslist</p><p>ä»–ç”¨ç‰¹å®šçš„è¯­å¥æ¥æŸ¥è¯¢æµè§ˆå™¨åˆ—è¡¨ï¼Œå¦‚ï¼š <code>last 2 Chrome versions</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ npx browserslist <span class="string">&quot;last 2 Chrome versions&quot;</span></span><br><span class="line">chrome <span class="number">100</span></span><br><span class="line">chrome <span class="number">99</span></span><br></pre></td></tr></table></figure><p>ç»†è¯´èµ·æ¥ï¼Œä»–æ˜¯ç°ä»£å‰ç«¯å·¥ç¨‹åŒ–å¿…ä¸å¯ç¼ºçš„ä¸€ç§å·¥å…·ã€‚æ— è®ºæ˜¯å¤„ç†jsçš„babelï¼Œè¿˜æ˜¯å¤„ç†cssçš„postcssï¼Œå‡¡æ˜¯ä¸å«ç‰‡æœ‰å…³çš„ï¼Œå®ƒä»¬èƒŒåéƒ½æœ‰browserslistçš„èº«å½±ã€‚</p><ul><li><code>babel</code>ï¼Œåœ¨ <code>@babel/preset-env</code> ä¸­ä½¿ç”¨ <code>core-js</code> ä½œä¸ºå«ç‰‡</li><li><code>postcss</code> ä½¿ç”¨ <code>autoprefixer</code> ä½œä¸ºå«ç‰‡</li></ul><p>åˆšåˆšä¹Ÿè¯´äº†å«ç‰‡ä½“ç§¯å’Œæµè§ˆå™¨ç‰ˆæœ¬ç›´æ¥æŒ‚é’©ï¼Œæ‰€ä»¥å¦‚æœé¡¹ç›®åªéœ€è¦æ”¯æŒæœ€æ–°çš„ä¸¤ä¸ªè°·æ­Œæµè§ˆå™¨ï¼Œé‚£ä¹ˆå…³äºbrowserslistçš„æŸ¥è¯¢ï¼Œå¯ä»¥å†™ä½œ<code>last 2 Chrome versions</code></p><p>éšç€æ—¶é—´çš„æ¨ç§»ï¼Œè¯¥æŸ¥è¯¢è¯­å¥ä¼šè¿”å›æ›´æ–°çš„æµè§ˆå™¨ï¼Œå«ç‰‡çš„ä½“ç§¯å°±ä¼šå‡å°ã€‚</p><h2 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h2><p>browserslistçš„åŸç†å®é™…ä¸Šå°±æ˜¯æ ¹æ®æ­£åˆ™è§£ææŸ¥è¯¢è¯­å¥ã€‚å¯¹æµè§ˆå™¨ç‰ˆæœ¬æ•°æ®åº“<code>caniuse-lite</code>è¿›è¡ŒæŸ¥è¯¢ï¼Œè¿”å›æ‰€å¾—åˆ°çš„æµè§ˆå™¨ç‰ˆæœ¬åˆ—è¡¨ã€‚</p><p>å› ä¸ºbrowserslistå¹¶ä¸ç»´æŠ¤æ•°æ®åº“ï¼Œå› æ­¤ä»–ä¼šç»å¸¸æé†’ä½ å»æ›´æ–°<code>caniuse-lite</code>è¿™ä¸ªåº“ï¼Œç”±äºlockæ–‡ä»¶çš„å­˜åœ¨ï¼Œéœ€è¦ä½¿ç”¨ä»¥ä¸‹çš„å‘½ä»¤å»æ‰‹åŠ¨æ›´æ–°æ•°æ®åº“ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npx browserslist@last --update-db</span><br></pre></td></tr></table></figure><p>è¯¥å‘½ä»¤å°†ä¼šå¯¹<code>caniuse-lite</code>è¿›è¡Œå‡çº§ï¼Œå¯ä»¥ä½“ç°åœ¨lockæ–‡ä»¶ä¸­ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">     <span class="string">&quot;caniuse-lite&quot;</span>: &#123;</span><br><span class="line">-      <span class="string">&quot;version&quot;</span>: <span class="string">&quot;1.0.30001265&quot;</span>,</span><br><span class="line">-      <span class="string">&quot;resolved&quot;</span>: <span class="string">&quot;https://registry.npmjs.org/caniuse-lite/-/caniuse-lite-1.0.30001265.tgz&quot;</span>,</span><br><span class="line">-      <span class="string">&quot;integrity&quot;</span>: <span class="string">&quot;sha512-YzBnspggWV5hep1m9Z6sZVLOt7vrju8xWooFAgN6BA5qvy98qPAPb7vNUzypFaoh2pb3vlfzbDO8tB57UPGbtw==&quot;</span>,</span><br><span class="line">+      <span class="string">&quot;version&quot;</span>: <span class="string">&quot;1.0.30001332&quot;</span>,</span><br><span class="line">+      <span class="string">&quot;resolved&quot;</span>: <span class="string">&quot;https://registry.npmjs.org/caniuse-lite/-/caniuse-lite-1.0.30001332.tgz&quot;</span>,</span><br><span class="line">+      <span class="string">&quot;integrity&quot;</span>: <span class="string">&quot;sha512-10T30NYOEQtN6C11YGg411yebhvpnC6Z102+B95eAsN0oB6KUs01ivE8u+G6FMIRtIrVlYXhL+LUwQ3/hXwDWw==&quot;</span>,</span><br><span class="line">       <span class="string">&quot;dev&quot;</span>: <span class="literal">true</span></span><br><span class="line">     &#125;,</span><br></pre></td></tr></table></figure><h2 id="ä¸€äº›å¸¸ç”¨çš„æŸ¥è¯¢è¯­æ³•"><a href="#ä¸€äº›å¸¸ç”¨çš„æŸ¥è¯¢è¯­æ³•" class="headerlink" title="ä¸€äº›å¸¸ç”¨çš„æŸ¥è¯¢è¯­æ³•"></a>ä¸€äº›å¸¸ç”¨çš„æŸ¥è¯¢è¯­æ³•</h2><p>å¦‚ä¸‹ï¼š</p><h3 id="æ ¹æ®ç”¨æˆ·ä»½é¢"><a href="#æ ¹æ®ç”¨æˆ·ä»½é¢" class="headerlink" title="æ ¹æ®ç”¨æˆ·ä»½é¢"></a>æ ¹æ®ç”¨æˆ·ä»½é¢</h3><blockquote><p>5%: åœ¨å…¨çƒç”¨æˆ·ä»½é¢å¤§äº 5% çš„æµè§ˆå™¨<br>5% in CN: åœ¨ä¸­å›½ç”¨æˆ·ä»½é¢å¤§äº 5% çš„æµè§ˆå™¨</p></blockquote><h3 id="æ ¹æ®æœ€æ–°æµè§ˆå™¨ç‰ˆæœ¬"><a href="#æ ¹æ®æœ€æ–°æµè§ˆå™¨ç‰ˆæœ¬" class="headerlink" title="æ ¹æ®æœ€æ–°æµè§ˆå™¨ç‰ˆæœ¬"></a>æ ¹æ®æœ€æ–°æµè§ˆå™¨ç‰ˆæœ¬</h3><ul><li>last 2 versions: æ‰€æœ‰æµè§ˆå™¨çš„æœ€æ–°ä¸¤ä¸ªç‰ˆæœ¬</li><li>last 2 Chrome versions: Chrome æµè§ˆå™¨çš„æœ€æ–°ä¸¤ä¸ªç‰ˆæœ¬</li></ul><h3 id="ä¸å†ç»´æŠ¤çš„æµè§ˆå™¨"><a href="#ä¸å†ç»´æŠ¤çš„æµè§ˆå™¨" class="headerlink" title="ä¸å†ç»´æŠ¤çš„æµè§ˆå™¨"></a>ä¸å†ç»´æŠ¤çš„æµè§ˆå™¨</h3><ul><li>dead: å®˜æ–¹ä¸åœ¨ç»´æŠ¤å·²è¿‡ä¸¤å¹´ï¼Œæ¯”å¦‚ IE10</li></ul><h3 id="æµè§ˆå™¨ç‰ˆæœ¬å·"><a href="#æµè§ˆå™¨ç‰ˆæœ¬å·" class="headerlink" title="æµè§ˆå™¨ç‰ˆæœ¬å·"></a>æµè§ˆå™¨ç‰ˆæœ¬å·</h3><ul><li>Chrome &gt; 90: Chrome å¤§äº 90 ç‰ˆæœ¬å·çš„æµè§ˆå™¨</li></ul><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/æ‰“åŒ…ä½“ç§¯ä¼˜åŒ–.png" alt=""></p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="Webpackç³»åˆ—" scheme="https://zlinni.github.io/categories/Webpack%E7%B3%BB%E5%88%97/"/>
    
    
    <category term="å‰ç«¯" scheme="https://zlinni.github.io/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="Webpack" scheme="https://zlinni.github.io/tags/Webpack/"/>
    
  </entry>
  
  <entry>
    <title>CodeTop0-100</title>
    <link href="https://zlinni.github.io/posts/3103992604/"/>
    <id>https://zlinni.github.io/posts/3103992604/</id>
    <published>2022-08-01T02:41:13.000Z</published>
    <updated>2022-09-04T08:13:12.461Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><div class="note primary flat"><p>codetop å‰ä¸€ç™¾é¢˜ï¼Œreview and review</p></div><h1 id="3-æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­—ä¸²"><a href="#3-æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­—ä¸²" class="headerlink" title="3. æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­—ä¸²"></a>3. æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­—ä¸²</h1><div class="tabs" id="test"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test-1">ä¸»è¦ä»‹ç»</button></li><li class="tab"><button type="button" data-href="#test-2">åŸºæœ¬è¯­æ³•</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test-1"><p>è€é¢˜æ–°åš<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220802084740.png" alt=""></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-2"><p>åˆ©ç”¨ includes api çš„ç‰¹æ€§ä»¥åŠå¾ªç¯å¼¹å‡ºé¡¶å±‚çš„ç‰¹æ€§ï¼Œå°†æ¯ä¸ªå…ƒç´  push è¿›æ¥åä¸‹ä¸€è½®æ¯”å¯¹æ˜¯å¦å­˜åœ¨ï¼Œå­˜åœ¨åˆ™å¼¹å‡ºã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> lengthOfLongestSubstring = <span class="function"><span class="keyword">function</span> (<span class="params">s</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> arr = [];</span><br><span class="line">  <span class="keyword">let</span> max = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> str <span class="keyword">of</span> s) &#123;</span><br><span class="line">    <span class="keyword">while</span> (arr.includes(str)) &#123;</span><br><span class="line">      arr.shift();</span><br><span class="line">    &#125;</span><br><span class="line">    arr.push(str);</span><br><span class="line">    <span class="keyword">if</span> (max &lt; arr.length) max = arr.length;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> max;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h1 id="88-åˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„"><a href="#88-åˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„" class="headerlink" title="88. åˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„"></a>88. åˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„</h1><div class="tabs" id="test"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test-1">ä¸»è¦ä»‹ç»</button></li><li class="tab"><button type="button" data-href="#test-2">åŸºæœ¬è¯­æ³•</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test-1"><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220802085418.png" alt=""></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-2"><p>æ€è·¯ï¼šä»åå¾€å‰å¯¹æ¯”æ’å…¥ï¼Œå¤§çš„æ•°å­—ä¼˜å…ˆæ’å…¥æœ«å°¾ã€‚ä½†éœ€è¦æ³¨æ„çš„æ˜¯æŸä¸€æ–¹æå‰ç»“æŸçš„æƒ…å†µå‘ç”Ÿï¼Œæ­¤æ—¶å¦‚æœä¸€æ–¹æå‰ç»“æŸäº†ï¼Œç»ˆæ­¢åˆ¤æ–­ç›´æ¥ç”¨åä¸€æ–¹ç›´åˆ°åä¸€æ–¹æ•°å­—å®Œå…¨ç”¨å®Œ(j&lt;0)</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> merge = <span class="function"><span class="keyword">function</span> (<span class="params">nums1, m, nums2, n</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> i = m - <span class="number">1</span>,</span><br><span class="line">    j = n - <span class="number">1</span>,</span><br><span class="line">    len = m + n - <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">while</span> (j &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">    nums1[len--] = i &gt;= <span class="number">0</span> &amp;&amp; nums1[i] &gt;= nums2[j] ? nums1[i--] : nums2[j--];</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h1 id="165-æ¯”è¾ƒç‰ˆæœ¬å·"><a href="#165-æ¯”è¾ƒç‰ˆæœ¬å·" class="headerlink" title="165. æ¯”è¾ƒç‰ˆæœ¬å·"></a>165. æ¯”è¾ƒç‰ˆæœ¬å·</h1><div class="tabs" id="test"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test-1">ä¸»è¦ä»‹ç»</button></li><li class="tab"><button type="button" data-href="#test-2">åŸºæœ¬è¯­æ³•</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test-1"><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220802090214.png" alt=""></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-2"><p>æ€è·¯æ˜¯åˆ†å‰²<code>.</code>å¹¶éå†æœ€é•¿çš„ lengthï¼ˆå› ä¸ºè¦åŒæ—¶æ¯”è¾ƒï¼‰ï¼Œç›¸ç­‰è·³è¿‡ï¼Œä¸ç­‰åˆ¤æ–­è¿”å›ç»“æœã€‚</p><p>æ³¨æ„ å‰å¯¼ 0 çš„æƒ…å†µå¯ä»¥ç”¨<code>~~</code>æˆ–è€… <code>parseInt</code> å»è§£å†³ï¼Œ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> compareVersion = <span class="function"><span class="keyword">function</span> (<span class="params">version1, version2</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> v1arr = version1.split(<span class="string">&quot;.&quot;</span>);</span><br><span class="line">  <span class="keyword">let</span> v2arr = version2.split(<span class="string">&quot;.&quot;</span>);</span><br><span class="line">  <span class="keyword">let</span> maxLen = <span class="built_in">Math</span>.max(v1arr.length, v2arr.length);</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; maxLen; i++) &#123;</span><br><span class="line">    <span class="keyword">let</span> v1 = v1arr[i] || <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">let</span> v2 = v2arr[i] || <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (v1 === v2) <span class="keyword">continue</span>;</span><br><span class="line">    <span class="keyword">if</span> (~~v1 &lt; ~~v2) &#123;</span><br><span class="line">      <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (~~v1 &gt; ~~v2) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h1 id="415-å­—ç¬¦ä¸²ç›¸åŠ "><a href="#415-å­—ç¬¦ä¸²ç›¸åŠ " class="headerlink" title="415. å­—ç¬¦ä¸²ç›¸åŠ "></a>415. å­—ç¬¦ä¸²ç›¸åŠ </h1><div class="tabs" id="test"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test-1">ä¸»è¦ä»‹ç»</button></li><li class="tab"><button type="button" data-href="#test-2">åŸºæœ¬è¯­æ³•</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test-1"><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220802092739.png" alt=""></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-2"><p>æ€è·¯ï¼šä»åå¾€å‰ç´¯åŠ åˆ°ä¸€ä¸ªæ•°ç»„å†…ï¼Œå› ä¸ºæ˜¯å­—ç¬¦ä¸²è¦è½¬æ•°å­—ä½¿ç”¨+ æœ€åä»æ•°ç»„è¿˜åŸä½¿ç”¨<code>join(&#39;&#39;)</code><br>å°æŠ€å·§ï¼Œä»åå¾€å‰è¯»å¯ä»¥ä½¿ç”¨æ–°çš„ api <code>Array.at(-1)</code> æ³¨æ„ä½™æ•°å’Œè¿›ä½æ•°å­—çš„é—®é¢˜ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> addStrings = <span class="function"><span class="keyword">function</span> (<span class="params">num1, num2</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> last = -<span class="number">1</span>;</span><br><span class="line">  <span class="keyword">let</span> maxLen = <span class="built_in">Math</span>.max(num1.length, num2.length);</span><br><span class="line">  <span class="keyword">let</span> newAdd = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">let</span> res = [];</span><br><span class="line">  <span class="keyword">while</span> (maxLen--) &#123;</span><br><span class="line">    <span class="keyword">let</span> c1 = num1.at(last) ? +num1.at(last) : <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">let</span> c2 = num2.at(last) ? +num2.at(last) : <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">let</span> count = c1 + c2 + newAdd;</span><br><span class="line">    res.unshift((count % <span class="number">10</span>) + <span class="string">&quot;&quot;</span>);</span><br><span class="line">    newAdd = <span class="built_in">Math</span>.floor(count / <span class="number">10</span>);</span><br><span class="line">    last--;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (newAdd &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    res.unshift(<span class="string">&quot;1&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> res.join(<span class="string">&quot;&quot;</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h1 id="20-æœ‰æ•ˆçš„æ‹¬å·"><a href="#20-æœ‰æ•ˆçš„æ‹¬å·" class="headerlink" title="20. æœ‰æ•ˆçš„æ‹¬å·"></a>20. æœ‰æ•ˆçš„æ‹¬å·</h1><div class="tabs" id="test"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test-1">ä¸»è¦ä»‹ç»</button></li><li class="tab"><button type="button" data-href="#test-2">åŸºæœ¬è¯­æ³•</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test-1"><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220802093916.png" alt=""></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-2"><p>æ€è·¯ï¼šè®¾ç½®åŒ¹é…è§„åˆ™ï¼Œéå†çš„ s çš„æ—¶å€™å¦‚æœå…ƒç´ æ»¡è¶³å·¦æ‹¬å·å°±æŠŠè§„åˆ™ä¸­çš„å³æ‹¬å· push è¿›æ•°ç»„ï¼Œå¦‚æœå…ƒç´ æ˜¯å³æ‹¬å·ï¼Œè¯´æ˜æ­¤æ—¶å¼¹å‡ºçš„æ‹¬å·è¦å’Œå³æ‹¬å·åŒ¹é… å¦åˆ™è¿”å› false</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> isValid = <span class="function"><span class="keyword">function</span> (<span class="params">s</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> rule = &#123;</span><br><span class="line">    <span class="string">&quot;(&quot;</span>: <span class="string">&quot;)&quot;</span>,</span><br><span class="line">    <span class="string">&quot;[&quot;</span>: <span class="string">&quot;]&quot;</span>,</span><br><span class="line">    <span class="string">&quot;&#123;&quot;</span>: <span class="string">&quot;&#125;&quot;</span>,</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">let</span> arr = [];</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> str <span class="keyword">of</span> s) &#123;</span><br><span class="line">    <span class="keyword">if</span> (str === <span class="string">&quot;(&quot;</span> || str === <span class="string">&quot;[&quot;</span> || str === <span class="string">&quot;&#123;&quot;</span>) &#123;</span><br><span class="line">      arr.push(rule[str]);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (arr.pop() !== str) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> !arr.length;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h1 id="1-ä¸¤æ•°ä¹‹å’Œ"><a href="#1-ä¸¤æ•°ä¹‹å’Œ" class="headerlink" title="1. ä¸¤æ•°ä¹‹å’Œ"></a>1. ä¸¤æ•°ä¹‹å’Œ</h1><div class="tabs" id="test"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test-1">ä¸»è¦ä»‹ç»</button></li><li class="tab"><button type="button" data-href="#test-2">åŸºæœ¬è¯­æ³•</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test-1"><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220802101606.png" alt=""></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-2"><p>code</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> twoSum = <span class="function"><span class="keyword">function</span> (<span class="params">nums, target</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (map.has(nums[i])) &#123;</span><br><span class="line">      <span class="keyword">let</span> less = map.get(nums[i]);</span><br><span class="line">      <span class="keyword">return</span> [less, i];</span><br><span class="line">    &#125;</span><br><span class="line">    map.set(target - nums[i], i);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h1 id="46-å…¨æ’åˆ—"><a href="#46-å…¨æ’åˆ—" class="headerlink" title="46. å…¨æ’åˆ—"></a>46. å…¨æ’åˆ—</h1><div class="tabs" id="test"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test-1">ä¸»è¦ä»‹ç»</button></li><li class="tab"><button type="button" data-href="#test-2">åŸºæœ¬è¯­æ³•</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test-1"><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220802102816.png" alt=""></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-2"><p>å…¥é—¨å›æº¯ï¼Œä½¿ç”¨ used è®°å½•å·²ç»ä½¿ç”¨è¿‡çš„å…ƒç´ ï¼Œç»ˆæ­¢æ¡ä»¶æ˜¯ path é•¿åº¦ç­‰äºæ•°ç»„é•¿åº¦ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> permute = <span class="function"><span class="keyword">function</span> (<span class="params">nums</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> res = [];</span><br><span class="line">  <span class="keyword">const</span> used = <span class="keyword">new</span> <span class="built_in">Array</span>(nums.length).fill(<span class="literal">false</span>);</span><br><span class="line">  <span class="keyword">const</span> dfs = <span class="function">(<span class="params">path</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (path.length === nums.length) &#123;</span><br><span class="line">      res.push([...path]);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">      <span class="keyword">if</span> (used[i]) <span class="keyword">continue</span>;</span><br><span class="line">      path.push(nums[i]);</span><br><span class="line">      used[i] = <span class="literal">true</span>;</span><br><span class="line">      dfs(path);</span><br><span class="line">      path.pop();</span><br><span class="line">      used[i] = <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">  dfs([]);</span><br><span class="line">  <span class="keyword">return</span> res;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h1 id="112-è·¯å¾„æ€»å’Œ"><a href="#112-è·¯å¾„æ€»å’Œ" class="headerlink" title="112. è·¯å¾„æ€»å’Œ"></a>112. è·¯å¾„æ€»å’Œ</h1><div class="tabs" id="test"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test-1">ä¸»è¦ä»‹ç»</button></li><li class="tab"><button type="button" data-href="#test-2">åŸºæœ¬è¯­æ³•</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test-1"><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220803191326.png" alt=""></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-2"><p>dfs æ³¨æ„ç¬¬ä¸€æ¬¡è¿›å»çš„æ˜¯ root çš„ val</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> hasPathSum = <span class="function"><span class="keyword">function</span> (<span class="params">root, targetSum</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!root) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  <span class="keyword">let</span> res = <span class="literal">false</span>;</span><br><span class="line">  <span class="keyword">const</span> dfs = <span class="function">(<span class="params">n, sum</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!n.left &amp;&amp; !n.right &amp;&amp; sum === targetSum) &#123;</span><br><span class="line">      res = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (n.left) dfs(n.left, sum + n.left.val);</span><br><span class="line">    <span class="keyword">if</span> (n.right) dfs(n.right, sum + n.right.val);</span><br><span class="line">  &#125;;</span><br><span class="line">  dfs(root, root.val);</span><br><span class="line">  <span class="keyword">return</span> res;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h1 id="äºŒå‰æ ‘çš„å±‚åºéå†"><a href="#äºŒå‰æ ‘çš„å±‚åºéå†" class="headerlink" title="äºŒå‰æ ‘çš„å±‚åºéå†"></a>äºŒå‰æ ‘çš„å±‚åºéå†</h1><div class="tabs" id="test"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test-1">ä¸»è¦ä»‹ç»</button></li><li class="tab"><button type="button" data-href="#test-2">åŸºæœ¬è¯­æ³•</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test-1"><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220803192042.png" alt=""></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-2"><p>æ—¶åˆ»ç‰¢è®°ï¼šå±‚åºéå†æœ‰ä¸¤å±‚å¾ªç¯ï¼Œå¤–å±‚é€€å‡ºæ¡ä»¶æ˜¯é˜Ÿåˆ—ä¸ºç©ºï¼Œå› ä¸ºé˜Ÿåˆ—ä¸ºç©ºäº†ï¼Œæ„å‘³ç€å·²ç»èµ°åˆ°æœ€åä¸€æ­¥ç»“æŸäº†ã€‚å†…å±‚å¾ªç¯æ˜¯ä¸ºäº†è®©å­©å­è¿›é˜Ÿåˆ—å¹¶å¼¹å‡ºé˜Ÿå¤´å…ƒç´ ï¼Œå¼¹å‡ºæœ‰ä¸¤ä¸ªç›®çš„ï¼Œä¸€æ˜¯æ¸…ç©ºå½“å‰é˜Ÿåˆ—ï¼ŒäºŒæ˜¯ä¿ç•™å½“å‰é˜Ÿå¤´å…ƒç´ ï¼›è®©å­©å­è¿›é˜Ÿåˆ—æ˜¯ä¸ºäº†ä¸‹ä¸€æ¬¡å±‚åºã€‚</p><p>å®¹æ˜“çŠ¯é”™çš„ç‚¹ï¼šé€€å‡ºå½“å‰å¾ªç¯çš„æ¡ä»¶æ˜¯é˜Ÿåˆ—ä¸ºç©º,ä¸”å› ä¸ºå¼¹å‡ºä¼šå½±å“æ•°ç»„é•¿åº¦ï¼Œæ‰€ä»¥è¦ä¿å­˜æ•°ç»„é•¿åº¦</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> levelOrder = <span class="function"><span class="keyword">function</span> (<span class="params">root</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!root) <span class="keyword">return</span> [];</span><br><span class="line">  <span class="keyword">const</span> res = [];</span><br><span class="line">  <span class="keyword">const</span> queue = [root];</span><br><span class="line">  <span class="keyword">while</span> (queue.length) &#123;</span><br><span class="line">    <span class="keyword">const</span> len = queue.length;</span><br><span class="line">    <span class="keyword">const</span> temp = [];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">      <span class="keyword">const</span> n = queue.shift();</span><br><span class="line">      temp.push(n.val);</span><br><span class="line">      <span class="keyword">if</span> (n.left) queue.push(n.left);</span><br><span class="line">      <span class="keyword">if</span> (n.right) queue.push(n.right);</span><br><span class="line">    &#125;</span><br><span class="line">    res.push(temp);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> res;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h1 id="70-çˆ¬æ¥¼æ¢¯"><a href="#70-çˆ¬æ¥¼æ¢¯" class="headerlink" title="70. çˆ¬æ¥¼æ¢¯"></a>70. çˆ¬æ¥¼æ¢¯</h1><div class="tabs" id="test"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test-1">ä¸»è¦ä»‹ç»</button></li><li class="tab"><button type="button" data-href="#test-2">åŸºæœ¬è¯­æ³•</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test-1"><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220803194353.png" alt=""></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-2"><p>æ–æ³¢é‚£å¥‘:æ€è·¯ï¼ŒæŠŠæ¯ä¸ªé—®é¢˜åˆ†å‰²æˆå­é—®é¢˜ï¼Œå»é€æ­¥å¤„ç†å­é—®é¢˜ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fun = <span class="function">(<span class="params">n</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> fn = [];</span><br><span class="line">  fn[<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">  fn[<span class="number">2</span>] = <span class="number">2</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">3</span>; i &lt;= n; i++) &#123;</span><br><span class="line">    fn[i] = fn[i - <span class="number">1</span>] + fn[i - <span class="number">2</span>];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> fn[n];</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h1 id="53-æœ€å¤§å­æ•°ç»„å’Œ"><a href="#53-æœ€å¤§å­æ•°ç»„å’Œ" class="headerlink" title="53. æœ€å¤§å­æ•°ç»„å’Œ"></a>53. æœ€å¤§å­æ•°ç»„å’Œ</h1><div class="tabs" id="test"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test-1">ä¸»è¦ä»‹ç»</button></li><li class="tab"><button type="button" data-href="#test-2">åŸºæœ¬è¯­æ³•</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test-1"><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220803194839.png" alt=""></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-2"><p>æ€è·¯ï¼šæ¯”è¾ƒæ¯æ¬¡çš„å’Œå’Œå½“å‰é¡¹çš„å…³ç³»ï¼Œå¤§çš„æ›¿æ¢ã€‚å› ä¸ºæˆ‘ä»¬æ¯æ¬¡åªéœ€è¦ä¿ç•™ä¸¤æ•°ä¹‹é—´çš„æœ€å¤§å€¼ï¼Œç„¶åæœ‰ä¸ªæµç¨‹ä¸Šé¢çš„æœ€å¤§å€¼ï¼Œç”¨äºæ¯”è¾ƒæ¯æ¬¡çš„æœ€å¤§å€¼ï¼Œæ‰¾åˆ°æœ€å¤§çš„æœ€å¤§å€¼è¿”å›</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fn = <span class="function">(<span class="params">nums</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> sum = nums[<span class="number">0</span>];</span><br><span class="line">  <span class="keyword">let</span> max = nums[<span class="number">0</span>];</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">    sum = <span class="built_in">Math</span>.max(nums[i], sum + nums[i]);</span><br><span class="line">    max = <span class="built_in">Math</span>.max(sum, max);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> max;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h1 id="15-ä¸‰æ•°ä¹‹å’Œ"><a href="#15-ä¸‰æ•°ä¹‹å’Œ" class="headerlink" title="15. ä¸‰æ•°ä¹‹å’Œ"></a>15. ä¸‰æ•°ä¹‹å’Œ</h1><div class="tabs" id="test"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test-1">ä¸»è¦ä»‹ç»</button></li><li class="tab"><button type="button" data-href="#test-2">åŸºæœ¬è¯­æ³•</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test-1"><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220803200529.png" alt=""></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-2"><p>ä¸‰æŒ‡é’ˆï¼Œæ³¨æ„æ»¡è¶³æ¡ä»¶å°±å‰ªæ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fn = <span class="function">(<span class="params">nums</span>) =&gt;</span> &#123;</span><br><span class="line">  nums = nums.sort(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a - b);</span><br><span class="line">  <span class="keyword">let</span> res = [];</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (nums[i] === nums[i - <span class="number">1</span>]) <span class="keyword">continue</span>;</span><br><span class="line">    <span class="keyword">let</span> mid = i + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">let</span> last = nums.length - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (mid &lt; last) &#123;</span><br><span class="line">      <span class="keyword">let</span> sum = nums[i] + nums[mid] + nums[last];</span><br><span class="line">      <span class="keyword">if</span> (sum === <span class="number">0</span>) &#123;</span><br><span class="line">        res.push([nums[i], nums[mid], nums[last]]);</span><br><span class="line">        mid++;</span><br><span class="line">        <span class="keyword">while</span> (nums[mid] === nums[mid - <span class="number">1</span>]) &#123;</span><br><span class="line">          mid++;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (sum &lt; <span class="number">0</span>) &#123;</span><br><span class="line">        mid++;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        last--;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> res;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h1 id="206-åè½¬é“¾è¡¨"><a href="#206-åè½¬é“¾è¡¨" class="headerlink" title="206.åè½¬é“¾è¡¨"></a>206.åè½¬é“¾è¡¨</h1><div class="tabs" id="test"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test-1">ä¸»è¦ä»‹ç»</button></li><li class="tab"><button type="button" data-href="#test-2">åŸºæœ¬è¯­æ³•</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test-1"><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220803202441.png" alt=""></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-2"><p>åè½¬é“¾è¡¨çš„æµç¨‹å…¶å®å°±æ˜¯<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220803202542.png" alt=""></p><p>ç¨å¾®ç†è§£ä¸€ä¸‹è¿™ä¸ªå›¾å°±å¯ä»¥äº†ã€‚å¹¶ä¸”æ³¨æ„æœ€å cur å·²ç»èµ°å®Œï¼Œä½†æ˜¯ pre æ„å»ºå®Œäº†ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fn = (head)&#123;</span><br><span class="line">  <span class="keyword">let</span> cur = head;</span><br><span class="line">  <span class="keyword">let</span> pre = <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">while</span>(cur)&#123;</span><br><span class="line">    [cur.next,pre,cur] = [pre,cur,cur.next]</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> pre;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h1 id="141-ç¯å½¢é“¾è¡¨"><a href="#141-ç¯å½¢é“¾è¡¨" class="headerlink" title="141.ç¯å½¢é“¾è¡¨"></a>141.ç¯å½¢é“¾è¡¨</h1><div class="tabs" id="test"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test-1">ä¸»è¦ä»‹ç»</button></li><li class="tab"><button type="button" data-href="#test-2">åŸºæœ¬è¯­æ³•</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test-1"><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220803202756.png" alt=""></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-2"><p>å¿«æŒ‡é’ˆæ¯æ¬¡éƒ½æ¯”æ…¢æŒ‡é’ˆå¤šèµ°ä¸€æ­¥ï¼Œå¦‚æœæœ‰ç¯ï¼Œå¿…å®šä¼šé‡åˆ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fn = <span class="function">(<span class="params">head</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> slow = head;</span><br><span class="line">  <span class="keyword">let</span> fast = head;</span><br><span class="line">  <span class="keyword">while</span> (slow &amp;&amp; fast &amp;&amp; fast.next) &#123;</span><br><span class="line">    fast = fast.next.next;</span><br><span class="line">    slow = slow.next;</span><br><span class="line">    <span class="keyword">if</span> (slow === fast) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h1 id="121-ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº"><a href="#121-ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº" class="headerlink" title="121. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº"></a>121. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº</h1><div class="tabs" id="test"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test-1">ä¸»è¦ä»‹ç»</button></li><li class="tab"><button type="button" data-href="#test-2">åŸºæœ¬è¯­æ³•</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test-1"><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220804165959.png" alt=""></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-2"><p>åŸºæœ¬æ€è·¯æ˜¯ï¼Œä½¿ç”¨åä¸€æ¬¡å’Œå‰ä¸€æ¬¡åšå·®åŠ åˆå§‹çš„å€¼è¿›è¡Œåˆ¤æ–­ï¼Œå¦‚æœæŒç»­æ”¶ç›Šå¤§äº 0 è¯´æ˜æœ¬æ¬¡æ˜¯æ­£æ”¶ç›Šï¼Œä¿ç•™ï¼Œå¦åˆ™ç½®ä¸º 0.æœ€åæ¯”è¾ƒå¾—åˆ° max</p><p>æ³¨æ„ å› ä¸ºæ˜¯æ¯”è¾ƒå‰åï¼Œæœ€åä¸€ä½è¦çœå»</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fn = <span class="function">(<span class="params">prices</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> last = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">let</span> max = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; prices.length - <span class="number">1</span>; i++) &#123;</span><br><span class="line">    last = <span class="built_in">Math</span>.max(<span class="number">0</span>, last + prices[i + <span class="number">1</span>] - prices[i]);</span><br><span class="line">    max = <span class="built_in">Math</span>.max(max, last);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> max;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h1 id="215-æ•°ç»„ä¸­çš„ç¬¬-K-ä¸ªæœ€å¤§å…ƒç´ "><a href="#215-æ•°ç»„ä¸­çš„ç¬¬-K-ä¸ªæœ€å¤§å…ƒç´ " class="headerlink" title="215. æ•°ç»„ä¸­çš„ç¬¬ K ä¸ªæœ€å¤§å…ƒç´ "></a>215. æ•°ç»„ä¸­çš„ç¬¬ K ä¸ªæœ€å¤§å…ƒç´ </h1><div class="tabs" id="test"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test-1">ä¸»è¦ä»‹ç»</button></li><li class="tab"><button type="button" data-href="#test-2">åŸºæœ¬è¯­æ³•</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test-1"><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220804170410.png" alt=""></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-2"><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fn = <span class="function">(<span class="params">nums, k</span>) =&gt;</span> &#123;&#125;;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h1 id="5-æœ€é•¿å›æ–‡å­ä¸²"><a href="#5-æœ€é•¿å›æ–‡å­ä¸²" class="headerlink" title="5. æœ€é•¿å›æ–‡å­ä¸²"></a>5. æœ€é•¿å›æ–‡å­ä¸²</h1><div class="tabs" id="test"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test-1">ä¸»è¦ä»‹ç»</button></li><li class="tab"><button type="button" data-href="#test-2">åŸºæœ¬è¯­æ³•</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test-1"><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220804170654.png" alt=""></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-2"><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fn = <span class="function">(<span class="params">s</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> len = s.length;</span><br><span class="line">  <span class="keyword">let</span> dp = <span class="keyword">new</span> <span class="built_in">Array</span>(len);</span><br><span class="line">  <span class="keyword">let</span> res = s[<span class="number">0</span>];</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">    dp[i] = <span class="keyword">new</span> <span class="built_in">Array</span>(len).fill(<span class="literal">false</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = len - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> j = i; j &lt; len; j++) &#123;</span><br><span class="line">      <span class="keyword">if</span> (s.charAt(i) !== s.charAt(j)) <span class="keyword">continue</span>;</span><br><span class="line">      dp[i][j] = j - i &lt;= <span class="number">2</span> || dp[i + <span class="number">1</span>][j - <span class="number">1</span>];</span><br><span class="line">      <span class="keyword">if</span> (dp[i][j] &amp;&amp; j - i + <span class="number">1</span> &gt; res.length) &#123;</span><br><span class="line">        res = s.slice(i, j + <span class="number">1</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> res;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h1 id="912-æ’åºæ•°ç»„"><a href="#912-æ’åºæ•°ç»„" class="headerlink" title="912. æ’åºæ•°ç»„"></a>912. æ’åºæ•°ç»„</h1><div class="tabs" id="test"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test-1">ä¸»è¦ä»‹ç»</button></li><li class="tab"><button type="button" data-href="#test-2">åŸºæœ¬è¯­æ³•</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test-1"><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220804171859.png" alt=""></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-2"><p>æ‰‹æ’•å¿«é€Ÿæ’åº</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> quickSort = <span class="function">(<span class="params">nums</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> left = [];</span><br><span class="line">  <span class="keyword">let</span> right = [];</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h1 id="129-æ ¹åˆ°å¶å­èŠ‚ç‚¹æ•°å­—ä¹‹å’Œ"><a href="#129-æ ¹åˆ°å¶å­èŠ‚ç‚¹æ•°å­—ä¹‹å’Œ" class="headerlink" title="129. æ ¹åˆ°å¶å­èŠ‚ç‚¹æ•°å­—ä¹‹å’Œ"></a>129. æ ¹åˆ°å¶å­èŠ‚ç‚¹æ•°å­—ä¹‹å’Œ</h1><div class="tabs" id="test"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test-1">ä¸»è¦ä»‹ç»</button></li><li class="tab"><button type="button" data-href="#test-2">åŸºæœ¬è¯­æ³•</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test-1"><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220805231049.png" alt=""></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-2"><p>code dfs</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fn = <span class="function">(<span class="params">root</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> res = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">const</span> dfs = <span class="function">(<span class="params">n, sum</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!n) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">if</span> (!n.left &amp;&amp; !n.right) &#123;</span><br><span class="line">      res += +[...sum].join(<span class="string">&quot;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (n.left) &#123;</span><br><span class="line">      sum.push(n.left.val);</span><br><span class="line">      dfs(n.left, sum);</span><br><span class="line">      sum.pop();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (n.right) &#123;</span><br><span class="line">      sum.push(n.right.val);</span><br><span class="line">      dfs(n.right, sum);</span><br><span class="line">      sum.pop();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">  dfs(root, [root.val]);</span><br><span class="line">  <span class="keyword">return</span> res;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h1 id="200-å²›å±¿æ•°é‡"><a href="#200-å²›å±¿æ•°é‡" class="headerlink" title="200. å²›å±¿æ•°é‡"></a>200. å²›å±¿æ•°é‡</h1><div class="tabs" id="test"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test-1">ä¸»è¦ä»‹ç»</button></li><li class="tab"><button type="button" data-href="#test-2">åŸºæœ¬è¯­æ³•</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test-1"><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220807163006.png" alt=""></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-2"><p>æ€è·¯ï¼š<br>dfs åˆ¤æ–­æ˜¯å¦å¤„äºäºŒä½å¹³é¢ï¼Œä¸”æ˜¯å¦ä¸º 1ï¼Œæ»¡è¶³æ¡ä»¶æ²‰æ²¡é™†åœ°ï¼Œåˆ¤æ–­ä¸‹ä¸ªæ ¼å­å¹¶ dfs</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fn = <span class="function">(<span class="params">grid</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (!grid) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">let</span> xLen = grid[<span class="number">0</span>].length;</span><br><span class="line">  <span class="keyword">let</span> yLen = grid.length;</span><br><span class="line">  <span class="keyword">let</span> count = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">const</span> d = [</span><br><span class="line">    [<span class="number">1</span>, <span class="number">0</span>],</span><br><span class="line">    [<span class="number">0</span>, <span class="number">1</span>],</span><br><span class="line">    [-<span class="number">1</span>, <span class="number">0</span>],</span><br><span class="line">    [<span class="number">0</span>, -<span class="number">1</span>],</span><br><span class="line">  ];</span><br><span class="line">  <span class="keyword">const</span> inArea = <span class="function">(<span class="params">x, y</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> x &gt;= <span class="number">0</span> &amp;&amp; x &lt; yLen &amp;&amp; y &gt;= <span class="number">0</span> &amp;&amp; y &lt;= xLen;</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">const</span> dfs = <span class="function">(<span class="params">i, j, grid</span>) =&gt;</span> &#123;</span><br><span class="line">    grid[i][j] = <span class="string">&quot;0&quot;</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> k = <span class="number">0</span>; k &lt; <span class="number">4</span>; k++) &#123;</span><br><span class="line">      <span class="keyword">let</span> x = i + d[k][<span class="number">0</span>];</span><br><span class="line">      <span class="keyword">let</span> y = j + d[k][<span class="number">1</span>];</span><br><span class="line">      inArea(x, y) &amp;&amp; grid[x][y] === <span class="string">&quot;1&quot;</span> &amp;&amp; dfs(x, y, grid);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; yLen; i++) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; xLen; j++) &#123;</span><br><span class="line">      <span class="keyword">if</span> (grid[i][j] === <span class="string">&quot;1&quot;</span>) &#123;</span><br><span class="line">        count++;</span><br><span class="line">        dfs(i, j, grid);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> count;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h1 id="704-äºŒåˆ†æŸ¥æ‰¾"><a href="#704-äºŒåˆ†æŸ¥æ‰¾" class="headerlink" title="704. äºŒåˆ†æŸ¥æ‰¾"></a>704. äºŒåˆ†æŸ¥æ‰¾</h1><h1 id="300-æœ€é•¿ä¸Šå‡å­åºåˆ—"><a href="#300-æœ€é•¿ä¸Šå‡å­åºåˆ—" class="headerlink" title="300. æœ€é•¿ä¸Šå‡å­åºåˆ—"></a>300. æœ€é•¿ä¸Šå‡å­åºåˆ—</h1><h1 id="21-åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨"><a href="#21-åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨" class="headerlink" title="21. åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨"></a>21. åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨</h1><h1 id="22-æ‹¬å·ç”Ÿæˆ"><a href="#22-æ‹¬å·ç”Ÿæˆ" class="headerlink" title="22. æ‹¬å·ç”Ÿæˆ"></a>22. æ‹¬å·ç”Ÿæˆ</h1><div class="tabs" id="test"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test-1">ä¸»è¦ä»‹ç»</button></li><li class="tab"><button type="button" data-href="#test-2">åŸºæœ¬è¯­æ³•</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test-1"><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220805225849.png" alt=""></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-2"><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fn = <span class="function">(<span class="params">n</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> res = [];</span><br><span class="line">  <span class="comment">// æŠ€å·§ å˜é‡éƒ½è¦å¸¦è¿›é€’å½’</span></span><br><span class="line">  <span class="keyword">const</span> dfs = <span class="function">(<span class="params">l, r, path</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (path.length === <span class="number">2</span> * n) &#123;</span><br><span class="line">      res.push([...path].join(<span class="string">&quot;&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (l &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      path.push(<span class="string">&quot;(&quot;</span>);</span><br><span class="line">      dfs(l - <span class="number">1</span>, r, path);</span><br><span class="line">      path.pop();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// æ³¨æ„æ˜¯å·¦æ‹¬å·çš„æ•°é‡å°äºå³æ‹¬å·æ‰èƒ½è®©å³æ‹¬å·è¿›æ ˆ</span></span><br><span class="line">    <span class="keyword">if</span> (l &lt; r) &#123;</span><br><span class="line">      path.push(<span class="string">&quot;)&quot;</span>);</span><br><span class="line">      dfs(l, r - <span class="number">1</span>, path);</span><br><span class="line">      path.pop();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">  dfs(n, n, []);</span><br><span class="line">  <span class="keyword">return</span> res;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h1 id="104-äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦"><a href="#104-äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦" class="headerlink" title="104. äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦"></a>104. äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦</h1><div class="tabs" id="test"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test-1">ä¸»è¦ä»‹ç»</button></li><li class="tab"><button type="button" data-href="#test-2">åŸºæœ¬è¯­æ³•</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test-1"><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220807164321.png" alt=""></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-2"><p>æ³¨æ„æ¡ä»¶<code>!n å’Œ !n.right&amp;&amp;!n.left</code>çš„ä¸åŒ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> maxDepth = <span class="function"><span class="keyword">function</span> (<span class="params">root</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!root) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">let</span> max = <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">const</span> dfs = <span class="function">(<span class="params">n, depth</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!n) &#123;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (!n.left &amp;&amp; !n.right) &#123;</span><br><span class="line">      max = <span class="built_in">Math</span>.max(depth, max);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (n.left) dfs(n.left, depth + <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">if</span> (n.right) dfs(n.right, depth + <span class="number">1</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">  dfs(root, <span class="number">1</span>);</span><br><span class="line">  <span class="keyword">return</span> max;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h1 id="322-é›¶é’±å…‘æ¢"><a href="#322-é›¶é’±å…‘æ¢" class="headerlink" title="322. é›¶é’±å…‘æ¢"></a>322. é›¶é’±å…‘æ¢</h1><div class="tabs" id="test"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test-1">ä¸»è¦ä»‹ç»</button></li><li class="tab"><button type="button" data-href="#test-2">åŸºæœ¬è¯­æ³•</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test-1"><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220807171332.png" alt=""></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-2"><p>åˆ†è§£é—®é¢˜å†åˆå¹¶é—®é¢˜<br>æ±‚ 1 å°±æ˜¯æ±‚ 0 çš„æ¬¡æ•°å’Œæ±‚ 1 çš„æ¬¡æ•°çš„æœ€å°å€¼æ¯”è¾ƒ<br>æ±‚ 2 å…¶å®å°±æ˜¯æ±‚ 1 çš„æ¬¡æ•°å’Œæ±‚ 2 çš„æ¬¡æ•°çš„æœ€å°å€¼æ¯”è¾ƒ<br>å› æ­¤æ¨åˆ°å‡ºçŠ¶æ€è½¬ç§»æ–¹ç¨‹ä¸ºï¼š<br><code>dp[i] = Math.min(dp[i],dp[i-coin]+1)</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fn = <span class="function">(<span class="params">coins, amount</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> dp = <span class="keyword">new</span> <span class="built_in">Array</span>(amount + <span class="number">1</span>).fill(<span class="literal">Infinity</span>); <span class="comment">//è€ƒè™‘0</span></span><br><span class="line">  dp[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt;= amount; i++) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> coin <span class="keyword">of</span> coins) &#123;</span><br><span class="line">      <span class="keyword">if</span> (coin &gt; i) <span class="keyword">continue</span>; <span class="comment">//å¦‚æœå½“å‰ç¡¬å¸å€¼å¤§äºå½“å‰æ‰€æ±‚é¢åº¦åˆ™ä¸èƒ½ç»„åˆ è·³è¿‡</span></span><br><span class="line">      dp[i] = <span class="built_in">Math</span>.min(dp[i], dp[i - coin] + <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> dp[amount] === <span class="literal">Infinity</span> ? -<span class="number">1</span> : dp[amount];</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h1 id="54-èºæ—‹çŸ©é˜µ"><a href="#54-èºæ—‹çŸ©é˜µ" class="headerlink" title="54. èºæ—‹çŸ©é˜µ"></a>54. èºæ—‹çŸ©é˜µ</h1><div class="tabs" id="test"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test-1">ä¸»è¦ä»‹ç»</button></li><li class="tab"><button type="button" data-href="#test-2">åŸºæœ¬è¯­æ³•</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test-1"><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220808193614.png" alt=""></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-2"><p>èµ°å››ä¸ªæ–¹å‘ä¸ºä¸€æ¬¡ dfsï¼Œå¦‚æœä¸­é—´æ²¡æœ‰ length å°±ç›´æ¥è¿”å›ã€‚</p><p>èµ°å³è¾¹ç›¸å½“äº i ä¸º 0 çš„æƒ…å†µï¼Œå°±ç›´æ¥æŠŠæ•´ä¸ªæ•°ç»„å¼€å¤´ shift ç„¶åè§£æ„è¿‡æ¥</p><p>èµ°ä¸‹é¢ç›¸å½“äº i å¤§äº 0 ä¸”å°äºæ•°ç»„é•¿åº¦çš„æƒ…å†µï¼Œå°±ä¸€ç›´è·å–å‰é¢æ¯ä¸ªå­æ•°ç»„é‡Œé¢ pop çš„å†…å®¹ï¼Œ(å› ä¸ºç¬¬ä¸€ä¸ªè¢« shift äº† é•¿åº¦-1)</p><p>èµ°å·¦è¾¹ç›¸å½“äº i ä¸ºæœ€åä¸€ä¸ªçš„æ—¶å€™ï¼Œç›´æ¥æŠŠæ•°ç»„æœ€åçš„å…ƒç´  pop ç„¶ååè½¬</p><p>æ³¨æ„è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œå¦‚æœåªèµ°äº†ä¸€åœˆ æ¯”å¦‚<br>å·¦å³ä¸‹ xxx å·¦ä¸Š xxx å³çš„æƒ…å†µ å‡ºç°äº†å¾ˆå¤šç©ºå­æ•°ç»„ï¼Œä½†æ•´ä¸ªæ•°ç»„è¿˜æ˜¯æœ‰é•¿åº¦çš„</p><p>å°±ä¼š push å¾ˆå¤š undefined è¿›å»ï¼Œè¦é˜»æ­¢ä»–ï¼Œå°±å¾—ä½¿ç”¨<code>if (arr[i] &amp;&amp; !arr[i].length) return; //é˜²æ­¢åªèµ°ä¸€åœˆå°±ç»“æŸçš„æƒ…å†µ</code></p><p>æ¥ç€æˆ‘ä»¬è¦å®Œæˆå¾€ä¸Šçš„æ“ä½œï¼Œå¾€ä¸Šçš„æ“ä½œç›¸å½“äºå€’ç€è¯»å–æ•°ç»„ï¼Œç„¶åæŠŠå­æ•°ç»„çš„æœ€å‰é¢ä¸€é¡¹æ‹¿å‡ºæ¥</p><p>æ³¨æ„è¿™ä¸ªè¿‡ç¨‹ä¹Ÿéœ€è¦åˆ¤æ–­å­æ•°ç»„æ˜¯å¦ä¸ºç©º</p><p>æœ€åæ²¡ç»“æŸå°±ç»§ç»­é€’å½’</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fn = <span class="function">(<span class="params">matrix</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> res = [];</span><br><span class="line">  <span class="keyword">const</span> dfs = <span class="function">(<span class="params">arr</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> len = arr.length; <span class="comment">//ä¿å­˜length</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">      <span class="keyword">if</span> (!arr.length) <span class="keyword">return</span>;</span><br><span class="line">      <span class="keyword">if</span> (arr[i] &amp;&amp; !arr[i].length) <span class="keyword">return</span>; <span class="comment">//é˜²æ­¢åªèµ°ä¸€åœˆå°±ç»“æŸçš„æƒ…å†µ</span></span><br><span class="line">      <span class="keyword">if</span> (i === <span class="number">0</span>) &#123;</span><br><span class="line">        res.push(...arr.shift());</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (i === len - <span class="number">1</span>) &#123;</span><br><span class="line">        res.push(...arr.pop().reverse());</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        res.push(arr[i - <span class="number">1</span>].pop());</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = arr.length - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">      <span class="keyword">if</span> (!arr[i].length) <span class="keyword">return</span>;</span><br><span class="line">      res.push(arr[i].shift());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (!arr.length) <span class="keyword">return</span>;</span><br><span class="line">    dfs(arr);</span><br><span class="line">  &#125;;</span><br><span class="line">  dfs(matrix);</span><br><span class="line">  <span class="keyword">return</span> res;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h1 id="94-äºŒå‰æ ‘çš„ä¸­åºéå†"><a href="#94-äºŒå‰æ ‘çš„ä¸­åºéå†" class="headerlink" title="94. äºŒå‰æ ‘çš„ä¸­åºéå†"></a>94. äºŒå‰æ ‘çš„ä¸­åºéå†</h1><div class="tabs" id="test"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test-1">ä¸»è¦ä»‹ç»</button></li><li class="tab"><button type="button" data-href="#test-2">åŸºæœ¬è¯­æ³•</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test-1"><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220807204102.png" alt=""></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-2"><p>code</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> inorderTraversal = <span class="function"><span class="keyword">function</span> (<span class="params">root</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!root) <span class="keyword">return</span> [];</span><br><span class="line">  <span class="keyword">const</span> res = [];</span><br><span class="line">  <span class="keyword">const</span> dfs = <span class="function">(<span class="params">n</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!n) <span class="keyword">return</span>;</span><br><span class="line">    dfs(n.left);</span><br><span class="line">    res.push(n.val);</span><br><span class="line">    dfs(n.right);</span><br><span class="line">  &#125;;</span><br><span class="line">  dfs(root);</span><br><span class="line">  <span class="keyword">return</span> res;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h1 id="146-LRU-ç¼“å­˜æœºåˆ¶"><a href="#146-LRU-ç¼“å­˜æœºåˆ¶" class="headerlink" title="146. LRU ç¼“å­˜æœºåˆ¶"></a>146. LRU ç¼“å­˜æœºåˆ¶</h1><h1 id="å‰‘æŒ‡-Offer-22-é“¾è¡¨ä¸­å€’æ•°ç¬¬-k-ä¸ªèŠ‚ç‚¹"><a href="#å‰‘æŒ‡-Offer-22-é“¾è¡¨ä¸­å€’æ•°ç¬¬-k-ä¸ªèŠ‚ç‚¹" class="headerlink" title="å‰‘æŒ‡ Offer 22. é“¾è¡¨ä¸­å€’æ•°ç¬¬ k ä¸ªèŠ‚ç‚¹"></a>å‰‘æŒ‡ Offer 22. é“¾è¡¨ä¸­å€’æ•°ç¬¬ k ä¸ªèŠ‚ç‚¹</h1><div class="tabs" id="test"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test-1">ä¸»è¦ä»‹ç»</button></li><li class="tab"><button type="button" data-href="#test-2">åŸºæœ¬è¯­æ³•</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test-1"><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220808224105.png" alt=""></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-2"><p>æ³¨æ„ä½¿ç”¨ dummy</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> getKthFromEnd = <span class="function"><span class="keyword">function</span> (<span class="params">head, k</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> dummy = <span class="keyword">new</span> ListNode();</span><br><span class="line">  dummy.next = head;</span><br><span class="line">  <span class="keyword">let</span> slow = dummy;</span><br><span class="line">  <span class="keyword">let</span> fast = dummy;</span><br><span class="line">  <span class="keyword">while</span> (k--) &#123;</span><br><span class="line">    fast = fast.next;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">while</span> (fast.next) &#123;</span><br><span class="line">    slow = slow.next;</span><br><span class="line">    fast = fast.next;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> slow.next;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h1 id="42-æ¥é›¨æ°´"><a href="#42-æ¥é›¨æ°´" class="headerlink" title="42. æ¥é›¨æ°´"></a>42. æ¥é›¨æ°´</h1><h1 id="å‰‘æŒ‡-Offer-10-I-æ–æ³¢é‚£å¥‘æ•°åˆ—"><a href="#å‰‘æŒ‡-Offer-10-I-æ–æ³¢é‚£å¥‘æ•°åˆ—" class="headerlink" title="å‰‘æŒ‡ Offer 10- I. æ–æ³¢é‚£å¥‘æ•°åˆ—"></a>å‰‘æŒ‡ Offer 10- I. æ–æ³¢é‚£å¥‘æ•°åˆ—</h1><div class="tabs" id="test"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test-1">ä¸»è¦ä»‹ç»</button></li><li class="tab"><button type="button" data-href="#test-2">åŸºæœ¬è¯­æ³•</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test-1"><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220809185822.png" alt=""></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-2"><p>code</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fn = <span class="function">(<span class="params">n</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> dp = [<span class="number">0</span>, <span class="number">1</span>];</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">2</span>; i &lt;= n; i++) &#123;</span><br><span class="line">    dp[i] = (dp[i - <span class="number">1</span>] + dp[i - <span class="number">2</span>]) % <span class="number">1000000007</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> dp[n];</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h1 id="695-å²›å±¿çš„æœ€å¤§é¢ç§¯"><a href="#695-å²›å±¿çš„æœ€å¤§é¢ç§¯" class="headerlink" title="695. å²›å±¿çš„æœ€å¤§é¢ç§¯"></a>695. å²›å±¿çš„æœ€å¤§é¢ç§¯</h1><div class="tabs" id="test"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test-1">ä¸»è¦ä»‹ç»</button></li><li class="tab"><button type="button" data-href="#test-2">åŸºæœ¬è¯­æ³•</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test-1"><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220809190153.png" alt=""></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-2"><p>åœ¨æ±‚å²›å±¿æ•°é‡çš„åŸºç¡€ä¸Šå¢åŠ ä¸ª count å’Œ max å³å¯</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> maxAreaOfIsland = <span class="function"><span class="keyword">function</span> (<span class="params">grid</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> max = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">let</span> count = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">const</span> xLen = grid[<span class="number">0</span>].length;</span><br><span class="line">  <span class="keyword">const</span> yLen = grid.length;</span><br><span class="line">  <span class="keyword">const</span> d = [</span><br><span class="line">    [<span class="number">0</span>, <span class="number">1</span>],</span><br><span class="line">    [<span class="number">1</span>, <span class="number">0</span>],</span><br><span class="line">    [<span class="number">0</span>, -<span class="number">1</span>],</span><br><span class="line">    [-<span class="number">1</span>, <span class="number">0</span>],</span><br><span class="line">  ];</span><br><span class="line">  <span class="keyword">const</span> inArea = <span class="function">(<span class="params">x, y</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> x &gt;= <span class="number">0</span> &amp;&amp; x &lt; yLen &amp;&amp; y &gt;= <span class="number">0</span> &amp;&amp; y &lt; xLen;</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">const</span> dfs = <span class="function">(<span class="params">i, j, grid</span>) =&gt;</span> &#123;</span><br><span class="line">    grid[i][j] = <span class="number">0</span>;</span><br><span class="line">    count++;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> k = <span class="number">0</span>; k &lt; <span class="number">4</span>; k++) &#123;</span><br><span class="line">      <span class="keyword">const</span> x = i + d[k][<span class="number">0</span>];</span><br><span class="line">      <span class="keyword">const</span> y = j + d[k][<span class="number">1</span>];</span><br><span class="line">      inArea(x, y) &amp;&amp; grid[x][y] &amp;&amp; dfs(x, y, grid);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; yLen; i++) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; xLen; j++) &#123;</span><br><span class="line">      <span class="keyword">if</span> (grid[i][j] === <span class="number">1</span>) &#123;</span><br><span class="line">        dfs(i, j, grid);</span><br><span class="line">        max = <span class="built_in">Math</span>.max(max, count);</span><br><span class="line">        count = <span class="number">0</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> max;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h1 id="103-äºŒå‰æ ‘çš„é”¯é½¿å‹å±‚åºéå†"><a href="#103-äºŒå‰æ ‘çš„é”¯é½¿å‹å±‚åºéå†" class="headerlink" title="103. äºŒå‰æ ‘çš„é”¯é½¿å‹å±‚åºéå†"></a>103. äºŒå‰æ ‘çš„é”¯é½¿å‹å±‚åºéå†</h1><div class="tabs" id="test"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test-1">ä¸»è¦ä»‹ç»</button></li><li class="tab"><button type="button" data-href="#test-2">åŸºæœ¬è¯­æ³•</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test-1"><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220809200416.png" alt=""></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-2"><p>code</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> zigzagLevelOrder = <span class="function"><span class="keyword">function</span> (<span class="params">root</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!root) <span class="keyword">return</span> [];</span><br><span class="line">  <span class="keyword">const</span> q = [root];</span><br><span class="line">  <span class="keyword">const</span> res = [];</span><br><span class="line">  <span class="keyword">let</span> isTran = <span class="literal">false</span>;</span><br><span class="line">  <span class="keyword">while</span> (q.length) &#123;</span><br><span class="line">    <span class="keyword">const</span> temp = [];</span><br><span class="line">    <span class="keyword">const</span> len = q.length;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">      <span class="keyword">const</span> n = q.shift();</span><br><span class="line">      temp.push(n.val);</span><br><span class="line">      <span class="keyword">if</span> (n.left) q.push(n.left);</span><br><span class="line">      <span class="keyword">if</span> (n.right) q.push(n.right);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (!isTran) &#123;</span><br><span class="line">      res.push(temp);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      res.push(temp.reverse());</span><br><span class="line">    &#125;</span><br><span class="line">    isTran = !isTran;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> res;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h1 id="209-é•¿åº¦æœ€å°çš„å­æ•°ç»„"><a href="#209-é•¿åº¦æœ€å°çš„å­æ•°ç»„" class="headerlink" title="209. é•¿åº¦æœ€å°çš„å­æ•°ç»„"></a>209. é•¿åº¦æœ€å°çš„å­æ•°ç»„</h1><div class="tabs" id="test"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test-1">ä¸»è¦ä»‹ç»</button></li><li class="tab"><button type="button" data-href="#test-2">åŸºæœ¬è¯­æ³•</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test-1"><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220809203702.png" alt=""></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test-2"><p>å› ä¸ºæ˜¯æ­£æ•´æ•°æ•°ç»„ï¼Œæ‰€ä»¥æ¯æ¬¡éƒ½æ˜¯é€’å¢çš„<br>ä½¿ç”¨æ»‘åŠ¨çª—å£<br>å½“å³æŒ‡é’ˆç§»åŠ¨æ‰©å¤§çª—å£çš„æ—¶å€™ï¼Œåˆ¤æ–­æ˜¯å¦æ»¡è¶³ targetï¼Œå¦‚æœæ»¡è¶³åˆ™å³æŒ‡é’ˆå‡å·¦æŒ‡é’ˆå¾—åˆ°çª—å£é•¿åº¦å’Œå½“å‰çš„æœ€å°é•¿åº¦æ¯”è¾ƒã€‚ç„¶åå·¦æŒ‡é’ˆç§»åŠ¨ï¼Œç¼©å°çª—å£ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fn = <span class="function">(<span class="params">target, nums</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> l = (r = sum = <span class="number">0</span>);</span><br><span class="line">  <span class="keyword">let</span> res = <span class="literal">Infinity</span>;</span><br><span class="line">  <span class="keyword">while</span> (r &lt; nums.length) &#123;</span><br><span class="line">    sum += nums[r++]; <span class="comment">//æ‰©å¤§çª—å£</span></span><br><span class="line">    <span class="keyword">while</span> (sum &gt;= target) &#123;</span><br><span class="line">      res = <span class="built_in">Math</span>.min(res, r - l); <span class="comment">//r-lä»£è¡¨æ»¡è¶³æ¡ä»¶çš„çª—å£é•¿åº¦</span></span><br><span class="line">      sum -= nums[l++];</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> res === <span class="literal">Infinity</span> ? <span class="number">0</span> : res;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h1 id=""><a href="#" class="headerlink" title=" "></a> </h1>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="ç®—æ³•æŒ‡å—" scheme="https://zlinni.github.io/categories/%E7%AE%97%E6%B3%95%E6%8C%87%E5%8D%97/"/>
    
    
    <category term="å‰ç«¯" scheme="https://zlinni.github.io/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="é¢è¯•" scheme="https://zlinni.github.io/tags/%E9%9D%A2%E8%AF%95/"/>
    
  </entry>
  
  <entry>
    <title>å‰ç«¯å·¥ç¨‹åŒ–â‘ æ‰“åŒ…å™¨çš„èµ„æºå¤„ç†</title>
    <link href="https://zlinni.github.io/posts/3551608196/"/>
    <id>https://zlinni.github.io/posts/3551608196/</id>
    <published>2022-07-30T08:30:58.000Z</published>
    <updated>2022-08-01T15:03:10.057Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><div class="note primary flat"><p>åœ¨å‰ç«¯å·¥ç¨‹åŒ–è¿™å—ï¼Œæ‰“åŒ…è‚¯å®šæ˜¯å¤§å®¶åˆæ¬¡å…¥é—¨çš„æ—¶å€™ä¼šæ¥è§¦åˆ°çš„ç©æ„ï¼Œæœ€å¸¸è§çš„ä¸€ä¸ªä¾‹å­å°±æ˜¯ç¬¬ä¸‰æ–¹èµ„æº CDN å¤–éƒ¨å¼•å…¥ã€‚åœ¨ç½‘ä¸Šå„è·¯æ•™ç¨‹ä¸­éƒ½è¯´æ˜ä»–æ˜¯å‡å°‘äº†é¡¹ç›®ä½“ç§¯ï¼Œå®åˆ™ä¸ç„¶ï¼Œä¸‹é¢è¯¦ç»†è®²è¿°å‰ç«¯æ‰“åŒ…çš„æ–¹æ¡ˆ</p></div><h1 id="æ¨¡å—åŒ–æ–¹æ¡ˆ"><a href="#æ¨¡å—åŒ–æ–¹æ¡ˆ" class="headerlink" title="æ¨¡å—åŒ–æ–¹æ¡ˆ"></a>æ¨¡å—åŒ–æ–¹æ¡ˆ</h1><div class="note primary flat"><p>å¯¹äºæ¨¡å—åŒ–ï¼Œcjsï¼Œesï¼Œumd æ¨¡å—ä½ çŸ¥é“å—ï¼Ÿ</p></div><h2 id="cjs"><a href="#cjs" class="headerlink" title="cjs"></a>cjs</h2><p>é¦–å…ˆæ˜¯ cjsï¼Œå…¨ç§° <code>Commonjs</code>ï¼Œæ˜¯ node ä¸­çš„æ¨¡å—è§„èŒƒï¼Œé€šè¿‡ <code>require</code> åŠ <code>export</code> è¿›è¡Œå¯¼å…¥å¯¼å‡ºï¼Œè¿›ä¸€æ­¥å»¶ç”³çš„åŒ–ï¼Œ<code>module.export</code>å±äº <code>commonjs2</code>.</p><p>å› ä¸ºä»–å±äº node çš„æ¨¡å—ï¼Œä¹Ÿå°±æ˜¯æ„å‘³ç€ä»–åªèƒ½åœ¨ node ç¯å¢ƒä¸­ï¼Œä¹Ÿå°±æ˜¯ä¸èƒ½ç›´æ¥ç”¨åœ¨æµè§ˆå™¨ä¹‹ä¸Šã€‚å¦‚æœä½ çš„å‰ç«¯é¡¹ç›®éœ€è¦ç”¨åˆ°ä»¥ cjs è§„èŒƒå†™çš„æ¨¡å—ï¼Œé‚£ä¹ˆå°±ä¼šå‡ºé—®é¢˜(æ¯”å¦‚ cdn åŠ è½½)ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// sum.js</span></span><br><span class="line"><span class="built_in">exports</span>.sum = <span class="function">(<span class="params">x, y</span>) =&gt;</span> x + y;</span><br><span class="line"></span><br><span class="line"><span class="comment">// index.js</span></span><br><span class="line"><span class="keyword">const</span> &#123; sum &#125; = <span class="built_in">require</span>(<span class="string">&quot;./sum.js&quot;</span>);</span><br></pre></td></tr></table></figure><p>è§£å†³æ–¹æ³•æ˜¯ <code>webpack</code> çš„ <code>enhanced-resolve</code>ï¼Œwebpack æ˜¯é€šè¿‡å¼•å…¥è¿™ä¸ªåº“æ¥è§£ææ¨¡å—çš„ï¼Œä»–ç›¸å½“äºå¢å¼ºç‰ˆçš„<code>require.resolve</code>ã€‚ä»–ä¼šå°† require æˆ–è€… import è¯­å¥ä¸­çš„èµ„æºï¼Œè§£æä¸ºå¼•å…¥æ–‡ä»¶çš„ç»å¯¹è·¯å¾„ï¼Œç„¶åé€šè¿‡æ–‡ä»¶è¯»å–åŠ è½½èµ„æºã€‚å…·ä½“å‚è§è¿™ç¯‡æ–‡ç« <a href="https://juejin.cn/post/7004267670832955423#heading-1">ã€webpack ç³»åˆ—ã€‘3. webpack æ˜¯å¦‚ä½•è§£ææ¨¡å—çš„</a></p><p>å…³é”®å­—ï¼š<code>cjs</code>ï¼Œ<code>node</code>ï¼Œ<code>require</code> å’Œ <code>export</code></p><h2 id="esm"><a href="#esm" class="headerlink" title="esm"></a>esm</h2><p>å…¨ç§°<code>es module</code>ã€‚æ˜¯ <code>tc39</code> å¯¹äº <code>ESMAScript</code> çš„æ¨¡å—åŒ–è§„èŒƒï¼Œå› ä¸ºä»–æ˜¯è§„èŒƒï¼Œæ‰€ä»¥èƒ½ç”¨åœ¨ node å’Œæµè§ˆå™¨ç¯å¢ƒä¸‹ï¼Œä½¿ç”¨<code>import/export</code>è¿›è¡Œæ¨¡å—çš„å¯¼å…¥å¯¼å‡º</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// sum.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> sum = <span class="function">(<span class="params">x, y</span>) =&gt;</span> x + y;</span><br><span class="line"></span><br><span class="line"><span class="comment">// index.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; sum &#125; <span class="keyword">from</span> <span class="string">&quot;./sum&quot;</span>;</span><br></pre></td></tr></table></figure><p>esm ä¸ºé™æ€å¯¼å…¥ï¼Œæ­£å› ä¸ºå¦‚æ­¤ï¼Œå¯ä»¥åœ¨ç¼–è¯‘çš„æ—¶æœŸè¿›è¡Œ tree shakingï¼Œå‡å° js ä½“ç§¯ã€‚(åˆ¤æ–­ä¸€ä¸ªæ¨¡å—æ˜¯å¦æ”¯æŒ tree shaking å°±è¦çœ‹ä»–å‘åŒ…å†…å®¹æœ‰æ²¡æœ‰ esï¼Œè€Œä¸æ˜¯çœ‹æºç æ˜¯ä¸æ˜¯ esm å†™çš„)<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220730171548.png" alt=""></p><p>å¦‚æœéœ€è¦åŠ¨æ€å¯¼å…¥ï¼Œtc39 ä¸ºåŠ¨æ€åŠ è½½æ¨¡å—å®šä¹‰äº† API: import(module) ã€‚å¯å°†ä»¥ä¸‹ä»£ç ç²˜è´´åˆ°æ§åˆ¶å°æ‰§è¡Œ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> ms = <span class="keyword">await</span> <span class="keyword">import</span>(<span class="string">&quot;https://cdn.skypack.dev/ms@latest&quot;</span>);</span><br><span class="line"></span><br><span class="line">ms.default(<span class="number">1000</span>);</span><br></pre></td></tr></table></figure><p>esm æ˜¯æœªæ¥çš„è¶‹åŠ¿ï¼Œç›®å‰ä¸€äº› cdn å‚å•†å’Œå‰ç«¯æ„å»ºå·¥å…·éƒ½è‡´åŠ›äº cjs æ¨¡å—åƒ esm çš„è½¬åŒ–ï¼Œæ¯”å¦‚ <code>skypack</code>ã€ <code>snowpack</code>ã€<code>vite</code> ç­‰ã€‚</p><p>ç›®å‰æµè§ˆå™¨å’Œ node å‡æ”¯æŒ esm</p><p>cjs å’Œ esm çš„åŒºåˆ«</p><ul><li>cjs æ¨¡å—è¾“å‡ºçš„æ˜¯ä¸€ä¸ªå€¼çš„æ‹·è´ï¼Œesm è¾“å‡ºçš„æ˜¯å€¼çš„å¼•ç”¨</li><li>cjs æ˜¯è¿è¡Œæ—¶åŠ è½½ï¼Œesm æ˜¯ç¼–è¯‘æ—¶åŠ è½½ã€‚</li></ul><p>æ€ä¹ˆç†è§£è¿™å¥è¯å‘¢ï¼Œå®é™…ä¸Šå¯ä»¥ç›´æ¥æ‹¿ cdn çš„ esm æ¨¡å—æ¥ä½¿ç”¨ï¼Œ<a href="https://cdn.jsdelivr.net/npm/array-uniq/index.js">array-uniq</a>ï¼Œå°±ä¼šå‘ç°æˆ‘ä»¬å¹¶æ²¡æœ‰ä½¿ç”¨åˆ°ä»–ï¼Œä½†æ˜¯ä»–å·²ç»åŠ è½½å‡ºæ¥äº†ã€‚ç›¸åº”çš„ cjs æ¨¡å—å°±ä¸è¡Œã€‚æºäº nodejs æ˜¯ js çš„ä¸€ä¸ªè§£æå¼•æ“ï¼Œæ˜¯è¿è¡Œæ—¶çš„ã€‚<br><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220730165648.png" alt=""></p><h2 id="umd"><a href="#umd" class="headerlink" title="umd"></a>umd</h2><p>umd æ˜¯ä¸€ç§å…¼å®¹ cjs å’Œ amd çš„æ¨¡å—ï¼Œæ—¢å¯ä»¥åœ¨ node/webpack ç¯å¢ƒä¸­è¢« require ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥åœ¨æµè§ˆå™¨ä¸­ç›´æ¥ç”¨ cdn ä»¥<code>script.src</code>å¼•å…¥</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">root, factory</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> define === <span class="string">&quot;function&quot;</span> &amp;&amp; define.amd) &#123;</span><br><span class="line">    <span class="comment">// AMD</span></span><br><span class="line">    define([<span class="string">&quot;jquery&quot;</span>], factory);</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="built_in">exports</span> === <span class="string">&quot;object&quot;</span>) &#123;</span><br><span class="line">    <span class="comment">// CommonJS (å¦‚æœæœ‰exportså…³é”®å­—å°±æ˜¯cjs)</span></span><br><span class="line">    <span class="built_in">module</span>.exports = factory(<span class="built_in">require</span>(<span class="string">&quot;jquery&quot;</span>));</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// å…¨å±€å˜é‡</span></span><br><span class="line">    root.returnExports = factory(root.jQuery);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)(<span class="built_in">this</span>, <span class="function"><span class="keyword">function</span> (<span class="params">$</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹å‡º umd çš„æœ¬è´¨å°±æ˜¯ä¸€ä¸ª IIFEã€‚</p><p>è¿™ä¸‰ç§æ¨¡å—æ–¹æ¡ˆå¤§è‡´å¦‚æ­¤ï¼Œéƒ¨åˆ† npm package ä¹Ÿä¼šè¢«åŒæ—¶æ‰“åŒ…å‡º commonjs/esm/umd ä¸‰ç§æ¨¡å—ï¼Œä»¥ä¾›ä¸åŒçš„éœ€æ±‚çš„ä¸šåŠ¡ä½¿ç”¨ã€‚æ¯”å¦‚ antd</p><h1 id="AST-æŠ½è±¡è¯­æ³•æ ‘"><a href="#AST-æŠ½è±¡è¯­æ³•æ ‘" class="headerlink" title="AST æŠ½è±¡è¯­æ³•æ ‘"></a>AST æŠ½è±¡è¯­æ³•æ ‘</h1><p>AST å…¨ç§° Abstract Syntax Treeï¼ŒæŠ½è±¡è¯­æ³•æ ‘ï¼Œæ¶‰åŠåˆ°å·¥ç¨‹åŒ–çš„è¯¸å¤šç¯èŠ‚çš„åº”ç”¨ï¼Œæ¯”å¦‚ï¼š</p><ol><li>å¦‚ä½•å°† ts è½¬æ¢ä¸º js</li><li>å¦‚ä½•å°† sass/less è½¬åŒ–ä¸º css</li><li>å¦‚ä½•å°† es6 è½¬åŒ–ä¸º es5(babel)</li><li>å¦‚ä½•å°† js ä»£ç æ ¼å¼åŒ– prettier/eslint</li><li>å¦‚ä½•è¯†åˆ« jsx</li><li>graphQLï¼ŒMDXï¼ŒVue SFC ç­‰ç­‰</li></ol><p>è¿™ç§è¯­è¨€è½¬æ¢çš„è¿‡ç¨‹å®é™…å°±æ˜¯å¯¹å…¶ ASTï¼Œæ ¸å¿ƒæ­¥éª¤æ˜¯</p><ol><li>code -&gt; ast(parse)</li><li>ast -&gt; ast(transform)</li><li>ast -&gt; code(generate)</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Code</span></span><br><span class="line"><span class="keyword">const</span> a = <span class="number">4</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// AST</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;type&quot;</span>: <span class="string">&quot;Program&quot;</span>,</span><br><span class="line">  <span class="string">&quot;start&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;end&quot;</span>: <span class="number">11</span>,</span><br><span class="line">  <span class="string">&quot;body&quot;</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;type&quot;</span>: <span class="string">&quot;VariableDeclaration&quot;</span>,</span><br><span class="line">      <span class="string">&quot;start&quot;</span>: <span class="number">0</span>,</span><br><span class="line">      <span class="string">&quot;end&quot;</span>: <span class="number">11</span>,</span><br><span class="line">      <span class="string">&quot;declarations&quot;</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="string">&quot;type&quot;</span>: <span class="string">&quot;VariableDeclarator&quot;</span>,</span><br><span class="line">          <span class="string">&quot;start&quot;</span>: <span class="number">6</span>,</span><br><span class="line">          <span class="string">&quot;end&quot;</span>: <span class="number">11</span>,</span><br><span class="line">          <span class="string">&quot;id&quot;</span>: &#123;</span><br><span class="line">            <span class="string">&quot;type&quot;</span>: <span class="string">&quot;Identifier&quot;</span>,</span><br><span class="line">            <span class="string">&quot;start&quot;</span>: <span class="number">6</span>,</span><br><span class="line">            <span class="string">&quot;end&quot;</span>: <span class="number">7</span>,</span><br><span class="line">            <span class="string">&quot;name&quot;</span>: <span class="string">&quot;a&quot;</span></span><br><span class="line">          &#125;,</span><br><span class="line">          <span class="string">&quot;init&quot;</span>: &#123;</span><br><span class="line">            <span class="string">&quot;type&quot;</span>: <span class="string">&quot;Literal&quot;</span>,</span><br><span class="line">            <span class="string">&quot;start&quot;</span>: <span class="number">10</span>,</span><br><span class="line">            <span class="string">&quot;end&quot;</span>: <span class="number">11</span>,</span><br><span class="line">            <span class="string">&quot;value&quot;</span>: <span class="number">4</span>,</span><br><span class="line">            <span class="string">&quot;raw&quot;</span>: <span class="string">&quot;4&quot;</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      ],</span><br><span class="line">      <span class="string">&quot;kind&quot;</span>: <span class="string">&quot;const&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  <span class="string">&quot;sourceType&quot;</span>: <span class="string">&quot;module&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬åœ¨ vue çš„ç¯èŠ‚ä¸­ä¹Ÿè®²åˆ°äº†å¦‚ä½•è§£ææ¨¡æ¿è¯­æ³•ä¸º astï¼Œå°±æ˜¯ç”Ÿæˆç±»ä¼¼çš„å¯¹è±¡ã€‚å¯¹äºä¸åŒè¯­è¨€æœ‰ä¸åŒçš„è§£æå™¨ï¼Œjs çš„è§£æå™¨å’Œ css çš„è§£æå™¨å°±å®Œå…¨ä¸ä¸€æ ·ã€‚ç›¸åŒçš„è¯­è¨€ä¹Ÿæœ‰ä¸åŒçš„è§£æå™¨ï¼Œæ¯”å¦‚ babel å’Œ espree</p><h2 id="AST-çš„ç”Ÿæˆ"><a href="#AST-çš„ç”Ÿæˆ" class="headerlink" title="AST çš„ç”Ÿæˆ"></a>AST çš„ç”Ÿæˆ</h2><p>è¿™ä¸€æ­¥ç§°ä¹‹ä¸ºè§£æ parseï¼Œè¿™ä¸ªæ­¥éª¤æœ‰ä¸¤ä¸ªé˜¶æ®µï¼Œä¸€æ˜¯è¯æ³•åˆ†æï¼ŒäºŒæ˜¯è¯­æ³•åˆ†æã€‚</p><p>è¯æ³•åˆ†ææ˜¯å°†ä»£ç è½¬åŒ–ä¸º token æ•°ç»„ï¼Œæˆ‘ä»¬å¸¸è§çš„ mdeditor å’Œ eslintï¼Œhightlight,æ¨¡æ¿è¯­æ³•ç­‰å°±æ˜¯åˆ©ç”¨äº†è¿™ä¸ªæ­¥éª¤å»åˆ¤æ–­</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Code</span></span><br><span class="line">a = <span class="number">3</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Token</span></span><br><span class="line">[</span><br><span class="line">  &#123; <span class="attr">type</span>: &#123; ... &#125;, <span class="attr">value</span>: <span class="string">&quot;a&quot;</span>, <span class="attr">start</span>: <span class="number">0</span>, <span class="attr">end</span>: <span class="number">1</span>, <span class="attr">loc</span>: &#123; ... &#125; &#125;,</span><br><span class="line">  &#123; <span class="attr">type</span>: &#123; ... &#125;, <span class="attr">value</span>: <span class="string">&quot;=&quot;</span>, <span class="attr">start</span>: <span class="number">2</span>, <span class="attr">end</span>: <span class="number">3</span>, <span class="attr">loc</span>: &#123; ... &#125; &#125;,</span><br><span class="line">  &#123; <span class="attr">type</span>: &#123; ... &#125;, <span class="attr">value</span>: <span class="string">&quot;3&quot;</span>, <span class="attr">start</span>: <span class="number">4</span>, <span class="attr">end</span>: <span class="number">5</span>, <span class="attr">loc</span>: &#123; ... &#125; &#125;,</span><br><span class="line">  ...</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>è¯­æ³•åˆ†ææ˜¯å°† token æµè½¬åŒ–ä¸ºç»“æ„åŒ–çš„ astï¼Œæ–¹ä¾¿æ“ä½œã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;type&quot;</span>: <span class="string">&quot;Program&quot;</span>,</span><br><span class="line">  <span class="string">&quot;start&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;end&quot;</span>: <span class="number">5</span>,</span><br><span class="line">  <span class="string">&quot;body&quot;</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;type&quot;</span>: <span class="string">&quot;ExpressionStatement&quot;</span>,</span><br><span class="line">      <span class="string">&quot;start&quot;</span>: <span class="number">0</span>,</span><br><span class="line">      <span class="string">&quot;end&quot;</span>: <span class="number">5</span>,</span><br><span class="line">      <span class="string">&quot;expression&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;type&quot;</span>: <span class="string">&quot;AssignmentExpression&quot;</span>,</span><br><span class="line">        <span class="string">&quot;start&quot;</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="string">&quot;end&quot;</span>: <span class="number">5</span>,</span><br><span class="line">        <span class="string">&quot;operator&quot;</span>: <span class="string">&quot;=&quot;</span>,</span><br><span class="line">        <span class="string">&quot;left&quot;</span>: &#123;</span><br><span class="line">          <span class="string">&quot;type&quot;</span>: <span class="string">&quot;Identifier&quot;</span>,</span><br><span class="line">          <span class="string">&quot;start&quot;</span>: <span class="number">0</span>,</span><br><span class="line">          <span class="string">&quot;end&quot;</span>: <span class="number">1</span>,</span><br><span class="line">          <span class="string">&quot;name&quot;</span>: <span class="string">&quot;a&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">&quot;right&quot;</span>: &#123;</span><br><span class="line">          <span class="string">&quot;type&quot;</span>: <span class="string">&quot;Literal&quot;</span>,</span><br><span class="line">          <span class="string">&quot;start&quot;</span>: <span class="number">4</span>,</span><br><span class="line">          <span class="string">&quot;end&quot;</span>: <span class="number">5</span>,</span><br><span class="line">          <span class="string">&quot;value&quot;</span>: <span class="number">3</span>,</span><br><span class="line">          <span class="string">&quot;raw&quot;</span>: <span class="string">&quot;3&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  <span class="string">&quot;sourceType&quot;</span>: <span class="string">&quot;module&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å®è·µ"><a href="#å®è·µ" class="headerlink" title="å®è·µ"></a>å®è·µ</h2><p>å¯é€šè¿‡è‡ªå·±å†™ä¸€ä¸ªè§£æå™¨ï¼Œå°†è¯­è¨€ DSL è§£æä¸º AST è¿›è¡Œç»ƒæ‰‹ï¼Œä»¥ä¸‹ä¸¤ä¸ªç¤ºä¾‹æ˜¯ä¸é”™çš„é€‰æ‹©</p><ol><li>è§£æç®€å•çš„ HTML ä¸º AST</li><li>è§£æ Marktodwn List ä¸º AST</li></ol><p>æˆ–å¯å‚è€ƒä¸€ä¸ªæœ€ç®€ç¼–è¯‘å™¨çš„å®ç° the super tiny compiler</p><h1 id="åŸç†ä¸è¿è¡Œæ—¶åˆ†æ"><a href="#åŸç†ä¸è¿è¡Œæ—¶åˆ†æ" class="headerlink" title="åŸç†ä¸è¿è¡Œæ—¶åˆ†æ"></a>åŸç†ä¸è¿è¡Œæ—¶åˆ†æ</h1><h2 id="webpack-runtime"><a href="#webpack-runtime" class="headerlink" title="webpack runtime"></a>webpack runtime</h2><p>webpack çš„ runtimeï¼Œä¹Ÿå°±æ˜¯ webpack æœ€åç”Ÿæˆçš„ä»£ç ï¼Œåšäº†ä»¥ä¸‹ä¸‰ä»¶äº‹ï¼š</p><ol><li><code>_webpack_modules_</code>:ç»´æŠ¤ä¸€ä¸ªæ‰€æœ‰æ¨¡å—çš„æ•°ç»„ã€‚å°†å…¥å£æ¨¡å—è§£æä¸º astï¼Œæ ¹æ® ast æ·±åº¦ä¼˜å…ˆæœç´¢å‡ºæ‰€æœ‰çš„æ¨¡å—ï¼Œå¹¶æ„å»ºå‡ºè¿™ä¸ªæ¨¡å—æ•°ç»„ã€‚æ¯ä¸ªæ¨¡å—éƒ½ç”±ä¸€ä¸ªåŒ…è£¹å‡½æ•°<code>(module, module.exports, __webpack_require__)</code>å¯¹æ¨¡å—è¿›è¡ŒåŒ…è£¹è€Œæˆã€‚</li><li><code>__webpack_require__(moduleId)</code>æ‰‹åŠ¨å®ç°åŠ è½½ä¸€ä¸ªæ¨¡å—ã€‚å¯¹å·²ç»åŠ è½½è¿‡çš„æ¨¡å—è¿›è¡Œç¼“å­˜ï¼Œå¯¹æœªåŠ è½½çš„æ¨¡å—ï¼Œæ‰§è¡Œ id å®šä½åˆ°<code>__webpack_modules__</code>ä¸­çš„åŒ…è£¹å‡½æ•°ï¼Œæ‰§è¡Œå¹¶è¿”å› module.exports å¹¶ç¼“å­˜</li><li><code>__webpack_require__(0)</code>: è¿è¡Œç¬¬ä¸€ä¸ªæ¨¡å—ï¼Œå³è¿è¡Œå…¥å£æ¨¡å—</li></ol><p>å¦å¤–ï¼Œå½“æ¶‰åŠåˆ°å¤šä¸ª chunk çš„æ‰“åŒ…æ–¹å¼ä¸­ï¼Œæ¯”å¦‚ code splitingï¼Œwebpack ä¼šæœ‰ jsonp åŠ è½½ chunk çš„è¿è¡Œæ—¶ä»£ç </p><p>ä»¥ä¸‹æ˜¯ <code>webpack runtime</code> çš„æœ€ç®€ä»£ç ï¼Œé…ç½®ç¤ºä¾‹å¯è§ <code>node-examples</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/******/</span> <span class="keyword">var</span> __webpack_modules__ = [</span><br><span class="line">  ,</span><br><span class="line">  <span class="comment">/* 0 */</span> <span class="comment">/* 1 */</span></span><br><span class="line">  <span class="comment">/***/</span> <span class="function">(<span class="params"><span class="built_in">module</span></span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">module</span>.exports = <span class="function">(<span class="params">...args</span>) =&gt;</span> args.reduce(<span class="function">(<span class="params">x, y</span>) =&gt;</span> x + y, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/***/</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">/******/</span></span><br><span class="line">];</span><br><span class="line"><span class="comment">/************************************************************************/</span></span><br><span class="line"><span class="comment">/******/</span> <span class="comment">// The module cache</span></span><br><span class="line"><span class="comment">/******/</span> <span class="keyword">var</span> __webpack_module_cache__ = &#123;&#125;;</span><br><span class="line"><span class="comment">/******/</span></span><br><span class="line"><span class="comment">/******/</span> <span class="comment">// The require function</span></span><br><span class="line"><span class="comment">/******/</span> <span class="function"><span class="keyword">function</span> <span class="title">__webpack_require__</span>(<span class="params">moduleId</span>) </span>&#123;</span><br><span class="line">  <span class="comment">/******/</span> <span class="comment">// Check if module is in cache</span></span><br><span class="line">  <span class="comment">/******/</span> <span class="keyword">var</span> cachedModule = __webpack_module_cache__[moduleId];</span><br><span class="line">  <span class="comment">/******/</span> <span class="keyword">if</span> (cachedModule !== <span class="literal">undefined</span>) &#123;</span><br><span class="line">    <span class="comment">/******/</span> <span class="keyword">return</span> cachedModule.exports;</span><br><span class="line">    <span class="comment">/******/</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">/******/</span> <span class="comment">// Create a new module (and put it into the cache)</span></span><br><span class="line">  <span class="comment">/******/</span> <span class="keyword">var</span> <span class="built_in">module</span> = (__webpack_module_cache__[moduleId] = &#123;</span><br><span class="line">    <span class="comment">/******/</span> <span class="comment">// no module.id needed</span></span><br><span class="line">    <span class="comment">/******/</span> <span class="comment">// no module.loaded needed</span></span><br><span class="line">    <span class="comment">/******/</span> <span class="built_in">exports</span>: &#123;&#125;,</span><br><span class="line">    <span class="comment">/******/</span></span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="comment">/******/</span></span><br><span class="line">  <span class="comment">/******/</span> <span class="comment">// Execute the module function</span></span><br><span class="line">  <span class="comment">/******/</span> __webpack_modules__[moduleId](</span><br><span class="line">    <span class="built_in">module</span>,</span><br><span class="line">    <span class="built_in">module</span>.exports,</span><br><span class="line">    __webpack_require__</span><br><span class="line">  );</span><br><span class="line">  <span class="comment">/******/</span></span><br><span class="line">  <span class="comment">/******/</span> <span class="comment">// Return the exports of the module</span></span><br><span class="line">  <span class="comment">/******/</span> <span class="keyword">return</span> <span class="built_in">module</span>.exports;</span><br><span class="line">  <span class="comment">/******/</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/******/</span></span><br><span class="line"><span class="comment">/************************************************************************/</span></span><br><span class="line"><span class="keyword">var</span> __webpack_exports__ = &#123;&#125;;</span><br><span class="line"><span class="comment">// This entry need to be wrapped in an IIFE because it need to be isolated against other modules in the chunk.</span></span><br><span class="line">(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> sum = __webpack_require__(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">  sum(<span class="number">3</span>, <span class="number">8</span>);</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure><p>å¯¹ webpack runtime åšè¿›ä¸€æ­¥çš„ç²¾ç®€ï¼Œä»£ç å¦‚ä¸‹</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> __webpack_modules__ = [<span class="function">()=&gt;</span>&#123;&#125;];</span><br><span class="line"><span class="keyword">const</span> __webpack_require__ = <span class="function">(<span class="params">id</span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="keyword">const</span> <span class="built_in">module</span> = &#123;</span><br><span class="line">    <span class="attr">exports</span>:&#123;&#125;;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> m = __webpack_modules__[id](<span class="built_in">module</span>,_webpack_require__)</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">module</span>.exports;</span><br><span class="line">&#125;</span><br><span class="line">__webpack_require__(<span class="number">0</span>);</span><br></pre></td></tr></table></figure><h2 id="rollup"><a href="#rollup" class="headerlink" title="rollup"></a>rollup</h2><p>åœ¨ rollup ä¸­ï¼Œå¹¶ä¸ä¼šå°†æ‰€æœ‰æ¨¡å—ç½®äº modules ä¸­ä½¿ç”¨ Module Wrapper è¿›è¡Œç»´æŠ¤ï¼Œä»–ä»…ä»…å°†æ‰€æœ‰æ¨¡å—é“ºå¹³å±•å¼€ã€‚</p><p>ä¸¾ä¾‹</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// index.js</span></span><br><span class="line"><span class="keyword">import</span> name <span class="keyword">from</span> <span class="string">&quot;./name&quot;</span>;</span><br><span class="line"><span class="built_in">console</span>.log(name);</span><br><span class="line"></span><br><span class="line"><span class="comment">//name.js</span></span><br><span class="line"><span class="keyword">const</span> name = <span class="string">&quot;jojo&quot;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> name;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰“åŒ…å</span></span><br><span class="line"><span class="comment">// output.js</span></span><br><span class="line"><span class="keyword">const</span> name = <span class="string">&quot;jojo&quot;</span>;</span><br><span class="line"><span class="built_in">console</span>.log(name);</span><br></pre></td></tr></table></figure><p>å¯¹äºä»–çš„è¿™ç§æ–¹æ¡ˆè¦æ˜¯é‡åˆ°å˜é‡å†²çªå¦‚ä½•è§£å†³ï¼Œå¦‚ä¸‹ï¼šç›´æ¥é‡æ–°å‘½å</p><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220801134201.png" alt=""></p><h1 id="è¿è¡Œæ—¶-chunk-åŠ è½½åˆ†æ"><a href="#è¿è¡Œæ—¶-chunk-åŠ è½½åˆ†æ" class="headerlink" title="è¿è¡Œæ—¶ chunk åŠ è½½åˆ†æ"></a>è¿è¡Œæ—¶ chunk åŠ è½½åˆ†æ</h1><p>é—®ï¼šwebpack çš„ code spliting æ˜¯å¦‚ä½•åŠ¨æ€åŠ è½½ chunk çš„?</p><p>ä¸€ä¸ª webpack è¿è¡Œæ—¶ï¼ŒåŒ…æ‹¬æœ€é‡è¦çš„ä¸¤ä¸ªæ•°æ®ç»“æ„ï¼š</p><ol><li><code>__webpack_modules__</code>ç»´æŠ¤ä¸€ä¸ªæ‰€æœ‰æ¨¡å—çš„æ•°ç»„ã€‚å°†å…¥å£æ¨¡å—è§£æä¸º astï¼Œæ ¹æ® ast æ·±åº¦ä¼˜å…ˆæœç´¢æ‰€æœ‰çš„æ¨¡å—ï¼Œå¹¶æ„å»ºå‡ºè¿™ä¸ªæ¨¡å—æ•°ç»„ã€‚æ¯ä¸ªæ¨¡å—éƒ½ç”±ä¸€ä¸ªåŒ…è£¹å‡½æ•°<code>(module, module.exports, __webpack_require__)</code>å¯¹æ¨¡å—è¿›è¡ŒåŒ…è£¹è€Œæˆã€‚</li><li><code>__webpack_require__(moduleId)</code>æ‰‹åŠ¨å®ç°åŠ è½½ä¸€ä¸ªæ¨¡å—ã€‚å¯¹å·²ç»åŠ è½½è¿‡çš„æ¨¡å—è¿›è¡Œç¼“å­˜ï¼Œå¯¹æœªåŠ è½½çš„æ¨¡å—ï¼Œæ ¹æ® id å®šä½åˆ°<code>__webpack_modules__</code>ä¸­çš„åŒ…è£¹å‡½æ•°ï¼Œæ‰§è¡Œå¹¶è¿”å›<code>module.exports</code>å¹¶ç¼“å­˜ã€‚</li></ol><h2 id="code-spliting"><a href="#code-spliting" class="headerlink" title="code spliting"></a>code spliting</h2><p>åœ¨ webpack ä¸­é€šè¿‡ import å¯ä»¥å®ç° code splitingã€‚å‡è®¾æœ‰ä»¥ä¸‹æ–‡ä»¶ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// index.js</span></span><br><span class="line"><span class="keyword">import</span>(<span class="string">&quot;./sum&quot;</span>).then(<span class="function">(<span class="params">m</span>) =&gt;</span> &#123;</span><br><span class="line">  m.default(<span class="number">3</span>, <span class="number">4</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// sum.js</span></span><br><span class="line"><span class="keyword">const</span> sum = <span class="function">(<span class="params">x, y</span>) =&gt;</span> x + y;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> sum;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ä¸‹é¢çš„ webpack é…ç½®è¿›è¡Œæ‰“åŒ…</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">entry</span>:<span class="string">&#x27;./index.js&#x27;</span>,</span><br><span class="line">  <span class="attr">mode</span>:<span class="string">&#x27;none&#x27;</span>,</span><br><span class="line">  <span class="attr">output</span>:&#123;</span><br><span class="line">    <span class="attr">filename</span>:<span class="string">&#x27;[name].[contenthash].js&#x27;</span>,</span><br><span class="line">    <span class="attr">chunkFilename</span>:<span class="string">&#x27;chunk.[name].[id].[contenthash].js&#x27;</span>,</span><br><span class="line">    <span class="attr">path</span>:path.resolve(_dirname,<span class="string">&#x27;dist/deterministic&#x27;</span>),</span><br><span class="line">    <span class="attr">clean</span>:<span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">optimization</span>:&#123;</span><br><span class="line">    <span class="attr">moduleIds</span>:<span class="string">&#x27;deterministic&#x27;</span>,</span><br><span class="line">    <span class="attr">chunkIds</span>:<span class="string">&#x27;deterministic&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="è¿è¡Œæ—¶è§£æ"><a href="#è¿è¡Œæ—¶è§£æ" class="headerlink" title="è¿è¡Œæ—¶è§£æ"></a>è¿è¡Œæ—¶è§£æ</h2><p>è§‚æµ‹æ‰“åŒ…åçš„æ–‡ä»¶<code>dist/deterministic/main.xxxxxx.js</code>,å¯ä»¥å‘ç°ï¼šä½¿ç”¨<code>import()</code>åŠ è½½æ•°æ®æ—¶ï¼Œä»¥ä¸Šä»£ç å°†è¢«ç¼–è¯‘ä¸ºä»¥ä¸‹ä»£ç </p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">__webpack_require__</span><br><span class="line">  .e(<span class="comment">/* import() | sum */</span> <span class="number">644</span>)</span><br><span class="line">  .then(__webpack_require__.bind(__webpack_require__, <span class="number">709</span>))</span><br><span class="line">  .then(<span class="function">(<span class="params">m</span>) =&gt;</span> &#123;</span><br><span class="line">    m.default(<span class="number">3</span>, <span class="number">4</span>);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶ 644 ä¸º chunkIdï¼Œè§‚æµ‹<code>chunk.sum.xxx.js</code>æ–‡ä»¶ï¼Œä»¥ä¸‹ä¸º sum å‡½æ•°æ‰€æ„å»ºçš„ chunk</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&quot;use strict&quot;</span>;</span><br><span class="line">(self[<span class="string">&quot;webpackChunk&quot;</span>] = self[<span class="string">&quot;webpackChunk&quot;</span>] || []).push([</span><br><span class="line">  [<span class="number">644</span>],</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="comment">/***/</span> <span class="number">709</span>: <span class="comment">/***/</span> <span class="function">(<span class="params"></span></span></span><br><span class="line"><span class="params"><span class="function">      __unused_webpack_module,</span></span></span><br><span class="line"><span class="params"><span class="function">      __webpack_exports__,</span></span></span><br><span class="line"><span class="params"><span class="function">      __webpack_require__</span></span></span><br><span class="line"><span class="params"><span class="function">    </span>) =&gt;</span> &#123;</span><br><span class="line">      __webpack_require__.r(__webpack_exports__);</span><br><span class="line">      <span class="comment">/* harmony export */</span> __webpack_require__.d(__webpack_exports__, &#123;</span><br><span class="line">        <span class="comment">/* harmony export */</span> <span class="keyword">default</span>: <span class="function">() =&gt;</span> __WEBPACK_DEFAULT_EXPORT__,</span><br><span class="line">        <span class="comment">/* harmony export */</span></span><br><span class="line">      &#125;);</span><br><span class="line">      <span class="keyword">const</span> sum = <span class="function">(<span class="params">x, y</span>) =&gt;</span> x + y;</span><br><span class="line"></span><br><span class="line">      <span class="comment">/* harmony default export */</span> <span class="keyword">const</span> __WEBPACK_DEFAULT_EXPORT__ = sum;</span><br><span class="line"></span><br><span class="line">      <span class="comment">/***/</span></span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">]);</span><br></pre></td></tr></table></figure><p>ä»¥ä¸‹ä¸¤ä¸ªæ•°æ®ç»“æ„æ˜¯åŠ è½½ chunk çš„å…³é”®ï¼š</p><ol><li><code>__webpack_require__.e</code>ï¼šåŠ è½½ chunkã€‚è¯¥å‡½æ•°ä½¿ç”¨<code>document.createElement(&#39;script&#39;)</code>å¼‚æ­¥åŠ è½½ chunk å¹¶å°è£…ä¸º promiseã€‚</li><li><code>self[&quot;webpackChunk&quot;].push</code>:JSONP callbackï¼Œæ”¶é›† modules è‡³<code>__webpack_modules__</code>å¹¶å°†<code>__webpack_require__.e</code>çš„ promise è¿›è¡Œ resolve</li></ol><p>å®é™…ä¸Šåœ¨ webpack ä¸­å¯ä»¥é…ç½®<code>output.chunkLoading</code>æ¥é€‰æ‹©åŠ è½½ chunk çš„æ–¹å¼ï¼Œæ¯”å¦‚é€‰æ‹©é€šè¿‡<code>import()</code>çš„æ–¹å¼æ¥åŠ è½½ã€‚ï¼ˆç”±äºåœ¨ç”Ÿäº§ç¯å¢ƒä¸­è¦è€ƒè™‘ import çš„å…¼å®¹æ€§ï¼Œç›®å‰ JSONP çš„æ–¹æ¡ˆæ¯”è¾ƒå¤šï¼‰</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&#x27;./index.js&#x27;</span>,</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&#x27;none&#x27;</span>,</span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&#x27;main.[contenthash].js&#x27;</span>,</span><br><span class="line">    <span class="attr">chunkFilename</span>: <span class="string">&#x27;[name].chunk.[chunkhash].js&#x27;</span>,</span><br><span class="line">    <span class="attr">path</span>: path.resolve(__dirname, <span class="string">&#x27;dist/import&#x27;</span>),</span><br><span class="line">    <span class="attr">clean</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="comment">// é»˜è®¤ä¸º `jsonp`</span></span><br><span class="line">    <span class="attr">chunkLoading</span>: <span class="string">&#x27;import&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h1 id="æ‰“åŒ…å™¨-webpack-rollup-å¦‚ä½•åŠ è½½-jsonï¼Œimage-ç­‰é-js-èµ„æº"><a href="#æ‰“åŒ…å™¨-webpack-rollup-å¦‚ä½•åŠ è½½-jsonï¼Œimage-ç­‰é-js-èµ„æº" class="headerlink" title="æ‰“åŒ…å™¨(webpack/rollup)å¦‚ä½•åŠ è½½ jsonï¼Œimage ç­‰é js èµ„æº"></a>æ‰“åŒ…å™¨(webpack/rollup)å¦‚ä½•åŠ è½½ jsonï¼Œimage ç­‰é js èµ„æº</h1><p>æˆ‘ä»¬çŸ¥é“åœ¨ webpack ä¸­ä¸€åˆ‡éƒ½æ˜¯æ¨¡å—ï¼Œæ‰€ä»¥åŠ è½½ json ç­‰é js èµ„æºçš„æ—¶å€™ï¼Œå°±éœ€è¦æ¨¡å—åŠ è½½å™¨ï¼Œä¹Ÿå°±æ˜¯ä¿—ç§°çš„ loaderã€‚å°†ä»–ä»¬è½¬åŒ–ä¸ºæ¨¡å—ã€‚</p><h2 id="åŠ è½½-json"><a href="#åŠ è½½-json" class="headerlink" title="åŠ è½½ json"></a>åŠ è½½ json</h2><p>ä»¥ json ä¸ºä¾‹å­</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// user.json ä¸­å†…å®¹</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;id&quot;</span>: <span class="number">10086</span>,</span><br><span class="line">  <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;jojo&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ç°ä»£å‰ç«¯ä¸­ï¼Œæˆ‘ä»¬æŠŠä»–è§†ä¸º module æ—¶ï¼Œä½¿ç”¨ import å¼•å…¥èµ„æºã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> user <span class="keyword">from</span> <span class="string">&quot;./user.json&quot;</span>;</span><br></pre></td></tr></table></figure><p>è€Œæˆ‘ä»¬çš„æ‰“åŒ…å™¨ï¼Œå¦‚ webpack ä¸ rollupï¼Œå°†é€šè¿‡ä»¥ä¸‹çš„æ–¹å¼æ¥åŠ è½½ json èµ„æº</p><p>è¿™æ ·å°†è¢«è§†ä¸ºæ™®é€šçš„ js</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®é™…ä¸Šä¼šè¢«ç¼–è¯‘ä¸ºä»¥ä¸‹å†…å®¹</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="number">10086</span>,</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;jojo&quot;</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>åœ¨ webpack ä¸­é€šè¿‡ loader å¤„ç†æ­¤ç±»èµ„æºï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span> (<span class="params">source</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> json = <span class="keyword">typeof</span> source === <span class="string">&quot;string&quot;</span> ? source : <span class="built_in">JSON</span>.stringfy(source);</span><br><span class="line">  <span class="keyword">return</span> <span class="string">`module.exports = <span class="subst">$&#123;json&#125;</span>`</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="åŠ è½½å›¾ç‰‡"><a href="#åŠ è½½å›¾ç‰‡" class="headerlink" title="åŠ è½½å›¾ç‰‡"></a>åŠ è½½å›¾ç‰‡</h2><p>é‚£å›¾ç‰‡æ˜¯å¦‚ä½•å¤„ç†çš„å‘¢ï¼Ÿ</p><p>æ›´ç®€å•ï¼Œä»–å°†æ›¿æ¢æˆè‡ªèº«çš„è·¯å¾„ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="string">`$PUBLIC_URL/assets/image/main.png`</span>;</span><br></pre></td></tr></table></figure><p>è€Œæˆ‘ä»¬åœ¨<code>import image</code>çš„æ—¶å€™ï¼Œå…¶å®æ˜¯å›¾ç‰‡è‡ªèº«çš„è·¯å¾„ï¼Œå°†ä»–ç½®äº<code>src</code>å±æ€§å³å¯ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> mainImage <span class="keyword">from</span> <span class="string">&#x27;main.jpg&#x27;</span>;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&#123;mainImage&#125;</span>&gt;</span></span></span><br></pre></td></tr></table></figure><h2 id="åŠ è½½-css"><a href="#åŠ è½½-css" class="headerlink" title="åŠ è½½ css"></a>åŠ è½½ css</h2><p>åœ¨ webpack ä¸­å¤„ç† css æ¯”è¾ƒè´¹åŠ²ã€‚éœ€è¦å€Ÿç”¨ä¸¤ä¸ª loader æ¥åšè¿™ä»¶äº‹ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</span><br><span class="line">        use: [<span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ol><li><code>css-loader</code>å¤„ç† css ä¸­ <code>url</code> ä¸<code>@import</code>,å¹¶å°†å…¶è§†ä¸ºæ¨¡å—å¼•å…¥ï¼Œæ­¤å¤„æ˜¯é€šè¿‡ postcss æ¥è§£æå¤„ç†ã€‚postcss å¯¹äºå·¥ç¨‹åŒ–ä¸­ css çš„å¤„ç†å¯è§ä¸€æ–‘ã€‚</li><li><code>style-loader</code>å°†æ ·å¼æ³¨å…¥åˆ° DOM ä¸­ã€‚</li></ol><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@import</span> url(./basic.css);</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.bg</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">./shanyue.png</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h3><p>cssloader çš„åŸç†å°±æ˜¯ postcssï¼Œå€Ÿç”¨<code>postcss-value-parser</code>è§£æ css ä¸º astã€‚å¹¶å°† css ä¸­çš„<code>url()</code>ä¸<code>@import</code>è§£æä¸ºæ¨¡å—ã€‚</p><p>styleloader å°† css æ³¨å…¥åˆ° domï¼ŒåŸç†ä¸ºä½¿ç”¨ DOM API æ‰‹åŠ¨åˆ›å»º style æ ‡ç­¾ï¼Œå¹¶å°† css å†…å®¹æ³¨å…¥åˆ° style ä¸­ã€‚</p><p>æºç å®ç°ä¸­å€Ÿç”¨äº†è®¸å¤šè¿è¡Œæ—¶ä»£ç ã€‚è€Œæœ€ç®€å•çš„å®ç°ä»…éœ€å‡ è¡Œä»£ç </p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span>(<span class="params">source</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">`</span></span><br><span class="line"><span class="string">  function injectCSS(css)&#123;</span></span><br><span class="line"><span class="string">    const style = document.createElement(&#x27;style&#x27;);</span></span><br><span class="line"><span class="string">    style.appendChild(document.createTextNode(css))</span></span><br><span class="line"><span class="string">    document.head.appendChild(style)</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  injectCSS(\`<span class="subst">$&#123;source&#125;</span>`</span>\)</span><br><span class="line">  <span class="string">`</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ DOM API åŠ è½½ CSS èµ„æºï¼Œç”±äº CSS éœ€è¦åœ¨ JS èµ„æºåŠ è½½å®Œåé€šè¿‡ DOM API è¿›è¡Œæ§åˆ¶åŠ è½½ï¼Œå®¹æ˜“å‡ºç°é¡µé¢æŠ–åŠ¨ï¼Œåœ¨çº¿ä¸Šä½æ•ˆä¸”æ€§èƒ½ä½ä¸‹ã€‚ä¸”å¯¹äº SSR æå…¶ä¸å‹å¥½ã€‚</p><p>ç”±äºæ€§èƒ½éœ€è¦ï¼Œåœ¨çº¿ä¸Šé€šå¸¸å•ç‹¬åŠ è½½ cssï¼Œè¿™å°±è¦æ±‚æ‰“åŒ…å™¨èƒ½å¤Ÿå°† css æ‰“åŒ…ï¼Œæ­¤æ—¶éœ€è¦å€ŸåŠ©äº<code>mini-css-extract-plugin</code>å°† css å•ç‹¬æŠ½ç¦»å‡ºæ¥ã€‚</p><h2 id="æ³¨å…¥-js-åˆ°-html"><a href="#æ³¨å…¥-js-åˆ°-html" class="headerlink" title="æ³¨å…¥ js åˆ° html"></a>æ³¨å…¥ js åˆ° html</h2><p>å¦‚æœæœ€ç»ˆæ‰“åŒ…çš„ mainjs æ—¢æ²¡æœ‰åš code splitingï¼Œä¹Ÿæ²¡æœ‰åš hash åŒ–è·¯å¾„ã€‚å¤§å¯ä»¥é€šè¿‡åœ¨<code>index.html</code>ä¸­æ‰‹åŠ¨æ§åˆ¶ js èµ„æºã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;main.js&quot;</span> <span class="attr">defer</span> /&gt;</span><span class="handlebars"><span class="xml"></span></span></span><br><span class="line"><span class="xml"><span class="handlebars"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span></span><br></pre></td></tr></table></figure><p>ä¸è¿‡å¾€å¾€äº‹ä¸æ„¿è¿ï¼š</p><ol><li>mainjs å³æˆ‘ä»¬æœ€åç”Ÿæˆçš„æ–‡ä»¶å¸¦æœ‰ hash å€¼ã€‚</li><li>ç”±äºé•¿æœŸç¼“å­˜çš„éœ€è¦ï¼Œå…¥å£æ–‡ä»¶ä¸ä»…åªæœ‰ä¸€ä¸ªï¼Œè¿˜åŒ…æ‹¬ç¬¬ä¸‰æ–¹æ¨¡å—æ‰“åŒ…è€Œæˆçš„ vendorjsï¼ŒåŒæ ·å¸¦æœ‰ hash</li><li>è„šæœ¬åœ°å€åŒæ—¶éœ€è¦æ³¨å…¥ publicPathï¼Œè€Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸æµ‹è¯•ç¯å¢ƒçš„ publicPath å¹¶ä¸ä¸€è‡´ã€‚</li></ol><p>å› æ­¤éœ€è¦ä¸€ä¸ªæ’ä»¶åšè¿™ä»¶äº‹æƒ…ï¼Œåœ¨ webpack ä¸­å«<code>html-webpack-plugin</code>åœ¨ rollup çš„ä¸–ç•Œé‡Œå«<code>@rollup/plugin-html</code></p><p>è€Œæ³¨å…¥çš„åŸç†ä¸ºå½“æ‰“åŒ…å™¨å·²ç”Ÿæˆ <code>entryPoint</code> æ–‡ä»¶èµ„æºåï¼Œè·å¾—å…¶æ–‡ä»¶åä»¥åŠ <code>publicPath</code>ï¼Œå¹¶å°†å…¶æ³¨å…¥åˆ° <code>html</code> ä¸­</p><p>ä»¥ <code>html-webpack-plugin</code> ä¸ºä¾‹ï¼Œå®ƒåœ¨ <code>compilation</code> å¤„ç†èµ„æºçš„ <code>processAssets</code> è·å¾—å…¶æ‰“åŒ…ç”Ÿæˆçš„èµ„æºã€‚ä¼ªä»£ç å¦‚ä¸‹ï¼Œå¯åœ¨ <code>mini-node:html-webpack-plugin (opens new window)</code>è·å¾—æºç å¹¶è¿è¡Œç¤ºä¾‹ã€‚<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HtmlWebpackPlugin</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">options</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.options = options || &#123;&#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">apply</span>(<span class="params">compiler</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> webpack = compiler.webpack;</span><br><span class="line"></span><br><span class="line">    compiler.hooks.thisCompilation.tap(<span class="string">&quot;HtmlWebpackPlugin&quot;</span>, <span class="function">(<span class="params">compilation</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// compilation æ˜¯ webpack ä¸­æœ€é‡è¦çš„å¯¹è±¡ï¼Œæ–‡æ¡£è§ [compilation-object](https://webpack.js.org/api/compilation-object/#compilation-object-methods)</span></span><br><span class="line"></span><br><span class="line">      compilation.hooks.processAssets.tapAsync(</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">name</span>: <span class="string">&quot;HtmlWebpackPlugin&quot;</span>,</span><br><span class="line"></span><br><span class="line">          <span class="comment">// processAssets å¤„ç†èµ„æºçš„æ—¶æœºï¼Œæ­¤é˜¶æ®µä¸ºèµ„æºå·²ä¼˜åŒ–åï¼Œæ›´å¤šé˜¶æ®µè§æ–‡æ¡£</span></span><br><span class="line">          <span class="comment">// https://webpack.js.org/api/compilation-hooks/#list-of-asset-processing-stages</span></span><br><span class="line">          <span class="attr">stage</span>: webpack.Compilation.PROCESS_ASSETS_STAGE_OPTIMIZE_INLINE,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="function">(<span class="params">compilationAssets, callback</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="comment">// compilationAssets å°†å¾—åˆ°æ‰€æœ‰ç”Ÿæˆçš„èµ„æºï¼Œå¦‚å„ä¸ª chunk.jsã€å„ä¸ª imageã€css</span></span><br><span class="line"></span><br><span class="line">          <span class="comment">// è·å– webpac.output.publicPath é€‰é¡¹ï¼Œ(PS: publicPath é€‰é¡¹æœ‰å¯èƒ½æ˜¯é€šè¿‡å‡½æ•°è®¾ç½®)</span></span><br><span class="line">          <span class="keyword">const</span> publicPath = getPublicPath(compilation);</span><br><span class="line"></span><br><span class="line">          <span class="comment">// æœ¬ç¤ºä¾‹ä»…ä»…è€ƒè™‘å•ä¸ª entryPoint çš„æƒ…å†µ</span></span><br><span class="line">          <span class="comment">// compilation.entrypoints å¯è·å–å…¥å£æ–‡ä»¶ä¿¡æ¯</span></span><br><span class="line">          <span class="keyword">const</span> entryNames = <span class="built_in">Array</span>.from(compilation.entrypoints.keys());</span><br><span class="line"></span><br><span class="line">          <span class="comment">// entryPoint.getFiles() å°†è·å–åˆ°è¯¥å…¥å£çš„æ‰€æœ‰èµ„æºï¼Œå¹¶èƒ½å¤Ÿä¿è¯åŠ è½½é¡ºåºï¼ï¼ï¼å¦‚ runtime-chunk -&gt; main-chunk</span></span><br><span class="line">          <span class="keyword">const</span> assets = entryNames</span><br><span class="line">            .map(<span class="function">(<span class="params">entryName</span>) =&gt;</span></span><br><span class="line">              compilation.entrypoints.get(entryName).getFiles()</span><br><span class="line">            )</span><br><span class="line">            .flat();</span><br><span class="line">          <span class="keyword">const</span> scripts = assets.map(<span class="function">(<span class="params">src</span>) =&gt;</span> publicPath + src);</span><br><span class="line">          <span class="keyword">const</span> content = html(&#123;</span><br><span class="line">            <span class="attr">title</span>: <span class="built_in">this</span>.options.title || <span class="string">&quot;Demo&quot;</span>,</span><br><span class="line">            scripts,</span><br><span class="line">          &#125;);</span><br><span class="line"></span><br><span class="line">          <span class="comment">// emitAsset ç”¨ä»¥ç”Ÿæˆèµ„æºæ–‡ä»¶ï¼Œä¹Ÿæ˜¯æœ€é‡è¦çš„ä¸€æ­¥</span></span><br><span class="line">          compilation.emitAsset(</span><br><span class="line">            <span class="string">&quot;index.html&quot;</span>,</span><br><span class="line">            <span class="keyword">new</span> webpack.sources.RawSource(content)</span><br><span class="line">          );</span><br><span class="line">          callback();</span><br><span class="line">        &#125;</span><br><span class="line">      );</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h1 id="HMR"><a href="#HMR" class="headerlink" title="HMR"></a>HMR</h1><p>å…¨ç§°Hot Module Replacementï¼Œçƒ­æ¨¡å—æ›¿æ¢ï¼Œæ— éœ€åˆ·æ–°åœ¨å†…å­˜ç¯å¢ƒä¸­å³å¯æ›¿æ¢æ‰æ—§æ¨¡å—ã€‚ä¸live Reloadç›¸å¯¹åº”</p><p>åœ¨webpackçš„è¿è¡Œæ—¶ä¸­ï¼Œ<code>__webpack_modules__</code>ç”¨äºç»´æŠ¤æ‰€æœ‰æ¨¡å—ã€‚</p><p>è€Œçƒ­æ¨¡å—æ›¿æ¢çš„åŸç†ï¼Œå³æ˜¯é€šè¿‡chunkçš„æ–¹å¼åŠ è½½æœ€æ–°çš„modulesï¼Œæ‰¾åˆ°<code>_webpack_modules_</code>é‡Œé¢å¯¹åº”çš„æ¨¡å—é€ä¸€æ›¿æ¢ã€‚å¹¶åˆ é™¤å…¶ä¸Šä¸‹ç¼“å­˜</p><p>å…¶ç²¾ç®€æ•°æ®ç»“æ„å¦‚ä¸‹ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// webpack è¿è¡Œæ—¶ä»£ç </span></span><br><span class="line"><span class="keyword">const</span> __webpack_modules = [</span><br><span class="line">  <span class="function">(<span class="params"><span class="built_in">module</span>, <span class="built_in">exports</span>, __webpack_require__</span>) =&gt;</span> &#123;</span><br><span class="line">    __webpack_require__(<span class="number">0</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;è¿™æ˜¯ä¸€å·æ¨¡å—&quot;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="comment">// HMR Chunk ä»£ç </span></span><br><span class="line"><span class="comment">// JSONP å¼‚æ­¥åŠ è½½çš„æ‰€éœ€è¦æ›´æ–°çš„ modulesï¼Œå¹¶åœ¨ __webpack_modules__ ä¸­è¿›è¡Œæ›¿æ¢</span></span><br><span class="line">self[<span class="string">&quot;webpackHotUpdate&quot;</span>](<span class="number">0</span>, &#123;</span><br><span class="line">  <span class="number">1</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;è¿™æ˜¯æœ€æ–°çš„ä¸€å·æ¨¡å—&quot;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p><p>ä»¥ä¸‹ä¸ºæ›´å…·ä½“æ›´å®Œæ•´çš„æµç¨‹ï¼Œæ¯ä¸€æ­¥éƒ½æ¶‰åŠå¾ˆå¤šï¼Œæœ‰å…´è¶£çš„å¯ä»¥é˜…è¯»webpack-dev-serverä»¥åŠå¼€å‘ç¯å¢ƒwebpackè¿è¡Œæ—¶çš„æºç </p><ol><li>webpack-dev-serverå°†æ‰“åŒ…è¾“å‡ºbundleä½¿ç”¨å†…å­˜å‹æ–‡ä»¶ç³»ç»Ÿæ§åˆ¶ï¼Œè€ŒéçœŸå®çš„æ–‡ä»¶ç³»ç»Ÿã€‚æ­¤æ—¶ä½¿ç”¨çš„æ˜¯memfsæ¨¡æ‹Ÿnodeçš„fs API</li><li>æ¯å½“æ–‡ä»¶å‘ç”Ÿå˜æ›´çš„æ—¶å€™ï¼Œwebpackä¼šé‡æ–°ç¼–è¯‘ï¼Œwebpack-dev-serverå°†ä¼šç›‘æ§åˆ°æ­¤æ—¶æ–‡ä»¶å˜æ›´äº‹ä»¶ã€‚å¹¶æ‰¾åˆ°å¯¹åº”çš„moduleã€‚æ­¤æ—¶ä½¿ç”¨çš„æ˜¯chokidarçš„æ–‡ä»¶ç›‘æ§æ¨¡å—</li><li>webpack-dev-serverå°†ä¼šæŠŠå˜æ›´æ¨¡å—é€šçŸ¥åˆ°æµè§ˆå™¨ç«¯ï¼Œæ­¤æ—¶ä½¿ç”¨websocketä¸æµè§ˆå™¨è¿›è¡Œäº¤æµã€‚æ­¤æ—¶ä½¿ç”¨çš„æ˜¯ws</li><li>æµè§ˆå™¨æ ¹æ®websocketæ¥æ”¶åˆ°hashï¼Œå¹¶é€šè¿‡hashä»¥jsonpçš„æ–¹å¼è¯·æ±‚æ›´æ–°æ¨¡å—çš„chunk</li><li>æµè§ˆå™¨åŠ è½½chunkï¼Œå¹¶ä½¿ç”¨æ–°çš„æ¨¡å—å¯¹å°±æ¨¡å—è¿›è¡Œçƒ­æ›¿æ¢ã€‚å¹¶åˆ é™¤å…¶ä¸Šä¸‹ç¼“å­˜</li></ol><h1 id="æ„å»ºæ€§èƒ½ä¼˜åŒ–"><a href="#æ„å»ºæ€§èƒ½ä¼˜åŒ–" class="headerlink" title="æ„å»ºæ€§èƒ½ä¼˜åŒ–"></a>æ„å»ºæ€§èƒ½ä¼˜åŒ–</h1><p>é¦–å…ˆæˆ‘ä»¬è¦çŸ¥é“æ€ä¹ˆè¯„ä¼°æ€§èƒ½ï¼šä½¿ç”¨<a href="https://github.com/stephencookdev/speed-measure-webpack-plugin">speed-measure-webpack-plugin</a>å¯ä»¥è¯„ä¼°æ¯ä¸ªloader/pluginçš„æ‰§è¡Œè€—æ—¶ã€‚</p><h2 id="æ›´å¿«çš„loaderï¼šswc"><a href="#æ›´å¿«çš„loaderï¼šswc" class="headerlink" title="æ›´å¿«çš„loaderï¼šswc"></a>æ›´å¿«çš„loaderï¼šswc</h2><p>åœ¨webpackä¸­è€—æ—¶æœ€ä¹…çš„æ˜¯è´Ÿè´£astè½¬æ¢çš„loaderã€‚</p><p>å½“loaderè¿›è¡Œç¼–è¯‘çš„æ—¶å€™ï¼Œastæ“ä½œå‡ä¸ºcpuå¯†é›†å‹ä»»åŠ¡ï¼Œä½¿ç”¨jsæ€§èƒ½ä½ä¸‹ï¼Œæ­¤æ—¶å¯ä»¥é‡‡ç”¨é«˜æ€§èƒ½è¯­è¨€rustç¼–å†™çš„swc</p><p>æ¯”å¦‚jsè½¬åŒ–ç”±babelè½¬åŒ–ä¸ºæ›´å¿«çš„swc</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>: &#123;</span><br><span class="line">  <span class="attr">rules</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">test</span>: <span class="regexp">/\.m?js$/</span>,</span><br><span class="line">      exclude: <span class="regexp">/(node_modules)/</span>,</span><br><span class="line">      use: &#123;</span><br><span class="line">        <span class="attr">loader</span>: <span class="string">&quot;swc-loader&quot;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  ];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æŒä¹…åŒ–ç¼“å­˜cache"><a href="#æŒä¹…åŒ–ç¼“å­˜cache" class="headerlink" title="æŒä¹…åŒ–ç¼“å­˜cache"></a>æŒä¹…åŒ–ç¼“å­˜cache</h2><p>webpackå†…ç½®äº†å…³äºç¼“å­˜çš„æ’ä»¶ï¼Œå¯ä»¥é€šè¿‡cacheå­—æ®µå¼€å¯ã€‚</p><p>ä»–å°†moduleï¼Œchunkç­‰ä¿¡æ¯åºåˆ—åŒ–åˆ°ç£ç›˜ä¸­ï¼ŒäºŒæ¬¡æ„å»ºé¿å…é‡å¤ç¼–è¯‘è®¡ç®—ï¼Œç¼–è¯‘é€Ÿåº¦å¾—åˆ°å¾ˆå¤§çš„æå‡ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">cache</span>: &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&quot;filesystem&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚å¯¹ä¸€ä¸ªjsæ–‡ä»¶é…ç½®äº†eslintï¼Œtsï¼Œbabelç­‰loaderã€‚å¯èƒ½æ‰§è¡Œäº”æ¬¡ç¼–è¯‘ã€‚è¢«äº”æ¬¡è§£æä¸ºastã€‚</p><ol><li>acornï¼šç”¨äºä¾èµ–åˆ†æï¼Œè§£æä¸ºacornçš„ast</li><li>eslint-parserï¼š ç”¨ä»¥lintï¼Œè§£æä¸ºespreeçš„ast</li><li>tsï¼šç”¨ä»¥tsâ€¦</li><li>babel: è½¬åŒ–es6+</li><li>terserï¼šå‹ç¼©æ··æ·†ã€‚è§£æä¸ºacornçš„ast</li></ol><p>å½“å¼€å¯äº†æŒä¹…åŒ–ç¼“å­˜ï¼Œæœ€è€—æ—¶çš„astè§£æå°†èƒ½å¤Ÿä»ç£ç›˜çš„ç¼“å­˜ä¸­è·å–ï¼Œå†æ¬¡ç¼–è¯‘æ—¶æ— éœ€è¿›è¡Œè§£æast</p><p>å¾—ç›ŠäºæŒä¹…åŒ–ç¼“å­˜ã€‚äºŒæ¬¡ç¼–è¯‘ç”šè‡³å¯å¾—åˆ°ä¸unbundleçš„viteç›¸è¿‘çš„å¼€å‘ä½“éªŒã€‚</p><h2 id="å¤šçº¿ç¨‹-thread-loader"><a href="#å¤šçº¿ç¨‹-thread-loader" class="headerlink" title="å¤šçº¿ç¨‹ thread-loader"></a>å¤šçº¿ç¨‹ thread-loader</h2><p><code>thread-loader</code>ä¸ºå®˜æ–¹æ¨èçš„å¼€å¯å¤šçº¿ç¨‹çš„loaderï¼Œå¯ä»¥å¯¹babelè§£æastæ—¶å¼€å¯å¤šçº¿ç¨‹å¤„ç†ï¼Œæå‡ç¼–è¯‘çš„æ€§èƒ½ã€‚<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</span><br><span class="line">        use: [</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">loader</span>: <span class="string">&quot;thread-loader&quot;</span>,</span><br><span class="line">            <span class="attr">options</span>: &#123;</span><br><span class="line">              <span class="attr">workers</span>: <span class="number">8</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;,</span><br><span class="line">          <span class="string">&quot;babel-loader&quot;</span>,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p><p>åœ¨webpack4ä¸­ä½¿ç”¨çš„æ˜¯happypack pluginã€‚butä»–å·²ç»å¾ˆä¹…ä¸ç»´æŠ¤äº†ã€‚</p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/æ‰“åŒ…å™¨çš„èµ„æºå¤„ç†.png" alt=""></p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="Webpackç³»åˆ—" scheme="https://zlinni.github.io/categories/Webpack%E7%B3%BB%E5%88%97/"/>
    
    
    <category term="å‰ç«¯" scheme="https://zlinni.github.io/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="Webpack" scheme="https://zlinni.github.io/tags/Webpack/"/>
    
  </entry>
  
  <entry>
    <title>TypeScript_Challenges</title>
    <link href="https://zlinni.github.io/posts/4172318439/"/>
    <id>https://zlinni.github.io/posts/4172318439/</id>
    <published>2022-07-24T14:19:08.000Z</published>
    <updated>2025-02-26T08:55:40.412Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><div class="note primary flat"><p>å¼€å§‹æå‰æ‰¹ç›´é€šè½¦å•¦~~ æœ¬ç¯‡å¸¦æ¥ ts è¶…é›†çš„å„ç§æŒ‘æˆ˜åŠ ä¸ªäººè§£è¯´ã€‚æºç åœ°å€ï¼š<a href="https://github.com/type-challenges/type-challenges/">ä¼ é€é—¨</a></p></div><h1 id="Hello-World"><a href="#Hello-World" class="headerlink" title="Hello World"></a>Hello World</h1><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220724223740.png" alt=""></p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> HelloWorld = <span class="built_in">string</span>;</span><br></pre></td></tr></table></figure><h1 id="Pick"><a href="#Pick" class="headerlink" title="Pick"></a>Pick</h1><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220724223909.png" alt=""></p><p>code</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> MyPick&lt;T, K&gt; = &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> MyPick&lt;T, K <span class="keyword">extends</span> keyof T&gt; = &#123;</span><br><span class="line">  [P <span class="keyword">in</span> K]: T[P];</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>è§£é‡Šï¼špick å°±æ˜¯è·å–ç¬¬ä¸€ä¸ªå‚æ•°çš„ç±»å‹çš„å…¶ä¸­å‡ ä¸ªï¼Œå†™æ³•æ˜¯<code>Pick&lt;target,&#39;å±æ€§1&#39;|&#39;å±æ€§2&#39;&gt;</code>ï¼Œæ‰€ä»¥è¦å®ç°ä»–ï¼Œå°±æ˜¯è¯´ç¬¬äºŒä¸ªå±æ€§è¦åœ¨ T ä¸­ï¼Œextends keyof ä¿è¯ K çš„æ‰€æœ‰çš„ç±»å‹åœ¨ T ä¸­ï¼Œin ä¿è¯ P æ‰€æœ‰çš„ç±»å‹åœ¨ K ä¸­ã€‚</p><p>é‚£ä¹ˆè¿™é‡Œä¼šæœ‰ä¸€ä¸ªç–‘é—®ã€‚in å’Œ keyof çš„åŒºåˆ«</p><p>é¦–å…ˆ keyof æ˜¯å– interface çš„è”åˆç±»å‹ï¼Œ</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> UserInfo &#123;</span><br><span class="line">  <span class="attr">userName</span>: <span class="string">&quot;jojo&quot;</span>;</span><br><span class="line">  psw: <span class="string">&quot;123&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> value = keyof UserInfo;</span><br><span class="line"><span class="comment">// value= &#x27;userName&#x27;|&#x27;psw&#x27;</span></span><br></pre></td></tr></table></figure><p>in æ˜¯å–è”åˆç±»å‹ï¼Œä¸»è¦ç”¨äºæ•°ç»„å’Œå¯¹è±¡çš„æ„å»ºã€‚<br>åˆ‡è®°ä¸è¦ç”¨äº interface å¦åˆ™ä¼šæŠ¥é”™ï¼Œ</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> name = <span class="string">&quot;firstName&quot;</span> | <span class="string">&quot;lastName&quot;</span>;</span><br><span class="line"><span class="keyword">type</span> JOJOName = &#123;</span><br><span class="line">  [key <span class="keyword">in</span> name]: <span class="built_in">string</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//JOJOName = &#123;firstName:string,lastName:string&#125;</span></span><br></pre></td></tr></table></figure><p>ç”¨äºå®é™…å¼€å‘ï¼Œä¸¾ä¾‹</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getValue</span>(<span class="params">obj: <span class="built_in">Object</span>, key: <span class="built_in">string</span></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> obj[key];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> obj1 = &#123; <span class="attr">name</span>: <span class="string">&quot;jojo&quot;</span> &#125;;</span><br><span class="line"><span class="keyword">const</span> value = getValue(obj1, <span class="string">&quot;name&quot;</span>);</span><br></pre></td></tr></table></figure><p>è¿™æ ·å†™å°±ä¸§å¤±äº† ts çš„ä¼˜åŠ¿</p><ol><li>æ— æ³•ç¡®å®šè¿”å›å€¼çš„ç±»å‹ï¼Œ</li><li>æ— æ³•å¯¹ key è¿›è¡Œçº¦æŸ</li></ol><p>æ‰€ä»¥æˆ‘ä»¬è¦è¿™æ ·å†™</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getValue</span>&lt;<span class="title">T</span> <span class="title">extends</span> <span class="title">Object</span>, <span class="title">K</span> <span class="title">extends</span> <span class="title">keyof</span> <span class="title">T</span>&gt;(<span class="params">obj: T, key: K</span>): <span class="title">T</span>[<span class="title">K</span>] </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> obj[key];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> obj1 = &#123; <span class="attr">name</span>: <span class="string">&quot;jojo&quot;</span> &#125;;</span><br><span class="line"><span class="keyword">const</span> value = getValue(obj1, <span class="string">&quot;name&quot;</span>);</span><br><span class="line"><span class="comment">// å¦‚æœç¬¬äºŒä¸ªå‚æ•°ä¸æ˜¯obj1ä¸­çš„å‚æ•°å°±ä¼šæŠ¥é”™</span></span><br></pre></td></tr></table></figure><h1 id="Readonly"><a href="#Readonly" class="headerlink" title="Readonly"></a>Readonly</h1><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220725095917.png" alt=""></p><p>è§£é‡Šï¼šéœ€è¦å°† T ä¸­çš„å‚æ•°å˜ä¸ºåªè¯»</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> MyReadonly&lt;T&gt; = &#123;</span><br><span class="line">  <span class="keyword">readonly</span> [P <span class="keyword">in</span> keyof T]: T[P];</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h1 id="Tuple-to-Object-å…ƒç»„è½¬æ¢ä¸ºå¯¹è±¡"><a href="#Tuple-to-Object-å…ƒç»„è½¬æ¢ä¸ºå¯¹è±¡" class="headerlink" title="Tuple to Object å…ƒç»„è½¬æ¢ä¸ºå¯¹è±¡"></a>Tuple to Object å…ƒç»„è½¬æ¢ä¸ºå¯¹è±¡</h1><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220725100347.png" alt=""></p><p>è§£é‡Šï¼šéœ€è¦å–å‡ºå…ƒç»„çš„å€¼ï¼Œå¹¶ä¸”æ„é€ æˆå¯¹è±¡</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> TupleToObject&lt;T <span class="keyword">extends</span> <span class="keyword">readonly</span> <span class="built_in">any</span>[]&gt; = &#123;</span><br><span class="line">  [P <span class="keyword">in</span> T[<span class="built_in">number</span>]]: P;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>æ³¨æ„<code>T[number]</code>æ˜¯å¯ä»¥å–å‡ºå…ƒç»„ä¸­çš„å€¼,æ‰€ä»¥ä¸ç”¨ keyof äº†</p><h1 id="ç¬¬ä¸€ä¸ªå…ƒç´ "><a href="#ç¬¬ä¸€ä¸ªå…ƒç´ " class="headerlink" title="ç¬¬ä¸€ä¸ªå…ƒç´ "></a>ç¬¬ä¸€ä¸ªå…ƒç´ </h1><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220725103040.png" alt=""></p><p>è§£é‡Šï¼šå–å‡º T çš„ç¬¬ä¸€ä¸ªå…ƒç´  éç©ºåˆ¤æ–­</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> First&lt;T <span class="keyword">extends</span> <span class="built_in">any</span>[]&gt; = T <span class="keyword">extends</span> <span class="built_in">never</span>[] ? <span class="built_in">never</span> : T[<span class="number">0</span>];</span><br></pre></td></tr></table></figure><h1 id="è·å–å…ƒç»„é•¿åº¦"><a href="#è·å–å…ƒç»„é•¿åº¦" class="headerlink" title="è·å–å…ƒç»„é•¿åº¦"></a>è·å–å…ƒç»„é•¿åº¦</h1><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220725103445.png" alt=""></p><p>è§£é‡Šï¼šå¦‚æœå…ƒç»„å­˜åœ¨ length å±æ€§åˆ™è¿”å› length å€¼</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Length&lt;T <span class="keyword">extends</span> <span class="keyword">readonly</span> <span class="built_in">any</span>[]&gt; = T <span class="keyword">extends</span> &#123; <span class="attr">length</span>: infer L &#125;</span><br><span class="line">  ? L</span><br><span class="line">  : <span class="built_in">never</span>;</span><br></pre></td></tr></table></figure><p>æ³¨æ„è¾“å…¥çš„ç±»å‹æ˜¯æ•°ç»„æ‰è¡Œ</p><h1 id="Exclude"><a href="#Exclude" class="headerlink" title="Exclude"></a>Exclude</h1><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220725104229.png" alt=""></p><p>è§£é‡Šï¼šæ’é™¤ T ä¸­å¸¦æœ‰ U çš„ç±»å‹</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> MyExclude&lt;T,U&gt; = T <span class="keyword">extends</span> U:<span class="built_in">never</span>:T</span><br></pre></td></tr></table></figure><p>ç®€è¿° T çš„ç±»å‹åœ¨ U é‡Œé¢å°±æ’é™¤</p><h1 id="Awaited"><a href="#Awaited" class="headerlink" title="Awaited"></a>Awaited</h1><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220725123703.png" alt=""></p><p>è§£é‡Šï¼šå®ç°è¯¥æ–¹æ³•è¿”å› promise å¯¹è±¡ç±»å‹ï¼Œè¦ç‚¹æ˜¯åˆ¤æ–­å…¶ä¸­ç±»å‹æ˜¯å¦ä¸º promise åœ¨åˆ¤æ–­ promise å†…çš„ç±»å‹æ˜¯å¦è¿˜æ˜¯ promise ç±»å‹(é€’å½’)</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> MyAwaited&lt;T <span class="keyword">extends</span> <span class="built_in">Promise</span>&lt;unknown&gt;&gt; = T <span class="keyword">extends</span> <span class="built_in">Promise</span>&lt;infer U&gt;</span><br><span class="line">  ? U <span class="keyword">extends</span> <span class="built_in">Promise</span>&lt;unknown&gt;</span><br><span class="line">    ? MyAwaited&lt;U&gt;</span><br><span class="line">    : U</span><br><span class="line">  : <span class="built_in">never</span>;</span><br></pre></td></tr></table></figure><h1 id="If"><a href="#If" class="headerlink" title="If"></a>If</h1><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220725124910.png" alt=""></p><p>è§£é‡Šï¼šC æ˜¯ true å°±è¿”å› T çš„ç±»å‹ï¼Œæ˜¯ false å°±è¿”å› F çš„ç±»å‹</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> If&lt;C <span class="keyword">extends</span> <span class="built_in">Boolean</span>, T, F&gt; = C <span class="keyword">extends</span> <span class="literal">true</span> ? T : F;</span><br></pre></td></tr></table></figure><h1 id="Concat"><a href="#Concat" class="headerlink" title="Concat"></a>Concat</h1><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220725125530.png" alt=""></p><p>è§£é‡Šï¼šå®ç° js çš„ concat æ•ˆæœï¼Œåˆå¹¶ä¸¤ä¸ªç±»å‹æ•°ç»„ã€‚</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Concat&lt;T <span class="keyword">extends</span> unknown[], U <span class="keyword">extends</span> unknown[]&gt; = [...T, ...U];</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨è§£æ„å³å¯ã€‚</p><h1 id="Includes"><a href="#Includes" class="headerlink" title="Includes"></a>Includes</h1><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220726145707.png" alt=""></p><p>è§£é‡Šï¼šåä¸€ä¸ªç±»å‹å¦‚æœåŒ…å«åœ¨å‰é¢çš„ç±»å‹ä¸­å°±è¿”å› true å¦åˆ™è¿”å› false</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Includes&lt;T <span class="keyword">extends</span> <span class="keyword">readonly</span> <span class="built_in">any</span>[], U&gt; = T <span class="keyword">extends</span> [infer F, ...infer R]</span><br><span class="line">  ? Equal&lt;F, U&gt; <span class="keyword">extends</span> <span class="literal">true</span></span><br><span class="line">    ? <span class="literal">true</span></span><br><span class="line">    : Includes&lt;R, U&gt;</span><br><span class="line">  : <span class="literal">false</span>;</span><br></pre></td></tr></table></figure><h1 id="Push"><a href="#Push" class="headerlink" title="Push"></a>Push</h1><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220726151820.png" alt=""></p><p>è§£é‡Šï¼šå®ç° js çš„ push</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Push&lt;T <span class="keyword">extends</span> <span class="built_in">any</span>[], U&gt; = [...T, U];</span><br></pre></td></tr></table></figure><h1 id="Unshift"><a href="#Unshift" class="headerlink" title="Unshift"></a>Unshift</h1><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220726152550.png" alt=""></p><p>è§£é‡Šï¼šå®ç° js çš„ unshift</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Unshift&lt;T <span class="keyword">extends</span> <span class="built_in">any</span>[], U&gt; = [U, ...T];</span><br></pre></td></tr></table></figure><h1 id="Parameters"><a href="#Parameters" class="headerlink" title="Parameters"></a>Parameters</h1><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220726152713.png" alt=""></p><p>è§£é‡Šï¼šè·å–å‡½æ•°å‚æ•°ç±»å‹ä»¥æ•°ç»„è¾“å‡º</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> MyParameters&lt;T <span class="keyword">extends</span> (...args: <span class="built_in">any</span>[]) =&gt; <span class="built_in">any</span>&gt; = T <span class="keyword">extends</span> (</span><br><span class="line">  ...args: infer K</span><br><span class="line">) =&gt; <span class="built_in">any</span></span><br><span class="line">  ? K</span><br><span class="line">  : <span class="built_in">never</span>;</span><br></pre></td></tr></table></figure><p>æ³¨æ„çš„ç‚¹åœ¨äºå…¶å®<code>...args</code>çš„ç±»å‹æ˜¯<code>any[]</code>ä¹Ÿå°±æ˜¯ä»¥ä¸ºç€ç»“æœä»¥æ•°ç»„è¾“å‡ºçš„ä½¿ç”¨ä¹Ÿå¯ä»¥åˆ©ç”¨ä¸Šï¼Œç›´æ¥ä½¿ç”¨ infer å»æ¨æ–­ä»–çš„å…·ä½“ç±»å‹ã€‚</p><h1 id="è·å–å‡½æ•°è¿”å›ç±»å‹"><a href="#è·å–å‡½æ•°è¿”å›ç±»å‹" class="headerlink" title="è·å–å‡½æ•°è¿”å›ç±»å‹"></a>è·å–å‡½æ•°è¿”å›ç±»å‹</h1><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220726153737.png" alt=""></p><p>è§£é‡Šï¼šè·å–å‡½æ•°çš„è¿”å›ç±»å‹</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> MyReturnType&lt;T&gt; = T <span class="keyword">extends</span> (...args: <span class="built_in">any</span>[]) =&gt; infer K ? K : <span class="built_in">never</span>;</span><br></pre></td></tr></table></figure><p>å’Œä¸Šä¸€é¢˜ç±»ä¼¼</p><h1 id="Omit"><a href="#Omit" class="headerlink" title="Omit"></a>Omit</h1><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220726154358.png" alt=""></p><p>è§£é‡Šï¼šPick å’Œ Exclude çš„ç»“åˆ</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> MyOmit&lt;T, K <span class="keyword">extends</span> keyof T&gt; = &#123;</span><br><span class="line">  [P <span class="keyword">in</span> keyof T <span class="keyword">as</span> P <span class="keyword">extends</span> K ? <span class="built_in">never</span> : P]: T[P];</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// or</span></span><br><span class="line"><span class="keyword">type</span> MyOmit&lt;T, K <span class="keyword">extends</span> keyof T&gt; = Pick&lt;T, Exclude&lt;keyof T, K&gt;&gt;;</span><br></pre></td></tr></table></figure><h1 id="Readonly2"><a href="#Readonly2" class="headerlink" title="Readonly2"></a>Readonly2</h1><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220726213353.png" alt=""></p><p>è§£é‡Šï¼šå¦‚æœä¸ä¼  K åˆ™é»˜è®¤ä¸º readonly å¦åˆ™å°±æŒ‰ K çš„å†…å®¹å¯¹ T è¿›è¡Œåªè¯»çš„é™åˆ¶ã€‚</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> MyReadonly2&lt;T, K <span class="keyword">extends</span> keyof T = keyof T&gt; = &#123;</span><br><span class="line">  <span class="keyword">readonly</span> [P <span class="keyword">in</span> K]: T[P];</span><br><span class="line">&#125; &amp; &#123;</span><br><span class="line">  [P <span class="keyword">in</span> keyof T <span class="keyword">as</span> P <span class="keyword">extends</span> K ? <span class="built_in">never</span> : P]: T[P];</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>æ³¨æ„çš„ç‚¹é¦–å…ˆæ˜¯é»˜è®¤èµ‹å€¼ï¼Œå› ä¸ºä»–ä¸å­˜åœ¨å…¶å®å°±æ˜¯ç›¸å½“äºç”¨äº†å…¨éƒ¨çš„ T çš„é”®ï¼Œç„¶åè¿˜æœ‰ä¸€ç‚¹å°±æ˜¯ï¼Œä»–æ˜¯ readonly å’Œ omit çš„ç»“åˆã€‚åœ¨ K ä¸­çš„æ‰€æœ‰å€¼éƒ½æ˜¯ readonlyï¼Œä¸åœ¨ k ä¸­çš„æ‰€æœ‰å€¼éƒ½æ˜¯ omit</p><h1 id="Deep-Readonly"><a href="#Deep-Readonly" class="headerlink" title="Deep Readonly"></a>Deep Readonly</h1><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220726215552.png" alt=""></p><p>è§£é‡Šï¼šä½¿ç”¨æ·±åº¦åªè¯»å°†å¯¹è±¡çš„æ¯ä¸ªå±æ€§åŒ…æ‹¬å¯¹è±¡æœ¬èº«å˜æˆåªè¯»</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> DeepReadonly&lt;T&gt; = keyof T <span class="keyword">extends</span> <span class="built_in">never</span></span><br><span class="line">  ? T</span><br><span class="line">  : &#123; <span class="keyword">readonly</span> [k <span class="keyword">in</span> keyof T]: DeepReadonly&lt;T[k]&gt; &#125;;</span><br></pre></td></tr></table></figure><p>æ³¨æ„å…¶å®é€’å½’è®¾ç½® readonly æ˜¯æ¯”è¾ƒç®€å•çš„ï¼Œä½†æ˜¯ç»†èŠ‚åœ¨äºé€’å½’çš„è®¾ç½®ï¼Œæ­¤å¤„å¦‚æœä¸æ˜¯å¯¹è±¡å°±è¿”å›åˆå§‹ç±»å‹</p><h1 id="å…ƒç»„è½¬é›†åˆ"><a href="#å…ƒç»„è½¬é›†åˆ" class="headerlink" title="å…ƒç»„è½¬é›†åˆ"></a>å…ƒç»„è½¬é›†åˆ</h1><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220728110948.png" alt=""></p><p>è§£é‡Šï¼šæŠŠå…ƒç»„è½¬ä¸ºé›†åˆ</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> TupleToUnion&lt;T&gt; = T <span class="keyword">extends</span> (infer U)[] ? U : <span class="built_in">never</span>;</span><br></pre></td></tr></table></figure><p>å…³é”®åœ¨äºé€šè¿‡ infer æ¨æ–­é›†åˆçš„ç±»å‹ï¼Œä»¥åŠå–å‡ºå…ƒç»„çš„ç±»å‹</p><h1 id="å¯ä¸²è”æ„é€ å™¨"><a href="#å¯ä¸²è”æ„é€ å™¨" class="headerlink" title="å¯ä¸²è”æ„é€ å™¨"></a>å¯ä¸²è”æ„é€ å™¨</h1><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220728112156.png" alt=""></p><h1 id="æœ€åä¸€ä¸ªå…ƒç´ "><a href="#æœ€åä¸€ä¸ªå…ƒç´ " class="headerlink" title="æœ€åä¸€ä¸ªå…ƒç´ "></a>æœ€åä¸€ä¸ªå…ƒç´ </h1><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220728155341.png" alt=""></p><p>è§£é‡Š:å–å‡ºæ•°ç»„æœ€åä¸€ä¸ªå…ƒç´ </p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Last&lt;T <span class="keyword">extends</span> <span class="built_in">any</span>[]&gt; = T <span class="keyword">extends</span> [...any, infer U] ? U : <span class="built_in">never</span>;</span><br></pre></td></tr></table></figure><h1 id="Pop"><a href="#Pop" class="headerlink" title="Pop"></a>Pop</h1><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220728155753.png" alt=""></p><p>è§£é‡Š:å®ç° pop</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Pop&lt;T <span class="keyword">extends</span> <span class="built_in">any</span>[]&gt; = T <span class="keyword">extends</span> [...infer Head, infer R]</span><br><span class="line">  ? [...Head]</span><br><span class="line">  : <span class="built_in">never</span>;</span><br></pre></td></tr></table></figure><h1 id="Promise-all"><a href="#Promise-all" class="headerlink" title="Promise.all"></a>Promise.all</h1><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220728160431.png" alt=""></p><p>è§£é‡Š:å®ç° PromiseAll è·å–æ•°ç»„å€¼çš„ç±»å‹</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> AwaitedAll&lt;T <span class="keyword">extends</span> <span class="built_in">any</span>[]&gt; = T <span class="keyword">extends</span> []</span><br><span class="line">  ? []</span><br><span class="line">  : T <span class="keyword">extends</span> [infer F, ...infer R]</span><br><span class="line">  ? [Awaited&lt;F&gt;, ...AwaitedAll&lt;R&gt;]</span><br><span class="line">  : <span class="built_in">never</span>;</span><br><span class="line"><span class="keyword">declare</span> <span class="function"><span class="keyword">function</span> <span class="title">PromiseAll</span>&lt;<span class="title">T</span> <span class="title">extends</span> <span class="title">any</span>[]&gt;(<span class="params"></span></span></span><br><span class="line"><span class="params"><span class="function">  value: <span class="keyword">readonly</span> [...T]</span></span></span><br><span class="line"><span class="params"><span class="function"></span>): <span class="title">Promise</span>&lt;<span class="title">AwaitedAll</span>&lt;<span class="title">T</span>&gt;&gt;</span>;</span><br></pre></td></tr></table></figure><ul><li>ç»“åˆ awaited çš„å­¦ä¹ çŸ¥è¯†è·å– Promise çš„ç±»å‹</li><li>ç»“åˆç±»å‹è§£æ„å’Œé€’å½’å¤„ç† Promise çš„æƒ…å†µ</li><li>æ³¨æ„ç©ºæ•°ç»„çš„æƒ…å†µ</li><li>å› ä¸º promise çš„ç»“æœæ˜¯ä¸èƒ½æ”¹å˜çš„ï¼Œæ‰€ä»¥è¦åŠ  readonly</li><li>è§£æ„ T ç±»å‹ä¼ å…¥è‡ªå®šä¹‰çš„ AwaitedAll</li></ul><h1 id="Type-Lookup"><a href="#Type-Lookup" class="headerlink" title="Type Lookup"></a>Type Lookup</h1><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220729163101.png" alt=""></p><p>è§£é‡Šï¼šä» U ä¸­è·å– type ä¸º T çš„ç±»å‹</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> LookUp&lt;U, T <span class="keyword">extends</span> <span class="built_in">string</span>&gt; = U <span class="keyword">extends</span> &#123; <span class="attr">type</span>: T &#125; ? U : <span class="built_in">never</span>;</span><br></pre></td></tr></table></figure><h1 id="Trim-Left"><a href="#Trim-Left" class="headerlink" title="Trim Left"></a>Trim Left</h1><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220729172654.png" alt=""></p><p>è§£é‡Š:åˆ é™¤å­—ç¬¦ä¸²å·¦è¾¹çš„ç©ºæ ¼</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Space = <span class="string">&quot; &quot;</span> | <span class="string">&quot;\n&quot;</span> | <span class="string">&quot;\t&quot;</span>;</span><br><span class="line"><span class="keyword">type</span> TrimLeft&lt;S <span class="keyword">extends</span> <span class="built_in">string</span>&gt; = S <span class="keyword">extends</span> <span class="string">`<span class="subst">$&#123;Space&#125;</span><span class="subst">$&#123;infer R&#125;</span>`</span></span><br><span class="line">  ? TrimLeft&lt;R&gt;</span><br><span class="line">  : S;</span><br></pre></td></tr></table></figure><p>æŠ€å·§:ç»“åˆæ¨¡æ¿å­—ç¬¦ä¸²æ“ä½œé€’å½’åˆ é™¤</p><h1 id="Trim"><a href="#Trim" class="headerlink" title="Trim"></a>Trim</h1><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220802164041.png" alt=""></p><p>è§£é‡Š:å®ç° trim åˆ é™¤å­—ç¬¦ä¸²ä¸¤ç«¯çš„æ‰€æœ‰ç©ºæ ¼</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Space = <span class="string">&quot; &quot;</span> | <span class="string">&quot;\n&quot;</span> | <span class="string">&quot;\t&quot;</span>;</span><br><span class="line"><span class="keyword">type</span> Trim&lt;S <span class="keyword">extends</span> <span class="built_in">string</span>&gt; = S <span class="keyword">extends</span> <span class="string">`<span class="subst">$&#123;Space&#125;</span><span class="subst">$&#123;infer R&#125;</span>`</span></span><br><span class="line">  ? Trim&lt;R&gt;</span><br><span class="line">  : S <span class="keyword">extends</span> <span class="string">`<span class="subst">$&#123;infer K&#125;</span><span class="subst">$&#123;Space&#125;</span>`</span></span><br><span class="line">  ? Trim&lt;K&gt;</span><br><span class="line">  : S;</span><br><span class="line"><span class="comment">// or</span></span><br><span class="line"><span class="keyword">type</span> Trim&lt;S <span class="keyword">extends</span> <span class="built_in">string</span>&gt; = S <span class="keyword">extends</span></span><br><span class="line">  | <span class="string">`<span class="subst">$&#123;Space&#125;</span><span class="subst">$&#123;infer R&#125;</span>`</span></span><br><span class="line">  | <span class="string">`<span class="subst">$&#123;infer R&#125;</span><span class="subst">$&#123;Space&#125;</span>`</span></span><br><span class="line">  ? Trim&lt;R&gt;</span><br><span class="line">  : S;</span><br></pre></td></tr></table></figure><p>å…ˆåˆ å·¦è¾¹å†åˆ å³è¾¹</p><h1 id="Capitalize"><a href="#Capitalize" class="headerlink" title="Capitalize"></a>Capitalize</h1><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220802165712.png" alt=""></p><p>è§£é‡Š:å¤§å†™ç¬¬ä¸€ä¸ªå­—æ¯</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> MyCapitalize&lt;S <span class="keyword">extends</span> <span class="built_in">string</span>&gt; = S <span class="keyword">extends</span> <span class="string">`<span class="subst">$&#123;infer F&#125;</span><span class="subst">$&#123;infer R&#125;</span>`</span></span><br><span class="line">  ? <span class="string">`<span class="subst">$&#123;Uppercase&lt;F&gt;&#125;</span><span class="subst">$&#123;R&#125;</span>`</span></span><br><span class="line">  : S;</span><br></pre></td></tr></table></figure><p>ä¸èƒ½ä½¿ç”¨<code>[infer F,...infer R]</code>æ˜¯å› ä¸ºæˆ‘ä»¬è§£æçš„æ˜¯å•ä¸ªå­—ç¬¦ä¸²</p><h1 id="Replace"><a href="#Replace" class="headerlink" title="Replace"></a>Replace</h1><p><img src="https://cdn.jsdelivr.net/gh/Zlinni/Pic/img/20220802171025.png" alt=""></p><p>å®ç° Replace æ›¿æ¢</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Replace&lt;</span><br><span class="line">  S <span class="keyword">extends</span> <span class="built_in">string</span>,</span><br><span class="line">  From <span class="keyword">extends</span> <span class="built_in">string</span>,</span><br><span class="line">  To <span class="keyword">extends</span> <span class="built_in">string</span></span><br><span class="line">&gt; = From <span class="keyword">extends</span> <span class="string">&quot;&quot;</span></span><br><span class="line">  ? S</span><br><span class="line">  : S <span class="keyword">extends</span> <span class="string">`<span class="subst">$&#123;infer F&#125;</span><span class="subst">$&#123;From&#125;</span><span class="subst">$&#123;infer R&#125;</span>`</span></span><br><span class="line">  ? <span class="string">`<span class="subst">$&#123;F&#125;</span><span class="subst">$&#123;To&#125;</span><span class="subst">$&#123;R&#125;</span>`</span></span><br><span class="line">  : S;</span><br></pre></td></tr></table></figure><h1 id=""><a href="#" class="headerlink" title=" "></a> </h1>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="JSç³»åˆ—" scheme="https://zlinni.github.io/categories/JS%E7%B3%BB%E5%88%97/"/>
    
    
    <category term="ts" scheme="https://zlinni.github.io/tags/ts/"/>
    
  </entry>
  
</feed>
